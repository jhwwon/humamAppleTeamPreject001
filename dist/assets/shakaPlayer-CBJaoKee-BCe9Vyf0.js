const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/output-devices-kwegV4HH-Dgzzl0IP.js","assets/index-CUeP43Yn.js","assets/preload-helper-BlTxHScW.js","assets/_commonjsHelpers-DaMA6jEr-DwXtFsJ3.js"])))=>i.map(i=>d[i]);
import{_ as rM}from"./preload-helper-BlTxHScW.js";import{l as iM,o as aM}from"./_commonjsHelpers-DaMA6jEr-DwXtFsJ3.js";import{k as Dc,c as Np,b as Wr,M as Ji,j as Rc,W as qw,_ as Ww,x as io,y as ao,D as oM,w as zw,h as Xw,Q as sM,a as uM}from"./index-CUeP43Yn.js";import{C as lM,R as Yw,w as cM}from"./basePlayer-D_BzNCZH-ZnYs-9ht.js";var Jw={},$w;function dM(){return $w||($w=1,(function(we){(function(){var K=typeof window<"u"?window:aM,$={};(function(U,rt,ct){var f,gt=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},Ze=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function zr(e){e=[typeof globalThis=="object"&&globalThis,e,typeof U=="object"&&U,typeof self=="object"&&self,typeof rt=="object"&&rt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var er=zr(this);function nt(e,t){if(t)e:{var n=er;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&Ze(n,e,{configurable:!0,writable:!0,value:t})}}var Pc;if(typeof Object.setPrototypeOf=="function")Pc=Object.setPrototypeOf;else{var Lc;e:{var Qw={a:!0},Up={};try{Up.__proto__=Qw,Lc=Up.a;break e}catch{}Lc=!1}Pc=Lc?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var _p=Pc;function it(e,t){if(e.prototype=gt(t.prototype),e.prototype.constructor=e,_p)_p(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Im=t.prototype}function jp(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:jp(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function H(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function js(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.B=this.i=null}function Nc(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}js.prototype.u=function(e){this.h=e};function Uc(e,t){e.i={bi:t,si:!0},e.g=e.m||e.j}js.prototype.return=function(e){this.i={return:e},this.g=this.j};function b(e,t,n){return e.g=n,{value:t}}js.prototype.A=function(e){this.g=e};function G(e){e.g=0}function le(e,t,n){e.m=t,n!=null&&(e.j=n)}function br(e,t){e.m=0,e.j=t||0}function pe(e,t,n){e.g=t,e.m=n||0}function ce(e,t){return e.m=t||0,t=e.i.bi,e.i=null,t}function yn(e){e.B=[e.i],e.m=0,e.j=0}function bn(e,t){var n=e.B.splice(0)[0];(n=e.i=e.i||n)?n.si?e.g=e.m||e.j:n.A!=null&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function Zw(e){this.g=new js,this.h=e}function eT(e,t){Nc(e.g);var n=e.g.l;return n?_c(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),so(e))}function _c(e,t,n,r){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.o=!1,i;var a=i.value}catch(o){return e.g.l=null,Uc(e.g,o),so(e)}return e.g.l=null,r.call(e.g,a),so(e)}function so(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,Uc(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.si)throw t.bi;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function tT(e){this.next=function(t){return Nc(e.g),e.g.l?t=_c(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=so(e)),t},this.throw=function(t){return Nc(e.g),e.g.l?t=_c(e,e.g.l.throw,t,e.g.u):(Uc(e.g,t),t=so(e)),t},this.return=function(t){return eT(e,t)},this[Symbol.iterator]=function(){return this}}function nT(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,i){function a(o){o.done?r(o.value):Promise.resolve(o.value).then(t,n).then(a,i)}a(e.next())})}function C(e){return nT(new tT(new Zw(e)))}function xt(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}nt("Symbol",function(e){function t(a){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(a||"")+"_"+i++,a)}function n(a,o){this.g=a,Ze(this,"description",{configurable:!0,writable:!0,value:o})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(Math.random()*1e9>>>0)+"_",i=0;return t}),nt("Symbol.iterator",function(e){return e||(e=Symbol("Symbol.iterator"),Ze(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return Op(jp(this))}}),e)});function Op(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}nt("Promise",function(e){function t(o){this.h=0,this.i=void 0,this.g=[],this.o=!1;var s=this.j();try{o(s.resolve,s.reject)}catch(u){s.reject(u)}}function n(){this.g=null}function r(o){return o instanceof t?o:new t(function(s){s(o)})}if(e)return e;n.prototype.h=function(o){if(this.g==null){this.g=[];var s=this;this.i(function(){s.l()})}this.g.push(o)};var i=er.setTimeout;n.prototype.i=function(o){i(o,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var o=this.g;this.g=[];for(var s=0;s<o.length;++s){var u=o[s];o[s]=null;try{u()}catch(l){this.j(l)}}}this.g=null},n.prototype.j=function(o){this.i(function(){throw o})},t.prototype.j=function(){function o(l){return function(c){u||(u=!0,l.call(s,c))}}var s=this,u=!1;return{resolve:o(this.G),reject:o(this.l)}},t.prototype.G=function(o){if(o===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(o instanceof t)this.I(o);else{e:switch(typeof o){case"object":var s=o!=null;break e;case"function":s=!0;break e;default:s=!1}s?this.F(o):this.m(o)}},t.prototype.F=function(o){var s=void 0;try{s=o.then}catch(u){this.l(u);return}typeof s=="function"?this.J(s,o):this.m(o)},t.prototype.l=function(o){this.u(2,o)},t.prototype.m=function(o){this.u(1,o)},t.prototype.u=function(o,s){if(this.h!=0)throw Error("Cannot settle("+o+", "+s+"): Promise already settled in state"+this.h);this.h=o,this.i=s,this.h===2&&this.H(),this.B()},t.prototype.H=function(){var o=this;i(function(){if(o.C()){var s=er.console;typeof s<"u"&&s.error(o.i)}},1)},t.prototype.C=function(){if(this.o)return!1;var o=er.CustomEvent,s=er.Event,u=er.dispatchEvent;return typeof u>"u"?!0:(typeof o=="function"?o=new o("unhandledrejection",{cancelable:!0}):typeof s=="function"?o=new s("unhandledrejection",{cancelable:!0}):(o=er.document.createEvent("CustomEvent"),o.initCustomEvent("unhandledrejection",!1,!0,o)),o.promise=this,o.reason=this.i,u(o))},t.prototype.B=function(){if(this.g!=null){for(var o=0;o<this.g.length;++o)a.h(this.g[o]);this.g=null}};var a=new n;return t.prototype.I=function(o){var s=this.j();o.Te(s.resolve,s.reject)},t.prototype.J=function(o,s){var u=this.j();try{o.call(s,u.resolve,u.reject)}catch(l){u.reject(l)}},t.prototype.then=function(o,s){function u(h,p){return typeof h=="function"?function(g){try{l(h(g))}catch(v){c(v)}}:p}var l,c,d=new t(function(h,p){l=h,c=p});return this.Te(u(o,l),u(s,c)),d},t.prototype.catch=function(o){return this.then(void 0,o)},t.prototype.Te=function(o,s){function u(){switch(l.h){case 1:o(l.i);break;case 2:s(l.i);break;default:throw Error("Unexpected state: "+l.h)}}var l=this;this.g==null?a.h(u):this.g.push(u),this.o=!0},t.resolve=r,t.reject=function(o){return new t(function(s,u){u(o)})},t.race=function(o){return new t(function(s,u){for(var l=m(o),c=l.next();!c.done;c=l.next())r(c.value).Te(s,u)})},t.all=function(o){var s=m(o),u=s.next();return u.done?r([]):new t(function(l,c){function d(g){return function(v){h[g]=v,p--,p==0&&l(h)}}var h=[],p=0;do h.push(void 0),p++,r(u.value).Te(d(h.length-1),c),u=s.next();while(!u.done)})},t});function tr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}nt("WeakMap",function(e){function t(u){if(this.g=(s+=Math.random()+1).toString(),u){u=m(u);for(var l;!(l=u.next()).done;)l=l.value,this.set(l[0],l[1])}}function n(){}function r(u){var l=typeof u;return l==="object"&&u!==null||l==="function"}function i(u){if(!tr(u,o)){var l=new n;Ze(u,o,{value:l})}}function a(u){var l=Object[u];l&&(Object[u]=function(c){return c instanceof n?c:(Object.isExtensible(c)&&i(c),l(c))})}if((function(){if(!e||!Object.seal)return!1;try{var u=Object.seal({}),l=Object.seal({}),c=new e([[u,2],[l,3]]);return c.get(u)!=2||c.get(l)!=3?!1:(c.delete(u),c.set(l,4),!c.has(u)&&c.get(l)==4)}catch{return!1}})())return e;var o="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var s=0;return t.prototype.set=function(u,l){if(!r(u))throw Error("Invalid WeakMap key");if(i(u),!tr(u,o))throw Error("WeakMap key fail: "+u);return u[o][this.g]=l,this},t.prototype.get=function(u){return r(u)&&tr(u,o)?u[o][this.g]:void 0},t.prototype.has=function(u){return r(u)&&tr(u,o)&&tr(u[o],this.g)},t.prototype.delete=function(u){return r(u)&&tr(u,o)&&tr(u[o],this.g)?delete u[o][this.g]:!1},t}),nt("Map",function(e){function t(){var s={};return s.yc=s.next=s.head=s}function n(s,u){var l=s[1];return Op(function(){if(l){for(;l.head!=s[1];)l=l.yc;for(;l.next!=l.head;)return l=l.next,{done:!1,value:u(l)};l=null}return{done:!0,value:void 0}})}function r(s,u){var l=u&&typeof u;l=="object"||l=="function"?a.has(u)?l=a.get(u):(l=""+ ++o,a.set(u,l)):l="p_"+u;var c=s[0][l];if(c&&tr(s[0],l))for(s=0;s<c.length;s++){var d=c[s];if(u!==u&&d.key!==d.key||u===d.key)return{id:l,list:c,index:s,entry:d}}return{id:l,list:c,index:-1,entry:void 0}}function i(s){if(this[0]={},this[1]=t(),this.size=0,s){s=m(s);for(var u;!(u=s.next()).done;)u=u.value,this.set(u[0],u[1])}}if((function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var s=Object.seal({x:4}),u=new e(m([[s,"s"]]));if(u.get(s)!="s"||u.size!=1||u.get({x:4})||u.set({x:4},"t")!=u||u.size!=2)return!1;var l=u.entries(),c=l.next();return c.done||c.value[0]!=s||c.value[1]!="s"?!1:(c=l.next(),!(c.done||c.value[0].x!=4||c.value[1]!="t"||!l.next().done))}catch{return!1}})())return e;var a=new WeakMap;i.prototype.set=function(s,u){s=s===0?0:s;var l=r(this,s);return l.list||(l.list=this[0][l.id]=[]),l.entry?l.entry.value=u:(l.entry={next:this[1],yc:this[1].yc,head:this[1],key:s,value:u},l.list.push(l.entry),this[1].yc.next=l.entry,this[1].yc=l.entry,this.size++),this},i.prototype.delete=function(s){return s=r(this,s),s.entry&&s.list?(s.list.splice(s.index,1),s.list.length||delete this[0][s.id],s.entry.yc.next=s.entry.next,s.entry.next.yc=s.entry.yc,s.entry.head=null,this.size--,!0):!1},i.prototype.clear=function(){this[0]={},this[1]=this[1].yc=t(),this.size=0},i.prototype.has=function(s){return!!r(this,s).entry},i.prototype.get=function(s){return(s=r(this,s).entry)&&s.value},i.prototype.entries=function(){return n(this,function(s){return[s.key,s.value]})},i.prototype.keys=function(){return n(this,function(s){return s.key})},i.prototype.values=function(){return n(this,function(s){return s.value})},i.prototype.forEach=function(s,u){for(var l=this.entries(),c;!(c=l.next()).done;)c=c.value,s.call(u,c[1],c[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var o=0;return i}),nt("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(m([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var i=r.entries(),a=i.next();return a.done||a.value[0]!=n||a.value[1]!=n?!1:(a=i.next(),a.done||a.value[0]==n||a.value[0].x!=4||a.value[1]!=a.value[0]?!1:i.next().done)}catch{return!1}})()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var i=this;this.g.forEach(function(a){return n.call(r,a,a,i)})},t)});function Bp(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var a=e[i];if(t.call(n,a,i,e))return{ni:i,v:a}}return{ni:-1,v:void 0}}nt("Array.prototype.findIndex",function(e){return e||function(t,n){return Bp(this,t,n).ni}});function jc(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}nt("Array.prototype.values",function(e){return e||function(){return jc(this,function(t,n){return n})}}),nt("Array.from",function(e){return e||function(t,n,r){n=n??function(s){return s};var i=[],a=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof a=="function"){t=a.call(t);for(var o=0;!(a=t.next()).done;)i.push(n.call(r,a.value,o++))}else for(a=t.length,o=0;o<a;o++)i.push(n.call(r,t[o],o));return i}}),nt("Array.prototype.keys",function(e){return e||function(){return jc(this,function(t){return t})}});function Os(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}nt("String.prototype.startsWith",function(e){return e||function(t,n){var r=Os(this,t,"startsWith"),i=r.length,a=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var o=0;o<a&&n<i;)if(r[n++]!=t[o++])return!1;return o>=a}}),nt("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),nt("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var i=r.length;for(n=n||0,n<0&&(n=Math.max(n+i,0));n<i;n++){var a=r[n];if(a===t||Object.is(a,t))return!0}return!1}}),nt("String.prototype.includes",function(e){return e||function(t,n){return Os(this,t,"includes").indexOf(t,n||0)!==-1}}),nt("String.fromCodePoint",function(e){return e||function(t){for(var n="",r=0;r<arguments.length;r++){var i=Number(arguments[r]);if(i<0||i>1114111||i!==Math.floor(i))throw new RangeError("invalid_code_point "+i);i<=65535?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(i>>>10&1023|55296),n+=String.fromCharCode(i&1023|56320))}return n}}),nt("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return(function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),i=new e([n]);return!i.has(n)||i.has(r)?!1:(i.delete(n),i.add(r),!i.has(n)&&i.has(r))}catch{return!1}})()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),nt("Array.prototype.find",function(e){return e||function(t,n){return Bp(this,t,n).v}}),nt("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)tr(t,r)&&n.push([r,t[r]]);return n}});var rT=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("No nullish arg");e=Object(e);for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)tr(r,i)&&(e[i]=r[i])}return e};nt("Object.assign",function(e){return e||rT}),nt("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),nt("Array.prototype.entries",function(e){return e||function(){return jc(this,function(t,n){return[t,n]})}}),nt("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),nt("String.prototype.repeat",function(e){return e||function(t){var n=Os(this,null,"repeat");if(t<0||t>1342177279)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),nt("Number.EPSILON",function(){return 2220446049250313e-31}),nt("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),nt("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),nt("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)tr(t,r)&&n.push(t[r]);return n}}),nt("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),nt("String.prototype.endsWith",function(e){return e||function(t,n){var r=Os(this,t,"endsWith");n===void 0&&(n=r.length),n=Math.max(0,Math.min(n|0,r.length));for(var i=t.length;i>0&&n>0;)if(r[--n]!=t[--i])return!1;return i<=0}}),nt("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return t<0?-n:n}});var iT=this||self;function q(e,t){e=e.split(".");var n=iT;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function Qi(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}Qi.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function Bs(e){return e.h/(1-Math.pow(e.g,e.i))}function uo(){this.h=new Qi(2),this.j=new Qi(5),this.g=0,this.i=128e3,this.l=16e3}uo.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},uo.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},uo.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(Bs(this.h),Bs(this.j))};function aT(){}function ur(){}function Ae(){}function Xr(e){var t=xt.apply(1,arguments);Fp.has(e)||(Fp.add(e),Ae.apply(aT,H(t)))}function oT(){}var Fp=new Set;U.console&&(new Map().set(1,function(){return console.error.apply(console,H(xt.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,H(xt.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,H(xt.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,H(xt.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,H(xt.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,H(xt.apply(0,arguments)))}),Ae=function(){return console.warn.apply(console,H(xt.apply(0,arguments)))},ur=function(){console.error.apply(console,H(xt.apply(0,arguments)))});function Vp(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Kn(e,t){t=e.indexOf(t),t>-1&&e.splice(t,1)}function Si(e,t,n){if(n||(n=Vp),e.length!=t.length)return!1;t=t.slice(),e=m(e);for(var r=e.next(),i={};!r.done;i={ui:void 0},r=e.next()){if(i.ui=r.value,r=t.findIndex((function(a){return function(o){return n(a.ui,o)}})(i)),r==-1)return!1;t[r]=t[t.length-1],t.pop()}return t.length==0}function Yr(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=Vp),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Fs(){this.g=new Map}f=Fs.prototype,f.push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},f.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},f.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(r){return r!=t});this.g.set(e,n),n.length||this.g.delete(e)}},f.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},f.size=function(){return this.g.size},f.keys=function(){return Array.from(this.g.keys())};function Pe(){this.g=new Fs}f=Pe.prototype,f.release=function(){this.Qa(),this.g=null},f.D=function(e,t,n,r){this.g&&(e=new Hp(e,t,n,r),this.g.push(t,e))},f.Aa=function(e,t,n,r){function i(o){a.Ma(e,t,i),n(o)}var a=this;this.D(e,t,i,r)},f.Ma=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=m(r);for(var i=r.next();!i.done;i=r.next())i=i.value,i.target!=e||n!=i.listener&&n||(i.Ma(),this.g.remove(t,i))}},f.Qa=function(){if(this.g){for(var e=[],t=m(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,H(n.value));for(e=m(e),t=e.next();!t.done;t=e.next())t.value.Ma();this.g.g.clear()}},q("shaka.util.EventManager",Pe),Pe.prototype.removeAll=Pe.prototype.Qa,Pe.prototype.unlisten=Pe.prototype.Ma,Pe.prototype.listenOnce=Pe.prototype.Aa,Pe.prototype.listen=Pe.prototype.D,Pe.prototype.release=Pe.prototype.release;function Hp(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=sT(e,r),this.target.addEventListener(t,n,this.g)}Hp.prototype.Ma=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function sT(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),uT(e)?t:t.capture||!1}function uT(e){var t=Gp;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch{t=!1}Gp=t}return t||!1}var Gp=void 0;q("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function Je(e){this.h=e,this.g=void 0}Je.prototype.value=function(){return this.g===void 0&&(this.g=this.h()),this.g};function ge(){return lT.value()}var nr=null,Oc=null,lT=new Je(function(){var e=void 0;return nr&&(e=nr()),!e&&Oc&&(e=Oc()),e});function Bc(e,t){this.g=e,this.h=t}Bc.prototype.toString=function(){return"v"+this.g+"."+this.h};function Ce(e,t){var n=new Bc(5,0),r=Kp,i=r.g,a=n.h-i.h;((n.g-i.g||a)>0?r.i:r.h)(r.g,n,e,t)}function cT(e,t,n,r){Ae([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function dT(e,t,n,r){ur([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var Kp=null,fT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function st(e){var t;e instanceof st?(Vs(this,e.jc),this.hd=e.hd,Hs(this,e.Db),Fc(this,e.Ed),this.Sb=e.Sb,xi(this,e.g.clone()),this.Rc=e.Rc):e&&(t=String(e).match(fT))?(Vs(this,t[1]||"",!0),this.hd=Zi(t[2]||""),Hs(this,t[3]||"",!0),Fc(this,t[4]),this.Sb=Zi(t[5]||"",!0),xi(this,t[6]||"",!0),this.Rc=Zi(t[7]||"")):this.g=new ea(null)}f=st.prototype,f.jc="",f.hd="",f.Db="",f.Ed=null,f.Sb="",f.Rc="",f.toString=function(){var e=[],t=this.jc;if(t&&e.push(lo(t,qp,!0),":"),t=this.Db){e.push("//");var n=this.hd;n&&e.push(lo(n,qp,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Ed,t!=null&&e.push(":",String(t))}return(t=this.Sb)&&(this.Db&&t.charAt(0)!="/"&&e.push("/"),e.push(lo(t,t.charAt(0)=="/"?gT:pT,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Rc)&&e.push("#",lo(t,vT)),e.join("")},f.resolve=function(e){var t=this.clone();t.jc==="data"&&(t=new st);var n=!!e.jc;n?Vs(t,e.jc):n=!!e.hd,n?t.hd=e.hd:n=!!e.Db,n?Hs(t,e.Db):n=e.Ed!=null;var r=e.Sb;if(n)Fc(t,e.Ed);else if(n=!!e.Sb){if(r.charAt(0)!="/")if(this.Db&&!this.Sb)r="/"+r;else{var i=t.Sb.lastIndexOf("/");i!=-1&&(r=t.Sb.substr(0,i+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){i=r.lastIndexOf("/",0)==0,r=r.split("/");for(var a=[],o=0;o<r.length;){var s=r[o++];s=="."?i&&o==r.length&&a.push(""):s==".."?((a.length>1||a.length==1&&a[0]!="")&&a.pop(),i&&o==r.length&&a.push("")):(a.push(s),i=!0)}r=a.join("/")}}return n?t.Sb=r:n=e.g.toString()!=="",n?xi(t,e.g.clone()):n=!!e.Rc,n&&(t.Rc=e.Rc),t},f.clone=function(){return new st(this)};function Vs(e,t,n){e.jc=n?Zi(t,!0):t,e.jc&&(e.jc=e.jc.replace(/:$/,""))}function Hs(e,t,n){e.Db=n?Zi(t,!0):t}function Fc(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.Ed=t}else e.Ed=null}function xi(e,t,n){t instanceof ea?e.g=t:(n||(t=lo(t,mT)),e.g=new ea(t))}function Zi(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function lo(e,t,n){return e!=null?(e=encodeURI(e).replace(t,hT),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function hT(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var qp=/[#\/\?@]/g,pT=/[#\?:]/g,gT=/[#\?]/g,mT=/[#\?@]/g,vT=/#/g;function ea(e){this.g=e||null}function Gs(e){if(!e.fb&&(e.fb=new Map,e.Wd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(r>=0){var a=t[n].substring(0,r);i=t[n].substring(r+1)}else a=t[n];a=decodeURIComponent(a),i=i||"",e.add(a,decodeURIComponent(i))}}f=ea.prototype,f.fb=null,f.Wd=null;function Wp(e){return Gs(e),e.Wd}f.add=function(e,t){Gs(this),this.g=null;var n=this.fb.has(e)?this.fb.get(e):null;return n||this.fb.set(e,n=[]),n.push(t),this.Wd++,this},f.set=function(e,t){return Gs(this),this.g=null,this.fb.has(e)?this.fb.set(e,[t]):this.add(e,t),this},f.get=function(e){return Gs(this),this.fb.get(e)||[]},f.toString=function(){if(this.g)return this.g;if(!this.fb||!this.fb.size)return"";for(var e=[],t=m(this.fb.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=encodeURIComponent(r),r=this.fb.get(r);for(var i=0;i<r.length;i++){var a=n;r[i]!==""&&(a+="="+encodeURIComponent(r[i])),e.push(a)}}return this.g=e.join("&")},f.clone=function(){var e=new ea;if(e.g=this.g,this.fb){for(var t=new Map,n=m(this.fb),r=n.next();!r.done;r=n.next()){var i=m(r.value);r=i.next().value,i=i.next().value,t.set(r,i.concat())}e.fb=t,e.Wd=this.Wd}return e};function ta(){}function wr(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=oe(e);t=oe(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function Dn(e){return ArrayBuffer.isView(e)?e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function oe(e,t,n){return n=n===void 0?1/0:n,Vc(e,t===void 0?0:t,n,Uint8Array)}function zp(e,t,n){return n=n===void 0?1/0:n,Vc(e,t===void 0?0:t,n,Uint16Array)}function Zt(e,t,n){return n=n===void 0?1/0:n,Vc(e,t===void 0?0:t,n,DataView)}function Vc(e,t,n,r){var i=ArrayBuffer.isView(e)?e.buffer:e,a=1;"BYTES_PER_ELEMENT"in r&&(a=r.BYTES_PER_ELEMENT);var o=((e.byteOffset||0)+e.byteLength)/a;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/a,o))),new r(i,e,Math.floor(Math.min(e+Math.max(n,0),o))-e)}q("shaka.util.BufferUtils",ta),ta.toDataView=Zt,ta.toUint16=zp,ta.toUint8=oe,ta.toArrayBuffer=Dn,ta.equal=wr;function Xp(e,t){if(e===t||!e.length||!t.length)return!0;e=m(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,Ks(n))return!0;for(var r=m(t),i=r.next();!i.done;i=r.next())if(i=i.value,n.keySystem===i.keySystem||Ks(i))return!0}return!1}function Yp(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var i=m(t),a=i.next();!a.done;a=i.next())if(a=a.value,r.keySystem==a.keySystem){i=new Map;for(var o=m((r.initData||[]).concat(a.initData||[])),s=o.next();!s.done;s=o.next())s=s.value,i.set(s.keyId,s);i=Array.from(i.values()),o=r.keyIds&&a.keyIds?new Set([].concat(H(r.keyIds),H(a.keyIds))):r.keyIds||a.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||a.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||a.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||a.persistentStateRequired,videoRobustness:r.videoRobustness||a.videoRobustness,audioRobustness:r.audioRobustness||a.audioRobustness,serverCertificate:r.serverCertificate||a.serverCertificate,serverCertificateUri:r.serverCertificateUri||a.serverCertificateUri,initData:i,keyIds:o});break}else Ks(r)?n.push(r):Ks(a)&&n.push(a)}return n}function Hc(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function co(e){return e?!!e.match(/^com\.apple\.fps/):!1}function Ks(e){return(e=e.licenseServerUri)?e.startsWith("data:application/json;base64,"):!1}function Gc(e,t,n,r){return r=[].concat(H(new Set(r))).sort().join("#"),e+"#"+t+"#"+n+"#"+r}var qs=new Je(function(){return Dn(new Uint8Array([0]))}),na=new Map;function M(e,t,n){var r=xt.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(i){this.stack=i.stack}}M.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},q("shaka.util.Error",M),M.Severity={RECOVERABLE:1,CRITICAL:2},M.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},M.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4055,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007};function Ai(){}function $e(e){if(!e)return"";if(e=oe(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),U.TextDecoder&&!ge().xh())return e=new TextDecoder().decode(e),e.includes("�")&&ur('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if((e[n]&128)==0?r=e[n]:e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3),r<=65535)t+=String.fromCharCode(r);else{r-=65536;var i=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+i)}}return t}function Jr(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new M(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=Zt(e);for(var i=0;i<n;i++)r[i]=e.getUint16(i*2,t);return Ws.value()(r)}function lr(e){function t(r){return n.byteLength<=r||n[r]>=9&&n[r]<=126}if(!e)return"";var n=oe(e);if(n[0]==239&&n[1]==187&&n[2]==191)return $e(n);if(n[0]==254&&n[1]==255)return Jr(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Jr(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Jr(e,!1);if(n[1]==0&&n[3]==0)return Jr(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return $e(e);throw new M(2,2,2003)}function qn(e){if(U.TextEncoder&&!ge().xh()){var t=new TextEncoder;return Dn(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Dn(t)}function Kc(e,t){for(var n=new ArrayBuffer(e.length*2),r=new DataView(n),i=0;i<e.length;++i)r.setUint16(i*2,e.charCodeAt(i),t);return n}function qt(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(i){return i[1]=="#"?(i=i[2]=="x"||i[2]=="X"?parseInt(i.substring(3),16):parseInt(i.substring(2),10),i>=0&&i<=1114111?String.fromCodePoint(i):""):t[i]||"'"}):e||""}q("shaka.util.StringUtils",Ai),Ai.resetFromCharCode=function(){Ws.g=void 0},Ai.toUTF16=Kc,Ai.toUTF8=qn,Ai.fromBytesAutoDetect=lr,Ai.fromUTF16=Jr,Ai.fromUTF8=$e;var Ws=new Je(function(){function e(n){try{var r=new Uint8Array(n);return String.fromCharCode.apply(null,r).length>0}catch{return!1}}for(var t={Pc:65536};t.Pc>0;t={Pc:t.Pc},t.Pc/=2)if(e(t.Pc))return(function(n){return function(r){for(var i="",a=0;a<r.length;a+=n.Pc)i+=String.fromCharCode.apply(null,r.subarray(a,a+n.Pc));return i}})(t);return null});function Lt(){}function zs(e){return e=oe(e),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64",omitPadding:!1}):(e=Ws.value()(e),btoa(e))}function Tr(e,t){return t=t??!0,Uint8Array.prototype.toBase64?oe(e).toBase64({alphabet:"base64url",omitPadding:!t}):(e=zs(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,""))}function Rn(e){if(!("fromBase64"in Uint8Array)){e=U.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}return e=e.replace(/\s+/g,""),Uint8Array.fromBase64(e,{alphabet:/[-_]/.test(e)?"base64url":"base64"})}function ki(e){if(!("fromHex"in Uint8Array)){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=U.parseInt(e.substr(r*2,2),16);return n}return Uint8Array.fromHex(e)}function Sr(e){var t=oe(e);if(!Uint8Array.prototype.toHex){e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}return t.toHex()}function dt(){for(var e=xt.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var i=e[r];ArrayBuffer.isView(i)&&i.BYTES_PER_ELEMENT===1?t.set(i,n):t.set(oe(i),n),n+=i.byteLength}return t}q("shaka.util.Uint8ArrayUtils",Lt),Lt.concat=dt,Lt.toHex=Sr,Lt.fromHex=ki,Lt.fromBase64=Rn,Lt.toBase64=Tr,Lt.toStandardBase64=zs;function At(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var r=new st(e[0]);return t=new st(t[0]),t=r.resolve(t),n&&xi(t,n),[t.toString()]}t=t.map(function(s){return new st(s)}),r=[],e=m(e);for(var i=e.next();!i.done;i=e.next()){i=new st(i.value);for(var a=m(t),o=a.next();!o.done;o=a.next())o=i.resolve(o.value),n&&xi(o,n),r.push(o.toString())}return r}function xr(e,t,n,r,i){return t={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set,mediaTypes:i},r&&(t.keySystemUris=new Set([r])),!n&&co(e)&&t.initData.push({initDataType:"sinf",initData:new Uint8Array(0),keyId:null}),t}function Jp(e,t){t=t===void 0?"cenc":t;var n=[],r=[],i=[];e.forEach(function(o,s){var u=s;u.length!=22&&(u=Tr(ki(s),!1));var l=o;l.length!=22&&(l=Tr(ki(o),!1)),o={kty:"oct",kid:u,k:l},n.push(o),r.push(o.kid),i.push(s)}),e=JSON.stringify({keys:n});var a=JSON.stringify({kids:r});return a=[{initData:oe(qn(a)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+U.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:a,keyIds:new Set(i)}}function ra(e,t){if(t.length==1)return t[0];if(e=en(e,t),e!=null)return e;throw new M(2,4,4025,t)}function en(e,t){var n=Qp.get(e);n=m(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;for(var i=m(t),a=i.next();!a.done;a=i.next())if(a=a.value,r.test(a.trim()))return a.trim()}return e==me?"":null}function qc(e,t){var n=[];e=Qp.get(e),e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var i=m(t),a=i.next();!a.done;a=i.next())a=a.value,r.test(a.trim())&&n.push(a.trim())}return n}var me="text",ft={wa:"video",aa:"audio",Na:me,Yf:"image",ul:"application"},$p=1/15,Qp=new Map().set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function fo(e,t,n,r){this.g=null,this.l=e,this.i=t,this.m=n,this.o=r,this.j=!1;e:{if(typeof libDPIModule>"u"&&Ae("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Ce("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Ae("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(Ae("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Ae(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Xs(e,t,n,r){r.type!=="video"||e.o&&!r.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",r.id,-n,!e.o)}function Zp(e){e.g&&e.i.classList.add("shaka-hidden")}fo.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function eg(e){return e&&typeof LCEVCdec<"u"?e.codecs=="lvc1":!1}q("shaka.lcevc.Dec",fo),fo.prototype.release=fo.prototype.release;function ho(){}function Ii(e,t){ia.set(e,t)}function yT(){var e={};if(ge(),mr())for(var t=m(ia.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(t=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),n=t.next();!n.done;n=t.next())n=n.value,e[n]=mr()?ia.has(n):Fi().canPlayType(n)!="";return e}function tg(e,t){if(t){var n=ia.get(t.toLowerCase());if(n)return n}throw new M(2,4,4e3,e,t)}q("shaka.media.ManifestParser",ho),ho.unregisterParserByMime=function(e){ia.delete(e)},ho.registerParserByMime=Ii,ho.registerParserByExtension=function(){Ce("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},ho.AccessibilityPurpose={Cm:"visually impaired",Nl:"hard of hearing",jm:"spoken subtitles"};var ia=new Map;function po(){}po.prototype.extract=function(){},po.prototype.decode=function(){return[]},po.prototype.clear=function(){},po.prototype.getStreams=function(){return[]};function Wc(){}Wc.prototype.init=function(){},Wc.prototype.parse=function(){return[]};function ng(){}f=ng.prototype,f.init=function(){},f.Af=function(){},f.Qd=function(){},f.remove=function(){},f.Zf=function(){},q("shaka.media.IClosedCaptionParser",ng);function rr(e){this.h=new Map,this.i=0,this.j=new Wc,(e=rg(e.toLowerCase()))&&(this.j=e()),this.g=new po,(e=Ei)&&(this.g=e(),this.h.set(this.i,this.g))}f=rr.prototype,f.init=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?-1:n,n!=-1&&this.i!=n){t=n;var r=this.h.get(t);this.h.set(this.i,this.g),r?this.g=r:((r=Ei)&&(this.g=r()),this.h.set(t,this.g))}else t||this.Qd();this.j.init(e),n!=-1&&(this.i=n)},f.Af=function(e){e=this.j.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=oe(t.packet);n.length>0&&this.g.extract(n,t.pts)}return this.g.decode()},f.Qd=function(){this.g.clear()},f.remove=function(e){e=e===void 0?[]:e,e=new Set(e);for(var t=m(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var r=this.h.get(n);r&&r.clear(),this.h.delete(n)}},f.Zf=function(){return this.g.getStreams()};function zc(e,t){Xc.set(e,t)}function rg(e){return Xc.get(e)}q("shaka.media.ClosedCaptionParser",rr),rr.findDecoder=function(){return Ei},rr.unregisterDecoder=function(){Ei=null},rr.registerDecoder=function(e){Ei=e},rr.findParser=rg,rr.unregisterParser=function(e){Xc.delete(e)},rr.registerParser=zc;var Xc=new Map,Ei=null;function Ci(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=ln,this.scroll=ig}q("shaka.text.CueRegion",Ci);var ln=1;Ci.units={PX:0,PERCENTAGE:ln,LINES:2};var ig="";Ci.scrollMode={NONE:ig,UP:"up"};function aa(e){this.h=e||"",this.g=0}function oa(e){$r(e,/[ \t]+/gm)}function $r(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Mi(e){return e.g==e.h.length?null:(e=$r(e,/[^ \t\n]*/gm))?e[0]:null}function go(e){if(e=$r(e,bT),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return t>59||n>59?null:(Number(e[6])||0)/1e3+n+t*60+(Number(e[1])||0)*3600}function sa(e){return e?go(new aa(e)):null}var bT=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Ys(){}function Wn(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||ArrayBuffer.isView(r))return r;if(n.has(r))return null;var i=Array.isArray(r);if(r.constructor!=Object&&!i)return null;n.add(r);var a=i?[]:{},o;for(o in r)a[o]=t(r[o]);return i&&(a.length=r.length),a}}var n=new WeakSet;return t(e)}function Qr(e){var t={},n;for(n in e)t[n]=e[n];return t}function Js(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var r=n.toString(),i=e[n];i!==void 0&&(i=Js(i))&&t.push(r+":"+i)}e="["+t.join(",")+"]"}else if(typeof e=="function")e="";else if(e instanceof Object){for(n=Object.keys(e),n.sort(),t=[],n=m(n),r=n.next();!r.done;r=n.next())i=r.value,r=JSON.stringify(i),i=e[i],i!==void 0&&(i=Js(i))&&t.push(r+":"+i);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}q("shaka.util.ObjectUtils",Ys),Ys.alphabeticalKeyOrderStringify=Js,Ys.shallowCloneObject=Qr,Ys.cloneObject=Wn;function mo(e,t){var n=n===void 0?!1:n;return e=lr(e),Di(e,t,n)}function Di(e,t,n){return e=wT(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(r){return t.split(",").includes(r.tagName)}))?e:null}function Yc(e){return $c.has(e)?$c.get(e):""}function wT(e,t){function n(a,o){o=o===void 0?!1:o;for(var s=[];e[i];)if(e.charCodeAt(i)==60){if(e.charCodeAt(i+1)===47){o=i+2,i=e.indexOf(">",i),o=e.substring(o,i);var u=o.indexOf(a);if(u==-1){var l=a.indexOf(".");l>0&&(u=o.indexOf(a.substring(0,l)))}if(u==-1)throw a=e.substring(0,i).split(`
`),Error(`Unexpected close tag
Line: `+(a.length-1)+`
Column: `+(a[a.length-1].length+1)+`
Char: `+e[i]);i+1&&(i+=1);break}else if(e.charCodeAt(i+1)===33){if(e.charCodeAt(i+2)==45){for(;i!==-1&&(e.charCodeAt(i)!==62||e.charCodeAt(i-1)!=45||e.charCodeAt(i-2)!=45||i==-1);)i=e.indexOf(">",i+1);i===-1&&(i=e.length)}else if(e.charCodeAt(i+2)===91&&e.charCodeAt(i+8)===91&&e.substr(i+3,5).toLowerCase()==="cdata"){u=e.indexOf("]]>",i),u==-1?(s.push(e.substr(i+9)),i=e.length):(s.push(e.substring(i+9,u)),i=u+3);continue}i++;continue}e:{l=o,i++;var c=r(),d={};for(u=[];e.charCodeAt(i)!==62&&e[i];){var h=e.charCodeAt(i);if(h>64&&h<91||h>96&&h<123){h=r();for(var p=e.charCodeAt(i);p&&p!==39&&p!==34&&!(p>64&&p<91||p>96&&p<123)&&p!==62;)i++,p=e.charCodeAt(i);var g=i+1;if(i=e.indexOf(e[i],g),g=(" "+e.slice(g,i)).slice(1),p===39||p===34){if(i===-1){if(l={tagName:c,attributes:d,children:u,parent:null},t)for(c=0;c<u.length;c++)typeof u[c]!="string"&&(u[c].parent=l);u=l;break e}}else g=null,i--;if(h.startsWith("xmlns:")){p=g;var v=h.split(":")[1];$c.set(p,v),Qc.set(v,p)}c==="tt"&&h==="xml:space"&&g==="preserve"&&(l=!0),d[h]=g}i++}for(e.charCodeAt(i-1)!==47?(i++,u=n(c,l)):i++,l={tagName:c,attributes:d,children:u,parent:null},c=u.length,d=0;d<c;d++)h=u[d],typeof h!="string"?t&&(h.parent=l):d==c-1&&h==`
`&&u.pop();u=l}if(s.push(u),typeof u=="string")break;u.tagName[0]==="?"&&u.children&&(s.push.apply(s,H(u.children)),u.children=[])}else u=i,i=e.indexOf("<",i)-1,i===-2&&(i=e.length),u=(" "+e.slice(u,i+1)).slice(1),o?u.length>0&&s.push(u):(s.length&&u.length==1&&u[0]==`
`||u.trim().length>0)&&s.push(u),i++;return s}function r(){for(var a=i;`\r
	>/= `.indexOf(e[i])===-1&&e[i];)i++;return(" "+e.slice(a,i)).slice(1)}var i=0;return n("")}function $s(e){return typeof e=="string"}function ag(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function _e(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function ut(e){return typeof e=="string"?qt(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:qt(e))}function Wt(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=ut(e))&&(e=e.trim()),e):null}function ir(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var r=e.next();!r.done;r=e.next())ir(r.value,t,n)}return n}function ze(e,t){return e=_e(e,t),e.length!=1?null:e[0]}function Pn(e,t,n){return e=og(e,t,n),e.length!=1?null:e[0]}function se(e,t,n,r){r=r===void 0?null:r;var i=null;return e=e.attributes[t],e!=null&&(i=n(e)),i??r}function Ar(e,t,n){return t=Yc(t),e.attributes[t+":"+n]||null}function og(e,t,n){var r=Yc(t);if(t=[],e.children)for(n=r?r+":"+n:n,e=m(e.children),r=e.next();!r.done;r=e.next())(r=r.value)&&r.tagName===n&&t.push(r);return t}function cr(e,t,n){t=m(t);for(var r=t.next();!r.done;r=t.next())if(r=Ar(e,r.value,n))return r;return null}function kr(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function dr(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Qs(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Ct(e){return e=Number(e),e%1===0?e:null}function fr(e){return e=Number(e),e%1===0&&e>0?e:null}function Mt(e){return e=Number(e),e%1===0&&e>=0?e:null}function Zs(e){return e=Number(e),isNaN(e)?null:e}function eu(e){return e?e.toLowerCase()==="true":!1}function TT(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function tu(e){var t=[];e=qt(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=m(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=n.match(/^([\w]+)/);if(r){var i=n.match(/(@id='(.*?)')/),a=n.match(/(@t='(\d+)')/),o=n.match(/(@n='(\d+)')/),s=n.match(/\[(\d+)\]/);t.push({name:r[0],id:i?i[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:a?Number(a[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:o?Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:s?Number(s[1])-1:null,Ec:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Ec=n.slice(1))}return t}function sg(e,t){var n=tu(t.attributes.sel||"");if(n.length){var r=n[n.length-1],i=t.attributes.pos||null;n=r.position,n==null&&(r.t!==null&&(n=ug(e,"t",r.t)),r.n!==null&&(n=ug(e,"n",r.n))),n===null?n=i==="prepend"?0:e.length:i==="prepend"?--n:i==="after"&&++n,i=t.tagName,(r=r.Ec)&&e[n]?lg(e[n],i,r,Wt(t)||""):(i!=="remove"&&i!=="replace"||e.splice(n,1),i!=="add"&&i!=="replace"||e.splice.apply(e,[n,0].concat(H(t.children))))}}function ug(e,t,n){var r=0;e=m(e);for(var i=e.next();!i.done;i=e.next()){if(Number(i.value.attributes[t])===n)return r;r++}return null}function lg(e,t,n,r){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=r)}function cg(e){var t="",n=e.tagName.split(":");n.length>0&&(t=n[0],t=Qc.has(t)?Qc.get(t):""),t=document.createElementNS(t,e.tagName);for(var r in e.attributes)t.setAttribute(r,e.attributes[r]);for(e=m(e.children),r=e.next();!r.done;r=e.next())r=r.value,n=void 0,typeof r=="string"?n=new Text(r):n=cg(r),t.appendChild(n);return t}function Jc(e){if(!e)return null;var t={tagName:e.tagName,attributes:Qr(e.attributes),children:[],parent:null};e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=Jc(n),n.parent=t),t.children.push(n);return t}var $c=new Map,Qc=new Map;function qe(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Ci,this.position=null,this.positionAlign=iu,this.size=0,this.textAlign=hr,this.direction=bo,this.writingMode=Ri,this.lineInterpretation=wo,this.line=null,this.lineHeight="",this.lineAlign=Pi,this.displayAlign=yo,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=vg,this.fontStyle=td,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={columns:32,rows:15}}function dg(e,t){return e=new qe(e,t,""),e.lineBreak=!0,e}qe.prototype.clone=function(){var e=new qe(0,0,""),t;for(t in this)e[t]=this[t],Array.isArray(e[t])&&(e[t]=e[t].slice());return e};function nu(e,t){if(e.payload!=t.payload||!(Math.abs(e.startTime-t.startTime)<.001&&Math.abs(e.endTime-t.endTime)<.001))return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Yr(e.nestedCues,t.nestedCues,nu))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!Yr(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function ru(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&fg(t);var r=n;n=[];for(var i=-1,a=0;a<r.length;a++)r[a]==="<"?i=a+1:r[a]===">"&&i>0&&(i=r.substr(i,a-i),i.match(xT)&&n.push(i),i=-1);for(n=m(n),a=n.next();!a.done;a=n.next())a=a.value,r=r.replace("<"+a+">",'<div time="'+a+'">'),r+="</div>";e:{a=r,i=[];var o=-1;n="",r=!1;for(var s=0;s<a.length;s++)if(a[s]==="/"){var u=a.indexOf(">",s);if(u===-1){n=a;break e}if((u=a.substring(s+1,u))&&u=="v"){r=!0;var l=null;if(i.length&&(l=i[i.length-1]),l){if(l===u)n+="/"+u+">";else{if(!l.startsWith("v")){n+=a[s];continue}n+="/"+l+">"}s+=u.length+1}else n+=a[s]}else n+=a[s]}else a[s]==="<"?(o=s+1,a[o]!="v"&&(o=-1)):a[s]===">"&&o>0&&(i.push(a.substr(o,s-o)),o=-1),n+=a[s];for(a=m(i),i=a.next();!i.done;i=a.next())i=i.value,o=i.replace(" ",".voice-"),n=n.replace("<"+i+">","<"+o+">"),n=n.replace("</"+i+">","</"+o+">"),r||(n+="</"+o+">")}n=ST(n),e.payload="",r="<span>"+n.replace(/\n/g,"<br />")+"</span>";try{var c=Di(r,"span")}catch{}if(c)if(c=c.children,c.length!=1||c[0].tagName)for(c=m(c),n=c.next();!n.done;n=c.next())hg(n.value,e,t);else e.payload=qt(n);else e.payload=qt(n)}else e.payload=qt(n)}function fg(e){for(var t=m(Object.entries(gg)),n=t.next();!n.done;n=t.next()){var r=m(n.value);n=r.next().value,r=r.next().value;var i=new qe(0,0,"");i.color=r,e.set("."+n,i)}for(t=m(Object.entries(mg)),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,i=new qe(0,0,""),i.backgroundColor=r,e.set("."+n,i)}function ST(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(i){return t[i]||""}):e||""}function hg(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Ci,r.position=null,r.size=0,r.textAlign=hr,e.tagName)for(var i=m(e.tagName.split(/(?=[ .])+/g)),a=i.next();!a.done;a=i.next()){var o=a=a.value;if(o.startsWith(".voice-")){var s=o.split("-").pop();o='v[voice="'+s+'"]',n.has(o)||(o="v[voice="+s+"]")}switch(n.has(o)&&(s=r,o=n.get(o))&&(s.backgroundColor=vo(o.backgroundColor,s.backgroundColor),s.color=vo(o.color,s.color),s.fontFamily=vo(o.fontFamily,s.fontFamily),s.fontSize=vo(o.fontSize,s.fontSize),s.textShadow=vo(o.textShadow,s.textShadow),s.fontWeight=o.fontWeight,s.fontStyle=o.fontStyle,s.opacity=o.opacity,s.rubyTag=o.rubyTag,s.textCombineUpright=o.textCombineUpright,s.wrapLine=o.wrapLine),a){case"br":r=dg(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=ua;break;case"i":r.fontStyle=la;break;case"u":r.textDecoration.push(Ir);break;case"font":(a=e.attributes.color)&&(r.color=a);break;case"div":if(a=e.attributes.time,!a)break;(a=sa(a))&&(r.startTime=a);break;case"ruby":case"rp":case"rt":r.rubyTag=a}}if(i=e.children,$s(e)||i.length==1&&$s(i[0]))for(n=ut(e).split(`
`),e=!0,n=m(n),i=n.next();!i.done;i=n.next())i=i.value,e||(e=dg(r.startTime,r.endTime),t.nestedCues.push(e)),i.length>0&&(e=r.clone(),e.payload=qt(i),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=m(i),e=t.next();!e.done;e=t.next())hg(e.value,r,n)}function vo(e,t){return e&&e.length>0?e:t}q("shaka.text.Cue",qe),qe.parseCuePayload=ru,qe.equal=nu,qe.prototype.clone=qe.prototype.clone;var iu="auto";qe.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:iu};var hr="center",Zc={LEFT:"left",RIGHT:"right",CENTER:hr,START:"start",END:"end"};qe.textAlign=Zc;var yo="after",pg={BEFORE:"before",CENTER:"center",AFTER:yo};qe.displayAlign=pg;var bo="ltr";qe.direction={HORIZONTAL_LEFT_TO_RIGHT:bo,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Ri="horizontal-tb";qe.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Ri,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var wo=0;qe.lineInterpretation={LINE_NUMBER:wo,PERCENTAGE:1};var Pi="start",ed={CENTER:"center",START:Pi,END:"end"};qe.lineAlign=ed;var gg={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};qe.defaultTextColor=gg;var mg={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};qe.defaultTextBackgroundColor=mg;var vg=400,ua=700;qe.fontWeight={NORMAL:vg,BOLD:ua};var td="normal",la="italic",yg={NORMAL:td,ITALIC:la,OBLIQUE:"oblique"};qe.fontStyle=yg;var Ir="underline";qe.textDecoration={UNDERLINE:Ir,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var xT=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Zr(){}Zr.prototype.destroy=function(){};function Er(e,t,n){nd.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,Bf:t})}function ca(e,t){for(var n=e.toLowerCase().split(";")[0],r=m([bg,id,rd,ei]),i=r.next();!i.done;i=r.next())if(i=nd.get(n+"-"+i.value)){var a=i.Bf(),o=a.isSupported(e,t);if(a.destroy(),o)return i.Bf}return null}q("shaka.transmuxer.TransmuxerEngine",Zr),Zr.findTransmuxer=ca,Zr.unregisterTransmuxer=function(e,t){nd.delete(e.toLowerCase().split(";")[0]+"-"+t)},Zr.registerTransmuxer=Er,Zr.prototype.destroy=Zr.prototype.destroy;var nd=new Map,ei=1,rd=2,id=3,bg=4;Zr.PluginPriority={FALLBACK:ei,PREFERRED_SECONDARY:rd,PREFERRED:id,APPLICATION:bg};function ad(){}function at(e,t){var n=e;return t&&!Cr.includes(e)&&(n+='; codecs="'+t+'"'),n}function au(e,t){return t&&(e+='; codecs="'+t+'"'),e}function od(e,t,n){var r=at(e,t);return t=au(e,t),ca(t)?(e=ca(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function To(e){return e.split(";")[0].split("/")[1]}function Nt(e){var t=wg(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):case e==="ac3":case e==="ac-3":return"ac-3";case(e==="mp4a"&&t==="a6"):case e==="eac3":case e==="ec-3":return"ec-3";case e==="ac-4":return"ac-4";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="vp09":case e==="vp9":return"vp9";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc";case e==="lvc1":return"lcevc"}return e}function ti(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=wg(n.value),t.push(n[0]);return t.sort().join(",")}function cn(e){return e.split(";")[0]}function tn(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function ou(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function wg(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}q("shaka.util.MimeUtils",ad),ad.getFullTypeWithAllCodecs=au,ad.getFullType=at,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var Cr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Mr(e){this.i=null,this.l=e,this.B=this.F=!1,this.m=this.u=0,this.o=1/0,this.h=this.g=null,this.G="",this.C=function(){},this.j=new Map}function Dt(e,t){Ao.set(e,t)}function So(e){return Ao.get(e)}function xo(e){return Ao.has(e)?!0:e=="application/cea-608"||e=="application/cea-708"?!!Ei:!1}Mr.prototype.destroy=function(){return this.l=this.i=null,this.j.clear(),Promise.resolve()};function AT(e,t,n,r,i){var a,o,s,u,l,c,d,h;return C(function(p){if(p.g==1)return b(p,Promise.resolve(),2);if(!e.i||!e.l)return p.return();if(n==null||r==null)return e.i.parseInit(oe(t)),p.return();for(a=e.B?0:e.u,o=e.F||e.B?n:e.u,s={periodStart:a,segmentStart:n,segmentEnd:r,vttOffset:o},u=e.i.parseMedia(oe(t),s,i,[]),l=m(u),c=l.next();!c.done;c=l.next())d=c.value,e.C(d,i||null,s);h=u.filter(function(g){return g.startTime>=e.m&&g.startTime<e.o}),e.l.append(h),e.g==null&&(e.g=Math.max(n,e.m)),e.h=Math.min(r,e.o),G(p)})}Mr.prototype.remove=function(e,t,n){n=n===void 0?!1:n;var r=this;return C(function(i){if(i.g==1)return b(i,Promise.resolve(),2);if(e>=t)return i.return();n&&ET(r,e,t),r.l&&r.l.remove(e,t)&&r.g!=null&&(t<=r.g||e>=r.h||(e<=r.g&&t>=r.h?r.g=r.h=null:e<=r.g&&t<r.h?r.g=t:e>r.g&&t>=r.h&&(r.h=e)),xg(r)),G(i)})};function kT(e,t,n){e.m=t,e.o=n}function Tg(e,t,n){e.G=t,(t=e.j.get(t))&&(t=t.filter(function(r){return r.endTime<=n}),t.length&&e.l.append(t))}function Sg(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var r=t.next();!r.done;r=t.next())Sg(e,r.value,n)}function IT(e,t,n){var r=new Map;t=m(t);for(var i=t.next();!i.done;i=t.next()){var a=i.value;i=a.stream,a=a.cue,r.has(i)||r.set(i,[]),Sg(e,a,n),a.startTime>=e.m&&a.startTime<e.o&&(r.get(i).push(a),i==e.G&&e.l.append([a]))}for(n=m(r.keys()),t=n.next();!t.done;t=n.next())for(t=t.value,e.j.has(t)||e.j.set(t,[]),i=m(r.get(t)),a=i.next();!a.done;a=i.next())a=a.value,e.j.get(t).push(a);xg(e)}function ET(e,t,n){for(var r=m(e.j.keys()),i=r.next();!i.done;i=r.next()){i=i.value;var a=e.j.get(i);a=a.filter(function(o){return o.startTime<t||o.endTime>=n}),e.j.set(i,a)}}function xg(e){for(var t=1/0,n=-1/0,r=m(e.j.values()),i=r.next();!i.done;i=r.next()){i=m(i.value);for(var a=i.next();!a.done;a=i.next())a=a.value,t=Math.min(t,a.startTime),n=Math.max(n,a.endTime)}t!==1/0&&n!==-1/0&&(e.g=e.g==null?Math.max(t,e.m):Math.min(e.g,Math.max(t,e.m)),e.h=Math.max(e.h,Math.min(n,e.o)))}q("shaka.text.TextEngine",Mr),Mr.prototype.destroy=Mr.prototype.destroy,Mr.findParser=So,Mr.unregisterParser=function(e){Ao.delete(e)},Mr.registerParser=Dt;var Ao=new Map;function ko(e){this.h=e,this.g=null}ko.prototype.ka=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){U.clearTimeout(r),n=!1},r=U.setTimeout(function(){n&&t.h()},e*1e3),this},ko.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function ve(e){this.h=e,this.g=null}ve.prototype.Jb=function(){return this.stop(),this.h(),this},ve.prototype.ka=function(e){var t=this;return this.stop(),this.g=new ko(function(){t.h()}).ka(e),this},ve.prototype.Ea=function(e){var t=this;return this.stop(),this.g=new ko(function(){t.g.ka(e),t.h()}).ka(e),this},ve.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},q("shaka.util.Timer",ve),ve.prototype.stop=ve.prototype.stop,ve.prototype.tickEvery=ve.prototype.Ea,ve.prototype.tickAfter=ve.prototype.ka,ve.prototype.tickNow=ve.prototype.Jb;function CT(e,t){return e.concat(t)}function MT(){}function ni(e){return e!=null}function su(e,t){return Promise.race([t,new Promise(function(n,r){new ve(r).ka(e)})])}function zn(){}function da(e,t){return e=Le(e),t=Le(t),e.split("-")[0]==t.split("-")[0]}function Io(e,t){return e=Le(e),t=Le(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function sd(e,t){return e=Le(e),t=Le(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Le(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Ag.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Li(e,t){return e=Le(e),t=Le(t),t==e?4:Io(t,e)?3:sd(t,e)?2:Io(e,t)?1:0}function uu(e){var t=e.indexOf("-");return e=t>=0?e.substring(0,t):e,e=e.toLowerCase(),e=Ag.get(e)||e}function ud(e){return e.language?Le(e.language):e.audio&&e.audio.language?Le(e.audio.language):e.video&&e.video.language?Le(e.video.language):"und"}function lu(e,t){e=Le(e);var n=new Set;t=m(t);for(var r=t.next();!r.done;r=t.next())n.add(Le(r.value));for(t=m(n),r=t.next();!r.done;r=t.next())if(r=r.value,r==e)return r;for(t=m(n),r=t.next();!r.done;r=t.next())if(r=r.value,Io(r,e))return r;for(t=m(n),r=t.next();!r.done;r=t.next())if(r=r.value,sd(r,e))return r;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,Io(e,t))return t;return null}q("shaka.util.LanguageUtils",zn),zn.findClosestLocale=lu,zn.getLocaleForVariant=ud,zn.getLocaleForText=function(e){return Le(e.language||"und")},zn.getBase=uu,zn.relatedness=Li,zn.areSiblings=function(e,t){var n=uu(e),r=uu(t);return e!=n&&t!=r&&n==r},zn.normalize=Le,zn.isSiblingOf=sd,zn.isParentOf=Io,zn.areLanguageCompatible=da,zn.areLocaleCompatible=function(e,t){return e=Le(e),t=Le(t),e==t};var Ag=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function kg(){}function Ig(e,t,n,r,i){if(i.length){var a=e.textStreams;i=m(i);for(var o=i.next(),s={};!o.done;s={Fh:void 0},o=i.next())if(s.Fh=o.value,o=a.filter((function(g){return function(v){return!!(v.codecs.startsWith(g.Fh)||v.mimeType.startsWith(g.Fh))}})(s)),o.length){a=o;break}e.textStreams=a}if(a=e.variants,(t.length||n.length)&&(a=DT(a,t,n)),r.length){for(t=new Fs,a=m(a),n=a.next();!n.done;n=a.next())n=n.value,t.push(String(n.video.width||0),n);var u=[];t.forEach(function(g,v){g=0;var y=[];v=m(v);for(var T=v.next(),w={};!T.done;w={Xf:void 0},T=v.next())w.Xf=T.value,T=r.filter((function(S){return function(k){return S.Xf.decodingInfos[0][k]}})(w)).length,T>g?(g=T,y=[w.Xf]):T==g&&y.push(w.Xf);u.push.apply(u,H(y))}),a=u}for(t=new Set,n=m(a),i=n.next();!i.done;i=n.next())i=i.value,i.video&&t.add(i.video);if(t.size){var l={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};i=Array.from(t).sort(function(g,v){return g.bandwidth&&v.bandwidth&&g.bandwidth!=v.bandwidth?g.bandwidth-v.bandwidth:g.width!=v.width?g.width-v.width:g.codecs&&v.codecs?(g=Nt(g.codecs),v=Nt(v.codecs),(l[g]||1)-(l[v]||1)):0});var c=[];for(t=new Map,n=function(g){var v=[String(g.width||""),String(g.height||""),String(Math.round(g.frameRate||0)),g.hdr||"",g.fastSwitching];return g.dependencyStream&&v.push(g.dependencyStream.baseOriginalId||""),g.roles&&v.push(g.roles.sort().join("_")),v.join(";")},i=m(i),o=i.next();!o.done;o=i.next()){o=o.value,s=n(o);var d=t.get(s)||[];if(d.length){var h=Nt(d[d.length-1].codecs),p=Nt(o.codecs);h==p&&(d.push(o),c.push(o.id))}else d.push(o),c.push(o.id);t.set(s,d)}e.variants=a.filter(function(g){return!((g=g.video)&&!c.includes(g.id))})}else e.variants=a}function DT(e,t,n){t=m(t);for(var r=t.next(),i={};!r.done;i={lj:void 0},r=t.next())if(i.lj=r.value,r=e.filter((function(a){return function(o){return o.video&&o.video.codecs.startsWith(a.lj)}})(i)),r.length){e=r;break}for(n=m(n),t=n.next(),r={};!t.done;r={Rh:void 0},t=n.next())if(r.Rh=t.value,t=e.filter((function(a){return function(o){return o.audio&&o.audio.codecs.startsWith(a.Rh)}})(r)),t.length){e=t;break}return e}function RT(e,t,n){e.variants=e.variants.filter(function(r){return cu(r,t,n)})}function cu(e,t,n){function r(o,s,u){return o>=s&&o<=u}if(e&&e.video&&e.video.width&&e.video.height){var i=e.video.width,a=e.video.height;if(a>i&&(a=m([a,i]),i=a.next().value,a=a.next().value),!r(i,t.minWidth,Math.min(t.maxWidth,n.width))||!r(a,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i*a,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function PT(e,t,n,r){return n=n===void 0?[]:n,r=r===void 0?{}:r,C(function(i){return i.g==1?b(i,Eg(e,t,t.offlineSessionIds.length>0,n,r),2):(_T(t),b(i,jT(t),0))})}function Eg(e,t,n,r,i){var a,o;return C(function(s){if(s.g==1)return ge().$i()&&LT(t.variants),b(s,ld(t.variants,n,!1,r),2);a=null,e&&(o=e.g)&&(a=o.keySystem),t.variants=t.variants.filter(function(u){var l=NT(u,a,i);if(!l){var c=[];u.audio&&c.push(Ng(u.audio)),u.video&&c.push(Ng(u.video))}return l}),G(s)})}function LT(e){var t=new Map().set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set;e=m(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&n.add(r.video);for(n=m(n),e=n.next();!e.done;e=n.next()){e=e.value,r=m(t);for(var i=r.next();!i.done;i=r.next()){var a=m(i.value);if(i=a.next().value,a=a.next().value,e.codecs.includes(i)){e.codecs=e.codecs.replace(i,a);break}}}}function NT(e,t,n){if(!e.decodingInfos.some(function(u){return!(!u.supported||t&&(u=u.keySystemAccess)&&(n[u.keySystem]||u.keySystem)!=t)}))return!1;var r=ge(),i=r.Nb()==="Xbox";r=r.Oa()==="MOBILE"&&r.Ha()==="GECKO";var a=e.video,o=a&&a.width||0,s=a&&a.height||0;return i&&a&&(o>1920||s>1080)&&(a.codecs.includes("avc1.")||a.codecs.includes("avc3."))||(i=a&&a.dependencyStream)&&!eg(i)?!1:(e=e.audio,!(r&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function Cg(e,t){var n,r,i,a,o,s,u;return C(function(l){if(l.g==1){for(n=function(c,d){if(c){var h=Qr(c);return h.supported=c.supported&&d.supported,h.powerEfficient=c.powerEfficient&&d.powerEfficient,h.smooth=c.smooth&&d.smooth,d.keySystemAccess&&!h.keySystemAccess&&(h.keySystemAccess=d.keySystemAccess),h}return d},r=null,i=[],a=m(t),o=a.next(),s={};!o.done;s={cache:void 0,Se:void 0},o=a.next())u=o.value,s.Se=Js(u),s.cache=pu,s.cache.has(s.Se)?r=n(r,s.cache.get(s.Se)):i.push(UT(u).then((function(c){return function(d){var h=null;d=m(d||[]);for(var p=d.next();!p.done;p=d.next())h=n(h,p.value);h&&(c.cache.set(c.Se,h),r=n(r,h))}})(s)));return b(l,Promise.all(i),2)}r&&e.decodingInfos.push(r),G(l)})}function UT(e){var t=[""];e.video&&(t=tn(e.video.contentType).split(","));var n=[""];e.audio&&(n=tn(e.audio.contentType).split(","));var r=[];t=m(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;for(var a=m(n),o=a.next(),s={};!o.done;s={Qc:void 0},o=a.next())o=o.value,s.Qc=Wn(e),e.video&&(s.Qc.video.contentType=at(cn(s.Qc.video.contentType),i)),e.audio&&(s.Qc.audio.contentType=at(cn(s.Qc.audio.contentType),o)),r.push(new Promise((function(u){return function(l,c){(ge().Oa()=="MOBILE"?su(5,navigator.mediaCapabilities.decodingInfo(u.Qc)):navigator.mediaCapabilities.decodingInfo(u.Qc)).then(function(d){l(d)}).catch(c)}})(s)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function ld(e,t,n,r){var i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D;return C(function(x){switch(x.g){case 1:if(e.some(function(I){return I.decodingInfos.length}))return x.return();i=m(r),a=i.next(),o={};case 2:if(a.done){x.A(4);break}o.Ji=a.value,s=!1,u=m(e),l=u.next();case 5:if(l.done){x.A(7);break}c=l.value,d=Mg(c,t,n).filter((function(I){return function(A){return A=A[0],(A.keySystemConfiguration&&A.keySystemConfiguration.keySystem)===I.Ji}})(o)),h=m(d),p=h.next();case 8:if(p.done){x.A(10);break}return g=p.value,b(x,Cg(c,g),9);case 9:p=h.next(),x.A(8);break;case 10:c.decodingInfos.some(function(I){return I.supported})&&(s=!0),l=u.next(),x.A(5);break;case 7:if(s)return x.return();o={Ji:void 0},a=i.next(),x.A(2);break;case 4:v=m(e),y=v.next();case 12:if(y.done){x.A(0);break}T=y.value,w=Mg(T,t,n).filter(function(I){return I=I[0],I=I.keySystemConfiguration&&I.keySystemConfiguration.keySystem,!I||!r.includes(I)}),S=m(w),k=S.next();case 15:if(k.done){y=v.next(),x.A(12);break}return D=k.value,b(x,Cg(T,D),16);case 16:k=S.next(),x.A(15)}})}function Mg(e,t,n){var r=e.audio,i=e.video,a=[],o=[];if(i)for(var s=m(i.fullMimeTypes),u=s.next();!u.done;u=s.next()){u=u.value;var l=tn(u);if(l.includes(",")&&!r){var c=l.split(","),d=cn(u);l=ra("video",c),c=ra("audio",c),c=Eo(c,d),d=od(d,c,"audio"),o.push({contentType:d,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(l=Dg(l),u={contentType:od(cn(u),l,"video"),width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||30},i.hdr)switch(i.hdr){case"PQ":u.transferFunction="pq";break;case"HLG":u.transferFunction="hlg"}i.colorGamut&&(u.colorGamut=i.colorGamut),a.push(u)}if(r)for(s=m(r.fullMimeTypes),u=s.next();!u.done;u=s.next())l=u.value,u=cn(l),l=Eo(tn(l),u),u=od(u,l,"audio"),o.push({contentType:u,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(s=[],a.length==0&&a.push(null),o.length==0&&o.push(null),a=m(a),u=a.next();!u.done;u=a.next())for(u=u.value,l=m(o),d=l.next();!d.done;d=l.next())d=d.value,c={type:n?"file":"media-source"},u&&(c.video=u),d&&(c.audio=d),s.push(c);if(o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!o.length)return[s];for(e=[],n=new Map,o=m(o),a=o.next();!a.done;a=o.next())a=a.value,n.get(a.keySystem)||n.set(a.keySystem,[]),n.get(a.keySystem).push(a);for(o=t?"required":"optional",t=t?["persistent-license"]:["temporary"],a=m(n.keys()),u=a.next();!u.done;u=a.next()){for(u=u.value,d=n.get(u),l=new Map,d=m(d),c=d.next();!c.done;c=d.next()){c=c.value;var h=c.videoRobustness+","+c.audioRobustness;l.get(h)||l.set(h,[]),l.get(h).push(c)}for(l=m(l.values()),d=l.next();!d.done;d=l.next()){d=d.value,c=[],h=m(s);for(var p=h.next();!p.done;p=h.next()){p=Object.assign({},p.value);for(var g={keySystem:u,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t},v=m(d),y=v.next();!y.done;y=v.next()){if(y=y.value,y.initData&&y.initData.length){for(var T=new Set,w=m(y.initData),S=w.next();!S.done;S=w.next())T.add(S.value.initDataType);g.initDataType=y.initData[0].initDataType}y.distinctiveIdentifierRequired&&(g.distinctiveIdentifier="required"),y.persistentStateRequired&&(g.persistentState="required"),y.sessionType&&(g.sessionTypes=[y.sessionType]),r&&(g.audio?(y.encryptionScheme&&(g.audio.encryptionScheme=g.audio.encryptionScheme||y.encryptionScheme),g.audio.robustness=g.audio.robustness||y.audioRobustness):(g.audio={robustness:y.audioRobustness},y.encryptionScheme&&(g.audio.encryptionScheme=y.encryptionScheme)),g.audio.robustness==""&&delete g.audio.robustness),i&&(g.video?(y.encryptionScheme&&(g.video.encryptionScheme=g.video.encryptionScheme||y.encryptionScheme),g.video.robustness=g.video.robustness||y.videoRobustness):(g.video={robustness:y.videoRobustness},y.encryptionScheme&&(g.video.encryptionScheme=y.encryptionScheme)),g.video.robustness==""&&delete g.video.robustness)}p.keySystemConfiguration=g,c.push(p)}e.push(c)}}return e}function Eo(e,t){var n=ge();return e.toLowerCase()=="flac"?n.Ha()!="WEBKIT"?"flac":"fLaC":e.toLowerCase()==="opus"?n.Ha()!="WEBKIT"?"opus":To(t)=="mp4"?"Opus":"opus":e.toLowerCase()=="ac-3"&&n.se()?"ec-3":e}function Dg(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function _T(e){e.textStreams=e.textStreams.filter(function(t){return t=at(t.mimeType,t.codecs),xo(t)})}function jT(e){var t,n,r,i,a,o,s;return C(function(u){switch(u.g){case 1:t=[],n=m(e.imageStreams),r=n.next();case 2:if(r.done){u.A(4);break}if(i=r.value,a=i.mimeType,a=="application/mp4"&&i.codecs=="mjpg"&&(a="image/jpg"),gu.has(a)){u.A(5);break}if(o=VT.get(a),!o){gu.set(a,!1),u.A(5);break}return b(u,OT(o),7);case 7:s=u.h,gu.set(a,s);case 5:gu.get(a)&&t.push(i),r=n.next(),u.A(2);break;case 4:e.imageStreams=t,G(u)}})}function OT(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Ni(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,i=n?n.mimeType:null,a=t?t.codecs:null,o=n?n.codecs:null,s=t?t.groupId:null,u=[];n&&u.push(n.mimeType),t&&u.push(t.mimeType),u=u[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var c=new Set;if(t)for(var d=m(t.roles),h=d.next();!h.done;h=d.next())c.add(h.value);if(n)for(d=m(n.roles),h=d.next();!h.done;h=d.next())c.add(h.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,videoLabel:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:u,audioMimeType:r,videoMimeType:i,codecs:"",audioCodec:a,videoCodec:o,primary:e.primary,roles:Array.from(c),audioRoles:null,videoRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,e.videoRoles=n.roles,e.videoLabel=n.label,(r=n.dependencyStream)&&(e.width=r.width||e.width,e.height=r.height||e.height,e.videoCodec=r.codecs||e.videoCodec,e.pixelAspectRatio=r.pixelAspectRatio||e.pixelAspectRatio,e.videoBandwidth&&r.bandwidth&&(e.videoBandwidth+=r.bandwidth)),o.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=i,i=o.split(",");try{e.videoCodec=ra("video",i),e.audioCodec=ra("audio",i)}catch{}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,i=t.dependencyStream)&&(e.audioCodec=i.codecs||e.audioCodec,e.audioBandwidth&&i.bandwidth&&(e.audioBandwidth+=i.bandwidth)),n&&!e.videoBandwidth&&(t?e.audioBandwidth&&(e.videoBandwidth=e.bandwidth-e.audioBandwidth):e.videoBandwidth=e.bandwidth),t&&!e.audioBandwidth&&(n?e.videoBandwidth&&(e.audioBandwidth=e.bandwidth-e.videoBandwidth):e.audioBandwidth=e.bandwidth),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function Ui(e){return{id:e.id,active:!1,type:me,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function cd(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=ar(e.segmentIndex));var i=e.tilesLayout;return r&&(i=r.tilesLayout||i),i&&t!=null&&(t/=Number(i.split("x")[0])),i&&n!=null&&(n/=Number(i.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:i||null,originalImageId:e.originalId}}function du(e){return e.__shaka_id||(e.__shaka_id=FT++),e.__shaka_id}function Rg(e){var t={id:du(e),active:e.mode!="disabled",type:me,bandwidth:0,language:Le(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:e.kind=="forced",originalTextId:e.id,originalLanguage:e.language};return e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function fu(e,t){var n=e?e.language:null;if(n={id:du(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:Le(n||"und"),label:e?e.label:null,videoLabel:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:e?e.kind=="main":!1,roles:[],forced:!1,audioRoles:null,videoRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+(","+n.videoCodec):n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function Co(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function hu(e){return e.filter(function(t){return Co(t)})}function fa(e,t,n,r){var i=e,a=e.filter(function(u){return u.primary});a.length&&(i=a);var o=i.length?i[0].language:"";if(i=i.filter(function(u){return u.language==o}),t){var s=lu(Le(t),e.map(function(u){return u.language}));s&&(i=e.filter(function(u){return Le(u.language)==s}))}if(i=i.filter(function(u){return u.forced==r}),n){if(e=Pg(i,n),e.length)return e}else if(e=i.filter(function(u){return u.roles.length==0}),e.length)return e;return e=i.map(function(u){return u.roles}).reduce(CT,[]),e.length?Pg(i,e[0]):i}function Pg(e,t){return e.filter(function(n){return n.roles.includes(t)})}function BT(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}function Lg(e,t){t.length&&(t=t.filter(function(n){return Nt(e.codecs)==Nt(n.codecs)}).sort(function(n,r){return n.bandwidth&&r.bandwidth&&n.bandwidth!=r.bandwidth?n.bandwidth-r.bandwidth:(n.width||0)-(r.width||0)}),e.trickModeVideo=t[0],t.length>1&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function Ng(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function Ug(e,t,n){if(n.autoShowText==0)return!1;if(n.autoShowText==1)return!0;var r=Le(n.preferredTextLanguage);return t=Le(t.language),n.autoShowText==2?da(t,r):n.autoShowText==3?e?(e=Le(e.language),da(t,r)&&!da(e,t)):!1:(Ae("Invalid autoShowText setting!"),!1)}function _g(e){var t={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]};e=m(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n?cn(n):"",codecs:n?tn(n):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"video",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};r.fullMimeTypes.add(at(r.mimeType,r.codecs)),n.startsWith("audio/")?(r.type="audio",t.audio=r):t.video=r}return t}q("shaka.util.StreamUtils",kg),kg.meetsRestrictions=cu;var pu=new Map,FT=0,gu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),VT=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function et(){var e=this;this.H=null,this.G=!1,this.u=new uo,this.j=new Pe,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){e.g.useNetworkInformation&&navigator.onLine&&(e.u=new uo,e.g&&e.u.configure(e.g.advanced),e.trySuggestStreams())}),this.l=[],this.I=1,this.J=!1,this.h=this.o=this.g=this.B=null,this.m=new ve(function(){if(e.G&&(e.g.restrictToElementSize||e.g.restrictToScreenSize)){var t=e.chooseVariant();t&&e.H(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.C=U,"documentPictureInPicture"in U&&this.j.D(U.documentPictureInPicture,"enter",function(){e.C=U.documentPictureInPicture.window,e.m&&e.m.Jb(),e.j.Aa(e.C,"pagehide",function(){e.C=U,e.m&&e.m.Jb()})}),this.F=this.i=null}f=et.prototype,f.stop=function(){this.H=null,this.G=!1,this.l=[],this.I=1,this.o=this.B=null,this.h&&(this.h.disconnect(),this.h=null),this.m&&this.m.stop(),this.F=this.i=null},f.release=function(){this.stop(),this.j.release(),this.m=null},f.init=function(e){this.H=e},f.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:this.C.devicePixelRatio,t=this.C.screen.height*n,n*=this.C.screen.width),this.h&&this.g.restrictToElementSize){var r=this.g.ignoreDevicePixelRatio?1:this.C.devicePixelRatio,i=this.o.clientHeight,a=this.o.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.o&&(i=this.i.height,a=this.i.width),t=Math.min(t,i*r),n=Math.min(n,a*r)}if(i=this.l.filter(function(l){return l&&!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)}),i.length||(i=this.l),r=i,e&&i.length!=this.l.length&&(r=this.l.filter(function(l){return l&&!!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)})),e=dd(this,this.g.restrictions,r,1/0,1/0),t!=1/0||n!=1/0){for(e=HT(e),e=m(e),i=e.next();!i.done;i=e.next())if(i=i.value,i.height>=t&&i.width>=n){t=i.height,n=i.width;break}e=dd(this,this.g.restrictions,r,t,n)}for(t=this.getBandwidthEstimate(),r.length&&!e.length&&(e=dd(this,null,r,1/0,1/0),e=[e[0]]),n=e[0]||null,r=0;r<e.length;r++){i=e[r];var o=isNaN(this.I)?1:Math.abs(this.I);a=o*i.bandwidth/this.g.bandwidthDowngradeTarget;for(var s={bandwidth:1/0},u=r+1;u<e.length;u++)if(i.bandwidth!=e[u].bandwidth){s=e[u];break}o=o*s.bandwidth/this.g.bandwidthUpgradeTarget,n&&i&&t>=a&&t<=o&&(n.bandwidth!=i.bandwidth||n.bandwidth==i.bandwidth&&n.video&&i.video&&(n.video.width<i.video.width||n.video.height<i.video.height))&&(n=i)}return this.B=Date.now(),n},f.enable=function(){this.G=!0,this.l.length&&this.trySuggestStreams()},f.disable=function(){this.G=!1},f.segmentDownloaded=function(e,t,n,r){var i=e;this.g.removeLatencyFromFirstPacketTime&&r&&r.packetNumber===1&&r.timeToFirstByte&&(i=e-r.timeToFirstByte),i>=this.g.cacheLoadThreshold&&this.u.sample(i,t),n&&this.B!=null&&this.G&&jg(this)},f.trySuggestStreams=function(){this.G&&(this.B=Date.now(),jg(this,!0))},f.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=navigator.connection.downlink*1e6),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.u.getBandwidthEstimate(e),this.F?this.F.getBandwidthEstimate(e):e)},f.setVariants=function(e){return Si(e,this.l)?!1:(this.l=e,!0)},f.playbackRateChanged=function(e){this.I=e},f.setMediaElement=function(e){function t(){n.m.ka(GT)}var n=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in U&&(this.h=new ResizeObserver(t),this.h.observe(this.o)),this.j.D(e,"enterpictureinpicture",function(r){r.pictureInPictureWindow&&(n.i=r.pictureInPictureWindow,n.j.D(n.i,"resize",t))}),this.j.D(e,"leavepictureinpicture",function(){n.i&&n.j.Ma(n.i,"resize",t),n.i=null})},f.setCmsdManager=function(e){this.F=e},f.configure=function(e){this.g=e,this.u&&this.g&&this.u.configure(this.g.advanced)};function jg(e,t){if(t===void 0||!t){if(!e.J){if(t=e.u,!(t.g>=t.i))return;e.J=!0,e.B-=(e.g.switchInterval-e.g.minTimeToSwitch)*1e3}if(Date.now()-e.B<e.g.switchInterval*1e3)return}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.H(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function dd(e,t,n,r,i){if(e.F){var a=e.F.ji();a&&(n=n.filter(function(o){return o.bandwidth&&a?o.bandwidth<=a:!0}))}return t&&(n=n.filter(function(o){return cu(o,t,{width:i,height:r})})),n.sort(function(o,s){return o.bandwidth-s.bandwidth})}function HT(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&(n=n.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,i){return r.width-i.width})}q("shaka.abr.SimpleAbrManager",et),et.prototype.configure=et.prototype.configure,et.prototype.setCmsdManager=et.prototype.setCmsdManager,et.prototype.setMediaElement=et.prototype.setMediaElement,et.prototype.playbackRateChanged=et.prototype.playbackRateChanged,et.prototype.setVariants=et.prototype.setVariants,et.prototype.getBandwidthEstimate=et.prototype.getBandwidthEstimate,et.prototype.trySuggestStreams=et.prototype.trySuggestStreams,et.prototype.segmentDownloaded=et.prototype.segmentDownloaded,et.prototype.disable=et.prototype.disable,et.prototype.enable=et.prototype.enable,et.prototype.chooseVariant=et.prototype.chooseVariant,et.prototype.init=et.prototype.init,et.prototype.release=et.prototype.release,et.prototype.stop=et.prototype.stop;var GT=1;function Og(e,t){var n=Xn();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Bg(e){var t,n;return C(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new M(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(Math.random()*2-1)*e.o),b(r,new Promise(function(i){new ve(i).ka(n/1e3)}),2))}e.h*=e.m,G(r)})}function Xn(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Be(){var e,t,n=new Promise(function(r,i){e=r,t=i});return n.resolve=e,n.reject=t,n}Be.prototype.resolve=function(){},Be.prototype.reject=function(){};function ot(e,t){this.promise=e,this.i=t,this.g=null}function ri(e){return new ot(Promise.reject(e),function(){return Promise.resolve()})}function fd(){var e=Promise.reject(new M(2,7,7001));return e.catch(function(){}),new ot(e,function(){return Promise.resolve()})}function ha(e){return new ot(Promise.resolve(e),function(){return Promise.resolve()})}function Fg(e){return new ot(e,function(){return e.catch(function(){})})}ot.prototype.abort=function(){return this.g||(this.g=this.i()),this.g};function Vg(e){return new ot(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}ot.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},ot.prototype.Xa=function(e,t){function n(s){return function(u){if(i.g&&s)a.reject(o);else{var l=s?e:t;l?r=KT(l,u,a):(s?a.resolve:a.reject)(u)}}}function r(){return a.reject(o),i.abort()}var i=this,a=new Be;a.catch(function(){});var o=new M(2,7,7001);return this.promise.then(n(!0),n(!1)),new ot(a,function(){return r()})};function KT(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(i){return n.reject(i),function(){return Promise.resolve()}}}er.Object.defineProperties(ot.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g!==null}}}),q("shaka.util.AbortableOperation",ot),ot.prototype.chain=ot.prototype.Xa,ot.prototype.finally=ot.prototype.finally,ot.all=Vg,ot.prototype.abort=ot.prototype.abort,ot.notAbortable=Fg,ot.completed=ha,ot.aborted=fd,ot.failed=ri;function Y(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=U.performance&&U.performance.now?U.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Hg(e){var t=new Y(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Y.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Y.prototype.stopImmediatePropagation=function(){this.g=!0},Y.prototype.stopPropagation=function(){},q("shaka.util.FakeEvent",Y);var mu={wl:"abrstatuschanged",xl:"adaptation",yl:"audiotrackchanged",zl:"audiotrackschanged",Al:"boundarycrossed",Bl:"buffering",Cl:"canupdatestarttime",Dl:"complete",El:"currentitemchanged",Fl:"downloadcompleted",Gl:"downloadfailed",Hl:"downloadheadersreceived",Il:"drmsessionupdate",Jl:"emsg",Pl:"itemsinserted",Ql:"itemsremoved",gm:"prft",Error:"error",Kl:"expirationupdated",Ll:"firstquartile",Ml:"gapjumped",Rl:"keystatuschanged",Ul:"loaded",Vl:"loading",Xl:"manifestparsed",Yl:"manifestupdated",Zl:"mediaqualitychanged",$l:"mediasourcerecovered",am:"metadataadded",Metadata:"metadata",bm:"midpoint",dm:"nospatialvideoinfo",fm:"onstatechange",hm:"ratechange",lm:"segmentappended",nm:"sessiondata",om:"spatialvideoinfo",pm:"stalldetected",qm:"started",rm:"statechanged",sm:"streaming",tm:"textchanged",um:"texttrackvisibility",vm:"thirdquartile",wm:"timelineregionadded",xm:"timelineregionenter",ym:"timelineregionexit",zm:"trackschanged",Bm:"unloading",Dm:"variantchanged"};function Oe(){this.ab=new Fs,this.Je=this}Oe.prototype.addEventListener=function(e,t){this.ab&&this.ab.push(e,t)},Oe.prototype.removeEventListener=function(e,t){this.ab&&this.ab.remove(e,t)},Oe.prototype.dispatchEvent=function(e){if(!this.ab)return!0;var t=this.ab.get(e.type)||[],n=this.ab.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Je,e.currentTarget=this.Je;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Oe.prototype.release=function(){this.ab=null};function pa(){this.g=[]}function _i(e,t){e.g.push(t.finally(function(){Kn(e.g,t)}))}pa.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Xe(e,t,n,r,i,a,o){Oe.call(this),this.i=null,this.j=!1,this.u=new pa,this.g=new Set,this.h=new Set,this.o=e||null,this.m=t||null,this.B=n||null,this.C=r||null,this.F=i||null,this.H=a||null,this.G=o||null,this.l=new Map}it(Xe,Oe),f=Xe.prototype,f.configure=function(e){this.i=e};function Dr(e,t,n,r){r=r===void 0?!1:r,n=n||zg;var i=yu.get(e);(!i||n>=i.priority)&&yu.set(e,{priority:n,Bf:t,Ik:r})}function Gg(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(e=m(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}f.Lk=function(e){this.g.add(e)},f.kl=function(e){this.g.delete(e)},f.vj=function(){this.g.clear()},f.Mk=function(e){this.h.add(e)},f.ll=function(e){this.h.delete(e)},f.wj=function(){this.h.clear()},f.Wh=function(){this.l.clear()};function ht(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}f.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),Oe.prototype.release.call(this),this.u.destroy()},f.request=function(e,t,n){var r=this,i=new Wg;if(this.j){var a=Promise.reject(new M(2,7,7001));return a.catch(function(){}),new vu(a,function(){return Promise.resolve()},i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Wn(t.retryParameters):Xn(),t.uris=Wn(t.uris),a=qT(this,e,t,n);var o=a.Xa(function(){return Kg(r,e,t,n,new Og(t.retryParameters,!1),0,null,i)}),s=o.Xa(function(h){return WT(r,e,h,n)}),u=Date.now(),l=0;a.promise.then(function(){l=Date.now()-u},function(){});var c=0;o.promise.then(function(){c=Date.now()},function(){});var d=s.Xa(function(h){var p=Date.now()-c,g=h.response;return g.timeMs+=l,g.timeMs+=p,h.jk||!r.o||g.fromCache||t.method=="HEAD"||e!=Ln||r.o(g.timeMs,g.data.byteLength,qg(n),t,n),r.G&&r.G(e,g,n),g},function(h){throw h&&(h.severity=2),h});return a=new vu(d.promise,function(){return d.abort()},i),_i(this.u,a),a};function qT(e,t,n,r){function i(s){a=a.Xa(function(){return n.body&&(n.body=Dn(n.body)),s(t,n,r)})}var a=ha(void 0);e.F&&i(e.F),e=m(e.g);for(var o=e.next();!o.done;o=e.next())i(o.value);return a.Xa(void 0,function(s){throw s instanceof M&&s.code==7001?s:new M(2,1,1006,s)})}function Kg(e,t,n,r,i,a,o,s){e.i.forceHTTP&&(n.uris[a]=n.uris[a].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[a]=n.uris[a].replace("http://","https://")),a>0&&e.H&&e.H(t,r,n.uris[a],n.uris[a-1]);var u=new st(n.uris[a]),l=u.jc,c=!1;l||(l=location.protocol,l=l.slice(0,-1),Vs(u,l),n.uris[a]=u.toString()),l=l.toLowerCase();var d=(l=yu.get(l))?l.Bf:null;if(!d)return ri(new M(2,1,1e3,u));var h=l.Ik;(u=e.l.get(u.Db))&&(n.headers["common-access-token"]=u);var p=null,g=null,v=!1,y=!1,T;return Fg(Bg(i)).Xa(function(){if(e.j)return fd();T=Date.now();var w=0;n.requestStartTime=Date.now();var S=d(n.uris[a],n,t,function(x,I,A){p&&p.stop(),g&&g.ka(D/1e3),e.o&&t==Ln&&(w++,n.packetNumber=w,e.o(x,I,qg(r),n,r),c=!0,s.g=A)},function(x){y=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(x,n,t)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!h)return S;var k=n.retryParameters.connectionTimeout;k&&(p=new ve(function(){v=!0,S.abort()}),p.ka(k/1e3));var D=n.retryParameters.stallTimeout;return D&&(g=new ve(function(){v=!0,S.abort()})),S}).Xa(function(w){p&&p.stop(),g&&g.stop(),w.timeMs==null&&(w.timeMs=Date.now()-T);var S=w.headers["common-access-token"];if(S){var k=new st(w.uri);e.l.set(k.Db,S)}return S={response:w,jk:c},!y&&e.m&&e.m(w.headers,n,t),e.B&&e.B(n,w),S},function(w){if(p&&p.stop(),g&&g.stop(),e.C){var S=null,k=0;w instanceof M&&(S=w,w.code==1001&&(k=w.data[1])),e.C(n,S,k,v)}if(e.j)return fd();if(v&&(w=new M(1,1,1003,n.uris[a],t)),w instanceof M){if(w.code==7001)throw w;if(w.code==1010)throw o;if(w.severity==1){if(S=new Map().set("error",w),S=new Y("retry",S),S.cancelable=!0,e.dispatchEvent(S),S.defaultPrevented)throw w;return a=(a+1)%n.uris.length,Kg(e,t,n,r,i,a,w,s)}}throw w})}function WT(e,t,n,r){var i=ha(void 0);e=m(e.h);for(var a=e.next(),o={};!a.done;o={Pi:void 0},a=e.next())o.Pi=a.value,i=i.Xa((function(s){return function(){var u=n.response;return u.data&&(u.data=Dn(u.data)),(0,s.Pi)(t,u,r)}})(o));return i.Xa(function(){return n},function(s){var u=2;if(s instanceof M){if(s.code==7001)throw s;u=s.severity}throw new M(u,1,1007,s)})}function qg(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.Xc)return!1}return!0}q("shaka.net.NetworkingEngine",Xe),Xe.prototype.request=Xe.prototype.request,Xe.prototype.destroy=Xe.prototype.destroy,Xe.makeRequest=ht,Xe.defaultRetryParameters=function(){return Xn()},Xe.prototype.clearCommonAccessTokenMap=Xe.prototype.Wh,Xe.prototype.clearAllResponseFilters=Xe.prototype.wj,Xe.prototype.unregisterResponseFilter=Xe.prototype.ll,Xe.prototype.registerResponseFilter=Xe.prototype.Mk,Xe.prototype.clearAllRequestFilters=Xe.prototype.vj,Xe.prototype.unregisterRequestFilter=Xe.prototype.kl,Xe.prototype.registerRequestFilter=Xe.prototype.Lk,Xe.unregisterScheme=function(e){yu.delete(e)},Xe.registerScheme=Dr,Xe.prototype.configure=Xe.prototype.configure;function Wg(){this.g=0}Xe.NumBytesRemainingClass=Wg;function vu(e,t,n){ot.call(this,e,t),this.h=n}it(vu,ot),Xe.PendingRequest=vu;var Ln=1;Xe.RequestType={MANIFEST:0,SEGMENT:Ln,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8,CMCD:9},Xe.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var zg=3;Xe.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:zg};var yu=new Map;function ga(e){this.g=!1,this.h=new Be,this.i=e}ga.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Ge(e,t){if(e.g)throw t instanceof M&&t.code==7003?t:new M(2,7,7003,t)}function hd(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function zT(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function ma(e){for(var t=new Map,n=m(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function pd(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function We(e,t){this.h=Zt(e),this.i=t==Xg,this.g=0}f=We.prototype,f.Ka=function(){return this.g<this.h.byteLength},f.Pa=function(){return this.g},f.getLength=function(){return this.h.byteLength},f.Z=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw Rr()}},f.Ca=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw Rr()}},f.U=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw Rr()}},f.dh=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw Rr()}},f.Fd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw Rr()}if(t>2097151)throw new M(2,3,3001);return this.g+=8,t*4294967296+e},f.Tb=function(e,t){if(this.g+e>this.h.byteLength)throw Rr();var n=oe(this.h,this.g,e);return this.g+=e,t?new Uint8Array(n):n},f.skip=function(e){if(this.g+e>this.h.byteLength)throw Rr();this.g+=e},f.Qi=function(e){if(this.g<e)throw Rr();this.g-=e},f.seek=function(e){if(e<0||e>this.h.byteLength)throw Rr();this.g=e},f.Yc=function(){for(var e=this.g;this.Ka()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=oe(this.h,e,this.g-e),this.g+=1,$e(e)};function Rr(){return new M(2,3,3e3)}q("shaka.util.DataViewReader",We),We.prototype.readTerminatedString=We.prototype.Yc,We.prototype.seek=We.prototype.seek,We.prototype.rewind=We.prototype.Qi,We.prototype.skip=We.prototype.skip,We.prototype.readBytes=We.prototype.Tb,We.prototype.readUint64=We.prototype.Fd,We.prototype.readInt32=We.prototype.dh,We.prototype.readUint32=We.prototype.U,We.prototype.readUint16=We.prototype.Ca,We.prototype.readUint8=We.prototype.Z,We.prototype.getLength=We.prototype.getLength,We.prototype.getPosition=We.prototype.Pa,We.prototype.hasMoreData=We.prototype.Ka;var Xg=1;We.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Xg};function Fe(){this.i=new Map,this.h=new Map,this.g=!1}f=Fe.prototype,f.box=function(e,t){return e=Yg(e),this.i.set(e,XT),this.h.set(e,t),this},f.S=function(e,t){return e=Yg(e),this.i.set(e,Jg),this.h.set(e,t),this},f.stop=function(){this.g=!0},f.parse=function(e,t,n){for(e=new We(e,0),this.g=!1;e.Ka()&&!this.g;)this.Cd(0,e,t,n)},f.Cd=function(e,t,n,r){var i=t.Pa();if(r&&i+8>t.getLength())this.g=!0;else{var a=t.U(),o=t.U(),s=wu(o),u=!1;switch(a){case 0:a=t.getLength()-i;break;case 1:if(r&&t.Pa()+8>t.getLength()){this.g=!0;return}a=t.Fd(),u=!0}var l=this.h.get(o);if(l){var c=null,d=null;if(this.i.get(o)==Jg){if(r&&t.Pa()+4>t.getLength()){this.g=!0;return}d=t.U(),c=d>>>24,d&=16777215}o=i+a,n&&o>t.getLength()&&(o=t.getLength()),r&&o>t.getLength()?this.g=!0:(o-=t.Pa(),t=o>0?t.Tb(o,!1):new Uint8Array(0),t=new We(t,0),l({name:s,parser:this,partialOkay:n||!1,stopOnPartial:r||!1,version:c,flags:d,reader:t,size:a,start:i+e,has64BitSize:u}))}else t.skip(Math.min(i+a-t.Pa(),t.getLength()-t.Pa()))}};function he(e){for(var t=ii(e);e.reader.Ka()&&!e.parser.g;)e.parser.Cd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function Pr(e){for(var t=ii(e),n=e.reader.U(),r=0;r<n&&(e.parser.Cd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial),!e.parser.g);r++);}function dn(e){var t=ii(e);for(e.reader.skip(78);e.reader.Ka()&&!e.parser.g;)e.parser.Cd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function bu(e){var t=ii(e);e.reader.skip(8);var n=e.reader.Ca();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.Ka()&&!e.parser.g;)e.parser.Cd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function va(e,t){return function(n){e(n.reader.Tb(n.reader.getLength()-n.reader.Pa(),t))}}function Yg(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function wu(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function ii(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}q("shaka.util.Mp4Parser",Fe),Fe.headerSize=ii,Fe.typeToString=wu,Fe.allData=va,Fe.audioSampleEntry=bu,Fe.visualSampleEntry=dn,Fe.sampleDescription=Pr,Fe.children=he,Fe.prototype.parseNext=Fe.prototype.Cd,Fe.prototype.parse=Fe.prototype.parse,Fe.prototype.stop=Fe.prototype.stop,Fe.prototype.fullBox=Fe.prototype.S,Fe.prototype.box=Fe.prototype.box;var XT=0,Jg=1;function gd(e){var t=this;this.g=[],this.h=[],this.data=[],new Fe().box("moov",he).box("moof",he).S("pssh",function(n){if(!(n.version>1)){var r=oe(n.reader.h,-12,n.size);if(t.data.push(r),r=n.reader.Tb(16,!1),t.g.push(Sr(r)),n.version>0){r=n.reader.U();for(var i=0;i<r;i++){var a=n.reader.Tb(16,!1);a=Sr(a),t.h.push(a)}}}}).parse(e)}function Tu(e,t,n,r){var i=e.length,a=12+t.length+4+i;r>0&&(a+=4+16*n.size);var o=new Uint8Array(a),s=Zt(o),u=0;if(s.setUint32(u,a),u+=4,s.setUint32(u,1886614376),u+=4,r<1?s.setUint32(u,0):s.setUint32(u,16777216),u+=4,o.set(t,u),u+=t.length,r>0)for(s.setUint32(u,n.size),u+=4,t=m(n),n=t.next();!n.done;n=t.next())n=ki(n.value),o.set(n,u),u+=n.length;return s.setUint32(u,i),o.set(e,u+4),o}function Su(e){var t=this;this.F=e,this.l=this.B=null,this.$=this.T=!1,this.J=0,this.g=null,this.o=new Pe,this.i=new Map,this.X=[],this.C=new Map,this.K=!1,this.m=new Be,this.h=null,this.u=function(n){n.severity==2&&t.m.reject(n),e.onError(n)},this.ba=new Map,this.ma=new Map,this.M=new ve(function(){return aS(t)}),this.R=!1,this.N=[],this.oa=!1,this.G=new ve(function(){sS(t)}),this.m.catch(function(){}),this.j=new ga(function(){return YT(t)}),this.O=!1,this.H=this.I=null,this.V=function(){return!1}}f=Su.prototype,f.destroy=function(){return this.j.destroy()};function YT(e){return C(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.G.stop(),e.G=null,e.M.stop(),e.M=null,b(t,Do(e),2);case 2:if(!e.l){t.A(3);break}return le(t,4),b(t,e.l.setMediaKeys(null),6);case 6:pe(t,5);break;case 4:ce(t);case 5:e.l=null;case 3:e.g=null,e.B=null,e.C=new Map,e.h=null,e.u=function(){},e.F=null,e.O=!1,e.I=null,G(t)}})}f.configure=function(e,t){this.h=e,t&&(this.V=t),this.G&&this.T&&this.g&&this.G.Ea(this.h.updateExpirationTime)};function JT(e,t,n){return e.$=!0,e.C=new Map,e.R=n,Qg(e,t,!1)}function $g(e,t,n,r){r=r===void 0?!0:r,e.C=new Map,n=m(n);for(var i=n.next();!i.done;i=n.next())e.C.set(i.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),i=n.next();!i.done;i=n.next())i=i.value,e.C.set(i.sessionId,{initData:i.initData,initDataType:i.initDataType});return e.R=e.C.size>0,Qg(e,t,r)}function $T(e,t,n,r,i,a){var o,s,u,l,c;return C(function(d){return d.g==1?(o=[],a.length&&o.push(a[0].contentType),i.length&&o.push(i[0].contentType),s=function(h){return h=xr(t,h,null),h.licenseServerUri=n,h.serverCertificate=r,h.persistentStateRequired=!0,h.sessionType="persistent-license",h},u=_g(o),u.video&&(l=s(a[0].encryptionScheme||""),u.video.drmInfos.push(l)),u.audio&&(c=s(i[0].encryptionScheme||""),u.audio.drmInfos.push(c)),b(d,ld([u],!0,e.O,[]),2)):(Ge(e.j),d.return(nm(e,[u])))})}function Qg(e,t,n){var r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k;return C(function(D){if(D.g==1){for(um(e.h.clearKeys,t),r=t.some(function(x){return!!(x.video&&x.video.drmInfos.length||x.audio&&x.audio.drmInfos.length)}),i=ma(e.h.servers),a=ma(e.h.advanced||{}),!r&&n&&lS(t,i),o=new WeakSet,s=m(t),u=s.next();!u.done;u=s.next())for(l=u.value,c=sm(l),d=m(c),h=d.next();!h.done;h=d.next())p=h.value,o.has(p)||(o.add(p),dS(p,i,a,e.h.keySystemsMapping));for(g=function(x,I){var A=[];x=m(x);for(var R=x.next();!R.done;R=x.next()){R=R.value;var E=R[I]||a.has(R.keySystem)&&a.get(R.keySystem)[I]||"",P;if((P=E=="")&&(P=(P=R.keySystem)?!!P.match(/^com\.widevine\.alpha/):!1),P&&(I=="audioRobustness"?E=[e.h.defaultAudioRobustnessForWidevine]:I=="videoRobustness"&&(E=[e.h.defaultVideoRobustnessForWidevine])),typeof E=="string")A.push(R);else if(Array.isArray(E))for(E.length===0&&(E=[""]),E=m(E),P=E.next();!P.done;P=E.next()){var L={};A.push(Object.assign({},R,(L[I]=P.value,L)))}}return A},v=new WeakSet,y=m(t),T=y.next();!T.done;T=y.next())w=T.value,w.video&&!v.has(w.video)&&(w.video.drmInfos=g(w.video.drmInfos,"videoRobustness"),w.video.drmInfos=g(w.video.drmInfos,"audioRobustness"),v.add(w.video)),w.audio&&!v.has(w.audio)&&(w.audio.drmInfos=g(w.audio.drmInfos,"videoRobustness"),w.audio.drmInfos=g(w.audio.drmInfos,"audioRobustness"),v.add(w.audio));return b(D,ld(t,e.R,e.O,e.h.preferredKeySystems),2)}return Ge(e.j),S=r||i.size>0,S?(k=nm(e,t),D.return(r?k:k.catch(function(){}))):(e.T=!0,D.return(Promise.resolve()))})}function Zg(e){var t;return C(function(n){switch(n.g){case 1:if(e.l.mediaKeys)return n.return();if(!e.I){n.A(2);break}return b(n,e.I,3);case 3:return Ge(e.j),n.return();case 2:return le(n,4),e.I=e.l.setMediaKeys(e.B),b(n,e.I,6);case 6:pe(n,5);break;case 4:t=ce(n),e.u(new M(2,6,6003,t.message));case 5:Ge(e.j),G(n)}})}function QT(e,t){return C(function(n){if(n.g==1)return b(n,Zg(e),2);Mo(e,t.initDataType,oe(t.initData)),G(n)})}f.Vb=function(e){var t=this,n,r;return C(function(i){if(i.g==1)return t.l===e?i.return():t.B?(t.l=e,t.h.delayLicenseRequestUntilPlayed&&t.o.Aa(t.l,"play",function(){for(var a=m(t.N),o=a.next();!o.done;o=a.next())yd(t,o.value);t.oa=!0,t.N=[]}),t.l.remote?(t.o.D(t.l.remote,"connect",function(){return Do(t)}),t.o.D(t.l.remote,"connecting",function(){return Do(t)}),t.o.D(t.l.remote,"disconnect",function(){return Do(t)})):"webkitCurrentPlaybackTargetIsWireless"in t.l&&t.o.D(t.l,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Do(t)}),t.H=t.g&&t.g.initData.find(function(a){return a.initData.length>0})||null,n=t.g.keySystem,(r=ge().Vg(n))||!t.H&&t.g.keySystem==="com.apple.fps"&&!t.C.size?i.A(2):b(i,Zg(t),2)):(t.o.Aa(e,"encrypted",function(){t.u(new M(2,6,6010))}),i.return());em(t).catch(function(){}),!r&&(t.H||t.C.size||t.h.parseInbandPsshEnabled)||t.o.D(t.l,"encrypted",function(a){return QT(t,a)}),G(i)})};function ZT(e){var t,n,r,i,a;return C(function(o){switch(o.g){case 1:if(!e.B||!e.g)return o.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){o.A(2);break}return t=ht([e.g.serverCertificateUri],e.h.retryParameters),le(o,3),n=e.F.wc.request(5,t,{isPreload:e.V()}),b(o,n.promise,5);case 5:r=o.h,e.g.serverCertificate=oe(r.data),pe(o,4);break;case 3:throw i=ce(o),new M(2,6,6017,i);case 4:if(e.j.g)return o.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?o.return():(le(o,6),b(o,e.B.setServerCertificate(e.g.serverCertificate),8));case 8:pe(o,0);break;case 6:throw a=ce(o),new M(2,6,6004,a.message)}})}function eS(e,t){var n,r,i;return C(function(a){if(a.g==1)return b(a,im(e,t,{initData:null,initDataType:null}),2);if(a.g!=3)return n=a.h,n?(r=[],(i=e.i.get(n))&&(i.Kb=new Be,r.push(i.Kb)),r.push(n.remove()),b(a,Promise.all(r),3)):a.return();e.i.delete(n),G(a)})}function em(e){var t,n,r,i,a;return C(function(o){if(o.g==1)return e.C.size?(e.C.forEach(function(s,u){im(e,u,s)}),b(o,e.m,3)):o.A(2);if(o.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),t.size>0&&uS(e))return o.return(e.m);e.K=!1,e.m=new Be,e.m.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=m(n),i=r.next();!i.done;i=r.next())a=i.value,Mo(e,a.initDataType,a.initData);return Ro(e)&&e.m.resolve(),o.return(e.m)})}function Mo(e,t,n){if(n.length){try{n=e.h.initDataTransform(n,t,e.g)}catch(o){t=o,o instanceof M||(t=new M(2,6,6016,o)),e.u(t);return}if(e.h.ignoreDuplicateInitData){var r=e.i.values();r=m(r);for(var i=r.next();!i.done;i=r.next())if(wr(n,i.value.initData))return;var a=!1;if(e.C.forEach(function(o){!a&&wr(n,o.initData)&&(a=!0)}),a)return}e.K=!0,e.i.size>0&&Ro(e)&&(e.m.resolve(),e.K=!1,e.m=new Be,e.m.catch(function(){})),rS(e,t,n,e.g.sessionType)}}function tm(e){return e=e.i.keys(),e=hd(e,function(t){return t.sessionId}),Array.from(e)}f.Kg=function(){var e=this,t=this.i.keys();return t=hd(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},f.$d=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};function tS(e){return e.J?e.J:NaN}f.$e=function(){return pd(this.ma)};function nm(e,t){var n,r,i,a,o,s,u;return C(function(l){switch(l.g){case 1:if(n=new Map,r=nS(e,t,n),!r)throw navigator.requestMediaKeySystemAccess?new M(2,6,6001):new M(2,6,6020);Ge(e.j),le(l,2),r.getConfiguration();var c=i=e.h.keySystemsMapping[r.keySystem]||r.keySystem,d=n.get(i),h=[],p=[],g=[],v=[],y=[],T=new Set,w=new Set;cS(d,h,p,v,g,y,T,w);var S=e.R?"persistent-license":"temporary";for(c={keySystem:c,encryptionScheme:h[0],licenseServerUri:p[0],distinctiveIdentifierRequired:d[0].distinctiveIdentifierRequired,persistentStateRequired:d[0].persistentStateRequired,sessionType:d[0].sessionType||S,audioRobustness:d[0].audioRobustness||"",videoRobustness:d[0].videoRobustness||"",serverCertificate:v[0],serverCertificateUri:g[0],initData:y,keyIds:T,mediaTypes:d[0].mediaTypes},w.size>0&&(c.keySystemUris=w),d=m(d),w=d.next();!w.done;w=d.next())w=w.value,w.distinctiveIdentifierRequired&&(c.distinctiveIdentifierRequired=w.distinctiveIdentifierRequired),w.persistentStateRequired&&(c.persistentStateRequired=w.persistentStateRequired);if(e.g=c,!e.g.licenseServerUri)throw new M(2,6,6012,e.g.keySystem);return b(l,r.createMediaKeys(),4);case 4:if(a=l.h,Ge(e.j),e.B=a,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.B)){l.A(5);break}return le(l,6),b(l,e.B.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),8);case 8:if(o=l.h,o!="usable")throw new M(2,6,6018);Ge(e.j),pe(l,5,2);break;case 6:throw s=ce(l,2),s instanceof M?s:new M(2,6,6019,s.message);case 5:return e.T=!0,e.G.Ea(e.h.updateExpirationTime),b(l,ZT(e),9);case 9:Ge(e.j),pe(l,0);break;case 2:throw u=ce(l),Ge(e.j,u),e.g=null,u instanceof M?u:new M(2,6,6002,u.message)}})}function nS(e,t,n){for(var r=m(t),i=r.next();!i.done;i=r.next()){i=m(sm(i.value));for(var a=i.next();!a.done;a=i.next())a=a.value,n.has(a.keySystem)||n.set(a.keySystem,[]),n.get(a.keySystem).push(a)}if(n.size==1&&n.has(""))throw new M(2,6,6e3);r=e.h.preferredKeySystems,r.length||(i=ma(e.h.servers),i.size==1&&(r=Array.from(i.keys()))),i=m(r);var o=i.next();for(a={};!o.done;a={Ki:void 0},o=i.next()){a.Ki=o.value,o=m(t);for(var s=o.next();!s.done;s=o.next())if(s=s.value.decodingInfos.find((function(d){return function(h){return h.supported&&h.keySystemAccess!=null&&h.keySystemAccess.keySystem==d.Ki}})(a)))return s.keySystemAccess}for(i=m([!0,!1]),a=i.next();!a.done;a=i.next())for(a=a.value,o=m(t),s=o.next();!s.done;s=o.next()){s=m(s.value.decodingInfos);for(var u=s.next();!u.done;u=s.next())if(u=u.value,u.supported&&u.keySystemAccess){var l=u.keySystemAccess.keySystem;if(!r.includes(l)){var c=n.get(l);for(!c&&e.h.keySystemsMapping[l]&&(c=n.get(e.h.keySystemsMapping[l])),l=m(c),c=l.next();!c.done;c=l.next())if(!!c.value.licenseServerUri==a)return u.keySystemAccess}}}return null}function md(e){Ro(e)&&e.m.resolve()}function rm(e,t){new ve(function(){t.loaded=!0,md(e)}).ka(hS)}function im(e,t,n){var r,i,a,o,s,u,l;return C(function(c){switch(c.g){case 1:try{r=e.B.createSession("persistent-license")}catch(d){return i=new M(2,6,6005,d.message),e.u(i),c.return(Promise.reject(i))}return e.o.D(r,"message",function(d){vd(e)?e.N.push(d):yd(e,d)}),e.o.D(r,"keystatuseschange",function(d){return am(e,d)}),a={initData:n.initData,initDataType:n.initDataType,loaded:!1,Yg:1/0,Kb:null,type:"persistent-license"},e.i.set(r,a),le(c,2),b(c,r.load(t),4);case 4:return o=c.h,Ge(e.j),o||(e.i.delete(r),s=e.h.persistentSessionOnlinePlayback?1:2,e.u(new M(s,6,6013)),a.loaded=!0),rm(e,a),md(e),c.return(r);case 2:u=ce(c),Ge(e.j,u),e.i.delete(r),l=e.h.persistentSessionOnlinePlayback?1:2,e.u(new M(l,6,6005,u.message)),a.loaded=!0,md(e);case 3:return c.return(Promise.resolve())}})}function rS(e,t,n,r){try{var i=e.B.createSession(r)}catch(a){e.u(new M(2,6,6005,a.message));return}e.o.D(i,"message",function(a){vd(e)?e.N.push(a):yd(e,a)}),e.o.D(i,"keystatuseschange",function(a){return am(e,a)}),e.i.set(i,{initData:n,initDataType:t,loaded:!1,Yg:1/0,Kb:null,type:r}),e.h.logLicenseExchange&&Tr(n),i.generateRequest(t,n).catch(function(a){if(!e.j.g){e.i.delete(i);var o=a.errorCode;if(o&&o.systemCode){var s=o.systemCode;s<0&&(s+=4294967296),s="0x"+s.toString(16)}e.u(new M(2,6,6006,a.message,a,s))}})}function vd(e){return e.l?e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.oa:!e.$&&e.h.delayLicenseRequestUntilPlayed}function iS(e){return C(function(t){return t.g==1?!e.K||vd(e)?t.A(0):b(t,e.m,3):b(t,Promise.all(e.X.map(function(n){return n.promise})),0)})}function yd(e,t){var n,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T;C(function(w){switch(w.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Tr(t.message),r=e.i.get(n),i=e.g.licenseServerUri,a=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&a&&a.individualizationServer&&(i=a.individualizationServer),o=ht([i],e.h.retryParameters),o.body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,o.drmInfo=e.g,r&&(o.initData=r.initData,o.initDataType=r.initDataType),a&&a.headers)for(s in a.headers)o.headers[s]=a.headers[s];if(e.g.keySystem==="org.w3.clearkey"){var S=o,k=e.g;try{var D=lr(S.body);if(D){var x=JSON.parse(D);x.type||(x.type=k.sessionType,S.body=qn(JSON.stringify(x)))}}catch{}}if(Hc(e.g.keySystem))if(S=Jr(o.body,!0,!0),S.includes("PlayReadyKeyMessage")){for(S=Di(S,"PlayReadyKeyMessage"),k=ir(S,"HttpHeader"),k=m(k),D=k.next();!D.done;D=k.next())x=D.value,D=ir(x,"name")[0],x=ir(x,"value")[0],o.headers[ut(D)]=ut(x);S=ir(S,"Challenge")[0],o.body=Rn(ut(S))}else o.headers["Content-Type"]="text/xml; charset=utf-8";return u=Date.now(),le(w,2),c=e.F.wc.request(2,o,{isPreload:e.V()}),e.X.push(c),b(w,c.promise,4);case 4:l=w.h,Kn(e.X,c),pe(w,3);break;case 2:return d=ce(w),e.j.g||(h={sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType},p=new M(2,6,6007,d,h),e.i.size==1?(e.u(p),r&&r.Kb&&r.Kb.reject(p)):(r&&r.Kb&&r.Kb.reject(p),e.i.delete(n),Ro(e)&&(e.m.resolve(),e.M.ka(.1)))),w.return();case 3:return e.j.g?w.return():(e.J+=(Date.now()-u)/1e3,e.h.logLicenseExchange&&Tr(l.data),le(w,5),b(w,n.update(l.data),7));case 7:pe(w,6);break;case 5:return v=(g=ce(w))&&g.message||String(g),y=new M(2,6,6008,v),e.u(y),r&&r.Kb&&r.Kb.reject(y),w.return();case 6:if(e.j.g)return w.return();T=new Y("drmsessionupdate"),e.F.onEvent(T),r&&(r.Kb&&r.Kb.resolve(),rm(e,r)),G(w)}})}function am(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(a,o){if(typeof o=="string"){var s=o;o=a,a=s}if(s=ge(),Hc(e.g.keySystem)&&o.byteLength==16&&s.Ff()){s=Zt(o);var u=s.getUint32(0,!0),l=s.getUint16(4,!0),c=s.getUint16(6,!0);s.setUint32(0,u,!1),s.setUint16(4,l,!1),s.setUint16(6,c,!1)}a!="status-pending"&&(n.loaded=!0),a=="expired"&&(r=!0),o=Sr(o).slice(0,32),e.ba.set(o,a)});var i=t.expiration-Date.now();(i<0||r&&i<1e3)&&n&&!n.Kb&&(e.i.delete(t),om(t)),Ro(e)&&(e.m.resolve(),e.M.ka(pS))}function aS(e){var t=e.ba,n=e.ma;n.clear(),t.forEach(function(r,i){return n.set(i,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.u(new M(2,6,6014)),e.F.zf(pd(n))}function oS(){var e,t,n,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L;return C(function(B){if(B.g==1){if(e="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(U.MediaKeys&&U.navigator&&U.navigator.requestMediaKeySystemAccess&&U.MediaKeySystemAccess&&U.MediaKeySystemAccess.prototype.getConfiguration)){for(t={},n=m(e),r=n.next();!r.done;r=n.next())i=r.value,t[i]=null;return B.return(t)}for(a="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),o=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],s=["150","2000","3000"],u={"com.widevine.alpha":o,"com.widevine.alpha.experiment":o,"com.microsoft.playready.recommendation":s},l=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],c=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],d={videoCapabilities:l,audioCapabilities:c,initDataTypes:["cenc","sinf","skd","keyids"]},h=[null,"cenc","cbcs"],p=new Map,g=ge(),v=function(O,N,_){var F,V,ue,z,Re,fe,je,Se,ye,Ie,De,Ee,be;return C(function(xe){switch(xe.g){case 1:return le(xe,2),b(xe,N.createMediaKeys(),5);case 5:F=xe.h;case 4:pe(xe,3);break;case 2:return ce(xe),xe.return();case 3:if(ue=(V=N.getConfiguration().sessionTypes)?V.includes("persistent-license"):!1,g.Ci()&&(ue=!1),z=N.getConfiguration().videoCapabilities,Re=N.getConfiguration().audioCapabilities,fe={persistentState:ue,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},p.get(O)?fe=p.get(O):p.set(O,fe),(je=z[0].encryptionScheme)&&!fe.encryptionSchemes.includes(je)&&fe.encryptionSchemes.push(je),(Se=z[0].robustness)&&!fe.videoRobustnessLevels.includes(Se)&&fe.videoRobustnessLevels.push(Se),(ye=Re[0].robustness)&&!fe.audioRobustnessLevels.includes(ye)&&fe.audioRobustnessLevels.push(ye),!(_&&"getStatusForPolicy"in F)){xe.A(0);break}Ie=m(a),De=Ie.next();case 7:if(De.done){xe.A(0);break}if(Ee=De.value,fe.minHdcpVersions.includes(Ee)){xe.A(8);break}return b(xe,F.getStatusForPolicy({minHdcpVersion:Ee}),10);case 10:if(be=xe.h,be=="usable")fe.minHdcpVersions.includes(Ee)||fe.minHdcpVersions.push(Ee);else{xe.A(0);break}case 8:De=Ie.next(),xe.A(7)}})},y=function(O,N,_,F,V){V=V===void 0?!1:V;var ue,z,Re,fe,je,Se,ye,Ie,De,Ee,be;return C(function(xe){switch(xe.g){case 1:for(le(xe,2),ue=Wn(d),z=m(ue.videoCapabilities),Re=z.next();!Re.done;Re=z.next())fe=Re.value,fe.encryptionScheme=N,fe.robustness=_;for(je=m(ue.audioCapabilities),Se=je.next();!Se.done;Se=je.next())ye=Se.value,ye.encryptionScheme=N,ye.robustness=F;return Ie=Wn(ue),Ie.persistentState="required",Ie.sessionTypes=["persistent-license"],De=[Ie,ue],be=ge(),be.Oa()=="MOBILE"?b(xe,su(5,navigator.requestMediaKeySystemAccess(O,De)),7):b(xe,navigator.requestMediaKeySystemAccess(O,De),6);case 6:Ee=xe.h,xe.A(5);break;case 7:Ee=xe.h;case 5:return b(xe,v(O,Ee,V),8);case 8:pe(xe,0);break;case 2:ce(xe),G(xe)}})},T=function(O){return!(ge().Ha()==="WEBKIT"&&O==="org.w3.clearkey")},w=[],S=m(e),k=S.next();!k.done;k=S.next())if(D=k.value,p.set(D,null),T(D)){for(x=!0,I=m(h),A=I.next();!A.done;A=I.next())R=A.value,w.push(y(D,R,"","",x)),x=!1;for(E=m(u[D]||[]),P=E.next();!P.done;P=E.next())L=P.value,w.push(y(D,null,L,"")),w.push(y(D,null,"",L))}return b(B,Promise.all(w),2)}return B.return(pd(p))})}function om(e){return C(function(t){if(t.g==1)return le(t,2),b(t,su(fS,Promise.all([e.close().catch(function(){}),e.closed])),4);if(t.g!=2)return pe(t,0);ce(t),G(t)})}function Do(e){var t;return C(function(n){return t=Array.from(e.i.entries()),e.i.clear(),b(n,Promise.all(t.map(function(r){r=m(r);var i=r.next().value,a=r.next().value;return C(function(o){if(o.g==1)return le(o,2),e.$||e.C.has(i.sessionId)||a.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?b(o,om(i),5):b(o,i.remove(),5);if(o.g!=2)return pe(o,0);ce(o),G(o)})})),0)})}function sm(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function sS(e){e.i.forEach(function(t,n){var r=t.Yg,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.F.onExpirationUpdated(n.sessionId,i),t.Yg=i)})}function Ro(e){return e=e.i.values(),zT(e,function(t){return t.loaded})}function uS(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.ba.get(n.value)!=="usable")return!1;return!0}function lS(e,t){var n=[];for(t.forEach(function(r,i){n.push({keySystem:i,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function cS(e,t,n,r,i,a,o,s){var u=[];e=m(e);for(var l=e.next(),c={};!l.done;c={La:void 0},l=e.next()){if(c.La=l.value,t.includes(c.La.encryptionScheme)||t.push(c.La.encryptionScheme),c.La.keySystem=="org.w3.clearkey"&&c.La.licenseServerUri.startsWith("data:application/json;base64,")?u.includes(c.La.licenseServerUri)||u.push(c.La.licenseServerUri):n.includes(c.La.licenseServerUri)||n.push(c.La.licenseServerUri),i.includes(c.La.serverCertificateUri)||i.push(c.La.serverCertificateUri),c.La.serverCertificate&&(r.some((function(p){return function(g){return wr(g,p.La.serverCertificate)}})(c))||r.push(c.La.serverCertificate)),c.La.initData){l=m(c.La.initData);for(var d=l.next(),h={};!d.done;h={Pg:void 0},d=l.next())h.Pg=d.value,a.some((function(p){return function(g){var v=p.Pg;return g.keyId&&g.keyId==v.keyId?!0:g.initDataType==v.initDataType&&wr(g.initData,v.initData)}})(h))||a.push(h.Pg)}if(c.La.keyIds)for(l=m(c.La.keyIds),d=l.next();!d.done;d=l.next())o.add(d.value);if(c.La.keySystemUris&&s)for(c=m(c.La.keySystemUris),l=c.next();!l.done;l=c.next())s.add(l.value)}if(u.length==1)n.push(u[0]);else if(u.length>0){for(t=[],u=m(u),r=u.next();!r.done;r=u.next())r=U.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,H(r.keys));u=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+U.btoa(u))}}function dS(e,t,n,r){var i=e.keySystem;i&&(i!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&t.get(i)&&(t=t.get(i),e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(i))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[i]&&(e.keySystem=r[i]),U.cast&&U.cast.__platform__&&i=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}function um(e,t){if(e=ma(e),e.size!=0){e=Jp(e),t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}var fS=1,hS=5,pS=.5;function gS(){this.g=Oi,this.j=new Map().set(Oi,2).set(ji,1),this.i=0,this.h=-1}function bd(e,t){var n=e.g!==t;return e.g=t,n&&t===Oi&&(e.i=Date.now()),n}var ji=0,Oi=1;function wd(e,t,n){this.h=e,this.i=t,this.g=n}function lm(e,t){return C(function(n){if(n.g==1)return b(n,PT(e.g,t,e.h.drm.preferredKeySystems,e.h.drm.keySystemsMapping),2);if(e.h.streaming.dontChooseCodecs||Ig(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes,e.h.preferredTextFormats),!t.variants.some(Co))throw new M(2,4,4032);return n.return(dm(e,t))})}function cm(e,t){var n=e.h.restrictions;e=e.i;var r=!1;t=m(t.variants);for(var i=t.next();!i.done;i=t.next()){i=i.value;var a=i.allowedByApplication;i.allowedByApplication=cu(i,n,e),a!=i.allowedByApplication&&(r=!0)}return r}function dm(e,t){var n=cm(e,t);if(t){var r=e.g?e.g.g:null;if(r&&e.g.B){for(var i=new Set,a=m(t.variants),o=a.next();!o.done;o=a.next())o=o.value,o.audio&&i.add(o.audio),o.video&&i.add(o.video);for(i=m(i),a=i.next();!a.done;a=i.next())fm(e,r.keySystem,a.value)}hm(e,t)}return n}function fm(e,t,n){n=m(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){for(var i=m(r.initData||[]),a=i.next();!a.done;a=i.next())a=a.value,Mo(e.g,a.initDataType,a.initData);i=e.g,i.g&&i.g.mediaTypes!==r.mediaTypes&&(i.g.mediaTypes=r.mediaTypes)}}function hm(e,t){function n(l){if(l&&!s.has(l)&&(s.add(l),l.keyIds.size)){l=m(l.keyIds);for(var c=l.next();!c.done;c=l.next()){c=c.value;var d=r[i?"00":c];d?pm.includes(d)&&o.add(d):a.add(c)}}}var r=e.g?e.g.$e():{};e=Object.keys(r);var i=e.length&&e[0]=="00";e=!1;var a=new Set,o=new Set,s=new WeakSet;t=m(t.variants);for(var u=t.next();!u.done;u=t.next()){if(u=u.value,!u.allowedByApplication)e=!0;else if(u.allowedByKeySystem)return;n(u.audio),n(u.video)}throw e={hasAppRestrictions:e,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(o)},new M(2,4,4012,e)}var pm=["output-restricted","internal-error"];q("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function Ht(e){if(Td.has(e))return Td.get(e);var t=U.ManagedMediaSource||U.MediaSource;return t?(t=t.isTypeSupported(e),Td.set(e,t),t):!1}function gm(){var e=U.ManagedMediaSource||U.MediaSource;return e&&e.prototype?!!e.prototype.setLiveSeekableRange&&!!e.prototype.clearLiveSeekableRange:!1}var Td=new Map;function xu(e,t){var n=null,r=null,i=null,a=null,o=e.U();return t&1&&(i=e.Fd()),t&2&&(a=e.U()),t&8&&(n=e.U()),t&16&&(r=e.U()),{trackId:o,Xd:n,Yd:r,rj:i,Ri:a}}function Au(e,t){return t==1?(t=e.U(),e=e.U(),{baseMediaDecodeTime:t*4294967296+e}):{baseMediaDecodeTime:e.U()}}function ku(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.U(),e.skip(4),e=e.Ca(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Iu(e,t,n){var r=e.U(),i=[],a=null;n&1&&(a=e.dh()),n&4&&e.skip(4);for(var o=0;o<r;o++){var s={nh:null,sampleSize:null,Gf:null};n&256&&(s.nh=e.U()),n&512&&(s.sampleSize=e.U()),n&1024&&e.skip(4),n&2048&&(s.Gf=t==0?e.U():e.dh()),i.push(s)}return{Hm:r,mh:i,qg:a}}function mm(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Ca();return e.skip(2),e.skip(2),e.skip(2),e=e.Ca()+e.Ca()/65536,{channelCount:t,sampleRate:e}}function Sd(e){return e=e.U(),{codec:wu(e)}}function mS(e){var t=null,n=null,r=e.Tb(4,!1),i=String.fromCharCode(r[0]);if(i+=String.fromCharCode(r[1]),i+=String.fromCharCode(r[2]),i+=String.fromCharCode(r[3]),i==="nclx"){switch(e.Ca()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.Ca(),e.Ca(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,ze:n}}function Po(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function fn(e){return(e<10?"0":"")+e}function ya(e){this.g=e}function ba(e){for(var t=[],n=m(e.g),r=n.next();!r.done;r=n.next()){var i=t,a=i.push,o=r.value;r=ke;var s=o.id+1,u=o.stream.width||0,l=o.stream.height||0;o.type=="audio"&&(l=u=0);var c=o.duration*o.timescale,d=Math.floor(c/(ai+1));switch(c=Math.floor(c%(ai+1)),s=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(H(Qe(s,4)),[0,0,0,0],H(Qe(d,4)),H(Qe(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],H(Qe(u,2)),[0,0],H(Qe(l,2)),[0,0])),s=ke("tkhd",s),u=ke,d=o.duration*o.timescale,l=Math.floor(d/(ai+1)),d=Math.floor(d%(ai+1)),c=o.stream.language,c=c.charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,l=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(H(Qe(o.timescale,4)),H(Qe(l,4)),H(Qe(d,4)),H(Qe(c,2)),[0,0])),l=ke("mdhd",l),d=o,c=new Uint8Array([]),d.type){case"video":c=yS.value();break;case"audio":c=bS.value()}d=ke("hdlr",c);e:{switch(o.type){case"video":o=ke("minf",ke("vmhd",AS.value()),Sm.value(),vm(o));break e;case"audio":o=ke("minf",ke("smhd",kS.value()),Sm.value(),vm(o));break e}o=new Uint8Array([])}o=u("mdia",l,d,o),r=r("trak",s,o),a.call(i,r)}for(t=dt.apply(Lt,H(t)),a=e.g[0],n=ke,r=a.duration*a.timescale,i=Math.floor(r/(ai+1)),r=Math.floor(r%(ai+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(H(Qe(a.timescale,4)),H(Qe(i,4)),H(Qe(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),i=ke("mvhd",i),r=[],e=m(e.g),u=e.next();!u.done;u=e.next())o=r,s=o.push,u=new Uint8Array([0,0,0,0].concat(H(Qe(u.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),u=ke("trex",u),s.call(o,u);if(e=dt.apply(Lt,H(r)),e=ke("mvex",e),r=[],a.encrypted){for(a=m(a.stream.drmInfos),o=a.next();!o.done;o=a.next())if(o=o.value,o.initData)for(o=m(o.initData),s=o.next();!s.done;s=o.next())r.push(s.value.initData);a=dt.apply(Lt,H(r))}else a=new Uint8Array([]);return e=n("moov",i,t,e,a),t=ES.value(),n=new Uint8Array(t.byteLength+e.byteLength),n.set(t),n.set(e,t.byteLength),n}function vm(e){var t=ke,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=ge().se()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var r=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,r=e.stream.height||0,e.Sa.byteLength>0)var i=ke("avcC",e.Sa);else{i=ke;for(var a=7,o=[],s=[],u=0,l=0,c=0,d=0;d<e.Bb.length;d++){var h=bm(e.Bb[d]);switch(h[0]&31){case 7:o.push(h),a+=h.length+2;break;case 8:s.push(h),a+=h.length+2}}for(o.length>0&&(u=o[0][1],c=o[0][2],l=o[0][3]),a=new Uint8Array(a),d=0,a[d++]=1,a[d++]=u,a[d++]=c,a[d++]=l,a[d++]=255,a[d++]=224|o.length,u=0;u<o.length;u++)a[d++]=(o[u].length&65280)>>8,a[d++]=o[u].length&255,a.set(o[u],d),d+=o[u].length;for(a[d++]=s.length,o=0;o<s.length;o++)a[d++]=(s[o].length&65280)>>8,a[d++]=s[o].length&255,a.set(s[o],d),d+=s[o].length;i=i("avcC",a)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(H(Qe(n,2)),H(Qe(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",s=ym(e),o=new Uint8Array([]),e.encrypted&&(o=Bi(e.stream,e.codecs),r="encv"),r=ke(r,n,i,s,o)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,i=e.stream.height||0,n=new Uint8Array([]),e.Sa.byteLength>0&&(n=ke("hvcC",e.Sa)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(H(Qe(r,2)),H(Qe(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="hvc1",s=ym(e),o=new Uint8Array([]),e.encrypted&&(o=Bi(e.stream,e.codecs),i="encv"),r=ke(i,r,n,s,o));break;case"audio":n=="mp3"?e=ke(".mp3",Lo(e)):n=="ac-3"?(n=ke("dac3",e.Ga),r="ac-3",i=new Uint8Array([]),e.encrypted&&(i=Bi(e.stream,e.codecs),r="enca"),e=ke(r,Lo(e),n,i)):n=="ec-3"?(n=ke("dec3",e.Ga),r="ec-3",i=new Uint8Array([]),e.encrypted&&(i=Bi(e.stream,e.codecs),r="enca"),e=ke(r,Lo(e),n,i)):n=="opus"?(n=ke("dOps",e.Ga),r="Opus",i=new Uint8Array([]),e.encrypted&&(i=Bi(e.stream,e.codecs),r="enca"),e=ke(r,Lo(e),n,i)):(e.Ga.byteLength>0?n=ke("esds",e.Ga):(n=ke,r=e.id+1,i=e.stream.channelsCount||2,o=e.stream.audioSamplingRate||44100,u=ra("audio",e.codecs.split(",")),l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},s=l[o],(u==="mp4a.40.5"||u==="mp4a.40.29")&&(s=l[o*2]),o=parseInt(u.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(H(Qe(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,o<<3|s>>>1,s<<7|i<<3,6,1,2])),n=n("esds",r)),r="mp4a",i=new Uint8Array([]),e.encrypted&&(i=Bi(e.stream,e.codecs),r="enca"),e=ke(r,Lo(e),n,i)),r=e}return e=ke("stsd",IS.value(),r),t("stbl",e,ke("stts",wS.value()),ke("stsc",TS.value()),ke("stsz",xS.value()),ke("stco",SS.value()))}function ym(e){if(!e.Za&&!e.$a)return new Uint8Array([]);var t=e.$a;return e=new Uint8Array([].concat(H(Qe(e.Za,4)),H(Qe(t,4)))),ke("pasp",e)}function Lo(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(H(Qe(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Bi(e,t){var n=ke;t=new Uint8Array([].concat(H(Qe(wm(t.split(".")[0]),4)))),t=ke("frma",t);var r="cenc",i=e.drmInfos[0];i&&i.encryptionScheme&&(r=i.encryptionScheme),r=new Uint8Array([0,0,0,0].concat(H(Qe(wm(r),4)),[0,1,0,0])),r=ke("schm",r),i=ke;var a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.drmInfos);for(var o=e.next();!o.done;o=e.next())if((o=o.value)&&o.keyIds&&o.keyIds.size){o=m(o.keyIds);for(var s=o.next();!s.done;s=o.next())a=bm(s.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),a=ke("tenc",e,a),n("sinf",t,r,i("schi",a))}function No(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,i=r.apply,a=ke,o=new Uint8Array([0,0,0,0].concat(H(Qe(n.data?n.data.sequenceNumber:0,4))));o=ke("mfhd",o);var s,u=n.data?n.data.zb:[],l=new Uint8Array(4+u.length);for(s=0;s<u.length;s++){var c=u[s].flags;l[s+4]=c.ib<<4|c.mb<<2|c.jb}u=ke("sdtp",l);var d=u.length+32+20+8+16+8+8;l=ke,s=new Uint8Array([0,0,0,58].concat(H(Qe(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=ke("tfhd",s),c=n.data?n.data.baseMediaDecodeTime:0;var h=Math.floor(c%(ai+1));c=new Uint8Array([1,0,0,0].concat(H(Qe(Math.floor(c/(ai+1)),4)),H(Qe(h,4)))),c=ke("tfdt",c);var p=d;d=n.data?n.data.zb:[],h=d.length;var g=12+16*h,v=new Uint8Array(g);for(p+=8+g,v.set([n.type==="video"?1:0,0,15,1].concat(H(Qe(h,4)),H(Qe(p,4))),0),p=0;p<h;p++){var y=d[p];g=Qe(y.duration,4);var T=Qe(y.size,4),w=y.flags;y=Qe(y.sb,4),v.set([].concat(H(g),H(T),[w.xb<<2|w.ib,w.mb<<6|w.jb<<4|w.yb,w.hb&61440,w.hb&15],H(y)),12+16*p)}d=ke("trun",v),u=l("traf",s,c,d,u),a=a("moof",o,u),i.call(r,t,[a,vS(n)])}return dt.apply(Lt,H(t))}function vS(e){return e=(e.data?e.data.zb:[]).map(function(t){return t.data}),e=dt.apply(Lt,H(e)),ke("mdat",e)}function Qe(e,t){var n=[];for(--t;t>=0;t--)n.push(e>>8*t&255);return n}function bm(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[n*2]+e[n*2+1]),16);return t}function wm(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<(e.length-n-1)*8;return t}function ke(e){var t=xt.apply(1,arguments),n=Tm.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Tm.set(e,n));for(var r=8,i=t.length-1;i>=0;i--)r+=t[i].byteLength;for(i=new Uint8Array(r),i[0]=r>>24&255,i[1]=r>>16&255,i[2]=r>>8&255,i[3]=r&255,i.set(n,4),n=0,r=8;n<t.length;n++)i.set(t[n],r),r+=t[n].byteLength;return i}var ai=4294967295,Tm=new Map,yS=new Je(function(){return new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0])}),bS=new Je(function(){return new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),wS=new Je(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),TS=new Je(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),SS=new Je(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),xS=new Je(function(){return new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])}),AS=new Je(function(){return new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}),kS=new Je(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),IS=new Je(function(){return new Uint8Array([0,0,0,0,0,0,0,1])}),ES=new Je(function(){var e=new Uint8Array([105,115,111,109]),t=new Uint8Array([97,118,99,49]),n=new Uint8Array([0,0,0,1]);return ke("ftyp",e,n,e,t)}),Sm=new Je(function(){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);return e=ke("dref",e),ke("dinf",e)});function CS(e){e=oe(e);var t=null;return new Fe().box("moov",he).box("trak",he).box("mdia",he).box("minf",he).box("stbl",he).S("stsd",Pr).box("enca",function(n){return t=n.reader.h,bu(n)}).box("sinf",he).box("frma",function(n){n.parser.stop(),Sd(n.reader).codec==="ec-3"&&t&&t.getUint16(16)!==2&&t.setUint16(16,2)}).parse(e),e}function MS(e,t,n){function r(p){d.push({box:p,Ei:1701733217})}function i(p){d.push({box:p,Ei:1701733238})}function a(p){u=!0,p.parser.stop()}function o(p){c.push(p),he(p)}var s=t=oe(t),u=!1,l,c=[],d=[];if(new Fe().box("moov",o).box("trak",o).box("mdia",o).box("minf",o).box("stbl",o).S("stsd",function(p){l=p,c.push(p),Pr(p)}).S("encv",a).S("enca",a).S("dvav",i).S("dva1",i).S("dvh1",i).S("dvhe",i).S("dvc1",i).S("dvi1",i).S("hev1",i).S("hvc1",i).S("avc1",i).S("avc3",i).S("ac-3",r).S("ec-3",r).S("ac-4",r).S("Opus",r).S("fLaC",r).S("mp4a",r).parse(t),u)return t;if(d.length==0||!l)throw Sr(t),new M(2,3,3019,n);d.reverse(),n=m(d);for(var h=n.next();!h.done;h=n.next())h=h.value,s=PS(e,s,l,h.box,c,h.Ei);return ge().ih()?(e=new Uint8Array(t.byteLength+s.byteLength),e.set(s),e.set(t,s.byteLength),e):s}function DS(e){e=oe(e);var t=[];new Fe().box("mdat",function(o){t.push(o)}).parse(e);for(var n=[],r=0;r<t.length;r++){var i=t[r-1],a=t[r];n.push(RS(e.subarray(i?i.start+i.size:0,a.start+a.size)))}return dt.apply(Lt,H(n))}function RS(e){function t(d){o.push(d),he(d)}var n,r,i,a,o=[];if(new Fe().box("moof",t).box("traf",t).S("tfhd",function(d){n=d,i=xu(d.reader,d.flags)}).S("trun",function(d){r=d,a=Iu(d.reader,d.version,d.flags)}).parse(e),i&&i.Ri!==2){var s=n.start+ii(n)+4+(i.rj!==null?8:0),u=Zt(e);if(i.Ri!==null)u.setUint32(s,2);else{Eu(e,n.start,n.size+4);var l=u.getUint32(n.start+8);u.setUint32(n.start+8,l|2),a&&a.qg!==null&&u.setInt32(r.start+ii(r)+4,a.qg+4),l=e.subarray(0,s),u=e.subarray(s),e=new Uint8Array(e.byteLength+4),e.set(l),l=[];for(var c=3;c>=0;c--)l.push(2>>8*c&255);for(e.set(new Uint8Array(l),s),e.set(u,s+4),s=m(o),u=s.next();!u.done;u=s.next())u=u.value,Eu(e,u.start,u.size+4)}}return e}function PS(e,t,n,r,i,a){var o=Bi(e,r.name),s=t.subarray(r.start,r.start+r.size);for(e=new Uint8Array(r.size+o.byteLength),e.set(s,0),Zt(e).setUint32(4,a),e.set(o,r.size),Eu(e,0,e.byteLength),a=new Uint8Array(t.byteLength+e.byteLength),r=ge().jf()?r.start:r.start+r.size,o=t.subarray(r),a.set(t.subarray(0,r)),a.set(e,r),a.set(o,r+e.byteLength),t=m(i),i=t.next();!i.done;i=t.next())i=i.value,Eu(a,i.start,i.size+e.byteLength);return e=Zt(a,n.start),n=ii(n),t=e.getUint32(n),e.setUint32(n,t+1),a}function Eu(e,t,n){e=Zt(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}function LS(e){function t(i){r.push({start:i.start,size:i.size}),he(i)}var n=oe(e),r=[];return new Fe().box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(i){r.push({start:i.start,size:i.size});for(var a=Zt(n,i.start),o=0;o<i.size-3;o++){var s=a.getUint32(o);s==1633889587?a.setUint32(o,1700998451):s==1684103987&&a.setUint32(o,1684366131)}}).parse(n),n}function nn(e,t,n,r,i,a,o,s){this.P=e,this.startByte=t,this.endByte=n,this.yd=r===void 0?null:r,this.timescale=i===void 0?null:i,this.h=a===void 0?null:a,this.aesKey=o===void 0?null:o,this.g=this.mimeType=this.codecs=null,this.encrypted=s===void 0?!1:s}nn.prototype.Kc=function(){return this.startByte},nn.prototype.Ic=function(){return this.endByte},nn.prototype.ue=function(e){this.h=e},nn.prototype.ac=function(){return this.h};function Uo(e,t){return e===t?!0:e&&t?e.Kc()==t.Kc()&&e.Ic()==t.Ic()&&Yr(e.P().sort(),t.P().sort())&&wr(e.ac(),t.ac()):e==t}q("shaka.media.InitSegmentReference",nn),nn.prototype.getEndByte=nn.prototype.Ic,nn.prototype.getStartByte=nn.prototype.Kc;function ee(e,t,n,r,i,a,o,s,u,l,c,d,h,p,g,v){for(l=l===void 0?[]:l,p=p===void 0?Lr:p,this.startTime=e,this.j=this.endTime=t,this.C=n,this.startByte=r,this.endByte=i,this.ea=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=u,this.g=l,this.tilesLayout=c===void 0?"":c,this.B=d===void 0?null:d,this.h=h===void 0?null:h,this.status=p,this.preload=!1,this.l=!0,this.o=!1,this.aesKey=g===void 0?null:g,this.thumbnailSprite=null,this.i=-1,this.m=v===void 0?!1:v,this.je=this.Xc=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.Ai();this.m&&this.g.length&&this.g[this.g.length-1].zi(),this.u=this.bandwidth=this.mimeType=this.codecs=null,this.F=!1}f=ee.prototype,f.P=function(){return this.C()},f.getStartTime=function(){return this.startTime},f.Kj=function(){return this.endTime},f.Kc=function(){return this.startByte},f.Ic=function(){return this.endByte};function xd(e){if(e.endByte)return e.endByte+1-e.startByte;if(e.bandwidth){var t=e.bandwidth*(e.endTime-e.startTime);if(!isNaN(t)&&t>0)return t}if(e.g.length>0&&e.m)for(e=m(e.g),e=e.next();!e.done;e=e.next()){xd(e.value);break}return null}f.ek=function(){return this.tilesLayout},f.dk=function(){return this.B},f.bc=function(){return this.status},f.Ak=function(){this.status=Am},f.Ug=function(){this.preload=!0},f.isPreload=function(){return this.preload},f.xd=function(){this.l=!1},f.qk=function(){return this.l},f.Ai=function(){this.Xc=!0},f.tk=function(){return this.Xc},f.zi=function(){this.je=!0},f.rk=function(){return this.je},f.xi=function(){this.o=!0},f.kk=function(){return this.o},f.Mf=function(e){this.thumbnailSprite=e},f.bk=function(){return this.thumbnailSprite},f.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},f.Dh=function(e){this.h==null?ur("Sync attempted without sync time!"):(e=this.h-e-this.startTime,Math.abs(e)>=.001&&this.offset(e))},f.ue=function(e,t){this.u=e,this.F=t===void 0?!1:t},f.ac=function(e){var t=this.u;return(e===void 0||e)&&this.F&&(this.u=null),t};function xm(e,t){e.ea=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())xm(n.value,t)}q("shaka.media.SegmentReference",ee),ee.prototype.getSegmentData=ee.prototype.ac,ee.prototype.setSegmentData=ee.prototype.ue,ee.prototype.syncAgainst=ee.prototype.Dh,ee.prototype.offset=ee.prototype.offset,ee.prototype.getThumbnailSprite=ee.prototype.bk,ee.prototype.setThumbnailSprite=ee.prototype.Mf,ee.prototype.hasByterangeOptimization=ee.prototype.kk,ee.prototype.markAsByterangeOptimization=ee.prototype.xi,ee.prototype.isLastPartial=ee.prototype.rk,ee.prototype.markAsLastPartial=ee.prototype.zi,ee.prototype.isPartial=ee.prototype.tk,ee.prototype.markAsPartial=ee.prototype.Ai,ee.prototype.isIndependent=ee.prototype.qk,ee.prototype.markAsNonIndependent=ee.prototype.xd,ee.prototype.isPreload=ee.prototype.isPreload,ee.prototype.markAsPreload=ee.prototype.Ug,ee.prototype.markAsUnavailable=ee.prototype.Ak,ee.prototype.getStatus=ee.prototype.bc,ee.prototype.getTileDuration=ee.prototype.dk,ee.prototype.getTilesLayout=ee.prototype.ek,ee.prototype.getEndByte=ee.prototype.Ic,ee.prototype.getStartByte=ee.prototype.Kc,ee.prototype.getEndTime=ee.prototype.Kj,ee.prototype.getStartTime=ee.prototype.getStartTime,ee.prototype.getUris=ee.prototype.P;var Lr=0,Am=1;ee.Status={vl:Lr,Am,Wl:2};function _o(e){return e.length==1&&e.end(0)-e.start(0)<1e-4}function km(e){return!e||_o(e)?null:e.length==1&&e.start(0)<0?0:e.length?e.start(0):null}function Cu(e){return!e||_o(e)?null:e.length?e.end(e.length-1):null}function Ad(e,t){return!e||!e.length||_o(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function Im(e,t){if(!e||!e.length||_o(e))return 0;var n=0;e=m(Nr(e));for(var r=e.next();!r.done;r=e.next()){var i=r.value;r=i.start,i=i.end,i>t&&(n+=i-Math.max(r,t))}return n}function NS(e,t,n){return!e||!e.length||_o(e)?null:(e=Nr(e).findIndex(function(r,i,a){return r.start>t&&(i==0||a[i-1].end-t<=n)}),e>=0?e:null)}function Nr(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function kd(){}function Em(e,t){var n=document.createElement("source");return n.src=e,n.type=t===void 0?"":t,n}function Mu(e){for(var t=!1,n=e.getElementsByTagName("source"),r=n.length-1;r>=0;--r)e.removeChild(n[r]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function jo(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Fi(){return Oo||(Id||(Id=new ve(function(){Oo=null})),(Oo=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Oo=document.createElement("video")),Id.ka(1),Oo)}function US(e,t){var n,r,i,a,o;return C(function(s){if(s.g==1)return"fonts"in document&&"FontFace"in U?b(s,document.fonts.ready,2):s.return();if(!("entries"in document.fonts))return s.return();for(n=function(u){u=u.entries();for(var l=[],c=u.next();c.done===!1;)l.push(c.value),c=u.next();return l},r=m(n(document.fonts)),i=r.next();!i.done;i=r.next())if(a=i.value,a.family===e&&a.display==="swap")return s.return();o=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(o),G(s)})}q("shaka.util.Dom",kd),kd.removeAllChildren=jo,kd.clearSourceFromVideo=Mu;var Id=null,Oo=null;function Ed(){}function Cm(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Mm(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Cd(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function _S(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(e.size<2||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=$e(oe(e.data,1,n)),i=e.data[2+n],a=e.data.subarray(3+n).indexOf(0);if(a===-1)return null;var o=$e(oe(e.data,3+n,a)),s;return r==="-->"?s=$e(oe(e.data,4+n+a)):s=Dn(e.data.subarray(4+n+a)),t.mimeType=r,t.pictureType=i,t.description=o,t.data=s,t}return e.type==="TXXX"?e.size<2||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=$e(oe(e.data,1,r)),e=$e(oe(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?e.size<2||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=$e(oe(e.data,1,r)),e=$e(oe(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?e.size<2||(n=e.data.indexOf(0),n===-1)?null:(n=$e(oe(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Dn(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?e.size<2||e.data[0]!==3?null:(e=$e(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=$e(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Dn(e.data),t):null}function Vi(e){for(var t=0,n=[];Cm(e,t);){var r=Cd(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var i=e.subarray(t),a=Cd(i,4);i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:a,data:i.subarray(10,10+a)},(a=_S(i))&&n.push(a),t+=i.size+10}Mm(e,t)&&(t+=10)}return n}function wa(e,t){for(var n=t=t===void 0?0:t,r=0;Cm(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Cd(e,t+6),Mm(e,t+10)&&(r+=10),t+=r;return r>0?e.subarray(n,n+r):new Uint8Array([])}q("shaka.util.Id3Utils",Ed),Ed.getID3Data=wa,Ed.getID3Frames=Vi;function Dm(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function Ur(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)r>=2&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=oe(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Md(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new We(n,0).U(),e.g=r*8,e.i-=r)}function hn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=n*8,e.g-=n,Md(e)}e.h<<=t,e.g-=t}function Te(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,e.g>0?e.h<<=n:e.i>0&&Md(e),n=t-n,n>0?r<<n|Te(e,n):r}function Dd(e){var t;for(t=0;t<e.g;++t)if((e.h&2147483648>>>t)!==0)return e.h<<=t,e.g-=t,t;return Md(e),t+Dd(e)}function Rt(e){hn(e,1+Dd(e))}function X(e){var t=Dd(e);return Te(e,t+1)-1}function Ta(e){return e=X(e),1&e?1+e>>>1:-1*(e>>>1)}function Q(e){return Te(e,1)===1}function Ne(e){return Te(e,8)}function Du(e,t){for(var n=8,r=8,i=0;i<t;i++)r!==0&&(r=Ta(e),r=(n+r+256)%256),n=r===0?n:r}function jS(e){return Ne(e),X(e),X(e)}q("shaka.util.ExpGolomb",Ur);function Ke(){this.I=null,this.J=!1,this.m=this.K=null,this.j=[],this.g=[],this.C=this.F=null,this.i=[],this.h=[],this.G=null,this.l=[],this.B=this.H=this.o=this.u=null}f=Ke.prototype,f.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},f.Kf=function(e){this.B!=null&&this.B!=e&&(this.o=this.u=null),this.B=e},f.parse=function(e){if(e.length<564)return this;for(var t=Math.max(0,Pd(e)),n=e.length-(e.length+t)%188,r=!1,i=t;i<n;i+=188)if(e[i]==71){var a=!!(e[i+1]&64),o=((e[i+1]&31)<<8)+e[i+2];if((e[i+3]&48)>>4>1){var s=i+5+e[i+4];if(s==i+188)continue}else s=i+4;switch(o){case 0:a&&(s+=e[s]+1),this.I=(e[s+10]&31)<<8|e[s+11];break;case 17:case 8191:break;case this.I:a&&(s+=e[s]+1),a=e,o={audio:-1,video:-1,gf:-1,audioCodec:"",videoCodec:""};var u=s+3+((a[s+1]&15)<<8|a[s+2])-4;for(s+=12+((a[s+10]&15)<<8|a[s+11]);s<u;){var l=(a[s+1]&31)<<8|a[s+2],c=(a[s+3]&15)<<8|a[s+4];switch(a[s]){case 6:if(c>0)for(var d=s+5,h=c;h>2;){var p=a[d+1]+2;switch(a[d]){case 5:var g=a.subarray(d+2,d+p);g=Ws.value()(g),o.audio==-1&&g==="Opus"?(o.audio=l,o.audioCodec="opus"):o.video==-1&&g==="AV01"&&(o.video=l,o.videoCodec="av1");break;case 106:o.audio==-1&&(o.audio=l,o.audioCodec="ac3");break;case 122:o.audio==-1&&(o.audio=l,o.audioCodec="ec3");break;case 124:o.audio==-1&&(o.audio=l,o.audioCodec="aac");break;case 127:o.audioCodec=="opus"&&(g=null,a[d+2]===128&&(g=a[d+3]),g!=null&&(this.H={channelCount:(g&15)===0?2:g&15,uj:g,sampleRate:48e3}))}d+=p,h-=p}break;case 15:o.audio==-1&&(o.audio=l,o.audioCodec="aac");break;case 17:o.audio==-1&&(o.audio=l,o.audioCodec="aac-loas");break;case 21:o.gf==-1&&(o.gf=l);break;case 27:o.video==-1&&(o.video=l,o.videoCodec="avc");break;case 3:case 4:o.audio==-1&&(o.audio=l,o.audioCodec="mp3");break;case 36:o.video==-1&&(o.video=l,o.videoCodec="hvc");break;case 129:o.audio==-1&&(o.audio=l,o.audioCodec="ac3");break;case 132:case 135:o.audio==-1&&(o.audio=l,o.audioCodec="ec3")}s+=c+5}a=o,a.video!=-1&&(this.K=a.video,this.m=a.videoCodec),a.audio!=-1&&(this.F=a.audio,this.C=a.audioCodec),a.gf!=-1&&(this.G=a.gf),r&&!this.J&&(r=!1,i=t-188),this.J=!0;break;case this.K:s=e.subarray(s,i+188),a?this.j.push([s]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(s);break;case this.F:s=e.subarray(s,i+188),a?this.i.push([s]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(s);break;case this.G:s=e.subarray(s,i+188),a?this.l.push([s]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(s);break;default:r=!0}}return this};function Rd(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var i=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2;e.u==null&&(e.u=i),n.pts=Pm(i,e.u),e.u=n.pts,n.dts=n.pts,r&64&&(r=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=n.pts!=i?Pm(r,e.o):r),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}f.Hk=function(e){return Ce("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.$g(e,{le:null,state:null})},f.$g=function(e,t){var n=e.pts?e.pts/9e4:null;e=e.data;var r=e.byteLength,i=1;this.m=="hvc"&&(i=2);var a=t.state||0,o=a,s=0,u=[],l=-1,c=0;for(a==-1&&(l=0,c=this.m=="hvc"?e[0]>>1&63:e[0]&31,a=0,s=1);s<r;){var d=e[s++];a?a===1?a=d?0:2:d?d==1?(d=s-a-1,l>=0?u.push({data:e.subarray(l+i,d),fullData:e.subarray(l,d),type:c,time:n,state:null}):(a=u.length?u[u.length-1]:t.le)&&(o&&s<=4-o&&a.state&&(a.data=a.data.subarray(0,a.data.byteLength-o),a.fullData=a.fullData.subarray(0,a.fullData.byteLength-o)),d>0&&(d=e.subarray(0,d),a.data=dt(a.data,d),a.fullData=dt(a.fullData,d),a.state=0)),s<r?(c=this.m=="hvc"?e[s]>>1&63:e[s]&31,l=s,a=0):a=-1):a=0:a=3:a=d?0:1}return l>=0&&a>=0&&u.push({data:e.subarray(l+i,r),fullData:e.subarray(l,r),type:c,time:n,state:a}),!u.length&&t.le&&(n=u.length?u[u.length-1]:t.le)&&(n.data=dt(n.data,e),n.fullData=dt(n.fullData,e)),t.state=a,u},f.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=dt.apply(Lt,H(n.value)),(n=Rd(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Vi(n.data),dts:n.dts,pts:n.pts});return e},f.ub=function(){if(this.i.length&&!this.h.length)for(var e=m(this.i),t=e.next();!t.done;t=e.next()){var n=dt.apply(Lt,H(t.value)),r=Rd(this,n);t=this.h.length?this.h[this.h.length-1]:null,r&&r.pts!=null&&r.dts!=null&&(!t||t.pts!=r.pts&&t.dts!=r.dts)?this.h.push(r):this.h.length&&(n=r?r.data:n)&&(t=this.h.pop(),t.data=dt(t.data,n),this.h.push(t))}return this.h},f.ud=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=m(this.j),n=t.next();!n.done;n=t.next()){var r=dt.apply(Lt,H(n.value)),i=Rd(this,r);n=this.g.length?this.g[this.g.length-1]:null,i&&i.pts!=null&&i.dts!=null&&(!n||n.pts!=i.pts&&n.dts!=i.dts)?this.g.push(i):this.g.length&&(r=i?i.data:r)&&(n=this.g.pop(),n.data=dt(n.data,r),this.g.push(n))}if(e){for(t={le:null,state:null},n=[],r=m(this.g),i=r.next();!i.done;i=r.next())i=i.value,i.nalus=this.$g(i,t),i.nalus.length&&(n.push(i),t.le=i.nalus[i.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},f.getStartTime=function(e){if(e=="audio"){e=null;var t=this.ub();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.ud(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},f.Zd=function(){return{audio:this.C,video:this.m}},f.ef=function(){for(var e=[],t=m(this.ud()),n=t.next();!n.done;n=t.next())e.push.apply(e,H(n.value.nalus));return e},f.hk=function(){Ce("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Ng();return{height:e.height,width:e.width}},f.Ng=function(){return this.m=="hvc"?BS(this):OS(this)};function Rm(e){var t=e.ud();return t.length>1&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(Math.abs(1/(t-e)*9e4)):null}function OS(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.ef();if(!n.length||(n=n.find(function(p){return p.type==7}),!n))return t;n=new Ur(n.data);var r=Ne(n),i=Ne(n),a=Ne(n);if(Rt(n),FS.includes(r)){var o=X(n);if(o===3&&hn(n,1),Rt(n),Rt(n),hn(n,1),Q(n)){o=o!==3?8:12;for(var s=0;s<o;s++)Q(n)&&(s<6?Du(n,16):Du(n,64))}}if(Rt(n),o=X(n),o===0)X(n);else if(o===1)for(hn(n,1),Rt(n),Rt(n),o=X(n),s=0;s<o;s++)Rt(n);Rt(n),hn(n,1),o=X(n),s=X(n);var u=Te(n,1);u===0&&hn(n,1),hn(n,1);var l=0,c=0,d=0,h=0;return Q(n)&&(l=X(n),c=X(n),d=X(n),h=X(n)),t.height=String((2-u)*(s+1)*16-d*2-h*2),t.width=String((o+1)*16-l*2-c*2),t.codec="avc1."+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+a.toString(16).toUpperCase()).slice(-2),t.frameRate=Rm(e),t}function BS(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.ef();if(!n.length||(n=n.find(function(D){return D.type==33}),!n))return t;var r=new Ur(n.fullData,!0);Ne(r),Ne(r),Te(r,4);var i=Te(r,3);Q(r);var a=Te(r,2),o=Te(r,1),s=Te(r,5),u=Te(r,32);n=Ne(r);for(var l=Ne(r),c=Ne(r),d=Ne(r),h=Ne(r),p=Ne(r),g=Ne(r),v=[],y=[],T=0;T<i;T++)v.push(Q(r)),y.push(Q(r));if(i>0)for(T=i;T<8;T++)Te(r,2);for(T=0;T<i;T++)v[T]&&Te(r,88),y[T]&&Ne(r);X(r),i=X(r),i==3&&Te(r,1),v=X(r),y=X(r);var w=T=0,S=0,k=0;return Q(r)&&(T+=X(r),w+=X(r),S+=X(r),k+=X(r)),t.width=String(v-(T+w)*(i===1||i===2?2:1)),t.height=String(y-(S+k)*(i===1?2:1)),r=(function(D){for(var x=0,I=0;I<32;I++)x|=(D>>I&1)<<31-I;return x>>>0})(u),o=o==1?"H":"L",a="hvc1"+("."+["","A","B","C"][a]+s),a+="."+r.toString(16).toUpperCase(),a+="."+o+g,p&&(a+="."+p.toString(16).toUpperCase()),h&&(a+="."+h.toString(16).toUpperCase()),d&&(a+="."+d.toString(16).toUpperCase()),c&&(a+="."+c.toString(16).toUpperCase()),l&&(a+="."+l.toString(16).toUpperCase()),n&&(a+="."+n.toString(16).toUpperCase()),t.codec=a,t.frameRate=Rm(e),t}function Pm(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=n*8589934592;return e}function Sa(e){return!(Pd(e)<0)}function Pd(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}q("shaka.util.TsParser",Ke),Ke.syncOffset=Pd,Ke.probe=Sa,Ke.prototype.getVideoInfo=Ke.prototype.Ng,Ke.prototype.getVideoResolution=Ke.prototype.hk,Ke.prototype.getVideoNalus=Ke.prototype.ef,Ke.prototype.getCodecs=Ke.prototype.Zd,Ke.prototype.getStartTime=Ke.prototype.getStartTime,Ke.prototype.getVideoData=Ke.prototype.ud,Ke.prototype.getAudioData=Ke.prototype.ub,Ke.prototype.getMetadata=Ke.prototype.getMetadata,Ke.prototype.parseNalus=Ke.prototype.$g,Ke.prototype.parseAvcNalus=Ke.prototype.Hk,Ke.prototype.parse=Ke.prototype.parse,Ke.prototype.setDiscontinuitySequence=Ke.prototype.Kf,Ke.prototype.clearData=Ke.prototype.clearData,Ke.Timescale=9e4;var FS=[100,110,122,244,44,83,86,118,128,138,139,134];function Lm(e,t,n,r,i){var a=this;this.g=e,this.O=n,this.B=r,this.ba=t,this.l=new Map,this.G=new Map,this.Ta=new Map,this.h=null,this.Fa=!1,this.C=i||null,this.o=new Map,this.u=new Pe,this.j=new Map,this.K=null,this.M=new Be,this.Da="",this.ob=!1,this.za=!0,this.N=!1,this.F=this.R=null,this.i=Ld(this,this.M),this.Ua=this.H=!1,this.I=new ga(function(){return GS(a)}),this.J=!1,this.X="UNKNOWN",this.eb=this.kb=!1,this.ab=new Be,this.m=!1,this.ya=null,this.$=new Map,this.oa=this.T=this.va=this.V=null,this.ma=new Be,this.g.remote&&(this.N=this.g.remote.state!="disconnected",this.u.D(this.g.remote,"connect",function(){a.N=a.g.remote.state!="disconnected"}),this.u.D(this.g.remote,"connecting",function(){a.N=a.g.remote.state!="disconnected"}),this.u.D(this.g.remote,"disconnect",function(){a.N=a.g.remote.state!="disconnected"}))}function Ld(e,t){if(e.za=!0,U.ManagedMediaSource){e.F||(e.g.disableRemotePlayback=!0);var n=new ManagedMediaSource;e.u.D(n,"startstreaming",function(){e.za=!0}),e.u.D(n,"endstreaming",function(){e.za=!1})}else n=new MediaSource;return e.u.Aa(n,"sourceopen",function(){URL.revokeObjectURL(e.Da),t.resolve()}),e.u.Aa(e.g,"playing",function(){e.ob=!0}),e.Da=jd(n),e.B.useSourceElements?(e.g.removeAttribute("src"),e.R&&e.g.removeChild(e.R),e.F&&e.g.removeChild(e.F),e.R=Em(e.Da),e.g.appendChild(e.R),e.F&&e.g.appendChild(e.F),e.g.load()):e.g.src=e.Da,n}function VS(e,t,n){e.g&&U.ManagedMediaSource&&e.i&&e.B.useSourceElements&&(e.F&&e.g.removeChild(e.F),e.F=Em(t,n),e.g.appendChild(e.F),e.g.disableRemotePlayback=!1)}function HS(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="av01.0.31M.10.0.111.09.16.09.0",video/mp4; codecs="av01.0.31M.10.0.112.09.18.09.0",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.03",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(H(Cr)),t={};ge(),e=m(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,xo(n))t[n]=!0;else if(mr()){var r=cn(n),i=Eo(tn(n),r);r=at(r,i),t[n]=Ht(r)||!!ca(r)}else t[n]=Fi().canPlayType(n)!="";r=n.split(";")[0],t[r]=t[r]||t[n]}return t}f=Lm.prototype,f.destroy=function(){return this.I.destroy()};function GS(e){var t,n,r,i,a,o,s,u,l,c,d,h,p,g,v;return C(function(y){if(y.g==1){for(t=[],n=m(e.o),r=n.next();!r.done;r=n.next())for(i=r.value,a=m(i),o=a.next().value,s=a.next().value,u=s[0],l=o,e.o.set(l,s.slice(0,1)),u&&t.push(u.p.catch(MT)),c=m(s.slice(1)),d=c.next();!d.done;d=c.next())h=d.value,h.p.reject(new M(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),b(y,Promise.all(t),2)}for(p=m(e.j.values()),g=p.next();!g.done;g=p.next())v=g.value,v.destroy();e.u&&(e.u.release(),e.u=null),e.g&&e.F&&e.g.removeChild(e.F),e.g&&e.R&&(e.g.removeChild(e.R),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.R=null,e.F=null,e.B=null,e.i=null,e.h=null,e.ba=null,e.l.clear(),e.Ta.clear(),e.j.clear(),e.K=null,e.o.clear(),e.C=null,e.$.clear(),e.O=null,G(y)})}f.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var i=this,a,o,s,u,l,c;return C(function(d){if(d.g==1)return a=ft,b(d,i.M,2);if(d.g!=3)return!Hi(i)&&!oi(i)?d.A(3):(ur("Expected MediaSource to be open during init(); reopening the media source."),i.M=new Be,i.i=Ld(i,i.M),b(d,i.M,3));for(i.J=t,i.X=n,i.kb=r,i.eb=!i.J&&i.X=="HLS"&&!i.kb,i.$.clear(),i.V=null,i.va=null,i.T=null,i.oa=null,i.ma=new Be,o=m(e.keys()),s=o.next();!s.done;s=o.next())u=s.value,l=e.get(u),Ru(i,u,l,l.codecs),i.m?(i.o.set(a.aa,[]),i.o.set(a.wa,[])):i.o.set(u,[]);(c=e.get(a.aa))&&c.isAudioMuxedInVideo&&(i.m=!0),G(d)})};function Ru(e,t,n,r){t=="audio"&&r&&(r=Eo(r,n.mimeType));var i=at(n.mimeType,r);if(t==me)Pu(e,i,e.J,n.external);else{var a=e.B.forceTransmux;(!Ht(i)||!e.J&&Cr.includes(i))&&(a=!0);var o=au(n.mimeType,r);if(a){if(a=en("audio",(r||"").split(",")),r=en("video",(r||"").split(",")),a&&r){e.m=!0,Ru(e,"audio",n,a),Ru(e,"video",n,r);return}(r=ca(o))&&(i=r(),e.j.set(t,i),i=i.convertCodecs(t,o))}o=i+e.B.addExtraFeaturesToSourceBuffer(i),Ge(e.I);try{var s=e.i.addSourceBuffer(o)}catch(u){throw new M(2,3,3015,u,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.J&&(s.mode=tx),e.u.D(s,"error",function(){var u=e.o.get(t)[0];u.p.reject(new M(2,3,3014,e.g.error?e.g.error.code:0,u.uri))}),e.u.D(s,"updateend",function(){return ui(e,t)}),e.l.set(t,s),e.G.set(t,i),e.Ta.set(t,!!n.drmInfos.length)}}f.configure=function(e){this.B=e,this.h&&(this.h.C=e.modifyCueCallback)};function Nm(e){return e.za&&!e.N&&!e.H}function Pu(e,t,n,r){e.h||(e.h=new Mr(e.ba),e.h&&(e.h.C=e.B.modifyCueCallback));var i=e.h,a=e.Fa;e=e.X,t=="application/cea-608"||t=="application/cea-708"?i.i=null:(i.i=Ao.get(t)(),i.i.setSequenceMode?i.i.setSequenceMode(n):Ce("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),i.i.setManifestType?i.i.setManifestType(e):Ce("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),i.F=a,i.B=r)}function Hi(e){return e.H?!1:e.i?e.i.readyState=="ended":!0}function oi(e){return e.H?!1:e.i?e.i.readyState=="closed":!0}function Nd(e,t){return e.l.size?t==me?e.h.g:km(xa(e,t)):null}function si(e,t){return e.l.size?t==me?e.h.h:Cu(xa(e,t)):null}function KS(e,t,n){return t==me?(e=e.h,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=xa(e,t),Im(e,n))}f.Hc=function(){var e={total:this.H?[]:Nr(this.g.buffered),audio:Nr(xa(this,"audio")),video:Nr(xa(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function xa(e,t){if(e.H||e.N||oi(e))return null;try{return e.l.get(t).buffered}catch{return e.l.has(t),null}}function qS(e,t,n,r,i,a,o){o=o===void 0?!1:o;var s=null,u=[],l=oe(n);if(Cr.includes(a))n=Vi(l),n.length&&r&&((o=n.find(function(g){return g.description==="com.apple.streaming.transportStreamTimestamp"}))&&typeof o.data=="number"&&(s=Math.round(o.data)/1e3),e.O.onMetadata([{cueTime:r.startTime,data:l,frames:n,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(a.includes("/mp4")&&r&&r.ea){l=new Fe;var c=i.emsgSchemeIdUris!=null&&i.emsgSchemeIdUris.length>0||e.B.dispatchAllEmsgBoxes;c&&l.S("emsg",function(g){var v=i.emsgSchemeIdUris;if(g.version===0)var y=g.reader.Yc(),T=g.reader.Yc(),w=g.reader.U(),S=g.reader.U(),k=g.reader.U(),D=g.reader.U(),x=r.startTime+S/w;else w=g.reader.U(),x=g.reader.Fd()/w+r.timestampOffset,S=x-r.startTime,k=g.reader.U(),D=g.reader.U(),y=g.reader.Yc(),T=g.reader.Yc();g=g.reader.Tb(g.reader.getLength()-g.reader.Pa(),!0),(v&&v.includes(y)||e.B.dispatchAllEmsgBoxes)&&(y=="urn:mpeg:dash:event:2012"?e.O.Gk():(v=x+k/w,e.O.Ek({startTime:x,endTime:v,schemeIdUri:y,value:T,timescale:w,presentationTimeDelta:S,eventDuration:k,id:D,messageData:g}),(y=="https://aomedia.org/emsg/ID3"||y=="https://developer.apple.com/streaming/emsg-id3")&&(w=Vi(g),w.length&&e.O.onMetadata([{cueTime:x,data:g,frames:w,dts:x,pts:x}],0,v))))});var d=r.ea.timescale;t=d&&!isNaN(d);var h=0,p=!1;t&&l.S("prft",function(g){var v=g.reader,y=g.version;v.U(),g=v.U();var T=v.U();g=g*1e3+T/4294967296*1e3,y===0?v=v.U():(y=v.U(),v=v.U(),v=y*4294967296+v),g=Dm(g),v=new Map().set("detail",{wallClockTime:g,programStartDate:new Date(g-v/d*1e3)}),v=new Y("prft",v),e.O.onEvent(v)}).box("moof",he).box("traf",he).S("tfdt",function(g){p||(h=Au(g.reader,g.version).baseMediaDecodeTime/d,p=!0,c||g.parser.stop())}),(c||t)&&l.parse(n,!1,o),p&&r.timestampOffset==0&&(s=h)}else a.includes("/mp4")||a.includes("/webm")||!Sa(l)||(e.$.has(t)||e.$.set(t,new Ke),u=e.$.get(t),u.clearData(),u.Kf(r.i),u.parse(l),l=u.getStartTime(t),l!=null&&(s=l),u=u.getMetadata());return{timestamp:s,metadata:u}}function Lu(e,t,n,r,i,a,o,s,u,l,c){o=o===void 0?!1:o,s=s===void 0?!1:s,u=u===void 0?!1:u,l=l===void 0?!1:l;var d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L,B,O;return C(function(N){switch(N.g){case 1:if(d=ft,t!=d.Na){N.A(2);break}if(e.X!="HLS"){N.A(3);break}return b(N,e.ab,4);case 4:h=N.h,e.h.u=h;case 3:return b(N,AT(e.h,n,r?r.startTime:null,r?r.endTime:null,r?r.P()[0]:null),5);case 5:return N.return();case 2:if(l||!e.m){N.A(6);break}return b(N,Lu(e,d.aa,n,r,i,a,o,s,u,!0),7);case 7:return b(N,Lu(e,d.wa,n,r,i,a,o,s,u,!0),8);case 8:return N.return();case 6:if(!e.l.has(t))return N.return();if(p=e.l.get(t).timestampOffset,g=e.G.get(t),e.j.has(t)&&(g=e.j.get(t).getOriginalMimeType()),r&&(v=qS(e,t,n,r,i,g,u),y=v.timestamp,T=v.metadata,y!=null&&(e.V==null&&t==d.wa&&(e.V=y,e.va=r.startTime,e.T!=null&&(w=0,e.va==e.oa&&(w=e.V-e.T),e.ma.resolve(w))),e.T==null&&t==d.aa&&(e.T=y,e.oa=r.startTime,e.V!=null&&(S=0,e.va==e.oa&&(S=e.V-e.T),e.ma.resolve(S))),k=y,D=Cr,!e.J&&D.includes(e.G.get(t))&&(k=0),x=r.startTime-k,I=Math.abs(p-x),(I>=.001||o||s)&&(!u||x>0||!p)&&(p=x,e.eb&&(yt(e,t,function(){return Aa(e,t)},null),yt(e,t,function(){return ka(e,t,p)},null))),(t==d.wa||!e.l.has(d.wa))&&e.ab.resolve(p)),T.length)&&e.O.onMetadata(T,p,r?r.endTime:null),a&&t==d.wa&&(e.h||Pu(e,"application/cea-608",e.J,!1),e.K||(A=g.split(";",1)[0],e.K=new rr(A)),r?(R=e.K.Af(n),R.length&&IT(e.h,R,p)):e.K.init(n,s,c)),!e.j.has(t)){N.A(9);break}return b(N,e.j.get(t).transmux(n,i,r,e.i.duration,t),10);case 10:E=N.h,ArrayBuffer.isView(E)?n=E:(P=E,P.init!=null&&(L=P.init,yt(e,t,function(){e.C&&Xs(e.C,L,p,i),e.l.get(t).appendBuffer(L)},r?r.P()[0]:null)),n=P.data);case 9:if(n=JS(e,i,n,r,t),!r||!e.J||t==d.Na){N.A(11);break}if(!o&&!s){N.A(11);break}if(B=r.startTime,e.X!="HLS"||e.m||t!=d.aa||!e.l.has(d.wa)){N.A(13);break}return b(N,e.ma,14);case 14:O=N.h,Math.abs(O)>.15&&(B-=O);case 13:yt(e,t,function(){return Aa(e,t)},null),yt(e,t,function(){return ka(e,t,B)},null);case 11:return b(N,yt(e,t,function(){var _=n;e.C&&Xs(e.C,_,p,i),e.l.get(t).appendBuffer(_)},r?r.P()[0]:null),15);case 15:G(N)}})}function WS(e,t){var n=si(e,"video")||0;Tg(e.h,t,n)}function zS(e){e.h&&Tg(e.h,"",0)}f.remove=function(e,t,n,r){var i=this,a,o;return C(function(s){return s.g==1?(a=ft,e==a.wa&&i.K&&(i.K.remove(r),o=i.h.g||0,i.h.remove(o,n,!0)),e==a.Na?b(s,i.h.remove(t,n),0):n>t?b(s,yt(i,e,function(){return Nu(i,e,t,n)},null),5):s.A(0)):i.m?b(s,yt(i,a.aa,function(){return Nu(i,a.aa,t,n)},null),0):s.A(0)})};function Um(e,t){var n;return C(function(r){return r.g==1?(n=ft,t==n.Na?e.h?b(r,e.h.remove(0,1/0),0):r.return():t===n.wa&&e.K&&e.h?b(r,e.h.remove(0,1/0,!0),4):r.A(4)):r.g!=6?b(r,yt(e,t,function(){return Nu(e,t,0,e.i.duration)},null),6):e.m?b(r,yt(e,n.aa,function(){return Nu(e,n.aa,0,e.i.duration)},null),0):r.A(0)})}f.flush=function(e){var t=this,n;return C(function(r){return r.g==1?(n=ft,e==n.Na?r.return():b(r,yt(t,e,function(){t.g.currentTime-=.001,ui(t,e)},null),2)):t.m?b(r,yt(t,n.aa,function(){var i=n.aa;t.g.currentTime-=.001,ui(t,i)},null),0):r.A(0)})};function _m(e,t,n,r,i,a,o,s,u){var l,c,d;return C(function(h){return h.g==1?(l=ft,t==l.Na?(a||(e.h.u=n),kT(e.h,r,i),h.return()):(c=[],b(h,ZS(e,t,o,s,u),2))):(d=h.h,d||(c.push(yt(e,t,function(){return Aa(e,t)},null)),e.m&&c.push(yt(e,l.aa,function(){return Aa(e,l.aa)},null))),a||(c.push(yt(e,t,function(){return ka(e,t,n)},null)),e.m&&c.push(yt(e,l.aa,function(){return ka(e,l.aa,n)},null))),(r!=0||i!=1/0)&&(c.push(yt(e,t,function(){return Om(e,t,r,i)},null)),e.m&&c.push(yt(e,l.aa,function(){return Om(e,l.aa,r,i)},null))),c.length?b(h,Promise.all(c),0):h.A(0))})}function jm(e,t,n){var r,i;return C(function(a){return a.g==1?(r=ft,t==r.Na||(t==r.wa&&(e.ab=new Be),!e.J||(i=si(e,t))&&Math.abs(i-n)<.15)?a.return():(yt(e,t,function(){return Aa(e,t)},null),e.m&&yt(e,r.aa,function(){return Aa(e,r.aa)},null),b(a,yt(e,t,function(){return ka(e,t,n)},null),2))):e.m?b(a,yt(e,r.aa,function(){return ka(e,r.aa,n)},null),0):a.A(0)})}f.endOfStream=function(e){var t=this;return C(function(n){return b(n,Bo(t,function(){Hi(t)||oi(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},f.Ab=function(e){var t=this;return C(function(n){return b(n,Bo(t,function(){if(t.B.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var r=m(t.l.keys()),i=r.next();!i.done;i=r.next()){i=i.value;var a={start:function(){},p:new Be,uri:null};t.o.get(i).unshift(a)}t.i.duration=e,t.ya=e}),0)})},f.getDuration=function(){return this.i.duration};function XS(e,t,n){C(function(r){return e.I.g||e.g.error||e.N||e.H||Hi(e)||oi(e)?r.return():b(r,Bo(e,function(){Hi(e)||oi(e)||e.i.setLiveSeekableRange(t,n)}),0)})}function Ud(e){C(function(t){return e.I.g||e.g.error||e.N||e.H||Hi(e)||oi(e)?t.return():b(t,Bo(e,function(){Hi(e)||oi(e)||e.i.clearLiveSeekableRange()}),0)})}function Nu(e,t,n,r){if(r<=n)ui(e,t);else{if(e.C){var i=e.C;t==="video"&&i.g&&i.g.flushBuffer(n,r)}e.l.get(t).remove(n,r)}}function Aa(e,t){var n=e.l.get(t),r=n.appendWindowStart,i=n.appendWindowEnd;n.abort(),n.appendWindowStart=r,n.appendWindowEnd=i,ui(e,t)}function ka(e,t,n){n<0&&(n+=.001),e.l.get(t).timestampOffset=n,ui(e,t)}function Om(e,t,n,r){var i=e.l.get(t);(i.appendWindowEnd!==r||i.appendWindowStart!==n)&&(i.appendWindowStart=0,i.appendWindowEnd=r,i.appendWindowStart=n),ui(e,t)}function ui(e,t){if(e.H||e.I.g){var n=e.o.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.o.set(t,[]))}else(n=e.o.get(t)[0])&&(n.p.resolve(),_d(e,t))}function yt(e,t,n,r){return Ge(e.I),n={start:n,p:new Be,uri:r},e.o.get(t).push(n),e.o.get(t).length==1&&Bm(e,t),n.p}function Bo(e,t){var n,r,i,a,o,s,u,l,c,d,h,p,g;return C(function(v){switch(v.g){case 1:for(Ge(e.I),n=[],r=Array.from(e.l.keys()),i=m(r),a=i.next(),o={};!a.done;o={ready:void 0},a=i.next())s=a.value,o.ready=new Be,u={start:(function(y){return function(){return y.ready.resolve()}})(o),p:o.ready,uri:null},l=e.o.get(s),l.push(u),n.push(o.ready),l.length==1&&u.start();return le(v,2),b(v,Promise.all(n),4);case 4:pe(v,3);break;case 2:throw c=ce(v),c;case 3:return le(v,5,6),b(v,t(),6);case 6:for(yn(v),d=m(r),h=d.next();!h.done;h=d.next())p=h.value,_d(e,p);bn(v,0);break;case 5:throw g=ce(v),new M(2,3,3015,g,e.g.error||"No error in the media element",null)}})}function _d(e,t){e.o.get(t).shift(),Bm(e,t)}function Bm(e,t){var n=e.o.get(t)[0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new M(2,3,3017,t)):Nm(e)?n.p.reject(new M(2,3,3015,r,e.g.error||"No error in the media element",n.uri)):n.p.reject(new M(2,3,3024,t)),_d(e,t)}}function YS(e,t){e.ba=t,e.h&&(e.h.l=t)}function JS(e,t,n,r,i){if(To(e.G.get(i))!="mp4")return n;var a=r===null,o=e.Ta.get(i),s=e.O.Pj(),u=!1;r&&r.ea&&(u=r.ea.encrypted),r=r?r.P()[0]:null;var l=ge();return e.B.correctEc3Enca&&a&&i==="audio"&&(n=CS(n)),e.B.insertFakeEncryptionInInit&&o&&l.Gd(s,i)&&(a?n=MS(t,n,r):!u&&l.Ni(i)&&(n=DS(n))),a&&l.se()&&(n=LS(n)),n}function $S(e,t,n,r){return yt(e,t,function(){if(t!==me){if(e.G.get(t),ge().Ib()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),r&&e.j.set(t,r);var i=n+e.B.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(i),e.G.set(t,n)}ui(e,t)}},null)}function QS(e,t){var n,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D;return C(function(x){if(x.g==1){if(e.H||e.N)return x.return();for(n=ft,e.H=!0,e.m=!1,r=e.g.currentTime,i=e.g.autoplay,e.g.paused||(e.Ua=!0),e.ob&&(e.g.autoplay=!1),br(x,2),e.u.Qa(),a=m(e.j.values()),o=a.next();!o.done;o=a.next())s=o.value,s.destroy();for(u=m(e.l.values()),l=u.next();!l.done;l=u.next()){c=l.value;try{e.i.removeSourceBuffer(c)}catch{}}return e.j.clear(),e.l.clear(),d=e.i.duration,e.M=new Be,e.i=Ld(e,e.M),b(x,e.M,4)}if(x.g!=2){for(!isNaN(d)&&d?e.i.duration=d:!isNaN(e.ya)&&e.ya&&(e.i.duration=e.ya),h=new Be,p=e.i.sourceBuffers,g=t.size,v=0,y=function(){v++,v===g&&(h.resolve(),e.u.Ma(p,"addsourcebuffer",y))},e.u.D(p,"addsourcebuffer",y),T=m(t.keys()),w=T.next();!w.done;w=T.next())S=w.value,k=t.get(S),Ru(e,S,k,k.codecs);return(D=t.get(n.aa))&&D.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.o.has(n.aa)&&e.o.set(n.aa,[]),b(x,h,2)}return yn(x),e.H=!1,Ge(e.I),e.u.Aa(e.g,"loadedmetadata",function(){e.I.g||(e.g.currentTime=r)}),e.u.Aa(e.g,"canplaythrough",function(){e.I.g||(e.g.autoplay=i,e.Ua&&(e.Ua=!1,e.g.play()))}),bn(x,0)})}function Fm(e,t){return Bo(e,function(){return QS(e,t)})}function Vm(e,t,n,r){var i=!1,a=en("audio",(r||"").split(",")),o=en("video",(r||"").split(",")),s=o;t=="audio"&&(s=a),s||(s=r);var u=at(n,s),l=cn(e.G.get(t)),c=e.B.forceTransmux;if(!Ht(u)||!e.J&&Cr.includes(u)?c=!0:c||n==l||(c=!ge().Nf()&&Cr.includes(n)),c&&(e=au(n,s),s=ca(e))){var d=s();a&&o&&(i=!0),u=d.convertCodecs(t,e)}return!d&&t==="video"&&a&&(u=at(n,r)),t=Nt(tn(u)),{lc:d,jl:i,Th:cn(u),codec:t,mimeType:u}}function Hm(e,t,n,r,i){if(t==me)return{type:Od,wf:n,lc:null};var a=Nt(tn(e.G.get(t))),o=cn(e.G.get(t)),s=Vm(e,t,n,r),u=s.lc,l=s.jl,c=s.Th,d=s.codec;s=s.mimeType;var h=!0;return l&&e.G.has("audio")&&(n=Vm(e,"audio",n,r),r=Nt(tn(e.G.get("audio"))),h=cn(e.G.get("audio")),h=r==n.codec&&h==n.Th,n.lc&&n.lc.destroy()),a===d&&o===c&&h?{type:Od,wf:s,lc:u}:(a=!0,(e.m&&!i.has("audio")||l&&u&&!e.j.has(t))&&(a=!1),t=ge(),a&&e.B.codecSwitchingStrategy==="smooth"&&t.Ib()?{type:Gm,wf:s,lc:u}:(u&&u.destroy(),{type:Bd,wf:s,lc:null}))}function ZS(e,t,n,r,i){var a,o,s,u,l,c;return C(function(d){return d.g==1?(a=ft,o=Hm(e,t,n,r,i),s=o.type,u=o.lc,l=o.wf,(c=i.get(a.aa))&&(e.m=c.isAudioMuxedInVideo),s==Od?(e.j.has(t)&&!u?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&u?e.j.set(t,u):u&&(e.j.has(t)&&e.j.get(t).transmux!==u.transmux?(e.j.get(t).destroy(),e.j.set(t,u)):u.destroy()),d.return(!1)):s==Gm?b(d,$S(e,t,l,u),3):s!=Bd?d.A(3):(u&&u.destroy(),b(d,Fm(e,i),3))):d.return(!0)})}function ex(e,t,n,r,i){return e=Hm(e,t,n,r,i),e.lc&&e.lc.destroy(),e.type==Bd}var jd=U.URL.createObjectURL,tx="sequence",Od="none",Bd="reset",Gm="changeType";function ae(e,t,n){this.i=e,this.F=t,this.u=this.l=1/0,this.h=1,this.g=this.j=null,this.B=0,this.C=!0,this.J=!1,this.I=0,this.G=n===void 0?!0:n,this.H=0,this.o=!1,this.m=e}f=ae.prototype,f.getDuration=function(){return this.l},f.Rj=function(){return this.h},f.Wi=function(e){this.i=e},f.Ab=function(e){this.l=e},f.Wj=function(){return this.i},f.Vi=function(e){this.B=e},f.cd=function(e){e&&!this.C&&(this.J=!0),this.C=e},f.Lf=function(e){this.u=e},f.df=function(){return this.u},f.rh=function(e){this.F=e},f.Jj=function(){return this.F},f.Hi=function(e,t){if(e.length!=0){var n=(Date.now()+this.B)/1e3;if(e=e.filter(function(i){return i.start+t<n}),e.length!=0){var r=e[e.length-1].end+t;this.xf(e[0].start+t),this.h=e.reduce(function(i,a){return Math.max(i,a.end-a.start)},this.h),this.g=Math.max(this.g,r),this.i!=null&&this.G&&!this.o&&(this.i=n-this.g-this.h)}}},f.me=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.B)/1e3;e=m(e);for(var i=e.next();!i.done;i=e.next())i=i.value,r<i.startTime||(t=Math.min(t,i.startTime),n=Math.max(n,i.endTime),this.h=Math.max(this.h,i.endTime-i.startTime));this.xf(t),this.g=Math.max(this.g,n),this.i!=null&&this.G&&!this.o&&(this.i=r-this.g-this.h)}},f.Gi=function(e,t){this.xf(e),t==1/0||this.W()||(this.g=Math.max(this.g,t))},f.Sj=function(){return this.g},f.qf=function(){this.o=!0},f.vk=function(){return this.o},f.sh=function(e){this.m=e},f.Oj=function(){return this.m},f.xf=function(e){this.j==null?this.j=e:this.J||(this.j=Math.min(this.j,e))},f.Wg=function(e){this.h=Math.max(this.h,e)},f.offset=function(e){this.j!=null&&(this.j+=e),this.g!=null&&(this.g+=e)},f.W=function(){return this.l==1/0&&!this.C},f.Vc=function(){return this.l!=1/0&&!this.C},f.Hb=function(){return Math.max(this.I,this.Jc()-this.u)},f.Yi=function(e){this.I=e},f.Jc=function(){return this.W()||this.Vc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.h-this.i)+this.H,this.l):this.g?Math.min(this.g,this.l):this.l},f.be=function(e){var t=Math.max(this.j,this.I);return this.u==1/0?Math.ceil(t*1e3)/1e3:Math.max(t,Math.min(this.Jc()-this.u+e,this.Gb()))},f.$b=function(){return this.be(0)},f.Gb=function(){return Math.max(0,this.Jc()-(this.W()||this.Vc()?this.F:0))},f.kj=function(){return!(this.i==null||this.g!=null&&this.G)},f.Ui=function(e){this.H=e},f.Ej=function(){return this.H},q("shaka.media.PresentationTimeline",ae),ae.prototype.getAvailabilityTimeOffset=ae.prototype.Ej,ae.prototype.setAvailabilityTimeOffset=ae.prototype.Ui,ae.prototype.usingPresentationStartTime=ae.prototype.kj,ae.prototype.getSeekRangeEnd=ae.prototype.Gb,ae.prototype.getSeekRangeStart=ae.prototype.$b,ae.prototype.getSafeSeekRangeStart=ae.prototype.be,ae.prototype.getSegmentAvailabilityEnd=ae.prototype.Jc,ae.prototype.setUserSeekStart=ae.prototype.Yi,ae.prototype.getSegmentAvailabilityStart=ae.prototype.Hb,ae.prototype.isInProgress=ae.prototype.Vc,ae.prototype.isLive=ae.prototype.W,ae.prototype.offset=ae.prototype.offset,ae.prototype.notifyMaxSegmentDuration=ae.prototype.Wg,ae.prototype.notifyMinSegmentStartTime=ae.prototype.xf,ae.prototype.getInitialProgramDateTime=ae.prototype.Oj,ae.prototype.setInitialProgramDateTime=ae.prototype.sh,ae.prototype.isStartTimeLocked=ae.prototype.vk,ae.prototype.lockStartTime=ae.prototype.qf,ae.prototype.getMaxSegmentEndTime=ae.prototype.Sj,ae.prototype.notifyPeriodDuration=ae.prototype.Gi,ae.prototype.notifySegments=ae.prototype.me,ae.prototype.notifyTimeRange=ae.prototype.Hi,ae.prototype.getDelay=ae.prototype.Jj,ae.prototype.setDelay=ae.prototype.rh,ae.prototype.getSegmentAvailabilityDuration=ae.prototype.df,ae.prototype.setSegmentAvailabilityDuration=ae.prototype.Lf,ae.prototype.setStatic=ae.prototype.cd,ae.prototype.setClockOffset=ae.prototype.Vi,ae.prototype.getPresentationStartTime=ae.prototype.Wj,ae.prototype.setDuration=ae.prototype.Ab,ae.prototype.setPresentationStartTime=ae.prototype.Wi,ae.prototype.getMaxSegmentDuration=ae.prototype.Rj,ae.prototype.getDuration=ae.prototype.getDuration;function Fd(e,t,n,r){var i=this;this.u=r,this.g=e,this.F=t,this.h=n,this.j=new Pe,this.m=!1,this.l=0,this.C=!1,this.H=this.G=0,this.o=rx(this),this.B=!1,this.j.D(e,"waiting",function(){return Fo(i)}),this.i=new ve(function(){Fo(i)}).Ea(this.h.gapJumpTimerTime)}Fd.prototype.release=function(){this.j&&(this.j.release(),this.j=null),this.i!=null&&(this.i.stop(),this.i=null),this.o&&(this.o.release(),this.o=null),this.g=this.F=this.u=null},Fd.prototype.Bd=function(){this.B=!0,this.i&&this.i.Ea(this.h.gapJumpTimerTime),Fo(this)};function Fo(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||e.g.currentTime==e.l&&(e.g.autoplay||e.g.currentTime!=e.l)){var t;if(!(t=!e.o)){t=e.o;var n=t.h,r=Wm(n),i=n.g.currentTime,a=Date.now()/1e3;(t.g!=i||t.m!=r)&&(t.l=a,t.g=i,t.m=r,t.i=!1),i=a-t.l,(r=i>=t.o&&r&&!t.i)&&(t.j&&t.j(t.g,i),t.i=!0,t.g=n.g.currentTime),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=NS(n,t,e.h.gapDetectionThreshold),r==null||r==0&&!e.B||(i=n.start(r),(a=e.h.gapPadding)&&(i=Math.ceil((i+a)*100)/100),i>=e.F.Gb()||i-t<.001||(r!=0&&n.end(r-1),nx(e,i),t==e.l&&(e.l=i),e.G++,e.u(new Y("gapjumped")))))}}}function nx(e,t){e.C=!0,e.j.Aa(e.g,"seeked",function(){e.C=!1}),e.g.currentTime=t}function rx(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new Km(new qm(e.g),t,function(){var r;return C(function(i){if(i.g==1)return r=Nr(e.g.buffered),r.length?n?(e.g.currentTime+=n,i.A(2)):b(i,e.g.play(),3):i.return();if(i.g!=2){if(!e.g)return i.return();e.g.pause(),e.g.play()}e.H++,e.u(new Y("stalldetected")),G(i)})})}function Km(e,t,n){this.h=e,this.m=Wm(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.o=t,this.j=n}Km.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null};function qm(e){var t=this;this.g=e,this.h=new Pe,this.i=!1,this.h.D(this.g,"audiofocuspaused",function(){t.i=!0}),this.h.D(this.g,"audiofocusgranted",function(){t.i=!1}),this.h.D(this.g,"audiofocuslost",function(){t.i=!0})}function Wm(e){if(e.g.paused||e.g.playbackRate==0||e.i||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(Nr(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}qm.prototype.release=function(){this.h&&this.h.release(),this.h=null};function Ia(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=ix.value().get(t),n.Aa(e,t,r))}var ix=new Je(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function zm(e,t,n,r){var i=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return i.l==null&&(i.l=r()),i.l},this.o=!1,this.h=new Pe,this.i=new $m(e),Ia(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Ym(i,i.j())})}zm.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function Vd(e){return e.o?e.g.currentTime:e.j()}function Xm(e,t){e.g.readyState>0?Qm(e.i,t):Ia(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){Ym(e,e.j())})}function Ym(e,t){Math.abs(e.g.currentTime-t)<.001?Jm(e):(e.h.Aa(e.g,"seeking",function(){Jm(e)}),Qm(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function Jm(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function $m(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new ve(function(){t.i<=0||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}$m.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function Qm(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Ea(.1)}function Zm(e){this.g=e,this.i=!1,this.h=null,this.j=new Pe}f=Zm.prototype,f.ready=function(){function e(){if(t.h==null||t.h==0&&t.g.duration!=1/0)t.i=!0;else{var n=t.g.currentTime,r=null;if(typeof t.h=="number")r=t.h;else if(t.h instanceof Date){var i=ev(t);i!==null&&(r=t.h.getTime()/1e3-i,r=tv(t,r))}r==null?t.i=!0:(r<0&&(r=Math.max(0,n+r)),n!=r?(t.j.Aa(t.g,"seeking",function(){t.i=!0}),t.g.currentTime=r):t.i=!0)}}var t=this;Ia(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){e()})},f.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},f.$f=function(e){this.h=this.i?this.h:e},f.Rd=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=e.getTime()/1e3-(ev(this)||0),e=tv(this,e)),e||0},f.Nh=function(){return 0},f.Lh=function(){return 0},f.Mh=function(){return!1},f.Fi=function(){},f.ri=function(){var e=Cu(this.g.buffered);return e!=null&&e>=this.g.duration-1};function ev(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function tv(e,t){return e=e.g.seekable,e.length>0&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function nv(e,t,n,r,i,a){var o=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.u=i,this.o=null,this.i=new Fd(e,t.presentationTimeline,n,a),this.j=new zm(e,function(){e:{var s=o.i;s.m=!0,s.B=!1,s.i&&s.i.Ea(s.h.gapJumpTimerTime),Fo(s);var u=Vd(o.j);if(s=av(o,u),!gm()&&Math.abs(s-u)>.001){u=!1;var l=ge().Si();if(l){var c=Date.now()/1e3;(!o.o||o.o<c-l)&&(o.o=c,u=!0)}else u=!0;if(u){Xm(o.j,s),s=void 0;break e}}o.u(),s=void 0}return s},function(s){var u=o.i;u.g.seeking&&!u.m&&(u.m=!0,u.l=s),u.i&&u.i.Ea(u.h.gapJumpTimerTime),Fo(u)},function(){return rv(o,r)}),this.m=new ve(function(){if(o.h.readyState!=0&&!o.h.paused){var s=Vd(o.j),u=o.g.$b(),l=o.g.Gb();l-u<3&&(u=l-3),s<u&&(s=av(o,s),o.h.currentTime=s)}})}f=nv.prototype,f.ready=function(){this.m.Ea(.25)},f.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.m&&(this.m.stop(),this.m=null),this.h=this.j=this.g=this.l=null,this.u=function(){}},f.$f=function(e){Xm(this.j,rv(this,e))},f.Rd=function(){var e=Vd(this.j);return this.h.readyState>0&&!this.h.paused?ov(this,e):e},f.Nh=function(){return this.i.H},f.Lh=function(){return this.i.G},f.Mh=function(){return this.i.C};function rv(e,t){return t==null?t=e.g.getDuration()<1/0?e.g.$b():e.g.Gb():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):t<0&&(t=e.g.Gb()+t),iv(e,ov(e,t))}f.Fi=function(){this.i.Bd()},f.ri=function(){if(this.g.W()){var e=this.g.Jc(),t=Cu(this.h.buffered);if(t!=null&&t>=e)return!0}return!1};function iv(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function av(e,t){var n=e.l.rebufferingGoal,r=e.l.safeSeekOffset,i=e.g.$b(),a=e.g.Gb(),o=e.g.getDuration();a-i<3&&(i=a-3);var s=e.g.be(n),u=e.g.be(r);return n=e.g.be(n+r),t>=o?iv(e,t):t>a?a-e.l.safeSeekEndOffset:t<i?e.g.W()&&e.l.returnToEndOfLiveWindowWhenOutside?a-e.l.safeSeekEndOffset:Ad(e.h.buffered,u)?u:n:t>=s||Ad(e.h.buffered,t)?t:n}function ov(e,t){var n=e.g.$b();return t<n?n:(e=e.g.Gb(),t>e?e:t)}function Me(e){this.g=e,this.m=null,this.i=0,this.o=!1}f=Me.prototype,f.getNumReferences=function(){return this.g.length},f.getNumEvicted=function(){return this.i},f.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},f.Bk=function(){this.o=!0},f.Fb=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function ar(e){return e.g[0]||null}f.find=function(e){for(var t=this.g.length-1,n=t;n>=0;--n){var r=this.g[n],i=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<i)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},f.get=function(e){return this.g.length==0?null:(e-=this.i,e<0||e>=this.g.length?null:this.g[e])},f.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},f.tf=function(e){if(!this.o&&e.length){var t=Math.round(e[0].startTime*1e3)/1e3;this.g=this.g.filter(function(n){return Math.round(n.startTime*1e3)/1e3<t}),this.g.push.apply(this.g,H(e))}},f.ke=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.g.length==0||r.endTime>n.g[0].startTime)}),this.tf(e),this.Ya(t)},f.Ya=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},f.pd=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new ee(e.startTime,t,e.C,e.startByte,e.endByte,e.ea,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},f.Rf=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new ve(function(){var r=t();r?n.g.push.apply(n.g,H(r)):(n.m.stop(),n.m=null)}),this.m.Ea(e))},Me.prototype[Symbol.iterator]=function(){return this.Xb(0)},Me.prototype.Xb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;var i=this.get(r);n?r++:r--;var a=-1;if(i&&i.g.length>0)for(var o=i.g.length-1;o>=0;--o){var s=i.g[o];if(e>=s.startTime&&e<s.endTime){if(!t){for(;o&&!s.l;)o--,s=i.g[o];if(!s.l)return ur("No independent partial segment found!"),null}n?r--:r++,a=o-1;break}}return new Nn(this,r,a,n)},Me.prototype.We=function(){return-1};function Uu(e,t,n){return e=new ee(e,e+t,function(){return n},0,null,null,e,e,e+t),new Me([e])}q("shaka.media.SegmentIndex",Me),Me.forSingleSegment=Uu,Me.prototype.getIteratorForTime=Me.prototype.Xb,Me.prototype.updateEvery=Me.prototype.Rf,Me.prototype.fit=Me.prototype.pd,Me.prototype.evict=Me.prototype.Ya,Me.prototype.mergeAndEvict=Me.prototype.ke,Me.prototype.offset=Me.prototype.offset,Me.prototype.get=Me.prototype.get,Me.prototype.find=Me.prototype.find,Me.prototype.markImmutable=Me.prototype.Bk,Me.prototype.release=Me.prototype.release,Me.prototype.getNumEvicted=Me.prototype.getNumEvicted,Me.prototype.getNumReferences=Me.prototype.getNumReferences;function Nn(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}f=Nn.prototype,f.Kd=function(e){this.reverse=e},f.zj=function(){return this.h},f.current=function(){var e=this.i.get(this.h);return e&&e.g.length>0&&e.m&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&e.g.length>0?e.g[this.g]:e},f.next=function(){var e=this.i.get(this.h);return this.reverse?e&&e.g.length>0?(this.g--,this.g<0&&(this.h--,this.g=(e=this.i.get(this.h))&&e.g.length>0?e.g.length-1:0)):(this.h--,this.g=0):e&&e.g.length>0?(this.g++,e.m&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},f.jh=function(){var e=this.current();if(e&&e.Xc&&!e.l&&(e=this.i.get(this.h))&&e.g.length>0)for(var t=e.g[this.g];t.l&&!(this.g<=0);)this.g--,t=e.g[this.g]},q("shaka.media.SegmentIterator",Nn),Nn.prototype.resetToLastIndependent=Nn.prototype.jh,Nn.prototype.next=Nn.prototype.next,Nn.prototype.current=Nn.prototype.current,Nn.prototype.currentPosition=Nn.prototype.zj,Nn.prototype.setReverse=Nn.prototype.Kd;function tt(){Me.call(this,[]),this.h=[]}it(tt,Me),f=tt.prototype,f.clone=function(){var e=new tt;return e.h=this.h.slice(),e.i=this.i,e},f.release=function(){this.h=[]},f.Fb=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.Fb(e)};function ax(e,t){e=m(e.h);for(var n=e.next();!n.done;n=e.next())t(n.value)}f.find=function(e){for(var t=this.i,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.find(e);if(i!=null)return i+t;t+=r.getNumEvicted()+r.getNumReferences()}return null};function ox(e,t){e=m(e.h);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.find(t)!=null)return n.We();return-1}f.get=function(e){for(var t=this.i,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.get(e-t);if(i)return i;i=r.getNumReferences(),t+=r.getNumEvicted()+i}return null},f.offset=function(){},f.tf=function(){},f.Ya=function(e){if(this.h.length){var t=this.h[0];t.Ya(e),t.getNumReferences()==0&&(this.h.shift(),this.i+=t.getNumEvicted(),t.release(),this.Ya(e))}},f.ke=function(){},f.pd=function(){},f.Rf=function(){},q("shaka.media.MetaSegmentIndex",tt),tt.prototype.updateEvery=tt.prototype.Rf,tt.prototype.fit=tt.prototype.pd,tt.prototype.mergeAndEvict=tt.prototype.ke,tt.prototype.evict=tt.prototype.Ya,tt.prototype.merge=tt.prototype.tf,tt.prototype.offset=tt.prototype.offset,tt.prototype.get=tt.prototype.get,tt.prototype.find=tt.prototype.find,tt.prototype.forEachTopLevelReference=tt.prototype.Fb,tt.prototype.release=tt.prototype.release;function Vo(e){var t=this;this.g=e,this.j=!1,this.i=this.g.cf(),this.h=new ve(function(){t.g.Di(t.i*.25)})}Vo.prototype.release=function(){this.set(this.Tc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Vo.prototype.set=function(e){this.i=e,Hd(this)},Vo.prototype.Tc=function(){return this.g.Tc()};function Hd(e){e.h.stop();var t=e.j?0:e.i;if(t>=0)try{e.g.cf()!=t&&e.g.uh(t);return}catch{}e.h.Ea(.25),e.g.cf()!=0&&e.g.uh(0)}function Gd(e){var t=this;this.j=e,this.h=new Pe,this.g=new Set,this.i=new ve(function(){sv(t,!1)}).Jb(),e.paused||this.i.Ea(.25),this.h.D(e,"playing",function(){t.i.Jb().Ea(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}Gd.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function sv(e,t){var n=e.j.currentTime;e=m(e.g);for(var r=e.next();!r.done;r=e.next())r.value.j(n,t)}function _u(e){Oe.call(this),this.g=new Map,this.h=e}it(_u,Oe),_u.prototype.release=function(){this.g.clear(),Oe.prototype.release.call(this)};function sx(e,t){var n=e.g.get(t);return n||(n={re:[],pg:null,contentType:t},e.g.set(t,n)),n}function ux(e,t,n){var r=sx(e,t.contentType);lx(e,r),e={yd:t,position:n},r=r.re,t=r.findIndex(function(i){return i.position>=n}),t>=0?r.splice(t,r[t].position==n?1:0,e):r.push(e)}_u.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var r=n.pg;e:{for(var i=n.re,a=i.length-1;a>=0;a--){var o=i[a];if(o.position<=e){i=o.yd;break e}}i=null}a=i&&!(r===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width),o=i&&r&&i.label&&r.label&&r.label!==i.label;var s=i&&r&&i.language&&r.language&&r.language!==i.language;r=i&&r&&i.roles&&r.roles&&!Yr(r.roles,i.roles),(o||s||r)&&uv(this,e,i.contentType)&&(n.pg=i,r=new Y("audiotrackchange",new Map([["quality",i],["position",e]])),this.dispatchEvent(r)),a&&uv(this,e,i.contentType)&&(n.pg=i,JSON.stringify(i),n=new Y("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}};function uv(e,t,n){return!!((e=e.h()[n])&&e.length>0&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function lx(e,t){if((e=e.h()[t.contentType])&&e.length>0){var n=e[0].start,r=e[e.length-1].end,i=t.re;t.re=i.filter(function(a,o){return!(a.position<=n&&o+1<i.length&&i[o+1].position<=n||a.position>=r)})}else t.re=[]}function ju(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function Ho(e){Oe.call(this),this.h=new Map,this.i=e,this.g=null}it(Ho,Oe),Ho.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),Oe.prototype.release.call(this)};function Kd(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+(t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1));e.h.has(n)||(e.h.set(n,t),t=new Y("regionadd",new Map([["region",t]])),e.dispatchEvent(t),cx(e))}function cx(e){e.g||(e.g=new ve(function(){for(var t=e.i(),n=m(e.h),r=n.next();!r.done;r=n.next()){var i=m(r.value);r=i.next().value,i=i.next().value,i.endTime<t.start&&(e.h.delete(r),r=new Y("regionremove",new Map([["region",i]])),e.dispatchEvent(r))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).Ea(2))}function Ou(e,t,n,r,i){function a(o,s){return!(s.fastSwitching&&o.Xc&&o.je)}this.m=e,this.i=t,this.l=n,this.g=new Map,this.j=new Map,this.h=null,this.o=r,this.u=i||a}function dx(e,t){e.l=t,e=m(e.g.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function Go(e,t,n){if(n=n===void 0?!1:n,!e.i.segmentIndex||(e.h||(e.h=e.i.segmentIndex.Xb(t,!0,e.o)),!e.h))return Promise.resolve();for(n&&e.h.next(),t=[];e.g.size<e.m&&(n=e.h.next().value,!!n);){var r=!0;if(n.isPreload()&&n.endByte!=null&&(r=!1),n.bc()==2&&(r=!1),n.ac(!1)&&(r=!1),r&&n.ea&&t.push(lv(e,n.ea)),r&&!e.g.has(n)&&(r=new Wd(e.l),t.push(fv(r,n,e.i)),e.g.set(n,r)),!e.u(n,e.i))break}return qd(e),Promise.all(t)}function lv(e,t){if(!e.i.segmentIndex||t.ac()||Array.from(e.j.keys()).some(function(i){return Uo(i,t)}))return Promise.resolve();var n=new Wd(e.l),r=fv(n,t,e.i);return e.j.set(t,n),r}function cv(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Ko(e,n)}function or(e){cv(e,e.g),cv(e,e.j),e.h=null}Ou.prototype.Ya=function(e,t){t=t===void 0?!1:t;for(var n=m(this.g.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&Ko(this,r);t&&qd(this)},Ou.prototype.Kd=function(e){this.o=e,this.h&&this.h.Kd(e)};function qd(e){if(e.g.size)for(var t=Array.from(e.g.keys()),n=m(e.j.keys()),r=n.next(),i={};!r.done;i={Qg:void 0},r=n.next())i.Qg=r.value,t.some((function(a){return function(o){return Uo(o.ea,a.Qg)}})(i))||Ko(e,i.Qg)}function dv(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var r=n.pop();r&&Ko(e,r)}qd(e)}function fx(e,t){t&&t!==e.i&&(or(e),e.i=t)}function Ko(e,t){var n=e.g;t instanceof nn&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function Wd(e){this.g=e,this.oe=this.Bh=null}function fv(e,t,n){var r=new Uint8Array(0);return e.oe=e.g(t,n,function(i){return C(function(a){if(a.g==1)return r.byteLength>0?r=dt(r,i):r=i,e.Bh?b(a,e.Bh(r),3):a.A(0);r=new Uint8Array(0),G(a)})}),e.oe.promise.catch(function(i){return i instanceof M&&i.code==7001?Promise.resolve():Promise.reject(i)})}Wd.prototype.abort=function(){this.oe&&this.oe.abort()},q("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});function zd(e){var t=cn(e),n=t.split("/")[0];return e=tn(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,ze:null,colorGamut:null,frameRate:null,timescale:null}}function hx(e,t,n){function r(A){w=A.name;var R=A.reader;R.skip(24);var E=R.Ca(),P=R.Ca();R.skip(50),h=String(E),d=String(P),A.reader.Ka()&&he(A)}function i(A){var R=mm(A.reader);p=R.channelCount,g=R.sampleRate,a(A.name)}function a(A){switch(A=A.toLowerCase(),A){case"avc1":case"avc3":s.push(A+".42E01E"),l=!0;break;case"hev1":case"hvc1":s.push(A+".1.6.L93.90"),l=!0;break;case"dvh1":case"dvhe":s.push(A+".05.04"),l=!0;break;case"vp09":s.push(A+".00.10.08"),l=!0;break;case"av01":s.push(A+".0.01M.08"),l=!0;break;case"mp4a":o.push("mp4a.40.2"),u=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":o.push(A),u=!0;break;case"apac":o.push("apac.31.00"),u=!0}}var o=[],s=[],u=!1,l=!1,c=null,d=null,h=null,p=null,g=null,v=null,y=null,T=null,w;if(new Fe().box("moov",he).box("trak",he).box("mdia",he).S("mdhd",function(A){A=ku(A.reader,A.version),c=A.language,T=A.timescale}).box("minf",he).box("stbl",he).S("stsd",Pr).box("mp4a",function(A){var R=mm(A.reader);p=R.channelCount,g=R.sampleRate,A.reader.Ka()?he(A):a(A.name)}).box("esds",function(A){A=A.reader;for(var R="mp4a",E,P;A.Ka();){E=A.Z();for(var L=A.Z();L&128;)L=A.Z();if(E==3)A.Ca(),L=A.Z(),L&128&&A.Ca(),L&64&&A.skip(A.Z()),L&32&&A.Ca();else if(E==4)P=A.Z(),A.skip(12);else if(E==5)break}P&&(R+="."+Po(P),E==5&&A.Ka()&&(E=A.Z(),P=(E&248)>>3,P===31&&A.Ka()&&(P=32+((E&7)<<3)+((A.Z()&224)>>5)),R+="."+P)),o.push(R),u=!0}).box("ac-3",i).box("ec-3",i).box("ac-4",i).box("Opus",i).box("fLaC",i).box("apac",i).box("avc1",r).box("avc3",r).box("hev1",r).box("hvc1",r).box("dva1",r).box("dvav",r).box("dvh1",r).box("dvhe",r).box("vp09",r).box("av01",r).box("avcC",function(A){var R=w||"";switch(w){case"dvav":R="avc3";break;case"dva1":R="avc1"}A=A.reader,A.skip(1),A=R+"."+Po(A.Z())+Po(A.Z())+Po(A.Z()),s.push(A),l=!0}).box("hvcC",function(A){var R=w||"";switch(w){case"dvh1":R="hvc1";break;case"dvhe":R="hev1"}var E=A.reader;E.skip(1),A=E.Z();var P=["","A","B","C"][A>>6],L=A&31,B=E.U(),O=(A&32)>>5?"H":"L";A=[E.Z(),E.Z(),E.Z(),E.Z(),E.Z(),E.Z()],E=E.Z();for(var N=0,_=0;_<32&&(N|=B&1,_!=31);_++)N<<=1,B>>=1;for(R=R+("."+P+L)+("."+Po(N,!0)),R+="."+O+E,P="",L=A.length;L--;)((O=A[L])||P)&&(P="."+O.toString(16).toUpperCase()+P);R+=P,s.push(R),l=!0}).box("dvcC",function(A){var R=w||"";switch(w){case"hvc1":R="dvh1";break;case"hev1":R="dvhe";break;case"avc1":R="dva1";break;case"avc3":R="dvav";break;case"av01":R="dav1"}var E=A.reader;E.skip(2),A=E.Z(),E=E.Z(),s.push(R+"."+fn(A>>1&127)+"."+fn(A<<5&32|E>>3&31)),l=!0}).box("dvvC",function(A){var R=w||"";switch(w){case"hvc1":R="dvh1";break;case"hev1":R="dvhe";break;case"avc1":R="dva1";break;case"avc3":R="dvav";break;case"av01":R="dav1"}var E=A.reader;E.skip(2),A=E.Z(),E=E.Z(),s.push(R+"."+fn(A>>1&127)+"."+fn(A<<5&32|E>>3&31)),l=!0}).S("vpcC",function(A){var R=w||"",E=A.reader;A=E.Z();var P=E.Z();E=E.Z()>>4&15,s.push(R+"."+fn(A)+"."+fn(P)+"."+fn(E)),l=!0}).box("av1C",function(A){var R=w||"";w==="dav1"&&(R="av01");var E=A.reader;E.skip(1),A=E.Z(),E=E.Z();var P=A>>>5,L=(E&64)>>6;s.push(R+"."+P+"."+fn(A&31)+(E>>>7?"H":"M")+"."+fn(P===2&&L?(E&32)>>5?12:10:L?10:8)+"."+((E&16)>>4)+"."+((E&8)>>3)+((E&4)>>2)+(E&3)+"."+fn(1)+"."+fn(1)+"."+fn(1)+".0"),l=!0}).box("enca",bu).box("encv",dn).box("sinf",he).box("frma",function(A){A=Sd(A.reader).codec,a(A)}).box("colr",function(A){s=s.map(function(P){if(P.startsWith("av01.")){var L=A.reader,B=L.Pa(),O=L.Tb(4,!1),N=String.fromCharCode(O[0]);if(N+=String.fromCharCode(O[1]),N+=String.fromCharCode(O[2]),N+=String.fromCharCode(O[3]),N==="nclx"){O=L.Ca(),N=L.Ca();var _=L.Ca(),F=L.Z()>>7,V=P.split(".");V.length==10&&(V[6]=fn(O),V[7]=fn(N),V[8]=fn(_),V[9]=String(F),P=V.join("."))}L.seek(B)}return P});var R=mS(A.reader),E=R.colorGamut;v=R.ze,y=E}).parse(e||t,!0,!0),!o.length&&!s.length)return null;var S=u&&!l,k=new Map;if(l&&!n){n=new rr("video/mp4"),e&&n.init(e);try{n.Af(t);for(var D=m(n.Zf()),x=D.next();!x.done;x=D.next()){var I=x.value;k.set(I,I)}}catch{}n.Qd()}return{type:S?"audio":"video",mimeType:S?"audio/mp4":"video/mp4",codecs:Xd(o.concat(s)).join(", "),language:c,height:d,width:h,channelCount:p,sampleRate:g,closedCaptions:k,ze:v,colorGamut:y,frameRate:null,timescale:T}}function Xd(e){var t=new Set,n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var i=ti(r);t.has(i)||(n.push(r),t.add(i))}return t=qc("audio",n),r=qc("video",n),e=qc(me,n),r=px(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function px(e){if(e.length<=1)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?Ht('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function gx(e){var t=null;return new Fe().box("moov",he).box("trak",he).box("mdia",he).box("minf",he).box("stbl",he).S("stsd",Pr).box("encv",dn).box("enca",bu).box("sinf",he).box("schi",he).S("tenc",function(n){n=n.reader,n.Z(),n.Z(),n.Z(),n.Z(),n=n.Tb(16,!1),t=Sr(n)}).parse(e,!0),t}function Yd(e,t,n){var r,i,a,o,s;return C(function(u){if(u.g==1)return r=t,r.cryptoKey?u.A(2):b(u,r.fetchKey(),3);if(i=r.iv,!i)for(i=oe(new ArrayBuffer(16)),a=r.firstMediaSequenceNumber+n,o=i.byteLength-1;o>=0;o--)i[o]=a&255,a>>=8;return t.blockCipherMode=="CBC"?s={name:"AES-CBC",iv:i}:s={name:"AES-CTR",counter:i,length:64},u.return(U.crypto.subtle.decrypt(s,r.cryptoKey,e))})}function Ea(e,t,n){var r,i,a,o,s,u,l;return C(function(c){switch(c.g){case 1:return r=Ca(e),(i=mx.get(r))?c.return(i):(a=0,o=ht([e],n),le(c,2),o.method="HEAD",b(c,t.request(a,o).promise,4));case 4:s=c.h,i=s.headers["content-type"],pe(c,3);break;case 2:if(u=ce(c),!u||u.code!=1002&&u.code!=1001){c.A(3);break}return o.method="GET",b(c,t.request(a,o).promise,6);case 6:l=c.h,i=l.headers["content-type"];case 3:return c.return(i?i.toLowerCase().split(";").shift():"")}})}function Ca(e){return e=new st(e).Sb.split("/").pop().split("."),e.length==1?"":e.pop().toLowerCase()}function qo(e,t,n,r,i){return e=ht(e,r,i),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}var mx=new Map().set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html");function hv(e,t){var n=this;this.g=t,this.j=e,this.i=null,this.M=new Map,this.C=1,this.B=this.o=null,this.V=0,this.h=new Map,this.N=!1,this.X=null,this.F=!1,this.l=new ga(function(){return vx(n)}),this.R=Date.now()/1e3,this.m=new Map,this.T={projection:null,hfov:null},this.ba=0,this.$=1/0,this.H=null,this.O=[],this.u=new ve(function(){if(n.j&&n.g)if(n.j.presentationTimeline.W()){var r=n.j.presentationTimeline.$b(),i=n.j.presentationTimeline.Gb();i-r>1?XS(n.g.Y,r,i):Ud(n.g.Y)}else Ud(n.g.Y),n.u&&n.u.stop();else n.u&&n.u.stop()}),this.I=null,this.J=!1,this.K=new ve(function(){var r=n.g.video;!r.ended&&n.I&&(n.J=!0,r.currentTime=n.I,n.I=null)}),this.G=new Pe}f=hv.prototype,f.destroy=function(){return this.l.destroy()};function vx(e){var t,n,r,i,a,o,s;return C(function(u){if(u.g==1){for(e.u&&e.u.stop(),e.u=null,e.K&&e.K.stop(),e.K=null,e.G&&(e.G.release(),e.G=null),t=[],n=m(e.h.values()),r=n.next();!r.done;r=n.next())i=r.value,pr(i),t.push(Ku(i)),i.ia&&(or(i.ia),i.ia=null);for(a=m(e.m.values()),o=a.next();!o.done;o=a.next())s=o.value,or(s);return b(u,Promise.all(t),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.I=null,G(u)})}f.configure=function(e){if(this.i=e,this.X=new Og({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.h.get("audio");t&&t.ia&&(or(t.ia),t.ia=null),t=m(this.m.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,or(this.m.get(n)),this.m.delete(n)}for(e.disableTextPrefetch&&(t=this.h.get(me))&&t.ia&&(or(t.ia),t.ia=null),e.disableVideoPrefetch&&(t=this.h.get("video"))&&t.ia&&(or(t.ia),t.ia=null),t=m(this.h.keys()),n=t.next();!n.done;n=t.next())n=this.h.get(n.value),n.ia?(dv(n.ia,e.segmentPrefetchLimit),e.segmentPrefetchLimit>0||(or(n.ia),n.ia=null)):e.segmentPrefetchLimit>0&&(n.ia=$d(this,n.stream));e.disableAudioPrefetch||Ax(this)};function yx(e,t,n){e.j.presentationTimeline.W()||(e.ba=t,e.$=n)}f.start=function(e){var t=this;return C(function(n){if(n.g==1)return b(n,xx(t,e||new Map),2);Ge(t.l),t.N=!0,G(n)})};function bx(e,t){var n,r,i,a,o,s;C(function(u){switch(u.g){case 1:return n=ft,e.V++,r=e.V,le(u,2),b(u,Um(e.g.Y,n.Na),4);case 4:pe(u,3);break;case 2:i=ce(u),e.g&&e.g.onError(i);case 3:a=at(t.mimeType,t.codecs),Pu(e.g.Y,a,e.j.sequenceMode,t.external),o=e.g.Y.ba,(o.isTextVisible()||e.i.alwaysStreamText)&&e.V==r&&(s=Fu(e,t),e.h.set(n.Na,s),Ut(e,s,0)),G(u)}})}function wx(e){var t=e.h.get(me);t&&(pr(t),Ku(t).catch(function(){}),e.H=e.h.get(me),e.h.delete(me),t.stream&&t.stream.closeSegmentIndex&&t.stream.closeSegmentIndex()),e.B=null}function pv(e,t){for(var n=e.g.Ob()<0,r=m(e.h.values()),i=r.next();!i.done;i=r.next())i=i.value,i.sa&&i.sa.Kd(n),i.ia&&i.ia.Kd(n);for(r=m(e.m.values()),i=r.next();!i.done;i=r.next())i.value.Kd(n);(n=e.h.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.Nc&&(Ma(e,t,!1,0,!1),n.Nc=r):(t=n.Nc)&&(n.Nc=null,Ma(e,t,!0,0,!1)))}function gv(e,t,n,r,i,a){n=n===void 0?!1:n,r=r===void 0?0:r,i=i===void 0?!1:i,a=a===void 0?!1:a,e.o=t,e.N&&(t.video&&Ma(e,t.video,n,r,i,a),t.audio&&Ma(e,t.audio,n,r,i,a))}function Bu(e,t){C(function(n){if(n.g==1)return e.H=null,e.B=t,e.N?t.segmentIndex?n.A(2):b(n,t.createSegmentIndex(),2):n.return();Ma(e,t,!0,0,!1),G(n)})}function Tx(e){var t=e.h.get(me);t&&Ma(e,t.stream,!0,0,!0)}function Sx(e,t){for(var n=m(e.M.entries()),r=n.next();!r.done;r=n.next()){var i=m(r.value);r=i.next().value,i=i.next().value,r.includes(t.type)&&(i(),e.M.delete(r))}}function Ma(e,t,n,r,i,a){var o=e.h.get(t.type);o||t.type!=me?o&&(o.Nc&&(t.trickModeVideo?(o.Nc=t,t=t.trickModeVideo):o.Nc=null),o.stream!=t||i)&&(e.m.has(t)?o.ia=e.m.get(t):o.ia&&fx(o.ia,t),t.type==me&&o.stream!=t&&(i=at(t.mimeType,t.codecs),Pu(e.g.Y,i,e.j.sequenceMode,t.external)),!e.m.has(o.stream)&&o.stream.closeSegmentIndex&&(o.Ja?(i="("+o.type+":"+o.stream.id+")",e.M.has(i)||e.M.set(i,o.stream.closeSegmentIndex)):o.stream.closeSegmentIndex()),i=o.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,o.stream=t,o.sa=null,o.gg=!!a,t.dependencyStream?o.Gc=Fu(e,t.dependencyStream):o.Gc=null,bv(e),i&&(o.pb=null,o.uc=null,o.tc=null,t.isAudioMuxedInVideo&&(t=null,o.type==="video"?t=e.h.get("audio"):o.type==="audio"&&(t=e.h.get("video")),t&&(Ku(t).catch(function(){}),t.pb=null,t.uc=null,t.tc=null,Jd(e,t),mv(e,t).catch(function(s){e.g&&e.g.onError(s)})))),n?o.Wb?o.Nd=!0:o.Ja?(o.Ub=!0,o.ld=r,o.Nd=!0):(pr(o),ef(e,o,!0,r).catch(function(s){e.g&&e.g.onError(s)})):o.Ja||o.qb||Ut(e,o,0),mv(e,o).catch(function(s){e.g&&e.g.onError(s)})):bx(e,t)}function mv(e,t){var n,r,i;return C(function(a){if(a.g==1)return t.Va?(n=t.stream,r=t.Va,n.segmentIndex?a.A(2):b(a,n.createSegmentIndex(),2)):a.return();if(a.g!=4)return i=n.dependencyStream,!i||i.segmentIndex?a.A(4):b(a,i.createSegmentIndex(),4);if(t.Va!=r||t.stream!=n)return a.return();var o=e.g.Zb(),s=si(e.g.Y,t.type),u=t.stream.segmentIndex.find(t.Ia?t.Ia.endTime:o),l=u==null?null:t.stream.segmentIndex.get(u);u=l?xd(l):null,l&&!u&&(u=(l.endTime-l.getStartTime())*(t.stream.bandwidth||e.o.bandwidth)/8),u?((l=l.ea)&&(u+=(l.endByte?l.endByte+1-l.startByte:null)||0),l=e.g.getBandwidthEstimate(),o=u*8/l<(s||0)-o-e.i.rebufferingGoal||t.Va.h.g>u):o=!0,o&&t.Va.abort(),G(a)})}f.bd=function(){if(this.g){for(var e=this.g.Zb(),t=m(this.h.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.h.get(r);var i;if((i=!this.J)&&(i=this.g.Y,r==me?(i=i.h,i=i.g==null||i.h==null?!1:e>=i.g&&e<i.h):(i=xa(i,r),i=Ad(i,e)),i=!i),i){if(this.R=0,n.ia&&(n.ia.h=null),n.type==="audio"){i=m(this.m.values());for(var a=i.next();!a.done;a=i.next())a.value.h=null}n.sa=null,(si(this.g.Y,r)!=null||n.Ja)&&Jd(this,n),n.Va&&(n.Va.abort(),n.Va=null),r===me&&(r=this.g.Y,r.K&&r.K.Qd()),n.bd=!0}!this.J||n.Wb||n.Ja||n.qb||Ut(this,n,0)}zo(this)&&rf(this)}};function Jd(e,t){t.Wb||t.Ub||(t.Ja?(t.Ub=!0,t.ld=0):Nd(e.g.Y,t.type)==null?t.qb==null&&Ut(e,t,0):(pr(t),ef(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function xx(e,t){var n,r,i,a,o,s,u,l;return C(function(c){if(c.g==1){if(!e.o)throw new M(2,5,5006);return n=Wu(e,!0),r=e.g.Y,b(c,r.init(n,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(Ge(e.l),e.updateDuration(),i=m(n.keys()),a=i.next();!a.done;a=i.next())o=a.value,s=n.get(o),e.h.has(o)||(u=Fu(e,s),t.has(s.id)&&(l=t.get(s.id),dx(l,function(d,h,p){return Gu(d,h,p||null,e.i.retryParameters,e.g.wc)}),u.ia=l),e.h.set(o,u),Ut(e,u,0));bv(e),G(c)})}function Fu(e,t){var n={stream:t,type:t.type,sa:null,ia:$d(e,t),Ia:null,pb:null,pf:null,uc:null,tc:null,mf:null,nf:null,Nc:null,endOfStream:!1,Ja:!1,qb:null,Ub:!1,ld:0,Nd:!1,Wb:!1,bd:!0,gg:!1,fh:!1,vd:!1,Va:null,Gc:null};return t.dependencyStream&&(n.Gc=Fu(e,t.dependencyStream)),n}function $d(e,t){if(t.type==="video"&&e.i.disableVideoPrefetch||t.type==="audio"&&e.i.disableAudioPrefetch||t.type===me&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===me&&e.i.disableTextPrefetch)return null;if(e.m.has(t))return e.m.get(t);var n=e.h.get(t.type);return(n=n&&n.ia)&&t===n.i?n:e.i.segmentPrefetchLimit>0?new Ou(e.i.segmentPrefetchLimit,t,function(r,i,a){return Gu(r,i,a||null,e.i.retryParameters,e.g.wc)},e.g.Ob()<0,e.g.hl):null}function Ax(e){for(var t=e.i.segmentPrefetchLimit,n=e.i.prefetchAudioLanguages,r=m(e.j.variants),i=r.next(),a={};!i.done;a={Mb:void 0},i=r.next())if(a.Mb=i.value,a.Mb.audio)if(e.m.has(a.Mb.audio)){if(i=e.m.get(a.Mb.audio),dv(i,t),!(t>0&&n.some((function(s){return function(u){return da(s.Mb.audio.language,u)}})(a)))){var o=e.h.get(a.Mb.audio.type);i!==(o&&o.ia)&&or(i),e.m.delete(a.Mb.audio)}}else t<=0||!n.some((function(s){return function(u){return da(s.Mb.audio.language,u)}})(a))||!(i=$d(e,a.Mb.audio))||(a.Mb.audio.segmentIndex||a.Mb.audio.createSegmentIndex(),e.m.set(a.Mb.audio,i))}f.updateDuration=function(){var e=gm(),t=this.j.presentationTimeline.getDuration();t<1/0?(e&&(this.u&&this.u.stop(),Ud(this.g.Y)),this.g.Y.Ab(t)):e?(this.u&&this.u.Ea(.5),this.g.Y.Ab(1/0)):this.g.Y.Ab(4294967296)};function kx(e,t){var n,r,i,a,o,s,u,l,c;return C(function(d){switch(d.g){case 1:if(Ge(e.l),n=ft,t.Ja||t.qb==null||t.Wb)return d.return();if(t.qb=null,!t.Ub){d.A(2);break}return b(d,ef(e,t,t.Nd,t.ld),3);case 3:return d.return();case 2:if(Sx(e,t),t.stream.segmentIndex){d.A(4);break}return r=t.stream,le(d,5),b(d,t.stream.createSegmentIndex(),7);case 7:pe(d,6);break;case 5:return i=ce(d),b(d,tf(e,t,i),8);case 8:return d.return();case 6:if(r!=t.stream)return r.closeSegmentIndex&&r.closeSegmentIndex(),t.Ja||t.qb||Ut(e,t,0),d.return();case 4:if(!t.Gc){d.A(9);break}if(t.Gc.stream.segmentIndex){d.A(9);break}return le(d,11),b(d,t.Gc.stream.createSegmentIndex(),13);case 13:pe(d,9);break;case 11:ce(d);case 9:le(d,14),a=Ix(e,t),a!=null&&(Ut(e,t,a),t.vd=!1),pe(d,15);break;case 14:return o=ce(d),b(d,tf(e,t,o),16);case 16:return d.return();case 15:if(t.type===n.Na)return d.return();if(s=[],t.stream&&!t.stream.isAudioMuxedInVideo&&s.push(t),u=t.type===n.aa?n.wa:n.aa,(l=e.h.get(u))&&l.stream&&!l.stream.isAudioMuxedInVideo&&s.push(l),!e.N||!s.every(function(h){return h.endOfStream})){d.A(0);break}return b(d,e.g.Y.endOfStream(),18);case 18:Ge(e.l),c=e.g.Y.getDuration(),c!=0&&c<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.Ab(c),G(d)}})}function Ix(e,t){if(Zd(t))return WS(e.g.Y,t.stream.originalId||""),null;if(t.type==me&&zS(e.g.Y),t.stream.isAudioMuxedInVideo&&t.type=="audio")return null;if(t.type!=me&&oi(e.g.Y))return qu(e,!0),null;var n=e.i.updateIntervalSeconds/Math.max(1,Math.abs(e.g.Ob()));if(!Nm(e.g.Y)&&t.type!=me)return n/2;var r=e.g.Zb();if(t.type==="audio")for(var i=m(e.m.keys()),a=i.next();!a.done;a=i.next())a=e.m.get(a.value),a.Ya(r,!0),Go(a,r);i=t.Ia?t.Ia.endTime:r;var o=KS(e.g.Y,t.type,r);a=Math.max(1,Math.max(e.i.rebufferingGoal,e.i.bufferingGoal)*e.C);var s=e.j.presentationTimeline.getDuration()-i,u=si(e.g.Y,t.type);if(s<1e-6&&u)return t.endOfStream=!0,t.type=="video"&&(n=e.h.get(me))&&Zd(n)&&(n.endOfStream=!0),null;if(t.endOfStream=!1,o>=a)return n/2;if(s=!t.sa,u=Vu(e,t,r,u),!u)return e=1/0,(t=t.Ia)&&(e=t.endTime-t.startTime),Math.min(e/2,n);o=t.pb;var l=u.ea;o&&l&&Uo(l,o)&&(o.g=l.g),o=!1,s&&t.gg&&(o=!0,t.gg=!1),s=1/0,l=Array.from(e.h.values()),l=m(l);for(var c=l.next();!c.done;c=l.next())c=c.value,Zd(c)||c.sa&&!c.sa.current()||(s=Math.min(s,c.Ia?c.Ia.endTime:r));return i>=s+e.j.presentationTimeline.h?n:(t.ia&&t.sa&&!e.m.has(t.stream)&&(t.ia.Ya(u.startTime+.001),Go(t.ia,u.startTime).catch(function(){})),zo(e)&&Rx(e,t,u)||(Ex(e,t,r,u,o).catch(function(){}),t.Gc&&vv(e,t.Gc,r,a)),null)}function Vu(e,t,n,r){if(t.sa){var i=t.sa.current();return i&&t.Ia&&Math.abs(t.Ia.startTime-i.startTime)<.001&&(i=t.sa.next().value),i}if(t.Ia||r)return i=t.Ia?t.Ia.endTime:r,n=e.g.Ob()<0,t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Xb(i,!1,n)),t.sa&&t.sa.next().value;r=e.j.sequenceMode||zo(e)?0:e.i.inaccurateManifestTolerance;var a=Math.max(n-r,0),o=e.g.Ob()<0;for(e=null,r&&(t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Xb(a,!1,o)),e=t.sa&&t.sa.next().value),e||(t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Xb(n,!1,o)),e=t.sa&&t.sa.next().value);((i=e)==null?void 0:i.bc())===2;)r=n=void 0,e=(r=(n=t.sa)==null?void 0:n.next().value)!=null?r:null;return e}function Ex(e,t,n,r,i){var a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D;return C(function(x){switch(x.g){case 1:if(a=ft,o=t.stream,s=t.sa,t.Ja=!0,le(x,2),r.bc()==2)throw new M(1,1,1011);return b(x,Mx(e,t,r,i),4);case 4:return Ge(e.l),e.F?x.return():(u=o.mimeType=="video/mp4"||o.mimeType=="audio/mp4",l=U.ReadableStream,e.i.lowLatencyMode&&e.j.isLowLatency&&l&&u&&(e.j.type!="HLS"||r.o)?(h=new Uint8Array(0),g=p=!1,y=function(I){var A,R,E;return C(function(P){switch(P.g){case 1:if(p||(g=!0,Ge(e.l),e.F))return P.return();if(le(P,2),h=dt(h,I),A=!1,R=0,new Fe().box("mdat",function(L){R=L.size+L.start,A=!0}).parse(h,!1,!0),!A){P.A(4);break}return E=h.subarray(0,R),h=h.subarray(R),b(P,Qd(e,t,n,o,r,E,!0,i),5);case 5:t.ia&&t.sa&&Go(t.ia,r.startTime,!0);case 4:pe(P,0);break;case 2:v=ce(P),G(P)}})},b(x,Wo(e,t,r,y),9)):(c=Wo(e,t,r),b(x,c,7)));case 7:return d=x.h,Ge(e.l),e.F?x.return():(Ge(e.l),t.Ub?(t.Ja=!1,Ut(e,t,0),x.return()):b(x,Qd(e,t,n,o,r,d,!1,i),6));case 9:if(T=x.h,v)throw v;if(g){x.A(10);break}return p=!0,Ge(e.l),e.F?x.return():t.Ub?(t.Ja=!1,Ut(e,t,0),x.return()):b(x,Qd(e,t,n,o,r,T,!1,i),10);case 10:t.ia&&t.sa&&Go(t.ia,r.startTime,!0);case 6:if(Ge(e.l),e.F)return x.return();t.Ia=r,s.next(),t.Ja=!1,t.fh=!1,w=e.g.Y.Hc(),S=w[t.type],JSON.stringify(S),t.Ub||(k=null,t.type===a.wa?k=e.h.get(a.aa):t.type===a.aa&&(k=e.h.get(a.wa)),k&&k.type==a.aa?e.g.Bd(r,t.stream,k.stream.isAudioMuxedInVideo,!1):e.g.Bd(r,t.stream,t.stream.codecs.includes(","),!1)),pr(t),Ut(e,t,0),pe(x,0);break;case 2:if(D=ce(x),Ge(e.l,D),e.F)return x.return();if(t.Ja=!1,D.code==7001)t.Ja=!1,pr(t),Ut(e,t,0),x.A(0);else if(t.type==a.Na&&e.i.ignoreTextStreamFailures)e.h.delete(a.Na),x.A(0);else return D.code==3017?b(x,Cx(e,t,D),0):(t.vd=!0,D.category==1&&t.ia&&Ko(t.ia,r),D.severity=2,b(x,tf(e,t,D),0))}})}function vv(e,t,n,r){var i,a,o,s,u,l,c,d,h,p,g,v,y;return C(function(T){switch(T.g){case 1:for(i=ft,a=t.stream,u=(s=(o=a.segmentIndex)&&o.Xb(n))&&s.next().value;u&&e.O.includes(u.startTime);)u=s&&s.next().value;if(!u){T.A(0);break}if(l=u.ea,!l||Uo(l,t.pb)){T.A(3);break}return t.pb=l,le(T,4),b(T,Wo(e,t,l),6);case 6:c=T.h;var w=e.g.Y;w.C&&Xs(w.C,c,0,a),e.O=[],pe(T,3);break;case 4:throw d=ce(T),t.pb=null,d;case 3:if(t.Ia&&t.Ia==u){T.A(0);break}return t.Ia=u,le(T,8),b(T,Wo(e,t,u),10);case 10:h=T.h,w=e.g.Y,w.C&&Xs(w.C,h,0,a),e.O.push(u.startTime),pe(T,9);break;case 8:throw p=ce(T),t.Ia=null,p;case 9:if(t.Ub||(g=null,t.type===i.wa?g=e.h.get(i.aa):t.type===i.aa&&(g=e.h.get(i.wa)),g&&g.type==i.aa?e.g.Bd(u,t.stream,g.stream.isAudioMuxedInVideo,!0):e.g.Bd(u,t.stream,t.stream.codecs.includes(","),!0)),v=Math.max.apply(Math,[0].concat(H(e.O))),y=e.g.Zb(),y+r>v)return b(T,vv(e,t,u.startTime,r),0);T.A(0)}})}function Cx(e,t,n){var r,i,a,o,s,u,l;return C(function(c){switch(c.g){case 1:if(r=Array.from(e.h.values()),r.some(function(d){return d!=t&&d.fh})){c.A(2);break}if(e.i.avoidEvictionOnQuotaExceededError)return i=nf(e,n),e.g.disableStream(t.stream,i)||Ut(e,t,4),c.return();if(a=Math.round(100*e.C),a>20){e.C-=.2,c.A(3);break}if(a>4){e.C-=.04,c.A(3);break}if(o=nf(e,n),s=e.g.disableStream(t.stream,o),!s){t.vd=!0,e.F=!0,e.g.onError(n),c.A(5);break}return e.C=1,u=e.g.Zb(),b(c,Hu(e,t,u),5);case 5:return c.return();case 3:return t.fh=!0,l=e.g.Zb(),b(c,Hu(e,t,l),2);case 2:Ut(e,t,4),G(c)}})}function Mx(e,t,n,r){var i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S;return C(function(k){switch(k.g){case 1:if(i=ft,a=t.Ia==null,o=[],s=Math.max(0,Math.max(n.appendWindowStart,e.ba)-.1),u=Math.min(n.appendWindowEnd,e.$)+.1,l=n.codecs||t.stream.codecs,c=ti(l),d=cn(n.mimeType||t.stream.mimeType),h=n.timestampOffset,h==t.pf&&s==t.uc&&u==t.tc&&c==t.mf&&d==t.nf){k.A(2);break}if(p=t.mf&&t.nf&&ex(e.g.Y,t.type,d,l,Wu(e)),!p){k.A(3);break}if(g=null,t.type===i.wa?g=e.h.get(i.aa):t.type===i.aa&&(g=e.h.get(i.wa)),!g){k.A(3);break}return b(k,Ku(g).catch(function(){}),5);case 5:g.pb=null,g.uc=null,g.tc=null,Jd(e,g);case 3:return b(k,yv(e,t,h,s,u,n,c,d),2);case 2:return Uo(n.ea,t.pb)||(t.pb=n.ea,n.l&&n.ea&&(v=Wo(e,t,n.ea),y=function(){var D,x,I,A,R,E,P,L,B,O,N;return C(function(_){switch(_.g){case 1:return le(_,2),b(_,v,4);case 4:return D=_.h,Ge(e.l),x=null,I=new Map,A={projection:null,hfov:null},t.stream&&(R=t.stream.videoLayout)&&(E=R.split("/"),E.includes("PROJ-RECT")?A.projection="rect":E.includes("PROJ-EQUI")?A.projection="equi":E.includes("PROJ-HEQU")?A.projection="hequ":E.includes("PROJ-PRIM")?A.projection="prim":E.includes("PROJ-AIV")&&(A.projection="hequ")),P=new Fe,P.box("moov",he).box("trak",he).box("mdia",he).S("mdhd",function(F){x=ku(F.reader,F.version).timescale}).box("hdlr",function(F){switch(F=F.reader,F.skip(8),F.Yc()){case"soun":I.set(i.aa,x);break;case"vide":I.set(i.wa,x)}x=null}),t.type!==i.wa||A.projection||P.box("minf",he).box("stbl",he).S("stsd",Pr).box("encv",dn).box("avc1",dn).box("avc3",dn).box("hev1",dn).box("hvc1",dn).box("dvav",dn).box("dva1",dn).box("dvh1",dn).box("dvhe",dn).box("dvc1",dn).box("dvi1",dn).box("vexu",he).box("proj",he).S("prji",function(F){F=F.reader.Yc(),A.projection=F}).box("hfov",function(F){F=F.reader.U()/1e3,A.hfov=F}),P.parse(D,!0,!0),t.type===i.wa&&Dx(e,A),I.has(t.type)?n.ea.timescale=I.get(t.type):x!=null&&(n.ea.timescale=x),L=t.stream.segmentIndex,L instanceof tt&&(B=ox(L,n.startTime)),O=t.stream.closedCaptions&&t.stream.closedCaptions.size>0,b(_,e.g.Uh(t.type,D),5);case 5:return b(_,Lu(e.g.Y,t.type,D,null,t.stream,O,t.bd,r,!1,!1,B),6);case 6:pe(_,0);break;case 2:throw N=ce(_),t.pb=null,N}})},T=n.startTime,a&&(w=si(e.g.Y,t.type),w!=null&&(T=w)),e.g.Fk(T,n.ea),o.push(y()))),S=t.Ia?t.Ia.i:-1,n.i!=S&&o.push(jm(e.g.Y,t.type,n.startTime)),b(k,Promise.all(o),0)}})}function yv(e,t,n,r,i,a,o,s){var u,l,c,d,h;return C(function(p){switch(p.g){case 1:if(u=ft,l=Wu(e),le(p,2),t.uc=r,t.tc=i,o&&(t.mf=o),s&&(t.nf=s),t.pf=n,c=e.j.sequenceMode||e.j.type=="HLS",d=null,t.type===u.wa?d=e.h.get(u.aa):t.type===u.aa&&(d=e.h.get(u.wa)),!(d&&d.stream&&d.stream.isAudioMuxedInVideo)){p.A(4);break}return b(p,_m(e.g.Y,d.type,n,r,i,c,d.stream.mimeType,d.stream.codecs,l),4);case 4:return b(p,_m(e.g.Y,t.type,n,r,i,c,a.mimeType||t.stream.mimeType,a.codecs||t.stream.codecs,l),6);case 6:pe(p,0);break;case 2:throw h=ce(p),t.uc=null,t.tc=null,t.mf=null,t.nf=null,t.pf=null,h}})}function Qd(e,t,n,r,i,a,o,s){o=o===void 0?!1:o,s=s===void 0?!1:s;var u,l,c,d;return C(function(h){switch(h.g){case 1:return u=r.closedCaptions&&r.closedCaptions.size>0,e.i.shouldFixTimestampOffset&&(l=r.mimeType=="video/mp4"||r.mimeType=="audio/mp4",c=null,i.ea&&(c=i.ea.timescale),l&&c&&r.type==="video"&&e.j.type=="DASH"&&new Fe().box("moof",he).box("traf",he).S("tfdt",function(p){var g,v,y,T,w,S;return C(function(k){return g=Au(p.reader,p.version),v=g.baseMediaDecodeTime,v?(y=-v/c,T=Number(t.pf)||0,T<y?(w=t.uc,S=t.tc,b(k,yv(e,t,y,w,S,i),0)):k.A(0)):k.return()})}).parse(a,!1,o)),b(h,Hu(e,t,n),2);case 2:return Ge(e.l),d=t.bd,t.bd=!1,b(h,e.g.Uh(t.type,a),3);case 3:return b(h,Lu(e.g.Y,t.type,a,i,r,u,d,s,o),4);case 4:Ge(e.l),G(h)}})}function Hu(e,t,n){var r,i,a,o,s,u,l,c,d;return C(function(h){if(h.g==1)return e.H==t&&(e.H=null),r=t.stream.segmentIndex,r instanceof tt&&(r.Ya(e.j.presentationTimeline.Hb()),i=[],ax(r,function(p){i.push(p.We())})),a=Math.max(e.i.bufferBehind*e.C,e.j.presentationTimeline.h),o=Nd(e.g.Y,t.type),o==null?h.return():(s=n-o,u=e.i.evictionGoal,l=e.j.presentationTimeline.$b(),c=e.j.presentationTimeline.Gb(),d=s-a,c-l>u&&(d=Math.max(s-a,l-u-o)),d<=u?h.return():b(h,e.g.Y.remove(t.type,o,o+d,i),2));if(h.g!=4)return Ge(e.l),e.H?b(h,Hu(e,e.H,n),4):h.A(0);Ge(e.l),G(h)})}function Zd(e){return e&&e.type==me&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Wo(e,t,n,r){var i,a,o,s,u;return C(function(l){switch(l.g){case 1:if(i=n.ac())return l.return(i);if(a=null,t.ia){var c=t.ia,d=c.g;n instanceof nn&&(d=c.j),d.has(n)?(c=d.get(n),r&&(c.Bh=r),a=c.oe):a=null}return a||(a=Gu(n,t.stream,r||null,e.i.retryParameters,e.g.wc)),o=0,t.sa&&(o=t.sa.h),t.Va=a,b(l,a.promise,2);case 2:if(s=l.h,t.Va=null,u=s.data,!n.aesKey){l.A(3);break}return b(l,Yd(u,n.aesKey,o),4);case 4:u=l.h;case 3:return l.return(u)}})}function Gu(e,t,n,r,i,a){a=a===void 0?!1:a;var o=e instanceof ee?e:void 0,s=o?1:0;return e=qo(e.P(),e.startByte,e.endByte,r,n),e.contentType=t.type,i.request(Ln,e,{type:s,stream:t,segment:o,isPreload:a})}function ef(e,t,n,r){var i,a;return C(function(o){if(o.g==1)return t.Ub=!1,t.Nd=!1,t.ld=0,t.Wb=!0,t.Ia=null,t.sa=null,t.ia&&!e.m.has(t.stream)&&or(t.ia),r?(i=e.g.Zb(),a=e.g.Y.getDuration(),b(o,e.g.Y.remove(t.type,i+r,a),3)):b(o,Um(e.g.Y,t.type),4);if(o.g!=3)return Ge(e.l),n?b(o,e.g.Y.flush(t.type),3):o.A(3);Ge(e.l),t.Wb=!1,t.endOfStream=!1,t.Ja||t.qb||Ut(e,t,0),G(o)})}function Ut(e,t,n){var r=t.type;(r!=me||e.h.has(r))&&(t.qb=new ko(function(){var i;return C(function(a){if(a.g==1)return le(a,2),b(a,kx(e,t),4);if(a.g!=2)return pe(a,0);i=ce(a),e.g&&e.g.onError(i),G(a)})}).ka(n))}function pr(e){e.qb!=null&&(e.qb.stop(),e.qb=null)}function Ku(e){return C(function(t){return e.Va?b(t,e.Va.abort(),0):t.A(0)})}function tf(e,t,n){var r,i,a,o,s;return C(function(u){switch(u.g){case 1:return n.code==3024?(t.Ja=!1,pr(t),Ut(e,t,0),u.return()):b(u,Bg(e.X),2);case 2:if(Ge(e.l),n.category===1&&n.code!=1003){if(t.Nc)return pv(e,!1),u.return();r=nf(e,n),n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)}if(n.handled||n.code!=1011){u.A(3);break}for(i=e.g.Zb(),a=si(e.g.Y,t.type),o=Vu(e,t,i,a);((s=o)==null?void 0:s.bc())===2;)t.Ia=o,o=Vu(e,t,i,a);if(!o){u.A(3);break}return b(u,jm(e.g.Y,t.type,o.startTime),5);case 5:return t.Ja=!1,t.vd=!1,pr(t),Ut(e,t,0),u.return();case 3:(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.i.failureCallback(n),G(u)}})}function nf(e,t){return e.i.maxDisabledTime===0&&t.code==1011?1:e.i.maxDisabledTime}function qu(e,t){t=t===void 0?!1:t;var n,r,i,a,o,s;return C(function(u){if(u.g==1){if(n=Date.now()/1e3,r=e.i.minTimeBetweenRecoveries,!t){if(!e.i.allowMediaSourceRecoveries||n-e.R<r)return u.return(!1);e.R=n}return i=ft,(a=e.h.get(i.aa))&&(pr(a),a.Va&&(a.Va.abort(),a.Va=null),a.pb=null,a.uc=null,a.tc=null,a.Ja=!1,a.Ub=!1,a.ld=0,a.Nd=!1,a.Wb=!1,a.sa&&a.sa.jh()),(o=e.h.get(i.wa))&&(pr(o),o.Va&&(o.Va.abort(),o.Va=null),o.pb=null,o.uc=null,o.tc=null,o.Ja=!1,o.Ub=!1,o.ld=0,o.Nd=!1,o.Wb=!1,o.sa&&o.sa.jh()),s=e.g.video.paused,b(u,Fm(e.g.Y,Wu(e)),2)}return!o||o.Wb||o.Ja||o.qb||Ut(e,o,0),!a||a.Wb||a.Ja||a.qb||Ut(e,a,0),s||e.g.video.play(),u.return(!0)})}function Dx(e,t){if(e.T.projection!=t.projection||e.T.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Y("spatialvideoinfo",n)}else n=new Y("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.T=t}}function zo(e){if(e.i.crossBoundaryStrategy!=="keep")return!0;var t=ge();if(t.Ib()){if(!t.Nf()){for(t=m(e.h.keys()),n=t.next();!n.done;n=t.next())if(n=e.h.get(n.value),n.type!==ft.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1){for(e=new Set,t=m(n.fullMimeTypes),n=t.next();!n.done;n=t.next())e.add(To(n.value));return e.size>1}}}else{t=m(e.h.keys());for(var n=t.next();!n.done;n=t.next())if(n=e.h.get(n.value),n.type!==ft.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1)return!0}return!1}function bv(e){e.G.Qa(),zo(e)&&(e.G.D(e.g.video,"waiting",function(){return rf(e)}),e.G.D(e.g.video,"timeupdate",function(){return rf(e)}))}function rf(e){if(zo(e)){e.K.stop();var t=e.g.Zb(),n=e.h.get("video")||e.h.get("audio");n&&(n=n.pb)&&n.g!==null&&(t=n.g-t,t<0||t>1||(e.I=n.g+.1,e.K.ka(t)))}}function Rx(e,t,n){if(t.type===me)return!1;var r=t.pb;if(!r)return!1;var i=n.ea;if(n=r.g!==i.g,e.i.crossBoundaryStrategy==="reset_to_encrypted"&&(r.encrypted||i.encrypted||(n=!1),r.encrypted&&(e.i.crossBoundaryStrategy="keep")),e.i.crossBoundaryStrategy==="RESET_ON_ENCRYPTION_CHANGE"&&r.encrypted==i.encrypted&&(n=!1),e.i.crossBoundaryStrategy==="keep"&&r.mimeType&&i.mimeType){var a=Nt(tn(r.mimeType)),o=Nt(tn(r.mimeType));r.mimeType==i.mimeType&&a==o&&(n=!1)}return n&&(e.J||t.bd)&&(e.J=!1,qu(e,!0).then(function(){var s=new Map().set("oldEncrypted",r.encrypted).set("newEncrypted",i.encrypted);e.g.onEvent(new Y("boundarycrossed",s))})),n}function Wu(e,t){function n(a){if(a.fullMimeTypes&&a.fullMimeTypes.size>1&&e.h.has(a.type)){var o=e.h.get(a.type),s=si(e.g.Y,o.type),u=e.g.Zb();(o=Vu(e,o,u,s))&&o.codecs&&o.mimeType&&(a.codecs=o.codecs,a.mimeType=o.mimeType)}}t=t===void 0?!1:t;var r=new Map,i=e.o.audio;return i&&(n(i),r.set("audio",i)),(i=e.o.video)&&(n(i),r.set("video",i)),t&&e.B&&r.set(me,e.B),r}function zu(){}function af(e,t,n,r,i){var a=i in r,o=a?n.constructor==Object&&Object.keys(r).length==0:n.constructor==Object&&Object.keys(n).length==0,s=a||o,u=!0,l;for(l in t){var c=i+"."+l,d=a?r[i]:n[l];s||l in n?t[l]===void 0?d===void 0||s?delete e[l]:e[l]=Wn(d):o?e[l]=t[l]:d.constructor==Object&&t[l]&&t[l].constructor==Object?(e[l]||(e[l]=Wn(d)),c=af(e[l],t[l],d,r,c),u=u&&c):typeof t[l]!=typeof d||t[l]==null||typeof t[l]!="function"&&t[l].constructor!=d.constructor?(ur("Invalid config, wrong type for "+c),u=!1):typeof n[l]=="function"&&n[l].length!=t[l].length?(Ae("Unexpected number of arguments for "+c),e[l]=t[l]):e[l]=Array.isArray(e[l])?t[l].slice():t[l]:(ur("Invalid config, unrecognized key "+c),u=!1)}return u}function Xu(e,t){for(var n={},r=n,i=0,a=0;i=e.indexOf(".",i),!(i<0);)(i==0||e[i-1]!="\\")&&(a=e.substring(a,i).replace(/\\\./g,"."),r[a]={},r=r[a],a=i+1),i+=1;return r[e.substring(a).replace(/\\\./g,".")]=t,n}function Da(e,t){return e&&t}function wv(e,t){function n(a){for(var o=m(Object.keys(a)),s=o.next();!s.done;s=o.next())if(s=s.value,!(a[s]instanceof HTMLElement))if(i(a[s])&&Object.keys(a[s]).length===0)delete a[s];else{var u=a[s];Array.isArray(u)&&u.length===0||typeof a[s]=="function"?delete a[s]:i(a[s])&&(n(a[s]),Object.keys(a[s]).length===0&&delete a[s])}}function r(a,o){return Object.keys(a).reduce(function(s,u){var l=a[u];return o.hasOwnProperty(u)?l instanceof HTMLElement&&o[u]instanceof HTMLElement?l.isEqualNode(o[u])||(s[u]=l):i(l)&&i(o[u])?(l=r(l,o[u]),(Object.keys(l).length>0||!i(l))&&(s[u]=l)):Array.isArray(l)&&Array.isArray(o[u])?Si(l,o[u])||(s[u]=l):Number.isNaN(l)&&Number.isNaN(o[u])||l!==o[u]&&(s[u]=l):s[u]=l,s},{})}function i(a){return a&&typeof a=="object"&&!Array.isArray(a)}return e=r(e,t),n(e),e}q("shaka.util.ConfigUtils",zu),zu.getDifferenceFromConfigObjects=wv,zu.convertToConfigObject=Xu,zu.mergeConfigObjects=af,q("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2});function rn(){}function Tv(e){return e=lr(e),new st(e).Db}function Xo(e,t,n){function r(s){Zt(a).setUint32(o,s.byteLength,!0),o+=4,a.set(oe(s),o),o+=s.byteLength}if(!n||!n.byteLength)throw new M(2,6,6015);var i;typeof t=="string"?i=Kc(t,!0):i=t,e=lr(e),e=Kc(e,!0);var a=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),o=0;return r(e),r(i),r(n),a}function of(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=lr(e).split("skd://").pop(),Xo(e,n,t))}function Yu(e,t){e===2&&(e=t.drmInfo)&&co(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}q("shaka.drm.FairPlay",rn),rn.commonFairPlayResponse=function(e,t){if(e===2&&(e=t.originalRequest.drmInfo)&&co(e.keySystem)){try{var n=$e(t.data)}catch{return}if(e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0),!e)try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch{}e&&(t.data=Dn(Rn(n)))}},rn.muxFairPlayRequest=function(e,t){Yu(e,t)},rn.expressplayFairPlayRequest=function(e,t){if(e===2){var n=t.drmInfo;n&&co(n.keySystem)&&Yu(e,t)}},rn.conaxFairPlayRequest=function(e,t){Yu(e,t)},rn.ezdrmFairPlayRequest=function(e,t){Yu(e,t)},rn.verimatrixFairPlayRequest=function(e,t){e===2&&(e=t.drmInfo)&&co(e.keySystem)&&(e=oe(t.body),e=Tr(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=qn("spc="+e))},rn.muxInitDataTransform=function(e,t,n){return of(e,t,n)},rn.expressplayInitDataTransform=function(e,t,n){return of(e,t,n)},rn.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=lr(e).split("skd://").pop().split("?").shift(),n=U.atob(n);var r=new ArrayBuffer(n.length*2);r=zp(r);for(var i=0,a=n.length;i<a;i++)r[i]=n.charCodeAt(i);return Xo(e,r,t)},rn.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=lr(e).split(";").pop(),Xo(e,n,t))},rn.verimatrixInitDataTransform=function(e,t,n){return of(e,t,n)},rn.initDataTransform=Xo,rn.defaultGetContentId=Tv,rn.isFairPlaySupported=function(){var e;return C(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},le(t,2),b(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(ce(t),t.return(!1))})};function Ju(e,t,n){for(n=n===void 0?!0:n,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n)}Ju.prototype.add=function(e,t){var n=this.h;t=t===void 0?!0:t;var r;if(!(r=!!n.audio!=!!e.audio||!!n.video!=!!e.video||n.language!=e.language)&&(r=n.audio&&e.audio)){r=n.audio;var i=e.audio;r=!(!((!r.channelsCount||!i.channelsCount||r.channelsCount>2||i.channelsCount>2)&&r.channelsCount!=i.channelsCount||r.spatialAudio!==i.spatialAudio||t&&!Sv(r,i))&&Si(r.roles,i.roles)&&r.groupId===i.groupId)}return!r&&(r=n.video&&e.video)&&(n=n.video,r=e.video,r=!((!t||Sv(n,r))&&Si(n.roles,r.roles))),r?!1:(this.g.add(e),!0)},Ju.prototype.values=function(){return this.g.values()};function Sv(e,t){return e.mimeType!=t.mimeType?!1:(e=e.codecs.split(",").map(function(n){return ti(n)}),t=t.codecs.split(",").map(function(n){return ti(n)}),Si(e,t))}q("shaka.media.AdaptationSet",Ju);function Yo(){this.h=this.g=null}Yo.prototype.configure=function(e){this.g=e},Yo.prototype.getConfiguration=function(){return this.g},Yo.prototype.create=function(e){var t;if(this.g.language){var n=Px(e,this.g.language);n.length&&(t=n)}t||(t=e.filter(function(a){return a.primary}),t=t.length?t:e),e=Lx(t,this.g.role),e.length&&(t=e),e=Nx(t,this.g.videoRole),e.length&&(t=e),this.g.videoLayout&&(e=Bx(t,this.g.videoLayout),e.length&&(t=e)),this.g.hdrLevel&&(e=Ox(t,this.g.hdrLevel),e.length&&(t=e));var r=[this.g.channelCount,this.g.preferredAudioChannelCount];if(e=r.filter(function(a,o){return a&&r.indexOf(a)===o}),e.length){for(e=m(e),n=e.next();!n.done;n=e.next())if(n=jx(t,n.value),n.length){t=n;break}}this.g.audioLabel&&(e=Ux(t,this.g.audioLabel),e.length&&(t=e)),this.g.videoLabel&&(e=_x(t,this.g.videoLabel),e.length&&(t=e)),e=Fx(t,this.g.spatialAudio),e.length&&(t=e);var i=[this.g.audioCodec,this.g.activeAudioCodec].concat(H(this.g.preferredAudioCodecs));if(e=i.filter(function(a,o){return a&&i.indexOf(a)===o}),e.length){for(e=m(e),n=e.next();!n.done;n=e.next())if(n=Vx(t,n.value),n.length){t=n;break}}return e=ge(),e=this.g.codecSwitchingStrategy=="smooth"&&e.Ib(),this.h=new Ju(t[0],t,!e)},Yo.prototype.getLastAdaptationSet=function(){return this.h};function Px(e,t){t=Le(t);var n=lu(t,e.map(function(r){return ud(r)}));return n?e.filter(function(r){return n==ud(r)}):[]}function Lx(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function Nx(e,t){return e.filter(function(n){return n.video?t?n.video.roles.includes(t):n.video.roles.length==0:!1})}function Ux(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function _x(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function jx(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount>t)}).sort(function(n,r){return n.audio||r.audio?n.audio?r.audio?(r.audio.channelsCount||0)-(n.audio.channelsCount||0):1:-1:0})}function Ox(e,t){if(t=="AUTO"){var n=e.some(function(r){return!!(r.video&&r.video.hdr&&r.video.hdr=="HLG")});t=ge().sd(n)}return e.filter(function(r){return!(r.video&&r.video.hdr&&r.video.hdr!=t)})}function Bx(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function Fx(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Vx(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function $u(){}function Ra(){var e=1/0,t=ge();navigator.connection&&navigator.connection.saveData&&(e=360);var n={retryParameters:Xn(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(s,u,l){return U.shakaMediaKeysPolyfill==="apple"&&u=="skd"&&(u=l.serverCertificate,l=Tv(s),s=Xo(s,l,u)),s},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},r="reload";t.Ib()&&(r="smooth");var i={retryParameters:Xn(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,enableAudioGroups:!0,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:Qu,manifestPreprocessorTXml:Zu,sequenceMode:!1,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:t.fd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:Qu,manifestPreprocessorTXml:Zu,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},a={trackSelectionCallback:function(s){return C(function(u){return u.return(s)})},downloadSizeCallback:function(s){var u;return C(function(l){return l.g==1?navigator.storage&&navigator.storage.estimate?b(l,navigator.storage.estimate(),3):l.return(!0):(u=l.h,l.return(u.usage+s<u.quota*.95))})},progressCallback:function(s,u){return Da([s,u])},usePersistentLicense:!0,numberOfParallelDownloads:5},o={drm:n,manifest:i,streaming:{retryParameters:Xn(),failureCallback:function(s){return Da([s])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!0,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:r,addExtraFeaturesToSourceBuffer:function(s){return Da([s],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(s,u,l){return Da([s,u,l])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:a,abrFactory:function(){return new et},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(Yo,[null].concat(H(xt.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:5,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!1},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredAudioRole:"",preferredVideoRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1,targets:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:1/0,preloadPrevItem:!0,repeatMode:0}};return a.trackSelectionCallback=function(s){return C(function(u){return u.return(Hx(s,o.preferredAudioLanguage,o.preferredVideoHdrLevel))})},t.Wa(o)}function xv(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function _r(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return af(e,t,n||Ra(),r,"")}function Hx(e,t,n){var r=n;r=="AUTO"&&(n=e.some(function(s){return!!(s.hdr&&s.hdr=="HLG")}),r=ge().sd(n));var i=e.filter(function(s){return!(s.type!="variant"||s.hdr&&s.hdr!=r)});n=[];var a=lu(t,i.map(function(s){return s.language}));a&&(n=i.filter(function(s){return Le(s.language)==a})),n.length==0&&(n=i.filter(function(s){return s.primary})),n.length==0&&(i.map(function(s){return s.language}),n=i);var o=n.filter(function(s){return s.height&&s.height<=480});for(o.length&&(o.sort(function(s,u){return u.height-s.height}),n=o.filter(function(s){return s.height==o[0].height})),t=[],n.length&&(i=Math.floor(n.length/2),n.sort(function(s,u){return s.bandwidth-u.bandwidth}),t.push(n[i])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=me&&n.type!="image"||t.push(n);return t}function Qu(e){return Da([e],e)}function Zu(e){return Da([e],e)}q("shaka.util.PlayerConfiguration",$u),$u.mergeConfigObjects=_r,$u.createDefaultForLL=xv,$u.createDefault=Ra;function Gx(){this.g=null,this.h=[]}function sf(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function Kx(e){function t(a){return{timestamp:a.timestamp,state:a.state,duration:a.duration}}for(var n=[],r=m(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}function qx(){this.i=this.h=null,this.g=[]}function uf(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function el(){this.C=this.X=NaN,this.l="",this.j=this.wi=this.u=this.B=this.K=this.F=this.o=this.m=this.J=this.G=this.i=this.T=this.V=this.N=this.O=this.R=NaN,this.M=0,this.H=this.I=NaN,this.g=new Gx,this.h=new qx}function Wx(e,t,n){e.R=t,e.O=n}function Av(e,t,n){e.X=t,e.C=n}function zx(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}function kv(e,t){e.j=isNaN(e.j)?t:e.j+t}function Xx(e){var t=e.X,n=e.C,r=e.l,i=e.B,a=e.O,o=e.R,s=e.N,u=e.V,l=e.T,c=e.u,d=e.i,h=e.G,p=e.J,g=e.m,v=sf(e.g,"playing"),y=sf(e.g,"paused"),T=sf(e.g,"buffering"),w=e.o,S=e.F,k=e.K,D=e.wi,x=e.j,I=e.M,A=e.I,R=e.H,E=Kx(e.g),P=[];e=m(e.h.g);for(var L=e.next();!L.done;L=e.next())L=L.value,P.push({timestamp:L.timestamp,id:L.id,type:L.type,fromAdaptation:L.fromAdaptation,bandwidth:L.bandwidth});return{width:t,height:n,currentCodecs:r,streamBandwidth:i,decodedFrames:a,droppedFrames:o,corruptedFrames:s,stallsDetected:u,gapsJumped:l,estimatedBandwidth:c,completionPercent:d,loadLatency:h,manifestTimeSeconds:p,drmTimeSeconds:g,playTime:v,pauseTime:y,bufferingTime:T,licenseTime:w,liveLatency:S,maxSegmentDuration:k,manifestSizeBytes:D,bytesDownloaded:x,nonFatalErrorCount:I,manifestPeriodCount:A,manifestGapCount:R,stateHistory:E,switchHistory:P}}function Un(e,t,n,r){Oe.call(this),this.N=e,this.V=t,this.Da=r.networkingEngine,this.o=n,this.C=null,this.za=0,this.Ta=r.md,this.G=r.yk,this.Ua=r.zk,this.g=r.config,this.m=this.H=this.h=null,this.oa=!1,this.I=r.Kk,this.va=!1,this.j=null,this.ba=!1,this.u=null,this.M=new Map,this.ya=!1,this.Fa=r.Jk,this.X=new el,this.ma=new Be,this.B=new Be,this.O=null,this.l=!1,this.$=r.pj,this.T=this.i=null,this.R=!1,this.K=[],this.J=[],this.F=!0}it(Un,Oe);function Jo(e,t,n){(e=t?e.J:e.K)?e.push(n):n()}function Yx(e){if(e.J)for(var t=m(e.J),n=t.next();!n.done;n=t.next())n=n.value,n();e.J=null}function Iv(e,t){if(e.O=t,e.R=!0,e.K){t=m(e.K);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.K=null}f=Un.prototype,f.getStartTime=function(){return this.o},f.rd=function(){return this.N},f.Lg=function(){return this.h};function Jx(e){return e.va=!0,e.I}f.getStats=function(){return this.X};function $x(e){return e.ba=!0,e.j}f.Vj=function(){return this.i?Ni(this.i):null},f.Uj=function(){return this.T?Ui(this.T):null};function Qx(e){return e.ya=!0,e.M}f.start=function(){var e=this;(function(){var t;return C(function(n){switch(n.g){case 1:return b(n,Promise.resolve(),2);case 2:return le(n,3),b(n,Zx(e),5);case 5:if(li(e),U.shakaMediaKeysPolyfill==="webkit"){n.A(6);break}return b(n,Ev(e),7);case 7:li(e);case 6:return b(n,t2(e),8);case 8:if(li(e),!e.$){n.A(9);break}return b(n,n2(e),10);case 10:li(e);case 9:if(!e.$||!e.j){n.A(11);break}return b(n,iS(e.j),12);case 12:li(e);case 11:e.B.resolve(),pe(n,0);break;case 3:t=ce(n),t instanceof M&&(t.code==7001||t.code==7003)||e.B.reject(t),G(n)}})})()},f.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):Oe.prototype.dispatchEvent.call(this,e)},f.onError=function(e){e.severity===2&&(this.B.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Y("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function li(e){if(e.l)throw new M(2,7,7003)}function lf(e,t){e.dispatchEvent(new Y("onstatechange",new Map().set("state",t)))}function Zx(e){var t,n,r,i,a,o;return C(function(s){switch(s.g){case 1:if(lf(e,"manifest-parser"),e.m||(e.H=tg(e.N,e.V),e.m=e.H(),e.m.configure(e.g.manifest,function(){return e.F})),t=Date.now()/1e3,lf(e,"manifest"),e.h){s.A(2);break}return b(s,e.m.start(e.N,e.Ua),3);case 3:return e.h=s.h,Mv(e.h),b(s,e2(e),2);case 2:return e.ma.resolve(),n=new Y("manifestparsed",void 0),b(s,Promise.resolve(),5);case 5:if(e.dispatchEvent(n),e.h.variants.length==0)throw new M(2,4,4036);if(Mv(e.h),r=cm(e.G,e.h),!r){s.A(6);break}return i=new Y("trackschanged",void 0),b(s,Promise.resolve(),7);case 7:li(e),e.dispatchEvent(i);case 6:a=Date.now()/1e3,o=a-t,e.X.J=o,G(s)}})}function Ev(e,t){var n,r,i,a;return C(function(o){switch(o.g){case 1:return!e.h||e.j?o.return():(lf(e,"drm-engine"),e.za=Date.now()/1e3,e.j=e.Ta(),e.G.g=e.j,e.j.configure(e.g.drm,function(){return e.F}),n=hu(e.h.variants),r=!0,e.h&&e.h.presentationTimeline&&(r=e.h.presentationTimeline.W()),b(o,$g(e.j,n,e.h.offlineSessionIds,r),2));case 2:if(li(e),!t){o.A(3);break}return b(o,e.j.Vb(t),4);case 4:li(e);case 3:return b(o,lm(e.G,e.h),5);case 5:if(i=o.h,!i){o.A(0);break}return a=new Y("trackschanged",void 0),b(o,Promise.resolve(),7);case 7:e.dispatchEvent(a),G(o)}})}f.configure=function(e,t){e=Xu(e,t),_r(this.g,e)},f.getConfiguration=function(){return Wn(this.g)};function e2(e){return C(function(t){return e.C||(e.C=e.g.adaptationSetCriteriaFactory(),e.C.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredAudioRole,videoRole:e.g.preferredVideoRole,channelCount:0,hdrLevel:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,audioLabel:e.g.preferredAudioLabel,videoLabel:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),e.i||!e.h.variants.length||e.h.variants.length!=1&&e.h.type!="HLS"?t.A(0):(e.i=cf(e),e.i?b(t,Cv(e.i),0):t.A(0))})}function t2(e){return C(function(t){return t.g==1?!e.i||e.h.variants.includes(e.i)?t.A(0):b(t,r2(e.i),3):(e.i=cf(e),e.i?b(t,Cv(e.i),0):t.A(0))})}function n2(e){var t,n,r,i,a;return C(function(o){return!e.i&&(t=cf(e))&&(e.i=t),e.i?(n=e.h.presentationTimeline.W(),r=[],i=e.i,i.video&&r.push(df(e,i.video,n)),i.audio&&r.push(df(e,i.audio,n)),(a=fa(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&Ug(i.audio,a,e.g)&&(r.push(df(e,a,n)),e.T=a),b(o,Promise.all(r),0)):o.A(0)})}function cf(e){if(!e.u){var t=e.g.abrFactory;e.u=t(),e.u.configure(e.g.abr)}return t=hu(e.h.variants),t=e.C.create(t),e.u.setVariants(Array.from(t.values())),e.u.chooseVariant(!0)}function df(e,t,n){var r,i,a,o,s;return C(function(u){return u.g==1?(r=e.g.streaming.segmentPrefetchLimit||2,i=new Ou(r,t,function(l,c,d){return Gu(l,c,d||null,e.g.streaming.retryParameters,e.Da,e.F)},!1),e.M.set(t.id,i),t.segmentIndex?u.A(2):b(u,t.createSegmentIndex(),2)):(a=typeof e.o=="number"?e.o:0,o=t.segmentIndex.Xb(a),s=null,o&&(s=o.current(),s||(s=o.next().value)),s||(s=ar(t.segmentIndex)),s?n?s.ea?b(u,lv(i,s.ea),0):u.A(0):b(u,Go(i,s.startTime),0):u.A(0))})}function Cv(e){var t,n,r,i;return C(function(a){for(t=[],n=m([e.video,e.audio]),r=n.next();!r.done;r=n.next())(i=r.value)&&!i.segmentIndex&&t.push(i.createSegmentIndex());return t.length>0?b(a,Promise.all(t),0):a.A(0)})}function r2(e){var t,n,r,i;return C(function(a){for(t=[],n=m([e.video,e.audio]),r=n.next();!r.done;r=n.next())(i=r.value)&&i.segmentIndex&&i.closeSegmentIndex&&t.push(i.closeSegmentIndex());return t.length>0?b(a,Promise.all(t),0):a.A(0)})}f.rl=function(){return this.B},f.destroy=function(){var e=this,t,n,r;return C(function(i){if(i.g==1)return e.l=!0,!e.m||e.oa?i.A(2):b(i,e.m.stop(),2);if(i.g!=4)return e.u&&e.u.release(),e.I&&!e.va&&e.I.release(),!e.j||e.ba?i.A(4):b(i,e.j.destroy(),4);if(e.M.size>0&&!e.ya)for(t=m(e.M.values()),n=t.next();!n.done;n=t.next())r=n.value,or(r);G(i)})};function Mv(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}q("shaka.media.PreloadManager",Un),Un.prototype.destroy=Un.prototype.destroy,Un.prototype.waitForFinish=Un.prototype.rl,Un.prototype.getPrefetchedTextTrack=Un.prototype.Uj,Un.prototype.getPrefetchedVariantTrack=Un.prototype.Vj;function Gi(e,t){Oe.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{kd:null,jd:Pa,Uc:function(r,i){return jr(n,"enter",r,i)}},{kd:$o,jd:Pa,Uc:function(r,i){return jr(n,"enter",r,i)}},{kd:Qo,jd:Pa,Uc:function(r,i){return jr(n,"enter",r,i)}},{kd:Pa,jd:$o,Uc:function(r,i){return jr(n,"exit",r,i)}},{kd:Pa,jd:Qo,Uc:function(r,i){return jr(n,"exit",r,i)}},{kd:$o,jd:Qo,Uc:function(r,i){i?jr(n,"skip",r,i):(jr(n,"enter",r,i),jr(n,"exit",r,i))}},{kd:Qo,jd:$o,Uc:function(r,i){return jr(n,"skip",r,i)}}],this.h=new Pe,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}it(Gi,Oe),Gi.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Oe.prototype.release.call(this)},Gi.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.h.values()),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.g.get(r),a=e<r.startTime?$o:e>r.endTime?Qo:Pa;this.g.set(r,a);for(var o=m(this.m),s=o.next();!s.done;s=o.next())s=s.value,s.kd==i&&s.jd==a&&s.Uc(r,t)}}};function jr(e,t,n,r){t=new Y(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}for(var $o=1,Pa=2,Qo=3,ci={ach:"Lwo",ady:"Адыгэбзэ",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Tɕɥi",ar:"العربية","ar-AR":"العربية","ar-MA":"العربية","ar-SA":"العربية (السعودية)","ay-BO":"Aymar aru",az:"Azərbaycan dili","az-AZ":"Azərbaycan dili","be-BY":"Беларуская",bg:"Български","bg-BG":"Български",bn:"বাংলা","bn-IN":"বাংলা (ভারত)","bn-BD":"বাংলা(বাংলাদেশ)","bs-BA":"Bosanski",ca:"Català","ca-ES":"Català",cak:"Maya Kaqchikel","ck-US":"ᏣᎳᎩ (tsalagi)",cs:"Čeština","cs-CZ":"Čeština",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (Österreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbšćina",el:"Ελληνικά","el-GR":"Ελληνικά",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Español","es-AR":"Español (Argentine)","es-419":"Español (Latinoamérica)","es-CL":"Español (Chile)","es-CO":"Español (Colombia)","es-EC":"Español (Ecuador)","es-ES":"Español (España)","es-LA":"Español (Latinoamérica)","es-NI":"Español (Nicaragua)","es-MX":"Español (México)","es-US":"Español (Estados Unidos)","es-VE":"Español (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"فارسی","fa-IR":"فارسی","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Føroyskt",fr:"Français","fr-CA":"Français (Canada)","fr-FR":"Français (France)","fr-BE":"Français (Belgique)","fr-CH":"Français (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avañe'ẽ","gu-IN":"ગુજરાતી","gx-GR":"Ἑλληνική ἀρχαία",he:"עברית‏","he-IL":"עברית‏",hi:"हिन्दी","hi-IN":"हिन्दी",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbšćina",ht:"Kreyòl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"Հայերեն",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"Íslenska","is-IS":"Íslenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"日本語","ja-JP":"日本語","jv-ID":"Basa Jawa","ka-GE":"ქართული","kk-KZ":"Қазақша",km:"ភាសាខ្មែរ","km-KH":"ភាសាខ្មែរ",kab:"Taqbaylit",kn:"ಕನ್ನಡ","kn-IN":"ಕನ್ನಡ (India)",ko:"한국어","ko-KR":"한국어 (韩国)",ku:"Kurdî","ku-TR":"Kurdî",la:"Latin","la-VA":"Latin",lb:"Lëtzebuergesch","li-NL":"Lèmbörgs",lt:"Lietuvių","lt-LT":"Lietuvių",lv:"Latviešu","lv-LV":"Latviešu",mai:"मैथिली, মৈথিলী","mg-MG":"Malagasy",mk:"Македонски","mk-MK":"Македонски (Македонски)",ml:"മലയാളം","ml-IN":"മലയാളം","mn-MN":"Монгол",mr:"मराठी","mr-IN":"मराठी",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"ဗမာစကာ",nb:"Norsk (bokmål)","nb-NO":"Norsk (bokmål)",ne:"नेपाली","ne-NP":"नेपाली",nl:"Nederlands","nl-BE":"Nederlands (België)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"ଓଡ଼ିଆ",pa:"ਪੰਜਾਬੀ","pa-IN":"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",pl:"Polski","pl-PL":"Polski","ps-AF":"پښتو",pt:"Português","pt-BR":"Português (Brasil)","pt-PT":"Português (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Română","ro-RO":"Română",ru:"Русский","ru-RU":"Русский","sa-IN":"संस्कृतम्","se-NO":"Davvisámegiella","si-LK":"පළාත",sk:"Slovenčina","sk-SK":"Slovenčina (Slovakia)",sl:"Slovenščina","sl-SI":"Slovenščina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"Српски","sr-RS":"Српски (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"தமிழ்","ta-IN":"தமிழ்",te:"తెలుగు","te-IN":"తెలుగు",tg:"забо́ни тоҷикӣ́","tg-TJ":"тоҷикӣ",th:"ภาษาไทย","th-TH":"ภาษาไทย (ประเทศไทย)",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Türkçe","tr-TR":"Türkçe","tt-RU":"татарча",uk:"Українська","uk-UA":"Українська",ur:"اردو","ur-PK":"اردو",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Tiếng Việt","vi-VN":"Tiếng Việt","xh-ZA":"isiXhosa",yi:"ייִדיש","yi-DE":"ייִדיש (German)",zh:"中文","zh-HANS":"中文简体","zh-HANT":"中文繁體","zh-CN":"中文（中国）","zh-HK":"中文（香港）","zh-SG":"中文（新加坡）","zh-TW":"中文（台灣）","zu-ZA":"isiZulu"},Dv=m(Object.keys(ci)),ff=Dv.next();!ff.done;ff=Dv.next()){var Rv=ff.value;ci[Rv.toLowerCase()]=ci[Rv]}function Pv(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(o){return Pv(o,e)}).join("");if(!e.payload)return e.payload;var n=[],r=e.fontWeight>=ua,i=e.fontStyle==la,a=e.textDecoration.includes(Ir);return r&&n.push(["b"]),i&&n.push(["i"]),a&&n.push(["u"]),i=e.color,i==""&&t&&(i=t.color),r="",(i=Lv(i))&&(r+="."+i),i=e.backgroundColor,i==""&&t&&(i=t.backgroundColor),(t=Lv(i))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(o,s){var u=m(s);return s=u.next().value,u=u.next().value,"<"+s+(u===void 0?"":u)+">"+o+"</"+s+">"},e.payload)}function Lv(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&e.length>7&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function hf(e,t){var n=[];e=m(Nv(e));for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,H(hf(r.nestedCues,r)));else{var i=r.clone();i.nestedCues=[],i.payload=Pv(r,t),n.push(i)}return n}function Nv(e){var t=[];e=m(e);for(var n=e.next(),r={};!n.done;r={mg:void 0},n=e.next())r.mg=n.value,t.some((function(i){return function(a){return nu(i.mg,a)}})(r))||t.push(r.mg);return t}function i2(e){function t(r){for(var i=5381,a=r.length;a;)i=i*33^r.charCodeAt(--a);return(i>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function Uv(e,t){var n=hf(t),r=[];t=e.cues?Array.from(e.cues):[],n=m(n);for(var i=n.next(),a={};!i.done;a={wd:void 0},i=n.next())a.wd=i.value,!t.some((function(o){return function(s){return s.startTime==o.wd.startTime&&s.endTime==o.wd.endTime&&s.text==o.wd.payload}})(a))&&a.wd.payload&&(i=i2(a.wd))&&r.push(i);for(t=r.slice().sort(function(o,s){return o.startTime!=s.startTime?o.startTime-s.startTime:o.endTime!=s.endTime?o.endTime-s.startTime:"line"in VTTCue.prototype?r.indexOf(s)-r.indexOf(o):r.indexOf(o)-r.indexOf(s)}),t=m(t),n=t.next();!n.done;n=t.next())e.addCue(n.value)}function pf(e,t){var n=!1;e.mode==="disabled"&&(n=!0,e.mode="hidden");for(var r=0;r<e.cues.length;){var i=e.cues[r];t(i)?e.removeCue(i):r++}n&&(e.mode="disabled")}function bt(e){var t=this;this.i=e,this.l=new Pe,this.j=null,this.h=new Map,this.g=-1,this.u=!1,this.o=null,this.C=function(){t.l.Ma(t.i,"textchanged",t.m),t.l.Ma(t.j.textTracks,"change",t.B);for(var n=m(t.h.values()),r=n.next();!r.done;r=n.next())r.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){var n=new Map,r=t.i.Lc();r=m(r);for(var i=r.next();!i.done;i=r.next()){if(i=i.value,t.h.has(i.id)){var a=t.h.get(i.id);i.active||a.track.mode==="disabled"||(a.track.mode="disabled"),t.h.delete(i.id)}else{a=t.j.ownerDocument.createElement("track"),a.kind=a2(i);var o=a,s=void 0;if(i.label)s=i.label;else if(i.language)if(i.language in ci)s=ci[i.language];else{var u=uu(i.language);u in ci&&(s=ci[u]+" ("+i.language+")")}s||(s=i.originalTextId,i.language&&i.language!==i.originalTextId&&(s+=" ("+i.language+")")),o.label=s,i.language in ci&&(a.srclang=i.language),a.src="data:,WEBVTT",a.track.mode="disabled",t.j.appendChild(a)}n.set(i.id,a),i.active&&(t.g=i.id)}for(r=m(t.h.values()),i=r.next();!i.done;i=r.next())i.value.remove();t.g>-1&&(n.has(t.g)?(r=n.get(t.g).track,r.mode==="disabled"&&(r.mode=t.u?"showing":"hidden")):t.g=-1),t.h=n},this.B=function(){if(!t.o){var n=t.j;t.o=new ve(function(){if(t.o=null,t.j===n){var r=-1,i=!1;if(t.h.has(t.g)){var a=t.h.get(t.g);a.track.mode==="showing"?(r=t.g,i=!0):a.track.mode==="hidden"&&(r=t.g)}if(!i)for(i=m(t.h),a=i.next();!a.done;a=i.next()){var o=m(a.value);if(a=o.next().value,o=o.next().value,o.track.mode==="showing"){r=a;break}else r<0&&o.track.mode==="hidden"&&(r=a)}for(i=m(t.h),a=i.next();!a.done;a=i.next())o=m(a.value),a=o.next().value,o=o.next().value,a!==r&&o.track.mode!=="disabled"&&(o.track.mode="disabled");t.g!==r&&(t.g=r,r>-1&&t.i.ph({id:r})),t.i.wh(r>-1&&t.h.get(r).track.mode==="showing")}}).ka(0)}},this.l.D(e,"loaded",function(){return t.enableTextDisplayer()}),this.enableTextDisplayer()}f=bt.prototype,f.configure=function(){},f.remove=function(e,t){if(this.i)this.h.has(this.g)&&pf(this.h.get(this.g).track,function(n){return n.startTime<t&&n.endTime>e});else return!1;return!0},f.append=function(e){this.h.has(this.g)&&Uv(this.h.get(this.g).track,e)},f.destroy=function(){return this.i&&(this.j&&this.C(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},f.isTextVisible=function(){return this.u},f.setTextVisibility=function(e){if(this.u=e,this.h.has(this.g)){var t=this.h.get(this.g).track;t.mode!=="disabled"&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&this.i.ae()===3)if(t=Array.from(this.i.bf().textTracks).filter(function(r){return["captions","subtitles","forced"].includes(r.kind)}),e){e=null,t=m(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.mode==="showing"){e=null;break}else e||n.mode!=="hidden"||(e=n);e&&(e.mode="showing")}else for(e=m(t),t=e.next();!t.done;t=e.next())t=t.value,t.mode==="showing"&&(t.mode="hidden")},f.setTextLanguage=function(){},f.enableTextDisplayer=function(){!this.j&&this.i&&this.i.ae()===2&&(this.j=this.i.bf(),this.l.Aa(this.i,"unloading",this.C),this.l.D(this.i,"textchanged",this.m),this.l.D(this.j.textTracks,"change",this.B),this.m())};function a2(e){var t=ge();return e.forced&&t.Ha()==="WEBKIT"?"forced":e.kind==="caption"||e.roles&&e.roles.some(function(n){return n.includes("transcribes-spoken-dialog")})&&e.roles.some(function(n){return n.includes("describes-music-and-sound")})?"captions":"subtitles"}q("shaka.text.NativeTextDisplayer",bt),bt.prototype.enableTextDisplayer=bt.prototype.enableTextDisplayer,bt.prototype.setTextLanguage=bt.prototype.setTextLanguage,bt.prototype.setTextVisibility=bt.prototype.setTextVisibility,bt.prototype.isTextVisible=bt.prototype.isTextVisible,bt.prototype.destroy=bt.prototype.destroy,bt.prototype.append=bt.prototype.append,bt.prototype.remove=bt.prototype.remove,bt.prototype.configure=bt.prototype.configure;function _t(e,t){for(Ce("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,e=m(Array.from(this.h.textTracks)),t=e.next();!t.done;t=e.next())t=t.value,t.kind!=="metadata"&&t.kind!=="chapters"&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}f=_t.prototype,f.configure=function(){},f.remove=function(e,t){return this.g?(pf(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},f.append=function(e){this.g&&Uv(this.g,e)},f.destroy=function(){return this.g&&(pf(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},f.isTextVisible=function(){return this.g?this.g.mode=="showing":!1},f.setTextVisibility=function(e){e&&!this.g&&_v(this),this.g&&(this.g.mode=e?"showing":"hidden")},f.setTextLanguage=function(){},f.enableTextDisplayer=function(){_v(this)};function _v(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}q("shaka.text.SimpleTextDisplayer",_t),_t.prototype.enableTextDisplayer=_t.prototype.enableTextDisplayer,_t.prototype.setTextLanguage=_t.prototype.setTextLanguage,_t.prototype.setTextVisibility=_t.prototype.setTextVisibility,_t.prototype.isTextVisible=_t.prototype.isTextVisible,_t.prototype.destroy=_t.prototype.destroy,_t.prototype.append=_t.prototype.append,_t.prototype.remove=_t.prototype.remove,_t.prototype.configure=_t.prototype.configure;function jt(){}f=jt.prototype,f.configure=function(){},f.remove=function(){},f.append=function(){},f.destroy=function(){},f.isTextVisible=function(){return!1},f.setTextVisibility=function(){},f.setTextLanguage=function(){},f.enableTextDisplayer=function(){},q("shaka.text.StubTextDisplayer",jt),jt.prototype.enableTextDisplayer=jt.prototype.enableTextDisplayer,jt.prototype.setTextLanguage=jt.prototype.setTextLanguage,jt.prototype.setTextVisibility=jt.prototype.setTextVisibility,jt.prototype.isTextVisible=jt.prototype.isTextVisible,jt.prototype.destroy=jt.prototype.destroy,jt.prototype.append=jt.prototype.append,jt.prototype.remove=jt.prototype.remove,jt.prototype.configure=jt.prototype.configure;function Ot(e,t){var n=this;this.m=!1,this.h=[],this.j=e,this.o=t,this.C=this.u=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.B=new ve(function(){n.j.paused||di(n)}),Zo(this),this.l=new Map,this.i=new Pe,this.i.D(document,"fullscreenchange",function(){di(n,!0)}),this.i.D(this.j,"seeking",function(){di(n,!0)}),this.i.D(this.j,"ratechange",function(){Zo(n)}),this.i.D(this.j,"resize",function(){var r=n.j,i=r.videoWidth;r=r.videoHeight,i&&r?n.u=i/r:n.u=null}),this.F=null,"ResizeObserver"in U&&(this.F=new ResizeObserver(function(){di(n,!0)}),this.F.observe(this.g)),this.G=new Map}f=Ot.prototype,f.configure=function(e){this.C=e,Zo(this),di(this,!0)},f.append=function(e){var t=[].concat(H(this.h));e=m(Nv(e));for(var n=e.next(),r={};!n.done;r={ng:void 0},n=e.next())r.ng=n.value,t.some((function(i){return function(a){return nu(a,i.ng)}})(r))||this.h.push(r.ng);this.h.length&&Zo(this),di(this)},f.destroy=function(){return this.g&&(this.g.parentElement&&this.o.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.B&&(this.B.stop(),this.B=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.F&&(this.F.disconnect(),this.F=null)),Promise.resolve()},f.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),di(this,n>this.h.length),this.h.length||Zo(this),!0},f.isTextVisible=function(){return this.m},f.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.o.appendChild(this.g),di(this,!0)):this.g.parentElement&&this.o.removeChild(this.g)},f.setTextLanguage=function(e){e&&e!="und"?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},f.enableTextDisplayer=function(){};function Zo(e){e.B&&(e.h.length?e.B.Ea((e.C?e.C.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.B.stop())}function o2(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function jv(e,t,n,r,i){var a=!1,o=[],s=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value,i.push(u);var l=e.l.get(u),c=u.startTime<=r&&u.endTime>r,d=l?l.nj:null;l&&(o.push(l.og),l.$c&&o.push(l.$c),c||(a=!0,e.l.delete(u),l=null)),c&&(s.push(u),l?o2(e,d)||(a=!0):(s2(e,u,i),l=e.l.get(u),d=l.nj,a=!0)),u.nestedCues.length>0&&d&&jv(e,u.nestedCues,d,r,i),i.pop()}if(a){for(r=m(o),i=r.next();!i.done;i=r.next())i=i.value,i.parentElement&&i.parentElement.removeChild(i);for(s.sort(function(h,p){return h.startTime!=p.startTime?h.startTime-p.startTime:h.endTime-p.endTime}),s=m(s),r=s.next();!r.done;r=s.next())r=e.l.get(r.value),r.$c?(r.$c.contains(n)&&r.$c.removeChild(n),n.appendChild(r.$c),r.$c.appendChild(r.og)):n.appendChild(r.og)}}function di(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||t!==void 0&&t){t=m(e.G.values());for(var r=t.next();!r.done;r=t.next())jo(r.value);jo(e.g),e.l.clear(),e.G.clear()}e.m&&jv(e,e.h,e.g,n,[])}}function s2(e,t,n){var r=n.length>1,i=r?"span":"div";t.lineBreak&&(i="br"),t.rubyTag&&(i=t.rubyTag),r=!r&&t.nestedCues.length>0;var a=document.createElement(i);if(i!="br"&&l2(e,a,t,n,r),n=null,t.region&&t.region.id){var o=t.region,s=e.u===4/3?2.5:1.9;if(n=o.id+"_"+o.width+"x"+o.height+(o.heightUnits==ln?"%":"px")+"-"+o.viewportAnchorX+"x"+o.viewportAnchorY+(o.viewportAnchorUnits==ln?"%":"px"),e.G.has(n))n=e.G.get(n);else{i=document.createElement("span");var u=o.heightUnits==ln?"%":"px",l=o.widthUnits==ln?"%":"px",c=o.viewportAnchorUnits==ln?"%":"px";i.id="shaka-text-region---"+n,i.classList.add("shaka-text-region"),i.style.position="absolute";var d=o.height,h=o.width;o.heightUnits===2&&(d=o.height*5.33,u="%"),o.widthUnits===2&&(h=o.width*s,l="%"),i.style.height=d+u,i.style.width=h+l,o.viewportAnchorUnits===2?(s=o.viewportAnchorY/75*100,u=o.viewportAnchorX/(e.u===4/3?160:210)*100,s-=o.regionAnchorY*d/100,u-=o.regionAnchorX*h/100,i.style.top=s+"%",i.style.left=u+"%"):(i.style.top=o.viewportAnchorY-o.regionAnchorY*d/100+c,i.style.left=o.viewportAnchorX-o.regionAnchorX*h/100+c),o.heightUnits!==0&&o.widthUnits!==0&&o.viewportAnchorUnits!==0&&(o=Math.max(0,Math.min(100-(parseInt(i.style.width.slice(0,-1),10)||0),parseInt(i.style.left.slice(0,-1),10)||0)),i.style.top=Math.max(0,Math.min(100-(parseInt(i.style.height.slice(0,-1),10)||0),parseInt(i.style.top.slice(0,-1),10)||0))+"%",i.style.left=o+"%"),i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="center",i.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.G.set(n,i),n=i}}i=a,r&&(i=document.createElement("span"),i.classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,i.style.lineHeight="normal",a.appendChild(i)),e.l.set(t,{og:a,nj:i,$c:n})}function u2(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==iu?n:e==="left"||e==="start"&&t===bo||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===bo?"line-right":"center"}function l2(e,t,n,r,i){var a=t.style,o=n.nestedCues.length==0,s=r.length>1;a.whiteSpace="pre-wrap";var u=n.payload.replace(/\s+$/g,function(c){return" ".repeat(c.length)});if(a.webkitTextStrokeColor=n.textStrokeColor,a.webkitTextStrokeWidth=n.textStrokeWidth,a.color=n.color,a.direction=n.direction,a.opacity=n.opacity,a.paddingLeft=gf(n.linePadding,n,e.o),a.paddingRight=gf(n.linePadding,n,e.o),a.textCombineUpright=n.textCombineUpright,a.textShadow=n.textShadow,n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",n.backgroundColor&&(a.backgroundColor=n.backgroundColor),a.width="100%",a.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),i||((t=c2(r,function(c){return c.backgroundColor}))?l.style.backgroundColor=t:u&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),u&&(l.setAttribute("translate","no"),l.textContent=u)}s&&!r[r.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(a.width="100%",a.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(a.width="100%",a.alignItems="end"),a.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),o||(a.margin="0"),a.fontFamily=n.fontFamily,a.fontWeight=n.fontWeight.toString(),a.fontStyle=n.fontStyle,a.letterSpacing=n.letterSpacing,r=e.C?e.C.fontScaleFactor:1,(r!==1||n.fontSize)&&(a.fontSize=gf(n.fontSize||"1em",n,e.o,r)),r=n.line,r!=null&&(o=n.lineInterpretation,o==wo&&(o=1,s=16,e.u&&e.u<1&&(s=32),r=r<0?100+r/s*100:r/s*100),o==1&&(a.position="absolute",n.writingMode==Ri?(a.width="100%",n.lineAlign==Pi?a.top=r+"%":n.lineAlign=="end"&&(a.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(a.height="100%",n.lineAlign==Pi?a.left=r+"%":n.lineAlign=="end"&&(a.right=100-r+"%")):(a.height="100%",n.lineAlign==Pi?a.right=r+"%":n.lineAlign=="end"&&(a.left=100-r+"%")))),a.lineHeight=n.lineHeight,e=u2(n),e=="line-left"?(a.cssFloat="left",n.position!==null&&(a.position="absolute",n.writingMode==Ri?(a.left=n.position+"%",a.width="auto"):a.top=n.position+"%")):e=="line-right"?(a.cssFloat="right",n.position!==null&&(a.position="absolute",n.writingMode==Ri?(a.right=100-n.position+"%",a.width="auto"):a.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(a.position="absolute",n.writingMode==Ri?(a.left=n.position+"%",a.width="auto"):a.top=n.position+"%",n.size&&(a.transform="translateX(-50%)")),a.textAlign=n.textAlign,a.textDecoration=n.textDecoration.join(" "),a.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Ri?a.width=n.size+"%":a.height=n.size+"%")}function gf(e,t,n,r){r=r===void 0?1:r;var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;switch(e=i.unit,r*=i.value,e){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return r+e}}function c2(e,t){for(var n=e.length-1;n>=0;n--){var r=t(e[n]);if(r||r===0)return r}return null}q("shaka.text.UITextDisplayer",Ot),Ot.prototype.enableTextDisplayer=Ot.prototype.enableTextDisplayer,Ot.prototype.setTextLanguage=Ot.prototype.setTextLanguage,Ot.prototype.setTextVisibility=Ot.prototype.setTextVisibility,Ot.prototype.isTextVisible=Ot.prototype.isTextVisible,Ot.prototype.remove=Ot.prototype.remove,Ot.prototype.destroy=Ot.prototype.destroy,Ot.prototype.append=Ot.prototype.append,Ot.prototype.configure=Ot.prototype.configure;function d2(e,t){function n(a){for(var o=a,s=m(t),u=s.next();!u.done;u=s.next())u=u.value,u.end&&u.start<a&&(o+=u.end-u.start);return a=Math.floor(o/3600),s=Math.floor(o/60%60),u=Math.floor(o%60),o=Math.floor(o*1e3%1e3),(a<10?"0":"")+a+":"+(s<10?"0":"")+s+":"+(u<10?"0":"")+u+"."+(o<100?o<10?"00":"0":"")+o}var r=hf(e);e=`WEBVTT

`,r=m(r);for(var i=r.next();!i.done;i=r.next())i=i.value,e+=n(i.startTime)+" --> "+n(i.endTime)+(function(a){var o=[];switch(a.textAlign){case"left":o.push("align:left");break;case"right":o.push("align:right");break;case hr:o.push("align:middle");break;case"start":o.push("align:start");break;case"end":o.push("align:end")}switch(a.writingMode){case"vertical-lr":o.push("vertical:lr");break;case"vertical-rl":o.push("vertical:rl")}return o.length?" "+o.join(" "):""})(i)+`
`,e+=i.payload+`

`;return e}q("shaka.text.WebVttGenerator",function(){});function mf(e,t){this.g=t,this.j=e,this.m=new Map,this.l=void 0,this.F=!1,this.J=!0,this.u=this.I=!1,this.C=this.B=void 0,this.H=0,this.K={request:!1,response:!1,event:!1},this.o={},this.i=new Pe,this.G=[],this.h=null}mf.prototype.setMediaElement=function(e){this.h=e,m2(this)},mf.prototype.configure=function(e){this.g=e,v2(this)};function f2(e){e.m.clear(),e.F=!1,e.J=!0,e.I=!1,e.u=!1,e.B=0,e.C=0,e.H=0,e.K={request:!1,response:!1,event:!1},Ov(e),e.o={},e.h=null,e.i.Qa()}function h2(e,t){e.u=t,e.u?e.l==ol?e.l=sl:e.l==ul&&(e.l=ll):e.l==sl?e.l=ol:e.l==ll&&(e.l=ul)}function p2(e,t){if(e.g&&e.g.enabled&&(Bt(e,"ps",{dd:"d"}),e.h&&e.h.autoplay)){var n=e.h.play();n&&n.then(function(){e.H=t}).catch(function(){e.H=0})}}function g2(e,t,n){try{if(!e.g.enabled)return t;var r=yf(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var i=nl;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":i=il;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":i=qv;break e}i=void 0}r.ot=i,r.su=!0;var a=es(r);return tl(t,a)}catch(o){return Xr("CMCD_SRC_ERROR","Could not generate src CMCD data.",o),t}}function m2(e){e.i.D(e.h,"playing",function(){e.C||(e.C=Date.now()),Bt(e,"ps",{dd:"p"})}),e.i.D(e.h,"volumechange",function(){Bt(e,e.h.muted?"m":"um")}),e.i.D(e.h,"play",function(){e.B||(e.B=Date.now(),Bt(e,"ps",{dd:"s"}))}),e.i.D(e.h,"pause",function(){Bt(e,"ps",{dd:"a"})}),e.i.D(e.j,"buffering",function(){Bt(e,"ps",{dd:"w"})}),e.i.D(e.h,"seeking",function(){return Bt(e,"ps",{dd:"k"})}),e.i.D(document,"fullscreenchange",function(){Bt(e,document.fullscreenElement?"pe":"pc")});var t=e.h;(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.i.D(t,"webkitpresentationmodechanged",function(){t.webkitPresentationMode?Bt(e,t.webkitPresentationMode!=="inline"?"pe":"pc"):t.webkitSupportsFullscreen&&Bt(e,t.webkitDisplayingFullscreen?"pe":"pc")}),e.i.D(e.h,"enterpictureinpicture",function(){Bt(e,"pe")}),e.i.D(e.h,"leavepictureinpicture",function(){Bt(e,"pc")}),"documentPictureInPicture"in U&&e.i.D(U.documentPictureInPicture,"enter",function(n){Bt(e,"pe"),e.i.Aa(n.window,"pagehide",function(){Bt(e,"pc")})}),e.i.D(document,"visibilitychange",function(){document.hidden?Bt(e,"b",{bg:!0}):Bt(e,"b")}),e.i.D(e.j,"complete",function(){Bt(e,"ps",{dd:"e"})})}function v2(e){Ov(e);var t=Bv(e);t=m(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value.timeInterval,n===void 0&&(n=D2),n>=1){var r=new ve(function(){return Bt(e,R2)});r.Ea(n),e.G.push(r)}}function Ov(e){if(e.G)for(var t=m(e.G),n=t.next();!n.done;n=t.next())n.value.stop();e.G=[]}function Bv(e){return(e=e.g.targets)?e.filter(function(t){return t.mode===Jv&&t.enabled}):[]}function vf(e){return(e=e.g.targets)?e.filter(function(t){return t.mode===Yv&&t.enabled===!0}):[]}function yf(e){return e.g.sessionId||(e.g.sessionId=U.crypto.randomUUID()),{v:e.g.version,sf:e.l,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.j.getBandwidthEstimate()/1e3}}function Bt(e,t,n){if(n=n===void 0?{}:n,t=Object.assign({e:t,ts:Date.now()},n),t=Tf(e,t,Jv),n=e.g.targets,!(e.g.version<xf)&&n){var r=Bv(e);n=Array.from(new Set([].concat(H(Af),H(E2)))),r=m(r);for(var i=r.next();!i.done;i=r.next()){i=i.value;var a=bf(i.includeKeys||[],n);a.includes(zv)||a.push(zv),a=wf(t,a);var o=i.events||[],s=a.e,u=a.sta;s&&(!C2.includes(s)||!(s!=="ps"||u&&M2.includes(u))||o&&o.length>0&&!o.includes(s))||Fv(e,a,i)}}}function La(e,t,n){if(e.g.enabled){n=Tf(e,n,Xv);var r=Vv({mode:Xv,useHeaders:e.g.useHeaders,includeKeys:e.g.includeKeys||[]});e.o[r]||(e.o[r]={request:1,response:1}),n.sn=e.o[r].request++,r=e.g.includeKeys||[];var i=e.g.version==xf?Array.from(new Set([].concat(H(Af),H(k2)))):Wv;r=bf(r,i),n=wf(n,r),y2(e,n,t,e.g.useHeaders)}}function Fv(e,t,n,r){var i=Xn(),a=n.url;if(n.useHeaders){if(t=Kv(t),!Object.keys(t).length)return;r&&Object.assign(r.headers,t),r=ht([a],i),Object.assign(r.headers,t)}else{if(t=es(t),!t)return;a=tl(a,t),r&&(r.uri=a),r=ht([a],i)}e.j.Yb().request(9,r)}function y2(e,t,n,r){if(r){if(t=Kv(t),!Object.keys(t).length)return;Object.assign(n.headers,t)}else{var i=es(t);if(!i)return;n.uris=n.uris.map(function(a){return tl(a,i)})}vf(e).length>0||!e.m.has(n)||e.m.delete(n)}function bf(e,t){if(!e||e.length===0)return t;for(var n=m(e),r=n.next();!r.done;r=n.next())t.includes(r.value);return e=e.filter(function(i){return t.includes(i)})}function wf(e,t){return Object.keys(e).reduce(function(n,r){return t.includes(r)&&(n[r]=e[r]),n},{})}function b2(e){if(e.type===0)return S2;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?il:rl;if(t=="audio")return nl;if(t=="text")return e.mimeType==="application/mp4"?al:Sf}}function Vv(e){var t=Object.keys(e).sort().reduce(function(n,r){return r!=="enabled"&&(n[r]=e[r]),n},{});return JSON.stringify(t)}function w2(e,t){if(t=e.j.Hc()[t],!t.length)return NaN;var n=e.h?e.h.currentTime:0;return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?(e.end-n)*1e3:NaN}function Hv(e,t){if(t=e.j.Hc()[t],!t.length)return 0;var n=e.h?e.h.currentTime:0;return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?(e.end-n)*1e3:0}function T2(e,t){var n=e.j.sc();if(!n.length)return NaN;e=n[0],n=m(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case rl:return e.videoBandwidth||NaN;case nl:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Gv(e,t,n){var r=t.segment,i=0;r&&(i=r.endTime-r.startTime),i={d:i*1e3,st:e.j.W()?A2:x2},i.ot=b2(t);var a=i.ot===rl||i.ot===nl||i.ot===il||i.ot===al;if(t=t.stream){var o=e.j.Ob();if(a&&(i.bl=w2(e,t.type),i.ot!==al)){var s=Hv(e,t.type);i.dl=o?s/Math.abs(o):s}if(t.bandwidth&&(i.br=t.bandwidth/1e3),t.segmentIndex&&r){if((o=t.segmentIndex.Xb(r.endTime,!0,o<0))&&(o=o.next().value)&&o!=r){if(n&&!Yr(r.P(),o.P())){var u=o.P()[0];s=new URL(u);var l=new URL(n);if(s.origin!==l.origin)n=u;else{n=s.pathname.split("/").slice(1),u=l.pathname.split("/").slice(1,-1),l=Math.min(n.length,u.length);for(var c=0;c<l&&n[c]===u[c];c++)n.shift(),u.shift();for(;u.length;)u.shift(),n.unshift("..");n=n.join("/")+s.search+s.hash}i.nor=n}!o.startByte&&!o.endByte||r.startByte==o.startByte&&r.endByte==o.endByte||(n=o.startByte+"-",o.endByte&&(n+=o.endByte),i.nrr=n)}o=e.j.Ob()||1,n=Hv(e,t.type)||500,r=(t=t.bandwidth)?t*(r.endTime-r.startTime)/1e3/(n/o/1e3)*e.g.rtpSafetyFactor:NaN,isNaN(r)||(i.rtp=r)}}return a&&i.ot!==al&&(i.tb=T2(e,i.ot)/1e3),i}function Tf(e,t,n){Object.assign(t,yf(e)),t.pr=e.j.Ob();var r=t.ot===rl||t.ot===il;return e.I&&r&&(t.bs=!0,t.su=!0,e.I=!1),t.su==null&&(t.su=e.J),e.j.W()&&(r=yy(e.j),t.ltc=r||void 0),document.hidden&&(t.bg=!0),r=e.C&&e.B?e.C-(e.H||e.B):void 0,r==null||e.K[n]||(t.msd=r,e.K[n]=!0),t}function es(e){function t(d){return n(d/100)*100}function n(d){return Math.round(d)}function r(d){return!Number.isNaN(d)&&d!=null&&d!==""&&d!==!1}var i=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(d){return encodeURIComponent(d)},rtp:t,tb:n,ttfb:n,ttlb:n},o=Object.keys(e||{}).sort();o=m(o);for(var s=o.next();!s.done;s=o.next()){s=s.value;var u=e[s];if(r(u)&&(s!=="v"||u!==1)&&(s!="pr"||u!==1)){var l=a[s];l&&(u=l(u)),l=typeof u;var c=void 0;c=l==="string"&&s!=="ot"&&s!=="sf"&&s!=="st"?s+"="+JSON.stringify(u):l==="boolean"?s:l==="symbol"?s+"="+u.description:s+"="+u,i.push(c)}}return i.join(",")}function Kv(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,url:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,ttfb:1,ttlb:1,ts:1,rc:1,cmsdd:1,cmsds:1,sn:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3,bg:3};t=m(t);for(var o=t.next();!o.done;o=t.next())o=o.value,i[a[o]!=null?a[o]:1][o]=e[o];for(e=0;e<i.length;e++)(a=es(i[e]))&&(n["CMCD-"+r[e]]=a);return n}function tl(e,t){return!t||e.includes("offline:")?e:(e=new st(e),e.g.set("CMCD",t),e.toString())}var qv="m",nl="a",rl="v",il="av",S2="i",Sf="c",al="tt",xf=2,x2="v",A2="l",ol="d",sl="ld",ul="h",ll="lh";q("shaka.util.CmcdManager.StreamingFormat",{DASH:ol,Sl:sl,HLS:ul,Tl:ll,im:"s",OTHER:"o"});var Wv="br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),Af="br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(" "),k2="ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(" "),I2="d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),E2=["e","sta"],C2="ps e t c b m um pe pc".split(" "),M2="spawkrfeqd".split(""),D2=10,zv="ts",R2="t",Xv="request",Yv="response",Jv="event";function _n(e){this.h=e,this.g=null}f=_n.prototype,f.configure=function(e){this.h=e},f.ji=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(Zv)?this.g.get(Zv)*1e3:null},f.gi=function(){return this.h.enabled&&this.g&&this.g.has(Qv)?this.g.get(Qv)*1e3:null},f.Xj=function(){return this.h.enabled&&this.g&&this.g.has(ey)?this.g.get(ey):null},f.Yj=function(){return this.h.enabled&&this.g&&this.g.has(ty)?this.g.get(ty):null},f.getBandwidthEstimate=function(e){var t=this.gi();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return n>0&&n<=1?e*(1-n)+t*n:e};function $v(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}q("shaka.util.CmsdManager",_n),_n.prototype.getBandwidthEstimate=_n.prototype.getBandwidthEstimate,_n.prototype.getRoundTripTime=_n.prototype.Yj,_n.prototype.getResponseDelay=_n.prototype.Xj,_n.prototype.getEstimatedThroughput=_n.prototype.gi,_n.prototype.getMaxBitrate=_n.prototype.ji;var Qv="etp",Zv="mb",ey="rd",ty="rtt";function ny(){this.g=null,this.h=[]}function kf(e,t){return C(function(n){if(n.g==1)return e.g?b(n,new Promise(function(r){return e.h.push(r)}),2):n.A(2);e.g=t,G(n)})}ny.prototype.release=function(){this.h.length>0?this.h.shift()():this.g=null};function ry(e,t,n){return n=n===void 0?Number.EPSILON:n,e===t?!0:(e=Math.abs(e-t),e<=n?!0:n!==Number.EPSILON?Math.abs(e-n)<=Number.EPSILON:!1)}function j(e,t,n){t=t===void 0?null:t,Oe.call(this);var r=this;this.m=ml,this.h=null,this.Be=t,this.$=!1,this.Le=new Pe,this.Ce=new Pe,this.j=new Pe,this.fc=new Pe,this.Hd=new Pe,this.G=this.H=this.F=this.N=null,this.Me=0,this.ba=new ny,this.O=this.Fa=this.X=this.i=this.Ac=this.I=this.l=this.ye=this.T=this.Ph=this.va=this.K=this.kb=this.za=this.Ae=this.R=this.Ta=this.M=this.cc=null,this.Ua=!1,this.Ge=this.o=null,this.Fe=1e9,this.Ke=[],this.zc=new Map,this.ob=[],this.ag=-1,this.g=sr(this),this.dg=xv(),this.V=null,this.Ne=-1,this.ec=null,this.ya={width:1/0,height:1/0},this.Ee=new wd(this.g,this.ya,null),this.Ie=[],this.B=null,this.J=this.g.adaptationSetCriteriaFactory(),this.J.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredAudioRole,videoRole:this.g.preferredVideoRole,channelCount:0,hdrLevel:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,audioLabel:this.g.preferredAudioLabel,videoLabel:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.Ld=this.g.preferredTextLanguage,this.Pd=this.g.preferredTextRole,this.Od=this.g.preferForcedSubs,this.De=[],n&&n(this),this.K=new mf(this,this.g.cmcd),this.va=new _n(this.g.cmsd),this.N=cy(this),this.ma=this.oa=this.Da=this.C=null,this.fg=!1,this.cg=[],this.eg=new ve(function(){return C(function(i){if(i.g==1)return r.oa?b(i,r.Vb(r.ma,!0),3):i.A(0);if(i.g!=4)return b(i,r.load(r.oa),4);r.fg?r.ma.pause():r.ma.play(),r.oa=null,r.fg=!1,G(i)})}),vl&&(this.C=vl(),this.C.configure(this.g.ads),this.Hd.D(this.C,"ad-content-pause-requested",function(i){var a,o;return C(function(s){if(s.g==1)return r.eg.stop(),r.oa?s.A(0):(r.ma=r.h,r.fg=r.ge(),a=i.saveLivePosition||!1,o=!0,r.W()&&(o=a),b(s,r.$h(!0,o),3));r.oa=s.h,G(s)})}),this.Hd.D(this.C,"ad-content-resume-requested",function(i){if(i=i.offset||0,r.oa){var a=r.oa;a.o&&i&&(typeof a.o=="number"?a.o+=i:a.o.setTime(a.o.getTime()+i*1e3))}r.eg.ka(.1)}),this.Hd.D(this.C,"ad-content-attach-requested",function(){return C(function(i){if(i.g==1)return r.h||!r.ma?i.A(0):b(i,r.Vb(r.ma,!0),3);r.ma=null,G(i)})})),yl&&(this.Da=yl(this),this.Da.configure(this.g.queue)),this.Le.D(U,"online",function(){Pf(r),r.kh()}),this.He=new ve(function(){for(var i=Date.now()/1e3,a=!1,o=!0,s=m(r.i.variants),u=s.next();!u.done;u=s.next())u=u.value,u.disabledUntilTime>0&&u.disabledUntilTime<=i&&(u.disabledUntilTime=0,a=!0),u.disabledUntilTime>0&&(o=!1);o&&r.He.stop(),a&&hi(r,!1,void 0,!1,!1)}),this.eb=null,e&&(Ce("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Vb(e,!0)),this.u=null}it(j,Oe);function cl(e){e.T!=null&&(Zp(e.T),e.T.release(),e.T=null)}function P2(e,t,n){n||t.lcevc.enabled?(cl(e),e.T==null&&(e.T=new fo(e.h,e.Ph,t.lcevc,n),e.H&&(e.H.C=e.T))):cl(e)}function He(e,t){return new Y(e,t)}f=j.prototype,f.destroy=function(){var e=this,t;return C(function(n){switch(n.g){case 1:return e.m==Yn?n.return():(cl(e),t=e.detach(),e.m=Yn,b(n,t,2));case 2:return b(n,e.rg(),3);case 3:if(e.Le&&(e.Le.release(),e.Le=null),e.Ce&&(e.Ce.release(),e.Ce=null),e.j&&(e.j.release(),e.j=null),e.fc&&(e.fc.release(),e.fc=null),e.Hd&&(e.Hd.release(),e.Hd=null),e.Ge=null,e.g=null,e.B=null,e.Be=null,e.K=null,e.va=null,!e.N){n.A(4);break}return b(n,e.N.destroy(),5);case 5:e.N=null;case 4:e.o&&(e.o.release(),e.o=null),e.Da&&(e.Da.destroy(),e.Da=null),Oe.prototype.release.call(e),G(n)}})};function iy(e,t){Ly.set(e,t)}function Na(e,t){e.dispatchEvent(He("onstatechange",new Map().set("state",t)))}f.Vb=function(e,t){t=t===void 0?!0:t;var n=this,r,i,a;return C(function(o){switch(o.g){case 1:if(n.m==Yn)throw new M(2,7,7e3);if(r=n.h&&n.h==e,!n.h||n.h==e){o.A(2);break}return b(o,n.detach(),2);case 2:return b(o,If(n,"attach"),4);case 4:if(o.h)return o.return();if(le(o,5,6),r||(Na(n,"attach"),i=function(){var s=Lf(n,!1);s&&Ua(n,s)},n.Ce.D(e,"error",i),n.h=e,n.K&&n.K.setMediaElement(e)),ge(),!t||!mr()||n.H){o.A(6);break}return b(o,Ef(n),6);case 6:yn(o),n.ba.release(),bn(o,0);break;case 5:return a=ce(o),b(o,n.detach(),10);case 10:throw a}})},f.qj=function(e){this.Ph=e},f.detach=function(e){e=e===void 0?!1:e;var t=this;return C(function(n){if(n.g==1){if(t.m==Yn)throw new M(2,7,7e3);return b(n,t.Dc(!1,e),2)}if(n.g!=3)return b(n,If(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.Ce.Qa(),t.h=null),Na(t,"detach"),t.C&&!e&&t.C.release()}finally{t.ba.release()}G(n)})};function If(e,t){var n;return C(function(r){return r.g==1?(n=++e.Me,b(r,kf(e.ba,t),2)):n!=e.Me?(e.ba.release(),r.return(!0)):r.return(!1)})}f.Dc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w;return C(function(S){switch(S.g){case 1:return n.m!=Yn&&(n.m=ml),b(S,If(n,"unload"),2);case 2:return S.h?S.return():(br(S,3),n.Ua=!1,Na(n,"unload"),cl(n),r=n.De.map(function(k){return k()}),n.De=[],b(S,Promise.all(r),5));case 5:if(n.dispatchEvent(He("unloading")),n.Ae&&(n.Ae.release(),n.Ae=null),n.za&&(n.za.release(),n.za=null),n.kb&&(n.kb.release(),n.kb=null),n.h&&(n.j.Qa(),n.fc.Qa()),n.He.stop(),n.cc&&(n.cc.release(),n.cc=null),n.Ta&&(n.Ta.stop(),n.Ta=null),!n.I){S.A(6);break}return b(S,n.I.stop(),7);case 7:n.I=null,n.Ac=null;case 6:if(n.o&&n.o.stop(),!n.l){S.A(8);break}return b(S,n.l.destroy(),9);case 9:n.l=null;case 8:if(n.M&&(n.M.release(),n.M=null),n.G&&(n.G.release(),n.G=null),U.shakaMediaKeysPolyfill!=="webkit"||!n.F){S.A(10);break}return b(S,n.F.destroy(),11);case 11:n.F=null;case 10:if(!n.H){S.A(12);break}return b(S,n.H.destroy(),13);case 13:n.H=null;case 12:if(n.C&&!t&&n.C.onAssetUnload(),n.oa&&!t&&(n.oa.destroy(),n.oa=null),t||n.eg.stop(),n.K&&f2(n.K),n.va&&(n.va.g=null),!n.u){S.A(14);break}return b(S,n.u.destroy(),15);case 15:n.u=null;case 14:if(n.$=!1,n.h){for(i=m(n.cg),a=i.next();!a.done;a=i.next())o=a.value,o.src.startsWith("blob:")&&URL.revokeObjectURL(o.src),o.remove();n.cg=[],Mu(n.h)&&n.h.load()}if(!n.F){S.A(16);break}return b(S,n.F.destroy(),17);case 17:n.F=null;case 16:if(n.eb&&n.X!=n.eb.rd()&&(n.eb.l||n.eb.destroy(),n.eb=null),n.X=null,n.Fa=null,n.R=null,n.i){for(s=m(n.i.variants),u=s.next();!u.done;u=s.next())for(l=u.value,c=m([l.audio,l.video]),d=c.next();!d.done;d=c.next())(h=d.value)&&h.segmentIndex&&h.segmentIndex.release();for(p=m(n.i.textStreams),g=p.next();!g.done;g=p.next())v=g.value,v.segmentIndex&&v.segmentIndex.release()}for(n.g&&n.g.streaming.clearDecodingCache&&(pu.clear(),na.clear()),n.i=null,n.B=new el,n.Oh=null,n.ec=null,n.V=null,n.Ne=-1,n.Ke=[],y=m(n.zc.values()),T=y.next();!T.done;T=y.next())w=T.value,w.stop();n.zc.clear(),n.ob=[],n.ag=-1,n.N&&n.N.Wh(),ts(n);case 3:yn(S),n.ba.release(),bn(S,4);break;case 4:if(ge(),e&&mr()&&!n.H&&n.h)return b(S,Ef(n),0);S.A(0)}})},f.ql=function(e){this.O=e},f.load=function(e,t,n){t=t===void 0?null:t;var r=this,i,a,o,s,u,l,c,d,h,p,g,v,y,T;return C(function(w){switch(w.g){case 1:if(r.m==Yn)throw new M(2,7,7e3);if(r.h||!r.ma){w.A(2);break}return b(w,r.Vb(r.ma,!0),3);case 3:r.ma=null;case 2:if(i=null,a="",e instanceof Un){if(e.l)throw new M(2,7,7006);i=e,a=i.rd()||""}else a=e||"";return b(w,kf(r.ba,"load"),4);case 4:if(r.ba.release(),!r.h)throw new M(2,7,7002);if(!r.X){w.A(5);break}return r.X=a,b(w,r.Dc(!1),5);case 5:if(o=++r.Me,s=function(){return C(function(S){if(S.g==1)return r.Me==o?S.A(0):i?b(S,i.destroy(),3):S.A(3);throw new M(2,7,7e3)})},u=function(S,k){return C(function(D){switch(D.g){case 1:return br(D,2),b(D,kf(r.ba,k),4);case 4:return b(D,s(),5);case 5:return b(D,S(),6);case 6:return b(D,s(),7);case 7:i&&r.g&&(i.g=r.g);case 2:yn(D),r.ba.release(),bn(D,0)}})},le(w,7,8),t==null&&i&&(t=i.getStartTime()),r.O=t,r.Ua=!1,r.dispatchEvent(He("loading")),i){n=i.V,w.A(10);break}if(n){w.A(10);break}return b(w,u(function(){return C(function(S){if(S.g==1)return b(S,uy(r,a),2);n=S.h,G(S)})},"guessMimeType_"),10);case 10:if(l=!!i,i){Iv(i,r),r.B=i.getStats(),w.A(13);break}return b(w,oy(r,a,t,n,!0,r.g),14);case 14:(i=w.h)?(i.F=!1,Iv(i,r),r.B=i.getStats(),i.start(),i.B.catch(function(){})):r.B=new el;case 13:return c=!i,d=Date.now()/1e3,r.B=i?i.getStats():new el,r.X=a,r.Fa=n||null,ts(r),h=function(){var S=r.h?r.h.buffered:null;return{start:km(S)||0,end:Cu(S)||0}},r.za=new Ho(h),r.za.addEventListener("regionadd",function(S){Cf(r,S.region,"metadataadded")}),c?b(w,u(function(){return C(function(S){return b(S,_2(r,n),0)})},"initializeSrcEqualsDrmInner_"),25):(r.kb=new Ho(h),b(w,u(function(){return C(function(S){if(S.g==1)return b(S,Promise.race([i.ma,i.B]),2);r.Ac=i.H;var k=i;k.oa=!0,r.I=k.m,r.i=i.Lg(),G(S)})},"waitForFinish"),17));case 17:if(r.H){w.A(18);break}return b(w,u(function(){return C(function(S){return b(S,Ef(r),0)})},"initializeMediaSourceEngineInner_"),18);case 18:return r.i&&r.i.textStreams.length&&(r.u.enableTextDisplayer?r.u.enableTextDisplayer():Ce("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),b(w,u(function(){return C(function(S){return b(S,i.B,0)})},"waitForFinish"),20);case 20:if(r.g=i.getConfiguration(),r.Ee=i.G,r.I&&r.I.setMediaElement&&r.h&&r.I.setMediaElement(r.h),r.Ae=Jx(i),r.ye=i.Fa,(p=i.C)&&(r.J=p),l&&r.h&&r.h.nodeName==="AUDIO"&&(L2(r),r.configure("manifest.disableVideo",!0)),i.j){w.A(21);break}return b(w,u(function(){return C(function(S){return b(S,Ev(i,r.h),0)})},"drmEngine_.init"),21);case 21:return r.F=$x(i),b(w,u(function(){return C(function(S){return b(S,r.F.Vb(r.h),0)})},"drmEngine_.attach"),23);case 23:return g=r.g.abrFactory,r.o&&r.Ge==g||(r.Ge=g,r.o&&r.o.release(),r.o=g(),typeof r.o.setMediaElement!="function"&&(Ce("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(Ce("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(Ce("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){}),r.o.configure(r.g.abr)),v=Qx(i),y=i.i,b(w,u(function(){return C(function(S){return b(S,U2(r,d,y,v),0)})},"loadInner_"),24);case 24:Yx(i),r.Fa&&ge().gj()&&ou(r.Fa)&&VS(r.H,r.X,r.Fa),w.A(16);break;case 25:return b(w,u(function(){return C(function(S){return b(S,j2(r,d,n),0)})},"srcEqualsInner_"),16);case 16:r.dispatchEvent(He("loaded"));case 8:if(yn(w),!i){w.A(27);break}return b(w,i.destroy(),27);case 27:r.eb=null,bn(w,0);break;case 7:if(T=ce(w),!T||T.code==7e3){w.A(29);break}return b(w,r.Dc(!1),29);case 29:throw T}})};function L2(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}f.jj=function(e,t,n){e=e===void 0?!0:e,t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this,i;return C(function(a){return a.g==1?b(a,ay(r,n),2):a.g!=3?(i=a.h,b(a,r.Dc(e,t),3)):a.return(i)})},f.$h=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,r;return C(function(i){return i.g==1?b(i,ay(n,t),2):i.g!=3?(r=i.h,b(i,n.detach(e),3)):i.return(r)})};function ay(e,t){t=t===void 0?!1:t;var n,r,i;return C(function(a){if(a.g==1)return n=null,e.i&&e.I&&e.Ac&&e.X&&e.g?(r=e.h.currentTime,t||(r=null),b(a,sy(e,e.X,r,e.Fa,e.g,!0,!1),3)):a.A(2);if(a.g!=2){n=a.h,e.Ie.push(n),e.I&&e.I.setMediaElement&&e.I.setMediaElement(null),(i=e.l?e.l.o:null)&&(n.i=i);var o=n,s=e.I,u=e.Ac;o.h=e.i,o.m=s,o.H=u,n.C=e.J,n.start(),e.i=null,e.I=null,e.Ac=null,e.o=null,e.Ge=null}return a.return(n)})}f.preload=function(e,t,n,r){t=t===void 0?null:t;var i=this,a,o;return C(function(s){return s.g==1?(a=sr(i),_r(a,r||i.g,sr(i)),b(s,oy(i,e,t,n,!1,a),2)):((o=s.h)?o.start():Ua(i,new M(2,7,7005)),s.return(o))})},f.rg=function(){var e=this,t,n,r,i;return C(function(a){for(t=[],n=m(e.Ie),r=n.next();!r.done;r=n.next())i=r.value,i.l||t.push(i.destroy());return e.Ie=[],b(a,Promise.all(t),0)})};function oy(e,t,n,r,i,a){i=i===void 0?!1:i;var o,s,u;return C(function(l){return l.g==1?r?l.A(2):b(l,uy(e,t),3):(l.g!=2&&(r=l.h),N2(e,r)?l.return(null):(o=a||e.g,s=!1,i&&e.h&&e.h.nodeName==="AUDIO"&&(s=!0),u=sy(e,t,n,r||null,o,!i,s),u=i?u.then(function(c){return c.F=!1,c}):u.then(function(c){return e.Ie.push(c),c}),l.return(u)))})}function sy(e,t,n,r,i,a,o){a=a===void 0?!0:a,o=o===void 0?!1:o;var s,u,l,c,d,h,p,g,v,y,T,w,S,k,D;return C(function(x){return x.g==1?(s=null,u=Wn(i),o&&(u.manifest.disableVideo=!0),l=function(){return s.R&&s.l?null:s},c=function(){return l()?l().getConfiguration():e.g},e.ya.width!=1/0||e.ya.height!=1/0||e.g.ignoreHardwareResolution?x.A(2):(d=ge(),b(x,d.nc(),3))):(x.g!=2&&(h=x.h,e.ya.width=h.width,e.ya.height=h.height),p=new wd(u,e.ya,null),g={networkingEngine:e.N,filter:function(I){var A,R;return C(function(E){if(E.g==1)return b(E,lm(p,I),2);if(E.g!=4)return A=E.h,A?(R=He("trackschanged"),b(E,Promise.resolve(),4)):E.A(0);s.dispatchEvent(R),G(E)})},makeTextStreamsForClosedCaptions:function(I){return J2(e,I)},onTimelineRegionAdded:function(I){Kd(s.I,I)},onEvent:function(I){return s.dispatchEvent(I)},onError:function(I){return s.onError(I)},isLowLatencyMode:function(){return c().streaming.lowLatencyMode},updateDuration:function(){e.l&&s.R&&e.l.updateDuration()},newDrmInfo:function(I){var A=s.j,R=A?A.g:null;R&&A.B&&fm(p,R.keySystem,I)},onManifestUpdated:function(){var I=new Map().set("isLive",e.W());s.dispatchEvent(He("manifestupdated",I)),Jo(s,!1,function(){e.C&&e.C.onManifestUpdated(e.W())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(I,A,R,E){var P=I;(I=="com.apple.hls.interstitial"||I=="com.apple.hls.overlay")&&(P="com.apple.quicktime.HLS",I={startTime:A,endTime:R,values:E},e.C&&e.C.onHLSInterstitialMetadata(e,e.h,I)),E=m(E),I=E.next();for(var L={};!I.done;L={bh:void 0},I=E.next())L.bh=I.value,L.bh.name!="ID"&&Jo(s,!1,(function(B){return function(){Mf(e,A,R,P,B.bh)}})(L))},disableStream:function(I){return e.disableStream(I,e.g.streaming.maxDisabledTime)},addFont:function(I,A){return e.addFont(I,A)}},v=new Ho(function(){return e.Ra()}),v.addEventListener("regionadd",function(I){var A=I.region;is(e,"timelineregionadded",A,s),Jo(s,!1,function(){e.C&&(e.C.onDashTimedMetadata(A),e.C.onDASHInterstitialMetadata(e,e.h,A))})}),y=null,u.streaming.observeQualityChanges&&(y=new _u(function(){return e.Hc()}),y.addEventListener("qualitychange",function(I){My(e,I.quality,I.position)}),y.addEventListener("audiotrackchange",function(I){My(e,I.quality,I.position,!0)})),T=!0,w={wc:e.N,onError:function(I){return s.onError(I)},zf:function(I){Jo(s,!0,function(){e.F&&Q2(e,I)})},onExpirationUpdated:function(I,A){var R=He("expirationupdated");s.dispatchEvent(R),(R=s.m)&&R.onExpirationUpdated&&R.onExpirationUpdated(I,A)},onEvent:function(I){s.dispatchEvent(I),I.type=="drmsessionupdate"&&T&&(T=!1,I=Date.now()/1e3-s.za,(e.B||s.getStats()).m=I,e.T&&Zp(e.T))}},S=cy(e,l),Gg(e.N,S),k=function(){return e.md(w)},D={config:u,zk:g,Kk:v,Jk:y,md:k,yk:p,networkingEngine:S,pj:a},s=new Un(t,r,n,D),x.return(s))})}function uy(e,t){var n,r,i,a;return C(function(o){return o.g==1?(n=e.g.manifest.retryParameters,b(o,Ea(t,e.N,n),2)):(r=o.h,r=="application/x-mpegurl"&&(i=ge(),i.Ha()==="WEBKIT"&&(r="application/vnd.apple.mpegurl")),r=="video/quicktime"&&(a=ge(),a.Ha()==="CHROMIUM"&&(r="video/mp4")),o.return(r))})}function N2(e,t){if(!mr(ge()))return!0;if(t){if((e.h||Fi()).canPlayType(t)=="")return!1;if(!mr(ge())||!ia.has(t.toLowerCase()))return!0;if(ou(t))return ge().Ha()==="WEBKIT"&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if(t==="application/dash+xml"||t==="video/vnd.mpeg.dash.mpd")return e.g.streaming.preferNativeDash}return!1}function dl(e,t){var n=e.g.textDisplayFactory;e.Oh!==n||t!==void 0&&t?(t=e.u,e.u=n(),e.u.configure?e.u.configure(e.g.textDisplayer):Ce("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||Ce("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),t?(e.u.setTextVisibility(t.isTextVisible()),t.destroy().catch(function(){})):e.u.setTextVisibility(e.$),e.H&&YS(e.H,e.u),e.Oh=n,e.l&&Tx(e.l)):e.u&&e.u.configure&&e.u.configure(e.g.textDisplayer)}function Ef(e){var t,n,r;return C(function(i){if(i.g==1)return ge(),Na(e,"media-source"),e.g.mediaSource.useSourceElements&&Mu(e.h),dl(e),t=q2(e.h,e.u,{Pj:function(){return e.keySystem()},onMetadata:function(a,o,s){a=m(a);for(var u=a.next();!u.done;u=a.next())if(u=u.value,u.data&&typeof u.cueTime=="number"&&u.frames){var l=u.cueTime+o,c=s;c&&l>c&&(c=l);for(var d=m(u.frames),h=d.next();!h.done;h=d.next())Mf(e,l,c,"org.id3",h.value);e.C&&e.C.onHlsTimedMetadata(u,l)}},Ek:function(a){e.kb&&Kd(e.kb,{schemeIdUri:a.schemeIdUri,startTime:a.startTime,endTime:a.endTime,id:String(a.id),emsg:a})},onEvent:function(a){return e.dispatchEvent(a)},Gk:function(){e.I&&e.I.update&&e.I.update()}},e.T,e.g.mediaSource),n=e.g.manifest,r=n.segmentRelativeVttTiming,t.Fa=r,b(i,t.M,2);e.H=t,G(i)})}function ly(e,t,n){function r(){return Df(e)}if(e.j.D(t,"playing",r),e.j.D(t,"pause",r),e.j.D(t,"ended",r),e.j.D(t,"ratechange",function(){var a=e.h.playbackRate;a!=0&&(e.M&&(e.M.set(a),e.m==Pt&&e.o.playbackRateChanged(a),wy(e,a)),a=He("ratechange"),e.dispatchEvent(a))}),t.remote&&(e.j.D(t.remote,"connect",function(){e.l&&t.remote.state=="connected"&&Or(e),zt(e)}),e.j.D(t.remote,"connecting",function(){return zt(e)}),e.j.D(t.remote,"disconnect",function(){return C(function(a){if(a.g==1)return e.l&&t.remote.state=="disconnected"?b(a,qu(e.l),3):a.A(2);a.g!=2&&Or(e),zt(e),G(a)})})),t.audioTracks&&(e.j.D(t.audioTracks,"addtrack",function(){return zt(e)}),e.j.D(t.audioTracks,"removetrack",function(){return zt(e)}),e.j.D(t.audioTracks,"change",function(){return zt(e)})),t.videoTracks&&(e.j.D(t.videoTracks,"addtrack",function(){return zt(e)}),e.j.D(t.videoTracks,"removetrack",function(){return zt(e)}),e.j.D(t.videoTracks,"change",function(){return zt(e)})),(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.j.D(t,"webkitpresentationmodechanged",function(){e.Be&&dl(e,!0)}),t.textTracks){var i=function(){e.m===pn&&e.u instanceof bt&&Or(e),zt(e)};e.j.D(t.textTracks,"addtrack",function(a){if(a.track)switch(a=a.track,a.kind){case"metadata":F2(e,a);break;case"chapters":V2(e,a);break;default:i()}}),e.j.D(t.textTracks,"removetrack",i),e.j.D(t.textTracks,"change",i)}t.preload!="none"&&e.j.Aa(t,"loadedmetadata",function(){e.B.G=Date.now()/1e3-n})}function U2(e,t,n,r){var i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L,B,O,N;return C(function(_){switch(_.g){case 1:for(Na(e,"load"),i=e.h,e.M=new Vo({cf:function(){return i.playbackRate},Tc:function(){return i.defaultPlaybackRate},uh:function(F){i.playbackRate=F},Di:function(F){i.currentTime+=F}}),ly(e,i,t),("onchange"in U.screen)&&e.j.D(U.screen,"change",function(){if(e.J.getConfiguration){var F=e.J.getConfiguration();F.hdrLevel=="AUTO"?fi(e):e.g.preferredVideoHdrLevel=="AUTO"&&e.g.abr.enabled&&(F.hdrLevel="AUTO",e.J.configure(F),fi(e))}}),a=!1,o=m(e.i.variants),s=o.next();!s.done;s=o.next())u=s.value,(l=u.video&&u.video.dependencyStream)&&(a=eg(l));P2(e,e.g,a),e.Ld=e.g.preferredTextLanguage,e.Pd=e.g.preferredTextRole,e.Od=e.g.preferForcedSubs,Nf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(F,V,ue){e.i&&e.l&&F!=e.l.o&&ns(e,F,!0,V===void 0?!1:V,ue===void 0?0:ue)}),e.o.setMediaElement(i),e.o.setCmsdManager(e.va),e.l=W2(e),e.l.configure(e.g.streaming),e.m=Pt,e.dispatchEvent(He("streaming")),c=n;case 2:for((h=e.l.o)||c||(c=Sy(e,!0)),p=[],d=h||c,g=m([d.video,d.audio]),v=g.next();!v.done;v=g.next())(y=v.value)&&!y.segmentIndex&&(p.push(y.createSegmentIndex()),y.dependencyStream&&p.push(y.dependencyStream.createSegmentIndex()));if(!(p.length>0)){_.A(4);break}return b(_,Promise.all(p),4);case 4:if(!d||d.disabledUntilTime!=0){_.A(2);break}if(fi(e),e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(d),e.i.isLowLatency&&(e.g.streaming.lowLatencyMode?e.configure(e.dg):Ae("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),e.K&&(h2(e.K,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),p2(e.K,t*1e3)),Nf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),yx(e.l,e.g.playRangeStart,e.g.playRangeEnd),e.Ua=!0,e.dispatchEvent(He("canupdatestarttime")),T=function(F){e.G=H2(e,F),e.cc=G2(e,F),dy(e,i,!1)},e.g.streaming.startAtSegmentBoundary||(w=e.O,w==null&&e.i.startTime&&(w=e.i.startTime),T(w)),h){_.A(7);break}if(!e.g.streaming.startAtSegmentBoundary){_.A(8);break}return S=e.i.presentationTimeline,e.O instanceof Date&&(D=S.m||S.i,x=e.O.getTime()/1e3-D,x!=null&&(k=x)),k==null&&(k=typeof e.O=="number"?e.O:e.h.currentTime),e.O==null&&e.i.startTime&&(k=e.i.startTime),I=S.$b(),A=S.Gb(),k<I?k=I:k>A&&(k=A),b(_,$2(c,k),9);case 9:R=_.h,T(R);case 8:ns(e,c,!0,!1,0);case 7:return e.G.ready(),E=e.Lc().find(function(F){return F.active}),E||((P=fa(e.i.textStreams,e.Ld,e.Pd,e.Od)[0]||null)&&uf(e.B.h,P,!0),c&&(P?(Ug(c.audio,P,e.g)&&(e.$=!0),e.$&&e.u.setTextVisibility(!0)):(e.$=!1,e.u.setTextVisibility(!1)),Ey(e)),P&&(e.g.streaming.alwaysStreamText||e.Sg())&&(Bu(e.l,P),rs(e))),b(_,e.l.start(r),10);case 10:e.g.abr.enabled&&(e.o.enable(),Cy(e)),zt(e),e.i.variants.some(function(F){return F.primary}),((L=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(B=function(){return Ty(e)},e.j.D(i,"timeupdate",B)),L||(O=function(){return gl(e)},e.j.D(i,"timeupdate",O),gl(e),e.i.nextUrl&&(e.g.streaming.preloadNextUrlWindow>0&&(N=function(){var F;return C(function(V){if(V.g==1)return F=e.Ra().end-e.h.currentTime,isNaN(F)||!(F<=e.g.streaming.preloadNextUrlWindow)?V.A(0):(e.j.Ma(i,"timeupdate",N),b(V,e.preload(e.i.nextUrl),4));e.eb=V.h,G(V)})},e.j.D(i,"timeupdate",N)),e.j.D(i,"ended",function(){e.load(e.eb||e.i.nextUrl)}))),e.C&&e.C.onManifestUpdated(L),G(_)}})}function _2(e,t){var n,r,i;return C(function(a){return a.g==1?(n=Date.now()/1e3,r=!0,e.F=e.md({wc:e.N,onError:function(o){Ua(e,o)},zf:function(){},onExpirationUpdated:function(){var o=He("expirationupdated");e.dispatchEvent(o)},onEvent:function(o){e.dispatchEvent(o),o.type=="drmsessionupdate"&&r&&(r=!1,e.B.m=Date.now()/1e3-n)}}),e.F.configure(e.g.drm),i=_g([t]),e.F.O=!0,b(a,$g(e.F,[i],[]),2)):b(a,e.F.Vb(e.h),0)})}function j2(e,t,n){var r,i,a,o,s,u,l,c,d,h,p,g;return C(function(v){switch(v.g){case 1:if(Na(e,"src-equals"),r=e.h,e.G=new Zm(r),i=!1,e.De.push(function(){i=!0}),e.dispatchEvent(He("canupdatestarttime")),e.O!=null&&e.G.$f(e.O),e.cc=K2(e,e.O||0),e.M=new Vo({cf:function(){return r.playbackRate},Tc:function(){return r.defaultPlaybackRate},uh:function(y){r.playbackRate=y},Di:function(y){r.currentTime+=y}}),dy(e,r,!0),r.textTracks&&(dl(e),a=function(y){if(!(e.u instanceof bt)){var T=fl(e).find(function(w){return w.mode!=="disabled"});T&&(T.mode=y?"showing":"hidden"),e.u instanceof _t&&(T=z2(e))&&(T.mode=!y&&e.u.isTextVisible()?"showing":"hidden")}},e.j.D(r,"enterpictureinpicture",function(){return a(!0)}),e.j.D(r,"leavepictureinpicture",function(){return a(!1)}),r.remote?(e.j.D(r.remote,"connect",function(){return a(!1)}),e.j.D(r.remote,"connecting",function(){return a(!1)}),e.j.D(r.remote,"disconnect",function(){return a(!1)})):"webkitCurrentPlaybackTargetIsWireless"in r&&e.j.D(r,"webkitcurrentplaybacktargetiswirelesschanged",function(){return a(!1)}),o=r,(o.webkitPresentationMode||o.webkitSupportsFullscreen)&&e.j.D(o,"webkitpresentationmodechanged",function(){o.webkitPresentationMode?a(o.webkitPresentationMode!=="inline"):o.webkitSupportsFullscreen&&a(o.webkitDisplayingFullscreen)})),ly(e,r,t),s=g2(e.K,e.X,n),!s.includes("#t=")&&(e.g.playRangeStart>0||isFinite(e.g.playRangeEnd))&&(s+="#t=",e.g.playRangeStart>0&&(s+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(s+=","+e.g.playRangeEnd)),!e.H){v.A(2);break}return b(v,e.H.destroy(),3);case 3:e.H=null;case 2:return Mu(r),r.src=s,u=ge(),u.Oa()=="TV"&&r.load(),r.preload!="none"&&!r.autoplay&&ou(n)&&u.Ha()==="WEBKIT"&&r.load(),e.m=pn,e.dispatchEvent(He("streaming")),l=function(){return new Promise(function(y){var T=new ve(y);e.j.D(r.textTracks,"change",function(){return T.ka(.5)}),T.ka(.5)})},c=new Be,Ia(r,HTMLMediaElement.HAVE_METADATA,e.j,function(){return C(function(y){if(y.g==1)return e.G.ready(),e.Fa&&ou(e.Fa)?b(y,l(),3):(c.resolve(),y.A(0));c.resolve(),G(y)})}),Ia(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var y,T,w,S,k;return C(function(D){if(D.g==1)return b(D,l(),2);if(i)return D.return();if(O2(e),y=fl(e),y.some(function(x){return x.mode==="showing"})&&(e.$=!0,e.u.setTextVisibility(!0)),!(e.u instanceof bt))for(y.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():Ce("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),T=!1,w=m(y),S=w.next();!S.done;S=w.next())k=S.value,k.mode!=="disabled"&&(T?(k.mode="disabled",Ae("Found more than one enabled text track, disabling it",k)):(vy(e,k),T=!0));B2(e),G(D)})}),r.error?c.reject(Lf(e)):r.preload=="none"&&(Ae('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),c.resolve()),e.j.Aa(r,"error",function(){c.reject(Lf(e))}),b(v,su(e.g.streaming.loadTimeout,c),4);case 4:((d=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(h=function(){return Ty(e)},e.j.D(r,"timeupdate",h)),d||(p=function(){return gl(e)},e.j.D(r,"timeupdate",p),gl(e)),e.C&&(e.C.onManifestUpdated(d),d&&(g=e.Ra().end,e.j.D(r,"progress",function(){var y=e.Ra().end;g!=y&&(e.C.onManifestUpdated(e.W()),g=y)}))),e.Ua=!0,G(v)}})}function O2(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Ti(t,e.g.preferredAudioRole)}function B2(e){var t=e.g.preferredTextLanguage;t!=""&&e.oh(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function F2(e,t){if(t.kind=="metadata"){t.mode="hidden",e.j.D(t,"cuechange",function(){if(t.activeCues)for(var r=m(t.activeCues),i=r.next();!i.done;i=r.next())i=i.value,Mf(e,i.startTime,i.endTime,i.type,i.value),e.C&&e.C.onCueMetadataChange(i.value);if(t.cues){r=[],i=m(t.cues);for(var a=i.next(),o={};!a.done;o={Fc:void 0},a=i.next())o.Fc=a.value,o.Fc.type=="com.apple.quicktime.HLS"&&o.Fc.startTime!=null&&(a=r.find((function(s){return function(u){return u.startTime==s.Fc.startTime&&u.endTime==s.Fc.endTime}})(o)),a||(a={startTime:o.Fc.startTime,endTime:o.Fc.endTime,values:[]},r.push(a)),a.values.push(o.Fc.value));for(r=m(r),i=r.next();!i.done;i=r.next())i=i.value,i.values.some(function(s){return s.key=="X-ASSET-URI"||s.key=="X-ASSET-LIST"})&&e.C&&(i.values.push({key:"CUE",description:"",data:i.startTime!=0||e.W()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.C.onHLSInterstitialMetadata(e,e.h,i))}});var n=new ve(function(){var r=X2(e);r=m(r);for(var i=r.next();!i.done;i=r.next())i.value.mode="hidden"}).Jb().ka(.5);e.De.push(function(){n.stop()})}}function Cf(e,t,n){t=new Map().set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(He(n,t))}function Mf(e,t,n,r,i){e.za&&(t={schemeIdUri:r,startTime:t,endTime:n||1/0,id:"",payload:i},t.id=JSON.stringify(t),Kd(e.za,t))}function V2(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new ve(function(){t.mode="hidden"}).Jb().ka(.5);e.De.push(function(){n.stop()})}}f.Ok=function(){for(var e=this.ba;e.g;)e.release()},f.md=function(e){return new Su(e)};function cy(e,t){function n(a){t()?t().dispatchEvent(a):e.dispatchEvent(a)}function r(a){t()?Jo(t(),!0,a):a()}t||(t=function(){return null});var i=new Xe(function(a,o,s,u,l){r(function(){e.o&&e.o.segmentDownloaded(a,o,s,u,l)})},function(a,o,s){o=new Map().set("headers",a).set("request",o).set("requestType",s),n(He("downloadheadersreceived",o)),r(function(){if(e.va){var u=e.va;if(u.h.enabled){var l=a["cmsd-static"];if(l)try{var c=new Map,d=l.split(",");for(l=0;l<d.length;l++){var h=d[l].split("=");c.set(h[0],$v(h[1]))}}catch{}if(c=a["cmsd-dynamic"]){e:{try{var p=new Map,g=c.split(";");for(c=1;c<g.length;c++){var v=g[c].split("=");p.set(v[0],$v(v[1]))}var y=p;break e}catch{y=null;break e}y=void 0}y&&(u.g=y)}}}})},function(a,o){a=new Map().set("request",a).set("response",o),n(He("downloadcompleted",a))},function(a,o,s,u){a=new Map().set("request",a).set("error",o).set("httpResponseCode",s).set("aborted",u),n(He("downloadfailed",a))},function(a,o,s){r(function(){if(e.K){var u=e.K,l=s;if(l=l===void 0?{}:l,u.g.enabled)if(o.method==="HEAD")La(u,o,{});else switch(a){case 0:try{if(u.g.enabled){if(l.type){e:{switch(l.type){case 4:var c=u.u?sl:ol;break e;case 3:case 2:c=u.u?ll:ul;break e;case 5:c="s";break e}c=void 0}u.l=c}La(u,o,{ot:qv,su:!u.F})}}catch(h){Xr("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",h)}break;case Ln:try{if(u.g.enabled){var d=Gv(u,l,o.uris[0]);d.ts=Date.now(),u.m.has(o)&&u.m.delete(o),u.m.set(o,d.ts),La(u,o,d)}}catch(h){Xr("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",h)}break;case 2:case 5:case 6:La(u,o,{ot:"k"});break;case 4:La(u,o,{ot:"o"})}}})},function(a,o,s,u){(a=t()?t().m:e.I)&&a.banLocation&&a.banLocation(u)},function(a,o,s){if(o.data){var u=o.data.byteLength,l=t()?t().getStats():e.B;if(l&&(kv(l,u),a===0&&(l.wi=u)),u=e.K,s=s===void 0?{}:s,vf(u).length!==0)switch(a){case Ln:try{var c=Gv(u,s,o.uri);o.originalRequest&&o.originalRequest.timeToFirstByte!=null&&(c.ttfb=o.originalRequest.timeToFirstByte),o.timeMs!=null&&(c.ttlb=o.timeMs);var d=o.originalUri||o.uri;if(d.includes("CMCD="))try{var h=new URL(d);h.searchParams.delete("CMCD");var p=h.toString()}catch{p=d}else p=d;c.url=p,u.m.has(o.originalRequest)?(c.ts=u.m.get(o.originalRequest),u.m.delete(o.originalRequest)):c.ts||(c.ts=Date.now());var g=vf(u);if(g.length!==0){var v=u.g.version==xf?Array.from(new Set([].concat(H(Af),H(I2)))):Wv;c.rc=o.status||0;var y=Tf(u,c,Yv);o.headers&&o.headers["CMSD-Static"]&&(y.cmsds=btoa(o.headers["CMSD-Static"])),o.headers&&o.headers["CMSD-Dynamic"]&&(y.cmsdd=btoa(o.headers["CMSD-Dynamic"]));for(var T=m(g),w=T.next();!w.done;w=T.next()){var S=w.value,k=bf(S.includeKeys||[],v),D=Vv(S);u.o[D]||(u.o[D]={request:1,response:1}),y.sn=u.o[D].response++;var x=wf(y,k);Fv(u,x,S,o)}}}catch(I){Xr("CMCD_SEGMENT_ERROR","Could not generate response segment CMCD data.",I)}}}});return i.configure(e.g.networking),i}function H2(e,t){return new nv(e.h,e.i,e.g.streaming,t,function(){e.cc&&sv(e.cc,!e.G.Mh()),e.l&&e.l.bd(),e.R&&gr(e,"seeking")},function(n){return e.dispatchEvent(n)})}function G2(e,t){var n=e.W()||typeof t=="number"&&t>0;t=new Gi(e.Ae,n),t.addEventListener("enter",function(a){is(e,"timelineregionenter",a.region)}),t.addEventListener("exit",function(a){is(e,"timelineregionexit",a.region)}),t.addEventListener("skip",function(a){var o=a.region;a.seeking||(is(e,"timelineregionenter",o),is(e,"timelineregionexit",o))});var r=new Gi(e.za,n);r.addEventListener("enter",function(a){Cf(e,a.region,"metadata")}),n=new Gi(e.kb,n),n.addEventListener("enter",function(a){a=new Map().set("detail",a.region.emsg),e.dispatchEvent(He("emsg",a))});var i=new Gd(e.h);return i.g.add(t),i.g.add(r),i.g.add(n),e.ye&&i.g.add(e.ye),i}function K2(e,t){t=new Gi(e.za,t instanceof Date||t>0),t.addEventListener("enter",function(r){Cf(e,r.region,"metadata")});var n=new Gd(e.h);return n.g.add(t),n}function dy(e,t,n){e.R=new gS,bd(e.R,ji),fy(e),ts(e),e.Ta=new ve(function(){gr(e)}),e.g.streaming.rebufferingGoal&&e.Ta.Ea(.25),e.j.D(t,"waiting",function(){return gr(e,"waiting")}),e.j.D(t,"canplaythrough",function(){return gr(e,"canplaythrough")}),e.j.D(t,"playing",function(){return gr(e,"playing")}),e.j.D(t,"seeked",function(){return gr(e,"seeked")}),e.j.D(t,"timeupdate",function(){return gr(e,"timeupdate")}),n&&(e.j.D(t,"progress",function(){return gr(e,"progress")}),e.j.D(t,"stalled",function(){return gr(e,"stalled")}))}function fy(e){var t=e.g.streaming.rebufferingGoal;e.R.j.set(Oi,Math.min(.5,t/2)).set(ji,t)}function gr(e,t){if(e.g.streaming.rebufferingGoal){t=e.H?Hi(e.H):!1,t=e.ge()||t||e.G.ri();var n=Im(e.h.buffered,e.h.currentTime),r=e.R,i=r.j.get(r.g);bd(r,t||n>=i&&n>0?Oi:ji)&&ts(e)}else if(t){n=e.R,r=e.h.currentTime,i=n.h,n.h=r;var a=void 0;switch(t){case"seeking":case"waiting":n.h=-1,a=ji;break;case"canplaythrough":case"playing":case"seeked":a=Oi;break;case"timeupdate":i>=0&&r-i>.01&&(a=Oi)}a!==void 0&&bd(n,a)&&ts(e)}}function q2(e,t,n,r,i){return new Lm(e,t,n,i,r)}function W2(e){return new hv(e.i,{Zb:function(){return e.G?e.G.Rd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},Ob:function(){return e.Ob()},video:e.h,Y:e.H,wc:e.N,onError:function(t){return Ua(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Bd:function(t,n,r,i){var a=t.startTime,o=t.endTime,s=n.type;if(s!=me){if(e.G){e.G.Fi();var u=Nd(e.H,s);!e.W()&&e.h.paused&&!e.h.seeking&&u!=null&&u>0&&e.G.Rd()<u&&!ry(e.G.Rd(),u,.001)&&e.G.$f(u)}gr(e)}r=new Map().set("start",a).set("end",o).set("contentType",s).set("isMuxed",r).set("isDependency",i),e.dispatchEvent(He("segmentappended",r)),e.o&&n.fastSwitching&&t.Xc&&t.je&&e.o.trySuggestStreams()},Fk:function(t,n){(n=n.yd)&&e.ye&&ux(e.ye,n,t)},Uh:function(t,n){var r=e.F;if(r.h.parseInbandPsshEnabled&&!r.H&&["audio","video"].includes(t)){t=new gd(oe(n)),n=0;for(var i=m(t.data),a=i.next();!a.done;a=i.next())n+=a.value.length;if(n==0)r=Promise.resolve();else{for(n=new Uint8Array(n),i=0,t=m(t.data),a=t.next();!a.done;a=t.next())a=a.value,n.set(a,i),i+=a.length;Mo(r,"cenc",n),r=r.m}}else r=Promise.resolve();return r},disableStream:function(t,n){return e.disableStream(t,n)},hl:function(t,n){return!(e.g.abr.enabled&&n.fastSwitching&&t.Xc&&t.je)}})}f.configure=function(e,t){var n=this.getConfiguration();if(arguments.length==2&&typeof e=="string"&&(e=Xu(e,t)),"preferredVariantRole"in e&&(Ce("preferredVariantRole configuration","Please Use preferredAudioRole instead."),e.preferredAudioRole=e.preferredVariantRole,delete e.preferredVariantRole),e.streaming&&"forceTransmuxTS"in e.streaming&&(Ce("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Ce("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){Ce("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var r=ge();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&r.Ha()==="WEBKIT",delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&typeof e.streaming.liveSync=="boolean"&&(Ce("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),r=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=r),e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){r=e.streaming.liveSyncMinLatency||0;var i=Math.abs((e.streaming.liveSyncMaxLatency||1)-r)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=r+i,e.streaming.liveSync.targetLatencyTolerance=i}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Ce("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Ce("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Ce("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Ce("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Ce("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Ce("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Ce("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Ce("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Ce("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var a=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return a},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(Ce("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(Ce("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(Ce("manifest.dash.enableAudioGroups configuration","Please Use manifest.enableAudioGroups instead."),e.manifest.enableAudioGroups=e.manifest.dash.enableAudioGroups,delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(Ce("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(Ce("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(Ce("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(Ce("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(Ce("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(Ce("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(Ce("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){r=!1;for(var o in e.drm.advanced){var s=e.drm.advanced[o];i=s.videoRobustness,s=s.audioRobustness,"videoRobustness"in e.drm.advanced[o]&&!Array.isArray(e.drm.advanced[o].videoRobustness)&&(e.drm.advanced[o].videoRobustness=[i],r=!0),"audioRobustness"in e.drm.advanced[o]&&!Array.isArray(e.drm.advanced[o].audioRobustness)&&(e.drm.advanced[o].audioRobustness=[s],r=!0)}r&&Ce("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(Ce("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(Ce("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(Ce("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),o=_r(this.g,e,sr(this)),hy(this,n),o},f.yj=function(e){this.dg=e};function hy(e,t){if(e.Ee=new wd(e.g,e.ya,e.F),e.I){var n=Wn(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(n.disableVideo=!0),e.I.configure(n)}if(e.F&&e.F.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=Yn&&dm(e.Ee,e.i)&&zt(e)}catch(i){Ua(e,i)}e.o&&fi(e),n=e.l.o,!n||n.allowedByApplication&&n.allowedByKeySystem||hi(e)}if(e.N&&e.N.configure(e.g.networking),e.H&&(e.H.configure(e.g.mediaSource),e.H.Fa=e.g.manifest.segmentRelativeVttTiming),e.u&&dl(e),e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),Cy(e)),e.R&&fy(e),e.Ta&&(e.g.streaming.rebufferingGoal?e.Ta.Ea(.25):e.Ta.stop()),e.i&&Nf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C&&e.C.configure(e.g.ads),e.K&&e.K.configure(e.g.cmcd),e.va&&e.va.configure(e.g.cmsd),e.Da&&e.Da.configure(e.g.queue),e.m==Pt&&e.J.getConfiguration){n=e.J.getConfiguration();var r=!1;t.preferredVideoHdrLevel!=e.g.preferredVideoHdrLevel&&n.hdrLevel!=e.g.preferredVideoHdrLevel&&(n.hdrLevel=e.g.preferredVideoHdrLevel,r=!0),t.preferredVideoLayout!=e.g.preferredVideoLayout&&n.videoLayout!=e.g.preferredVideoLayout&&(n.videoLayout=e.g.preferredVideoLayout,r=!0),t.preferSpatialAudio!=e.g.preferSpatialAudio&&n.spatialAudio!=e.g.preferSpatialAudio&&(n.spatialAudio=e.g.preferSpatialAudio,r=!0),t.preferredVideoRole!=e.g.preferredVideoRole&&n.videoRole!=e.g.preferredVideoRole&&(n.videoRole=e.g.preferredVideoRole,r=!0),r&&(e.J.configure(n),hi(e))}}f.getConfiguration=function(){var e=sr(this);return _r(e,this.g,sr(this)),e},f.Ij=function(){return this.dg},f.ki=function(){var e=sr(this);return _r(e,this.g,sr(this)),wv(this.g,sr(this))},f.ei=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ra().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},f.Oi=function(){var e=this.getConfiguration(),t;for(t in this.g)delete this.g[t];_r(this.g,sr(this),sr(this)),hy(this,e)},f.ae=function(){return this.m},f.ii=function(){return this.i?this.i.type:null},f.bf=function(){return this.h},f.Yb=function(){return this.N},f.rd=function(){return this.X},f.di=function(){return this.C?this.C:null},f.mi=function(){return this.Da?this.Da:null},f.W=function(){return this.i&&!this.xa()?this.i.presentationTimeline.W():this.h&&(this.h.src||this.xa())?this.h.duration==1/0:!1},f.Vc=function(){return this.i?this.i.presentationTimeline.Vc():!1},f.lk=function(){if(this.i&&!this.xa()){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&(this.h.src||this.xa())?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},f.ti=function(){if(this.i&&!this.xa()){var e=this.i.variants;return e.length?(e=e[0],e.audio||!e.video?!1:!e.video.codecs.includes(",")):!1}return this.h&&(this.h.src||this.xa())&&this.h.audioTracks?this.h.audioTracks.length==0:!1},f.Ra=function(){if(this.i&&!this.xa()){if(!this.Ua&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.$b(),end:e.Gb()}}if(this.h&&(this.h.src||this.xa())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),n),{start:t,end:e}}return{start:0,end:0}},f.ik=function(){this.W()&&(this.h.currentTime=this.Ra().end)},f.nk=function(){return this.Ua},f.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},f.drmInfo=function(){return this.F?this.F.g:null},f.$d=function(){return this.F?this.F.$d():1/0},f.Kg=function(){return this.F?this.F.Kg():[]},f.$e=function(){return this.F?this.F.$e():{}},f.Rg=function(){return this.R?this.R.g==ji:!!this.X},f.Ob=function(){return this.h?this.M?this.M.i:1:0},f.Kh=function(e){this.m==Pt&&this.l&&pv(this.l,e)},f.xe=function(e,t){t=t===void 0?!0:t,e==0?Ae("A trick play rate of 0 is unsupported!"):(this.M.set(e),this.m==Pt&&(this.o.playbackRateChanged(e),this.Kh(t&&e!=1)),wy(this,e))},f.Td=function(){var e=this.M.Tc();this.m==pn&&this.M.set(e),this.m==Pt&&(this.M.set(e),this.o.playbackRateChanged(e),this.Kh(!1)),this.fc.Qa()},f.sc=function(){if(this.i&&!this.xa()){for(var e=this.l?this.l.o:null,t=[],n=0,r=m(this.i.variants),i=r.next();!i.done;i=r.next())if(i=i.value,Co(i)){var a=Ni(i);a.active=i==e,a.active||n==1||e==null||i.video!=e.video||i.audio!=e.audio||(a.active=!0),a.active&&n++,t.push(a)}return t}if(this.h&&this.h.audioTracks){var o=xy(this);return e=Array.from(this.h.audioTracks),e.length?e.map(function(s){return fu(s,o)}):o?[fu(null,o)]:[]}return[]},f.Lc=function(){if(this.i){if(this.xa())return[];for(var e=this.l?this.l.B:null,t=[],n=m(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var i=Ui(r);i.active=r==e,t.push(i)}return t}return this.h&&this.h.src&&this.h.textTracks?fl(this).map(function(a){return Rg(a)}):[]},f.Nj=function(){var e=this.Ke;return this.i&&(e=this.i.imageStreams),e.map(function(t){return cd(t)})},f.Bj=function(e){var t=this,n,r;return C(function(i){return i.g==1?b(i,gy(t,e),2):(n=i.h,n?(r=[],n.segmentIndex.Fb(function(a){var o=py(a.tilesLayout||n.tilesLayout);if(o)for(var s=o.rows*o.columns,u=a.j-a.startTime,l=0;l<s;l++){var c=my(a,n,a.startTime+u*l/s,o);r.push(c)}}),n.closeSegmentIndex&&n.closeSegmentIndex(),i.return(r)):i.return(null))})};function py(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}f.ck=function(e,t){var n=this,r,i,a,o,s,u;return C(function(l){return l.g==1?b(l,gy(n,e),2):(r=l.h,!r||(r.closeSegmentIndex&&(n.zc.has(r)||(i=new ve(function(){r.closeSegmentIndex(),n.zc.delete(r)}),n.zc.set(r,i)),a=n.zc.get(r),a.ka(5)),o=r.segmentIndex.find(t),o==null)?l.return(null):(s=r.segmentIndex.get(o),(u=py(s.tilesLayout||r.tilesLayout))?l.return(my(s,r,t,u)):l.return(null)))})};function gy(e,t){var n,r;return C(function(i){return i.g==1?e.m!=Pt&&e.m!=pn||(n=e.Ke,e.i&&(n=e.i.imageStreams),r=n[0],!r)?i.return(null):(t!=null&&(r=n.find(function(a){return a.id==t})),r?r.segmentIndex?i.A(2):b(i,r.createSegmentIndex(),2):i.return(null)):i.return(r)})}function my(e,t,n,r){var i=t.width||0,a=t.height||0,o=i/r.columns,s=a/r.rows,u=r.columns*r.rows,l=e.j-e.startTime;l=e.B||l/u;var c=e.startTime,d=0,h=0;return u>1&&(h=Math.floor((n-e.startTime)/l),c=e.startTime+h*l,d=h%r.columns*o,h=Math.floor(h/r.columns)*s),r=!1,(n=e.thumbnailSprite)&&(r=!0,s=n.height,d=n.positionX,h=n.positionY,o=n.width),{segment:e,imageHeight:a,imageWidth:i,height:s,positionX:d,positionY:h,startTime:c,duration:l,uris:e.P(),startByte:e.Kc(),endByte:e.Ic(),width:o,sprite:r,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}f.ph=function(e){function t(){var r=n.i.textStreams.find(function(i){return i.id==e.id});r&&r!=n.l.B&&(uf(n.B.h,r,!1),Bu(n.l,r),Or(n),rs(n),n.Ld=r.language)}var n=this;this.i&&this.G&&(t(),!this.xa())||(function(){if(n.h&&n.h.textTracks){var r=fl(n),i=r.find(function(s){return du(s)===e.id});if(i){if(n.u instanceof bt){r=m(r);for(var a=r.next();!a.done;a=r.next()){a=a.value;var o=a===i?n.$?"showing":"hidden":"disabled";a.mode!==o&&(a.mode=o)}}else r=r.find(function(s){return s.mode!=="disabled"}),r!==i&&(r&&(r.mode="disabled",n.j.Ma(r,"cuechange"),n.u.remove(0,1/0)),i&&vy(n,i));Or(n),rs(n)}}})()};function vy(e,t){e.j.D(t,"cuechange",function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},r=[],i=Array.from(t.activeCues||[]);i=m(i);for(var a=i.next();!a.done;a=i.next()){if(a=a.value,a.endTime===1/0||a.endTime<a.startTime)a=null;else{var o=new qe(a.startTime,a.endTime,a.text);o.line=typeof a.line=="number"?a.line:null,a.lineAlign&&(o.lineAlign=a.lineAlign),o.lineInterpretation=a.snapToLines?wo:1,o.position=typeof a.position=="number"?a.position:null,a.positionAlign&&(o.positionAlign=a.positionAlign),o.size=a.size,o.textAlign=a.align,a.vertical==="lr"?o.writingMode="vertical-lr":a.vertical==="rl"&&(o.writingMode="vertical-rl"),a.region&&(o.region.id=a.region.id,o.region.height=a.region.lines,o.region.heightUnits=2,o.region.regionAnchorX=a.region.regionAnchorX,o.region.regionAnchorY=a.region.regionAnchorY,o.region.scroll=a.region.scroll,o.region.viewportAnchorX=a.region.viewportAnchorX,o.region.viewportAnchorY=a.region.viewportAnchorY,o.region.viewportAnchorUnits=ln,o.region.width=a.region.width,o.region.widthUnits=ln),ru(o),a=o}a&&((o=e.g.mediaSource.modifyCueCallback)&&o(a,null,n),r.push(a))}e.u.append(r)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}f.Jf=function(e,t,n){function r(){var a=i.i.variants.find(function(s){return s.id==e.id});if(a&&Co(a)){var o=i.l.o;i.g.abr.enabled&&(o.video!=a.video||o.audio&&a.audio&&o.audio.language==a.audio.language&&o.audio.channelsCount==a.audio.channelsCount&&o.audio.label==a.audio.label)&&Ae("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),i.xa()?ns(i,a,!1,!1,0):ns(i,a,!1,t||!1,n||0),i.J.configure({language:a.language,role:a.audio&&a.audio.roles&&a.audio.roles[0]||"",videoRole:a.video&&a.video.roles&&a.video.roles[0]||"",channelCount:a.audio&&a.audio.channelsCount?a.audio.channelsCount:0,hdrLevel:a.video&&a.video.hdr?a.video.hdr:"",spatialAudio:a.audio&&a.audio.spatialAudio?a.audio.spatialAudio:!1,videoLayout:a.video&&a.video.videoLayout?a.video.videoLayout:"",audioLabel:a.audio&&a.audio.label?a.audio.label:"",videoLabel:a.video&&a.video.label?a.video.label:"",codecSwitchingStrategy:i.g.mediaSource.codecSwitchingStrategy,audioCodec:a.audio&&a.audio.codecs?a.audio.codecs:"",activeAudioCodec:o.audio&&o.audio.codecs?o.audio.codecs:"",activeAudioChannelCount:o.audio&&o.audio.channelsCount?o.audio.channelsCount:0,preferredAudioCodecs:i.g.preferredAudioCodecs,preferredAudioChannelCount:i.g.preferredAudioChannelCount}),fi(i)}}var i=this;t=t===void 0?!1:t,n=n===void 0?0:n,!(this.i&&this.G&&(r(),!this.xa()))&&(function(){if(e.originalAudioId&&i.h&&i.h.audioTracks){var a=Array.from(i.h.audioTracks);a=m(a);for(var o=a.next();!o.done;o=a.next())if(o=o.value,du(o)==e.id){Rf(i,o);break}}})()},f.Wk=function(e,t){function n(){var i=r.J.getConfiguration();i.audioCodec=e.codecs||"",i.audioLabel=e.label||"",i.channelCount=e.channelsCount||0,i.language=e.language,i.role=e.roles[0]||"",i.spatialAudio=e.spatialAudio;var a=r.l.o;(a=a&&a.audio)&&(i.activeAudioCodec=a.codecs||"",i.activeAudioChannelCount=a.channelsCount||0),r.J.configure(i),hi(r,!0,t,!1,!1)}var r=this;t=t===void 0?0:t,!(this.i&&this.G&&(n(),!this.xa()))&&(function(){if(r.h&&r.h.audioTracks){var i=Le(e.language),a=Array.from(r.h.audioTracks),o=null;a=m(a);for(var s=a.next();!s.done;s=a.next()){s=s.value;var u=s.language||"und";if(s.label==e.label&&Le(u)==i&&s.kind==e.roles[0]){o=s;break}}o&&Rf(r,o)}})()},f.getAudioTracks=function(){if(this.i&&!this.xa()){var e=this.sc();if(!e.length)return[];var t=e.find(function(a){return a.active});if(!t)return[];var n=e;if(this.m!=Pt||this.xa()||(n=e.filter(function(a){return a.originalVideoId===t.originalVideoId&&(a.audioCodec||Cr.includes(a.audioMimeType||""))})),!n.length)return[];e=new Map,n=m(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var i=r.originalAudioId;i||r.audioId==null||(i=String(r.audioId)),!i&&r.codecs.includes(",")&&r.audioCodec&&(i="muxed-in-video"),i&&(i+=[r.language,r.label,r.channelsCount,r.spatialAudio,r.audioCodec||""].join("_"),e.set(i,{active:r.active,language:r.language,label:r.label,mimeType:r.audioMimeType,codecs:r.audioCodec,primary:r.primary,roles:r.audioRoles||[],accessibilityPurpose:r.accessibilityPurpose,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,originalLanguage:r.originalLanguage}))}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(a){var o=a.language;return o={active:a.enabled,language:Le(o||"und"),label:a.label,mimeType:null,codecs:null,primary:a.kind=="main",roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:o},a.kind&&(a.kind=="description"&&(o.accessibilityPurpose="visually impaired"),o.roles.push(a.kind)),a.configuration&&(a.configuration.codec&&(o.codecs=a.configuration.codec),a.configuration.sampleRate&&(o.audioSamplingRate=a.configuration.sampleRate),a.configuration.numberOfChannels&&(o.channelsCount=a.configuration.numberOfChannels)),o}):[]},f.Yk=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?0:n;var r=this.sc();if(r.length){var i=r.find(function(o){return o.active});if(i){r=r.filter(function(o){return(o.videoBandwidth||o.bandwidth)==e.bandwidth&&o.width==e.width&&o.height==e.height&&o.frameRate==e.frameRate&&o.pixelAspectRatio==e.pixelAspectRatio&&o.hdr==e.hdr&&o.colorGamut==e.colorGamut&&o.videoLayout==e.videoLayout&&o.videoMimeType==e.mimeType&&o.videoCodec==e.codecs&&Yr(o.videoRoles,e.roles)&&o.videoLabel==e.label});var a;r.length==1?a=r[0]:a=r.find(function(o){return o.audioId===i.audioId}),a||(a=r.find(function(o){return o.language==i.language&&o.label===i.label&&o.channelsCount===i.channelsCount&&o.spatialAudio===i.spatialAudio&&o.audioMimeType===i.audioMimeType&&Nt(o.audioCodec||"")===Nt(i.audioCodec||"")&&Yr(o.audioRoles,i.audioRoles)})),a&&!a.active&&this.Jf(a,t,n)}}},f.getVideoTracks=function(){if(this.m==pn||this.xa())return[];var e=this.sc();if(!e.length)return[];var t=e.find(function(a){return a.active});if(!t)return[];var n=e;if(this.ti()||(n=e.filter(function(a){return a.videoCodec&&a.audioGroupId===t.audioGroupId&&a.originalAudioId===t.originalAudioId?a.audioId===t.audioId?!0:a.language===t.language&&a.label===t.label&&a.channelsCount===t.channelsCount&&a.spatialAudio===t.spatialAudio&&a.audioMimeType===t.audioMimeType&&Nt(a.audioCodec||"")===Nt(t.audioCodec||"")&&Yr(a.audioRoles,t.audioRoles):!1})),!n.length)return[];e=new Map,n=m(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var i=r.originalVideoId;i||r.videoId==null||(i=String(r.videoId)),i&&e.set(i,{active:r.active,bandwidth:r.videoBandwidth||r.bandwidth,width:r.width,height:r.height,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,mimeType:r.videoMimeType,codecs:r.videoCodec,roles:r.videoRoles||[],label:r.videoLabel})}return Array.from(e.values())},f.Dj=function(){return Ry(this.sc())},f.$j=function(){return Ry(this.Lc())},f.Cj=function(){return Array.from(Dy(this.sc()))},f.Zj=function(){return Array.from(Dy(this.Lc()))},f.Ti=function(e,t,n,r,i,a,o){function s(){function l(g,v){return g.video||v.video?g.video&&v.video?Math.abs((g.video.height||0)-(v.video.height||0))+Math.abs((g.video.width||0)-(v.video.width||0)):1/0:0}var c=u.l.o;u.J=u.g.adaptationSetCriteriaFactory(),u.J.configure({language:e,role:t||"",videoRole:c.video&&c.video.roles&&c.video.roles[0]||"",channelCount:n||0,hdrLevel:"",spatialAudio:a||!1,videoLayout:"",audioLabel:o||"",videoLabel:"",codecSwitchingStrategy:u.g.mediaSource.codecSwitchingStrategy,audioCodec:i||"",activeAudioCodec:c.audio&&c.audio.codecs?c.audio.codecs:"",activeAudioChannelCount:c.audio&&c.audio.channelsCount?c.audio.channelsCount:0,preferredAudioCodecs:u.g.preferredAudioCodecs,preferredAudioChannelCount:u.g.preferredAudioChannelCount});var d=u.J.create(u.i.variants),h=null;d=m(d.values());for(var p=d.next();!p.done;p=d.next())p=p.value,Co(p)&&(!h||l(h,c)>l(p,c))&&(h=p);h!=c&&(h?(c=Ni(h),u.Jf(c,!0,r||0)):hi(u))}var u=this;n=n===void 0?0:n,r=r===void 0?0:r,i=i===void 0?"":i,a=a===void 0?!1:a,o=o===void 0?"":o,!(this.i&&this.G&&(s(),!this.xa()))&&(function(){if(u.h&&u.h.audioTracks){var l=fa(u.sc(),e,t||"",!1)[0];l&&u.Jf(l)}})()},f.oh=function(e,t,n){function r(){i.Ld=e,i.Pd=t||"",i.Od=n||!1;var a=fa(i.i.textStreams,i.Ld,i.Pd,i.Od)[0]||null;a&&a!=i.l.B&&(uf(i.B.h,a,!1),i.g.streaming.alwaysStreamText||i.Sg())&&(Bu(i.l,a),Or(i),rs(i))}var i=this;n=n===void 0?!1:n,!(this.i&&this.G&&(r(),!this.xa()))&&(function(){var a=fa(i.Lc(),e,t||"",n||!1)[0];a&&i.ph(a)})()},f.Xk=function(e,t,n){function r(){for(var a=null,o=m(i.i.variants),s=o.next();!s.done;s=o.next())if(s=s.value,s.audio.label==e){a=s;break}a!=null&&(i.J=i.g.adaptationSetCriteriaFactory(),i.J.configure({language:a.language,role:"",videoRole:"",channelCount:0,hdrLevel:"",spatialAudio:!1,videoLayout:"",videoLabel:"",audioLabel:e,codecSwitchingStrategy:i.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:i.g.preferredAudioCodecs,preferredAudioChannelCount:i.g.preferredAudioChannelCount}),hi(i,t,n))}var i=this;t=t===void 0?!0:t,n=n===void 0?0:n,!(this.i&&this.G&&(r(),!this.xa()))&&(function(){if(i.h&&i.h.audioTracks){var a=Array.from(i.h.audioTracks),o=null;a=m(a);for(var s=a.next();!s.done;s=a.next())s=s.value,s.label==e&&(o=s);o&&Rf(i,o)}})()},f.Sg=function(){var e=this.$;return this.u?this.u.isTextVisible():e},f.Hj=function(){return this.ob.map(function(e){return Ui(e)})},f.Fj=function(e){if(Ce("getChapters","Please use an getChaptersAsync."),!this.ob.length)return[];var t=Le(e);if(e=this.ob.filter(function(a){return Le(a.language)==t}),!e.length)return[];var n=[],r=new Set;e=m(e);for(var i=e.next();!i.done;i=e.next())i=i.value,i.segmentIndex&&i.segmentIndex.Fb(function(a){var o=a.P()[0],s=a.startTime+"-"+a.endTime+"-"+o;a={id:s,title:o,startTime:a.startTime,endTime:a.endTime},r.has(s)||(n.push(a),r.add(s))});return n},f.Gj=function(e){var t=this,n,r,i,a,o,s,u;return C(function(l){switch(l.g){case 1:if(!t.ob.length)return l.return([]);if(n=Le(e),r=t.ob.filter(function(c){return Le(c.language)==n}),!r.length)return l.return([]);i=[],a=new Set,o=m(r),s=o.next();case 2:if(s.done){l.A(4);break}if(u=s.value,u.segmentIndex){l.A(5);break}return b(l,u.createSegmentIndex(),5);case 5:u.segmentIndex.Fb(function(c){var d=c.P()[0],h=c.startTime+"-"+c.endTime+"-"+d;c={id:h,title:d,startTime:c.startTime,endTime:c.endTime},a.has(h)||(i.push(c),a.add(h))}),s=o.next(),l.A(2);break;case 4:return l.return(i)}})};function fl(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function z2(e){return Array.from(e.h.textTracks).find(function(t){return t.label=="Shaka Player TextTrack"})}function X2(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}f.wh=function(e){e=!!e,this.$!=e&&(this.$=e,this.m==Pt?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.B||(e=fa(this.i.textStreams,this.Ld,this.Pd,this.Od),e.length>0&&(Bu(this.l,e[0]),Or(this),rs(this))):wx(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),Ey(this))},f.Tj=function(){if(this.G)var e=this.G.Rd();else{if(this.O==null)return new Date;if(this.O instanceof Date)return this.O;e=this.O}if(this.i&&!this.xa()){var t=this.i.presentationTimeline;return new Date(((t.m||t.i)+e)*1e3)}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+e*1e3)):null},f.li=function(){if(this.i&&!this.xa()){var e=this.i.presentationTimeline;return e=e.m||e.i,e===null?null:new Date(e*1e3)}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},f.df=function(){return this.W()&&this.i?this.i.presentationTimeline.df():null},f.Hc=function(){if(this.m==Pt)return this.H.Hc();var e={total:[],audio:[],video:[],text:[]};return this.m==pn&&(e.total=Nr(this.h.buffered)),e};function yy(e){if(!e.h||!e.h.currentTime)return null;var t=e.li();return t?Math.floor(Date.now()-(t.getTime()+e.h.currentTime*1e3)):null}f.getBandwidthEstimate=function(){return this.o?this.o.getBandwidthEstimate():NaN},f.getStats=function(){if(this.m!=Pt&&this.m!=pn)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Df(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.W()||zx(this.B,Math.round(100*t)),this.G&&(this.B.T=this.G.Lh(),this.B.V=this.G.Nh()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),Wx(this.B,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.B.N=Number(t.corruptedVideoFrames)),this.B.o=this.F?tS(this.F):NaN,Av(this.B,e.videoWidth||NaN,e.videoHeight||NaN),this.B.l="",this.W()&&(e=yy(this),e!=null&&(this.B.F=e/1e3)),t=this.sc().find(function(i){return i.active}),e=this.Lc().find(function(i){return i.active}),t){if(t.bandwidth){var n=this.M?this.M.i:1,r=n*t.bandwidth;e&&e.bandwidth&&(r+=n*e.bandwidth),this.B.B=r}t.width&&t.height&&Av(this.B,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.B.l=t)}return this.m!=Pt||this.xa()||(this.i&&(this.B.I=this.i.periodCount,this.B.H=this.i.gapCount,this.i.presentationTimeline&&(this.B.K=this.i.presentationTimeline.h)),e=this.o.getBandwidthEstimate(),this.B.u=e),this.m==pn&&kv(this.B,NaN),Xx(this.B)},f.Sd=function(e,t,n,r,i,a,o){o=o===void 0?!1:o;var s=this,u,l,c,d,h,p,g,v,y,T,w,S;return C(function(k){switch(k.g){case 1:if(s.m!=Pt&&s.m!=pn)throw new M(1,7,7004);if(n!="subtitles"&&n!="captions"&&Ae("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){k.A(2);break}return b(k,hl(s,e),3);case 3:r=k.h;case 2:if(u=[],s.C&&(u=s.C.getCuePoints()),s.m!=pn){k.A(4);break}return l=ge(),o&&l.Ha()==="WEBKIT"&&(n="forced"),b(k,Y2(s,e,t,n,r,a||"",u),5);case 5:if(c=k.h,c.track)return zt(s),Or(s),k.return(Rg(c.track));throw new M(1,2,2012);case 4:if(d=ft,h=s.Ra(),p=h.end-h.start,s.i&&(p=s.i.presentationTimeline.getDuration()),p==1/0)throw new M(1,4,4033);if(!u.length){k.A(6);break}return b(k,pl(s,e),7);case 7:g=k.h,v=by(s,g,r,u),y=new Blob([v],{type:"text/vtt"}),e=jd(y),r="text/vtt";case 6:if(T={id:s.Fe++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Uu(0,p,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:a||null,type:d.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([at(r||"",i||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},w=at(T.mimeType,T.codecs),S=xo(w),!S)throw new M(2,2,2014,r);return s.i.textStreams.push(T),zt(s),Or(s),k.return(Ui(T))}})},f.Pe=function(e,t){var n=this,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k;return C(function(D){switch(D.g){case 1:if(n.m!=Pt&&n.m!=pn)throw new M(1,7,7004);if(t){D.A(2);break}return b(D,hl(n,e),3);case 3:t=D.h;case 2:if(t!="text/vtt")throw new M(1,2,2017,e);if(r=ft,i=n.Ra(),a=i.end-i.start,n.i&&(a=n.i.presentationTimeline.getDuration()),a==1/0)throw new M(1,4,4045);return b(D,pl(n,e),4);case 4:if(o=D.h,s=So(t),!s)throw new M(2,2,2014,t);for(u=s(),l={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},c=oe(o),d=u.parseMedia(c,l,e,[]),h=[],p=m(d),g=p.next(),v={};!g.done;v={Wf:void 0,nd:void 0},g=p.next())v.nd=g.value,v.Wf=null,y=(function(x){return function(){return x.Wf==null&&(x.Wf=At([e],[x.nd.payload])),x.Wf||[]}})(v),T=new ee(v.nd.startTime,v.nd.endTime,y,0,null,null,0,0,1/0),v.nd.payload.includes("#xywh")&&(w=v.nd.payload.split("#xywh=")[1].split(","),w.length===4&&T.Mf({height:parseInt(w[3],10),positionX:parseInt(w[0],10),positionY:parseInt(w[1],10),width:parseInt(w[2],10)})),h.push(T);if(S=t,!h.length){D.A(5);break}return b(D,hl(n,h[0].P()[0]),6);case 6:S=D.h;case 5:return k={id:n.Fe++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Me(h),mimeType:S||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.Yf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([at(S||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},n.m==pn?n.Ke.push(k):n.i.imageStreams.push(k),zt(n),D.return(cd(k))}})},f.Oe=function(e,t,n){var r=this,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w;return C(function(S){switch(S.g){case 1:if(r.m!=Pt&&r.m!=pn)throw new M(1,7,7004);if(n){S.A(2);break}return b(S,hl(r,e),3);case 3:n=S.h;case 2:if(i=ft,a=r.Ra(),o=a.end-a.start,r.i&&(o=r.i.presentationTimeline.getDuration()),o==1/0)throw new M(1,4,4055);if(s=So(n),!s)throw new M(2,2,2014,n);return b(S,pl(r,e),4);case 4:for(u=S.h,l=s(),c={periodStart:0,segmentStart:0,segmentEnd:o,vttOffset:0},d=oe(u),h=l.parseMedia(d,c,e,[]),p=[],g=m(h),v=g.next(),y={};!v.done;y={Xe:void 0},v=g.next())y.Xe=v.value,T=new ee(y.Xe.startTime,y.Xe.endTime,(function(k){return function(){return[k.Xe.payload]}})(y),0,null,null,0,0,1/0),p.push(T);return w={id:r.Fe++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Me(p),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:i.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([at("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},r.ob.push(w),zt(r),S.return(Ui(w))}})};function hl(e,t){var n;return C(function(r){switch(r.g){case 1:return le(r,2),b(r,Ea(t,e.N,e.g.streaming.retryParameters),4);case 4:n=r.h,pe(r,3);break;case 2:ce(r);case 3:if(n)return r.return(n);throw new M(1,2,2011,t)}})}function Y2(e,t,n,r,i,a,o){var s,u,l,c;return C(function(d){if(d.g==1)return i!="text/vtt"||o.length?b(d,pl(e,t),3):d.A(2);d.g!=2&&(s=d.h,u=by(e,s,i,o),l=new Blob([u],{type:"text/vtt"}),t=jd(l),i="text/vtt"),c=document.createElement("track");e:{var h=e.K,p=t;try{if(!h.g.enabled){var g=p;break e}var v=yf(h);v.ot=Sf,v.su=!0;var y=es(v);g=tl(p,y);break e}catch(T){Xr("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",T),g=p;break e}g=void 0}return c.src=g,c.label=a,c.kind=r,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),e.cg.push(c),d.return(c)})}function pl(e,t){var n,r,i,a;return C(function(o){if(o.g==1){n=Ln,r=e.g.streaming.retryParameters,i=ht([t],r),i.method="GET";var s=e.K;try{s.g.enabled&&La(s,i,{ot:Sf,su:!0})}catch(u){Xr("CMCD_TEXT_ERROR","Could not generate text CMCD data.",u)}return b(o,e.N.request(n,i).promise,2)}return a=o.h,o.return(a.data)})}function by(e,t,n,r){var i=So(n);if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=oe(t),t=n.parseMedia(t,e,null,[]),d2(t,r);throw new M(2,2,2014,n)}f.fl=function(e,t){this.ya.width=e,this.ya.height=t},f.kh=function(e){if(this.m==Pt){var t=this.l;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.F)t=!1;else{for(var n=m(t.h.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.vd||r.Ja||r.qb||(r.vd=!1,Ut(t,r,e));t=!0}}else t=!1;return t},f.Lg=function(){return Ae("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},f.Qj=function(){return this.Ac},f.Lj=function(){var e={video:null,audio:null,text:null};if(this.m!=Pt)return e;var t=this.l.o,n=this.h.currentTime;t=m([t.video,t.audio,this.l.B]);for(var r=t.next();!r.done;r=t.next())if((r=r.value)&&r.segmentIndex){var i=r.segmentIndex.find(n);i=r.segmentIndex.get(i),i={codecs:i.codecs||r.codecs,mimeType:i.mimeType||r.mimeType,bandwidth:i.bandwidth||r.bandwidth},r.type=="video"?(i.width=r.width,i.height=r.height,e.video=i):r.type=="audio"?e.audio=i:r.type==me&&(e.text=i)}return e};function sr(e){var t=Ra();return t.streaming.failureCallback=function(n){if(e.W()){var r=null;n.code==1001||n.code==1002?(r=1,e.g.streaming.lowLatencyMode&&(r=.1)):n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.kh(r))}},t.textDisplayFactory=function(){if(e.Be){var n=e.h;n=!(n.webkitDisplayingFullscreen||n.webkitPresentationMode&&n.webkitPresentationMode!="inline")}else n=!1;return n?new Ot(e.h,e.Be):"track"in document.createElement("track")?new bt(e):new jt},t}f.Zi=function(e){this.Be=e};function J2(e,t){for(var n=new Set,r=m(t.textStreams),i=r.next();!i.done;i=r.next())i=i.value,i.mimeType!="application/cea-608"&&i.mimeType!="application/cea-708"||n.add(i.originalId);for(r=m(t.variants),i=r.next();!i.done;i=r.next())if((i=i.value.video)&&i.closedCaptions){for(var a=m(i.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=o.startsWith("CC")?"application/cea-608":"application/cea-708",u=new tt,l=i.closedCaptions.get(o);s={id:e.Fe++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:me,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([at(s,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(s),n.add(o)}}}function $2(e,t){var n,r,i,a,o;return C(function(s){return s.g==1?(n=e.audio,r=e.video,i=function(u,l){var c,d,h;return C(function(p){return p.g==1?u?u.segmentIndex?p.A(2):b(p,u.createSegmentIndex(),2):p.return(null):(d=(c=u.segmentIndex.Xb(l))?c.next().value:null,d?(h=d.startTime,p.return(h)):p.return(null))})},b(s,i(n,t),2)):s.g!=3?(a=s.h,b(s,i(r,t),3)):(o=s.h,o!=null&&a!=null?s.return(Math.max(o,a)):o!=null?s.return(o):a!=null?s.return(a):s.return(t))})}function ts(e){var t=e.Rg();if(e.B&&e.R&&e.G){if(e.g.streaming.rebufferingGoal==0){var n=e.M;n.j=!1,Hd(n)}else n=e.M,n.j=t,Hd(n);if(e.K&&(n=e.K,t||n.F||(n.F=!0),n.F&&t&&(n.I=!0,Bt(n,"ps",{dd:"r"})),n.J=t),Df(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ne<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,i=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.V&&(e.V=Math.min(e.V+ ++e.Ne*i,n-r))}}t=new Map().set("buffering",t),e.dispatchEvent(He("buffering",t))}function wy(e,t){e.fc.Qa(),e.fc.D(e.h,"timeupdate",function(){var n=e.h.currentTime,r=e.Ra(),i=e.W(),a=i?e.g.streaming.safeSeekOffset:0;t>0?i&&t>1&&Math.floor(n)>=Math.floor(r.end)&&e.Td():Math.floor(n)<=Math.floor(r.start+a)&&e.Td()})}function Df(e){if(e.B&&e.R){var t=e.B.g,n="playing";e.R.g==ji?n="buffering":e.ge()?n="ended":e.h.paused&&(n="paused");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var i=Date.now()/1e3;t.g.duration=i-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:i,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(He("statechanged",n)))}}function Ty(e){var t=e.h.playbackRate,n=e.W();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,i=e.ei();i<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.xe(r,!1):i==1&&t!==e.M.Tc()&&e.Td()}if(n&&(n=e.Ra(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){r=e.g.streaming.liveSync.targetLatencyTolerance,i=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var a=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var o=e.g.streaming.liveSync.targetLatency,s=o+r,u=Math.max(0,o-r),l=e.g.streaming.liveSync.maxPlaybackRate,c=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(o=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?s=e.i.serviceDescription.targetLatency+r:e.i.serviceDescription.maxLatency!=null&&(s=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?u=Math.max(0,e.i.serviceDescription.targetLatency-r):e.i.serviceDescription.minLatency!=null&&(u=e.i.serviceDescription.minLatency),l=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.V||typeof o!="number"||(e.V=o);var d=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;i&&e.ec&&e.V!==null&&typeof o=="number"&&e.Ne<d&&Date.now()-e.ec>a*1e3&&(a=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.V=Math.max(e.V-(o-a)/2,a+r),e.ec=Date.now()),i&&e.V!==null&&(s=e.V+r,u=e.V-r),o=n.end-e.h.currentTime,r=0,e.m==pn&&(i=e.h.buffered,i.length>0&&(r=i.end(i.length-1),r=Math.max(l,r-n.end))),n=e.g.streaming.liveSync.panicMode,i=e.g.streaming.liveSync.panicThreshold*1e3,a=Date.now()-e.R.i,n&&!c&&(c=e.g.streaming.liveSync.minPlaybackRate),n&&c&&a<=i?t!=c&&e.xe(c,!1):s!=null&&l&&o-r>s?(t!=l&&e.xe(l,!1),e.ec=null):u!=null&&c&&o-r<u?(t!=c&&e.xe(c,!1),e.ec=null):t!==e.M.Tc()&&(e.Td(),e.ec=Date.now())}}function gl(e){if(e.h){var t=function(i,a){return(ry(i,a,.01)||a>i)&&e.ag<i?(e.ag=i,!0):!1},n=e.Ra();if(n=n.end-n.start,n=n>0?e.h.currentTime/n:0,!isNaN(n)){if(n*=100,t(0,n))var r=He("started");else t(25,n)?r=He("firstquartile"):t(50,n)?r=He("midpoint"):t(75,n)?r=He("thirdquartile"):((t(100,n)||n>100)&&(r=He("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.ge()&&e.h.pause());r&&e.dispatchEvent(r)}}}function fi(e){try{hm(e.Ee,e.i)}catch(n){return Ua(e,n),!1}var t=hu(e.i.variants);return t=e.J.create(t),e=e.o.setVariants(Array.from(t.values())),typeof e=="boolean"?e:!0}function Sy(e,t){if(t=t===void 0?!1:t,fi(e)){if(!e.g.abr.enabled){var n=e.J;if(typeof n.getLastAdaptationSet!="function"&&(Ce("AdaptationSetCriteria w/o getLastAdaptationSet","Please use an AdaptationSetCriteria with getLastAdaptationSet."),n.getLastAdaptationSet=function(){return null}),(n=n.getLastAdaptationSet())&&(n=Array.from(n.values()),n.length)){var r=e.l.o;if(r&&r.video&&(n=n.find(function(i){return i.video==r.video})))return n}}return e.o.chooseVariant(t)}return null}function hi(e,t,n,r,i){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,i=i===void 0?!0:i;var a=Sy(e);a&&ns(e,a,i,t,n,r)}function ns(e,t,n,r,i,a){a=a===void 0?!1:a;var o=e.l.o;if(t==o)r&&gv(e.l,t,r,i,!0);else{var s=e.B.h;if(s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),gv(e.l,t,r,i,a,n),r=null,o&&(r=Ni(o)),o=Ni(t),o.active=!0,e.T&&(i=e.T,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),a=0,s=-1,t.mimeType){case"video/webm":a=1;break;case"video/mp4":a=2}switch(e.ii()){case"DASH":s=1;break;case"HLS":s=0}i.g&&(i.g.setLevelSwitching(t.id,!0),i.g.setContainerFormat(a),i.j||i.g.setStreamingFormat(s))}n?(n=new Map().set("oldTrack",r).set("newTrack",o),n=He("adaptation",n),Ki(e,n)):Ay(e,r,o),ky(e,r,o)}}function Rf(e,t){var n=Array.from(e.h.audioTracks).find(function(i){return i.enabled});if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var r=xy(e);n=fu(n,r),t=fu(t,r),Ay(e,n,t),ky(e,n,t)}}function xy(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(t){return t.selected}):null}function zt(e){var t=He("trackschanged");Ki(e,t),Iy(e)}function Ay(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),t=He("variantchanged",t),Ki(e,t)}function ky(e,t,n){var r=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(r=!0),r&&Iy(e)}function Iy(e){var t=He("audiotrackschanged");Ki(e,t)}function Or(e){var t=He("textchanged");Ki(e,t)}function Ey(e){var t=He("texttrackvisibility");Ki(e,t)}function Cy(e){e.g.abr.enabled||Pf(e);var t=new Map().set("newStatus",e.g.abr.enabled);Ki(e,He("abrstatuschanged",t))}function rs(e){var t=e.Lc().find(function(n){return n.active});t&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(t.language)}function Pf(e,t){if(t=t===void 0?!0:t,e.m==Pt){e.He.stop();for(var n=m(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&fi(e)}}f.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===Yn||!navigator.onLine||t==0||!this.i)return!1;if(this.i.variants.some(function(s){var u=s[e.type];return u&&u.id!==e.id&&!s.disabledUntilTime?e.type=="audio"?e.language===u.language:!0:!1})){for(var n=!1,r=!1,i=m(this.i.variants),a=i.next();!a.done;a=i.next()){a=a.value;var o=a[e.type];o&&(o.id===e.id?(a.disabledUntilTime=Date.now()/1e3+t,n=!0):o.trickModeVideo&&o.trickModeVideo.id==e.id&&(r=!0))}return!n&&r?!1:(this.He.Ea(1),t=this.Hc().video.reduce(function(s,u){return s+u.end-u.start},0),hi(this,!1,t,!0,!1),!0)}return!1};function Ua(e,t){var n,r,i,a,o;return C(function(s){switch(s.g){case 1:if(e.m==Yn)return s.return();if(t.severity===1&&e.B.M++,n=!0,!(e.Ua&&e.i&&e.l)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3024&&t.code!=3018){s.A(2);break}return r=ge(),r.Ha()==="WEBKIT"&&t.code==3016?s.return():(le(s,3),b(s,qu(e.l),5));case 5:i=s.h,n=!i,i&&(a=He("mediasourcerecovered"),e.dispatchEvent(a)),pe(s,2);break;case 3:ce(s),n=!0;case 2:if(!n)return s.return();t.severity===2&&Pf(e,!1),o=He("error",new Map().set("detail",t)),e.dispatchEvent(o),o.defaultPrevented&&(t.handled=!0),G(s)}})}f.addFont=function(e,t){return US(e,t)};function is(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(He(t,e))}function My(e,t,n,r){r=r===void 0?!1:r,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(He(r?"audiotrackchanged":"mediaqualitychanged",t))}function Lf(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new M(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(t<0&&(t+=4294967296),t=t.toString(16)),new M(2,3,3016,n,t,e.h.error.message))}function Q2(e,t){var n=He("keystatuschanged");e.dispatchEvent(n);var r=Object.keys(t);r.length==1&&r[0]==""&&(r=["00"],t={"00":t[""]});var i=r.length==1&&r[0]=="00";if(n=!1,r.length){r=e.keySystem();for(var a=ma(e.g.drm.clearKeys),o=function(g,v){g.allowedByKeySystem=!0,v=m(v);for(var y=v.next();!y.done;y=v.next())y=y.value,((y=t[i?"00":y])||e.F.H)&&(g.allowedByKeySystem=g.allowedByKeySystem&&!!y&&!pm.includes(y))},s=m(e.i.variants),u=s.next();!u.done;u=s.next()){u=u.value;var l=BT(u);l=m(l);for(var c=l.next();!c.done;c=l.next()){c=c.value;var d=u.allowedByKeySystem;if(c.keyIds.size)if(c.drmInfos.length&&!a.size&&e.i.type=="HLS")for(var h=m(c.drmInfos),p=h.next();!p.done;p=h.next())p=p.value,p.keySystem==r&&(p.keyIds.size?o(u,p.keyIds):o(u,c.keyIds));else o(u,c.keyIds);d!=u.allowedByKeySystem&&(n=!0)}}}n&&(zt(e),(n=e.l.o)&&!n.allowedByKeySystem?hi(e):fi(e))}function Nf(e,t,n){t>0&&(e.W()||e.Yi(t)),t=e.getDuration(),n<t&&(e.W()||e.Ab(n))}function Ki(e,t){C(function(n){if(n.g==1)return b(n,Promise.resolve(),2);e.m!=Yn&&e.dispatchEvent(t),G(n)})}function Dy(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Le(n.language)):t.add("und");return t}function Ry(e){for(var t=new Map,n=new Map,r=0;r<e.length;r++){var i=e[r],a="und",o=[];i.language&&(a=Le(i.language)),i.type=="variant"?o=i.audioRoles:o=i.roles,o&&o.length||(o=[""]),t.has(a)||t.set(a,new Set),o=m(o);for(var s=o.next();!s.done;s=o.next())s=s.value,t.get(a).add(s),i.label&&(n.has(a)||n.set(a,new Map),n.get(a).set(s,i.label))}var u=[];return t.forEach(function(l,c){l=m(l);for(var d=l.next();!d.done;d=l.next()){d=d.value;var h=null;n.has(c)&&n.get(c).has(d)&&(h=n.get(c).get(d)),u.push({language:c,role:d,label:h})}}),u}f.xa=function(){return this.h&&this.h.remote?this.h.remote.state!="disconnected":!1},f.ge=function(){return!this.h||this.h.ended?!0:this.Ua&&!this.W()&&this.h.currentTime>=this.Ra().end},q("shaka.Player",j),j.prototype.isEnded=j.prototype.ge,j.prototype.isRemotePlayback=j.prototype.xa,j.prototype.addFont=j.prototype.addFont,j.prototype.setVideoContainer=j.prototype.Zi,j.prototype.getFetchedPlaybackInfo=j.prototype.Lj,j.prototype.getManifestParserFactory=j.prototype.Qj,j.prototype.getManifest=j.prototype.Lg,j.prototype.retryStreaming=j.prototype.kh,j.prototype.setMaxHardwareResolution=j.prototype.fl,j.prototype.addChaptersTrack=j.prototype.Oe,j.prototype.addThumbnailsTrack=j.prototype.Pe,j.prototype.addTextTrackAsync=j.prototype.Sd,j.prototype.getStats=j.prototype.getStats,j.prototype.getBufferedInfo=j.prototype.Hc,j.prototype.getSegmentAvailabilityDuration=j.prototype.df,j.prototype.getPresentationStartTimeAsDate=j.prototype.li,j.prototype.getPlayheadTimeAsDate=j.prototype.Tj,j.prototype.setTextTrackVisibility=j.prototype.wh,j.prototype.getChaptersAsync=j.prototype.Gj,j.prototype.getChapters=j.prototype.Fj,j.prototype.getChaptersTracks=j.prototype.Hj,j.prototype.isTextTrackVisible=j.prototype.Sg,j.prototype.selectVariantsByLabel=j.prototype.Xk,j.prototype.selectTextLanguage=j.prototype.oh,j.prototype.selectAudioLanguage=j.prototype.Ti,j.prototype.getTextLanguages=j.prototype.Zj,j.prototype.getAudioLanguages=j.prototype.Cj,j.prototype.getTextLanguagesAndRoles=j.prototype.$j,j.prototype.getAudioLanguagesAndRoles=j.prototype.Dj,j.prototype.getVideoTracks=j.prototype.getVideoTracks,j.prototype.selectVideoTrack=j.prototype.Yk,j.prototype.getAudioTracks=j.prototype.getAudioTracks,j.prototype.selectAudioTrack=j.prototype.Wk,j.prototype.selectVariantTrack=j.prototype.Jf,j.prototype.selectTextTrack=j.prototype.ph,j.prototype.getThumbnails=j.prototype.ck,j.prototype.getAllThumbnails=j.prototype.Bj,j.prototype.getImageTracks=j.prototype.Nj,j.prototype.getTextTracks=j.prototype.Lc,j.prototype.getVariantTracks=j.prototype.sc,j.prototype.cancelTrickPlay=j.prototype.Td,j.prototype.trickPlay=j.prototype.xe,j.prototype.useTrickPlayTrackIfAvailable=j.prototype.Kh,j.prototype.getPlaybackRate=j.prototype.Ob,j.prototype.isBuffering=j.prototype.Rg,j.prototype.getKeyStatuses=j.prototype.$e,j.prototype.getActiveSessionsMetadata=j.prototype.Kg,j.prototype.getExpiration=j.prototype.$d,j.prototype.drmInfo=j.prototype.drmInfo,j.prototype.keySystem=j.prototype.keySystem,j.prototype.isFullyLoaded=j.prototype.nk,j.prototype.goToLive=j.prototype.ik,j.prototype.seekRange=j.prototype.Ra,j.prototype.isVideoOnly=j.prototype.ti,j.prototype.isAudioOnly=j.prototype.lk,j.prototype.isInProgress=j.prototype.Vc,j.prototype.isLive=j.prototype.W,j.prototype.getQueueManager=j.prototype.mi,j.prototype.getAdManager=j.prototype.di,j.prototype.getAssetUri=j.prototype.rd,j.prototype.getNetworkingEngine=j.prototype.Yb,j.prototype.getMediaElement=j.prototype.bf,j.prototype.getManifestType=j.prototype.ii,j.prototype.getLoadMode=j.prototype.ae,j.prototype.resetConfiguration=j.prototype.Oi,j.prototype.getBufferFullness=j.prototype.ei,j.prototype.getNonDefaultConfiguration=j.prototype.ki,j.prototype.getConfigurationForLowLatency=j.prototype.Ij,j.prototype.getConfiguration=j.prototype.getConfiguration,j.prototype.configurationForLowLatency=j.prototype.yj,j.prototype.configure=j.prototype.configure,j.prototype.releaseAllMutexes=j.prototype.Ok,j.prototype.destroyAllPreloads=j.prototype.rg,j.prototype.preload=j.prototype.preload,j.prototype.detachAndSavePreload=j.prototype.$h,j.prototype.unloadAndSavePreload=j.prototype.jj,j.prototype.load=j.prototype.load,j.prototype.updateStartTime=j.prototype.ql,j.prototype.unload=j.prototype.Dc,j.prototype.detach=j.prototype.detach,j.prototype.attachCanvas=j.prototype.qj,j.prototype.attach=j.prototype.Vb,j.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,i,a,o,s;return C(function(u){switch(u.g){case 1:if(t={},!e){u.A(2);break}return b(u,oS(),3);case 3:t=u.h;case 2:return n=yT(),r=HS(),i=ge(),b(u,i.nc(),4);case 4:return a=u.h,o={manifest:n,media:r,drm:t,hardwareResolution:a},s=Ly,s.forEach(function(l,c){o[c]=l()}),u.return(o)}})},j.isBrowserSupported=function(){return U.Promise||Ae("A Promise implementation or polyfill is required"),!(U.Promise&&U.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/")?!1:(ge(),mr()?!0:Fi().canPlayType("application/x-mpegurl")!="")},j.setQueueManagerFactory=function(e){yl=e},j.setAdManagerFactory=function(e){vl=e},j.registerSupportPlugin=iy,j.prototype.destroy=j.prototype.destroy;var Yn=0,ml=1,Pt=2,pn=3;j.LoadMode={DESTROYED:Yn,NOT_LOADED:ml,MEDIA_SOURCE:Pt,SRC_EQUALS:pn},j.version="v4.16.13";var Py=["4","16"];Kp=new function(e){this.g=e,this.i=cT,this.h=dT}(new Bc(Number(Py[0]),Number(Py[1])));var Ly=new Map,vl=null,yl=null;function Ny(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function Z2(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function te(e,t,n){var r=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new Pe,this.l.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.l.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}f=te.prototype,f.needsSkipUI=function(){return!1},f.isClientRendering=function(){return!0},f.hasCustomClick=function(){return!0},f.isUsingAnotherMediaElement=function(){return!0},f.getDuration=function(){return this.g.getDuration()},f.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},f.getRemainingTime=function(){return this.h.getRemainingTime()},f.isPaused=function(){return this.i},f.isSkippable=function(){return this.g.getSkipTimeOffset()>=0},f.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},f.canSkipNow=function(){return this.h.getAdSkippableState()},f.skip=function(){return this.h.skip()},f.pause=function(){return this.h.pause()},f.play=function(){return this.h.resume()},f.getVolume=function(){return this.h.getVolume()},f.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},f.isMuted=function(){return this.h.getVolume()==0},f.isLinear=function(){return this.g.isLinear()},f.resize=function(e,t){this.h.resize(e,t)},f.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},f.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},f.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},f.getTitle=function(){return this.g.getTitle()},f.getDescription=function(){return this.g.getDescription()},f.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},f.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},f.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},f.getVastAdId=function(){return""},f.getAdId=function(){return this.g.getAdId()},f.getCreativeAdId=function(){return this.g.getCreativeAdId()},f.getAdvertiserName=function(){return this.g.getAdvertiserName()},f.getMediaUrl=function(){return this.g.getMediaUrl()},f.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},f.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},f.release=function(){this.h=this.g=null},q("shaka.ads.ClientSideAd",te),te.prototype.release=te.prototype.release,te.prototype.getPodIndex=te.prototype.getPodIndex,te.prototype.getTimeOffset=te.prototype.getTimeOffset,te.prototype.getMediaUrl=te.prototype.getMediaUrl,te.prototype.getAdvertiserName=te.prototype.getAdvertiserName,te.prototype.getCreativeAdId=te.prototype.getCreativeAdId,te.prototype.getAdId=te.prototype.getAdId,te.prototype.getVastAdId=te.prototype.getVastAdId,te.prototype.getVastMediaWidth=te.prototype.getVastMediaWidth,te.prototype.getVastMediaHeight=te.prototype.getVastMediaHeight,te.prototype.getVastMediaBitrate=te.prototype.getVastMediaBitrate,te.prototype.getDescription=te.prototype.getDescription,te.prototype.getTitle=te.prototype.getTitle,te.prototype.getPositionInSequence=te.prototype.getPositionInSequence,te.prototype.getSequenceLength=te.prototype.getSequenceLength,te.prototype.setMuted=te.prototype.setMuted,te.prototype.resize=te.prototype.resize,te.prototype.isLinear=te.prototype.isLinear,te.prototype.isMuted=te.prototype.isMuted,te.prototype.setVolume=te.prototype.setVolume,te.prototype.getVolume=te.prototype.getVolume,te.prototype.play=te.prototype.play,te.prototype.pause=te.prototype.pause,te.prototype.skip=te.prototype.skip,te.prototype.canSkipNow=te.prototype.canSkipNow,te.prototype.getTimeUntilSkippable=te.prototype.getTimeUntilSkippable,te.prototype.isSkippable=te.prototype.isSkippable,te.prototype.isPaused=te.prototype.isPaused,te.prototype.getRemainingTime=te.prototype.getRemainingTime,te.prototype.getMinSuggestedDuration=te.prototype.getMinSuggestedDuration,te.prototype.getDuration=te.prototype.getDuration,te.prototype.isUsingAnotherMediaElement=te.prototype.isUsingAnotherMediaElement,te.prototype.hasCustomClick=te.prototype.hasCustomClick,te.prototype.isClientRendering=te.prototype.isClientRendering,te.prototype.needsSkipUI=te.prototype.needsSkipUI;function Ye(){}function Uy(e,t){var n=[];e=m(_e(e,"Ad"));for(var r=e.next();!r.done;r=e.next())if((r=ze(r.value,"InLine"))&&(r=ze(r,"Creatives"))){r=m(_e(r,"Creative"));for(var i=r.next();!i.done;i=r.next()){i=i.value;var a=ze(i,"Linear");if(a&&eA(n,t,a),i=ze(i,"NonLinearAds")){i=_e(i,"NonLinear"),i=m(i);for(var o=i.next();!o.done;o=i.next())e:{a=n;var s=t,u=o.value,l=ze(u,"StaticResource");if(l)o=l.attributes.creativeType;else{if(l=ze(u,"HTMLResource"),!l)break e;o="text/html"}if(l=Wt(l)){o==="text/html"&&(l="data:text/html;charset=UTF-8,"+encodeURIComponent(l));var c=se(u,"width",Ct)||se(u,"expandedWidth",Ct),d=se(u,"height",Ct)||se(u,"expandedHeight",Ct);if(c||d){var h=null,p=ze(u,"NonLinearClickThrough");p&&(p=Wt(p))&&(h=p),p=null,(u=u.attributes.minSuggestedDuration)&&(p=sa(u)),u=0,s!=null&&(u=s),a.push({id:null,groupId:null,startTime:u,endTime:null,uri:l,mimeType:o,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:p,once:!0,pre:s==null,post:s==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:c||0,y:d||0}},displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:h})}}}}}}return n}function eA(e,t,n){var r=0;t!=null&&(r=t);var i=null;n.attributes.skipoffset&&(i=sa(n.attributes.skipoffset),isNaN(i)&&(i=null));var a=ze(n,"MediaFiles");if(a){var o=null;for((n=ze(n,"VideoClicks"))&&(n=ze(n,"ClickThrough"))&&(n=Wt(n))&&(o=n),a=n=_e(a,"MediaFile"),n=n.filter(function(u){return u.attributes.delivery=="streaming"}),n.length&&(a=n),a=a.sort(function(u,l){return(parseInt(l.attributes.height,10)||0)-(parseInt(u.attributes.height,10)||0)}),a=m(a),n=a.next();!n.done;n=a.next())if(n=n.value,!n.attributes.apiFramework){var s=Wt(n);if(s){e.push({id:null,groupId:null,startTime:r,endTime:null,uri:s,mimeType:n.attributes.type||null,isSkippable:i!=null,skipOffset:i,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:o});break}}}}function tA(e){var t=[];e=m(_e(e,"vmap:AdBreak"));for(var n=e.next();!n.done;n=e.next()){var r=n.value,i=r.attributes.timeOffset;i&&(n=null,i=="start"?n=null:i=="end"?n=1/0:n=sa(i),(r=ze(r,"vmap:AdSource"))&&(r=ze(r,"vmap:AdTagURI"))&&(r=ut(r))&&t.push({time:n,uri:r}))}return t}q("shaka.ads.Utils",Ye),Ye.ADS_LOADED="ads-loaded",Ye.AD_STARTED="ad-started",Ye.AD_FIRST_QUARTILE="ad-first-quartile",Ye.AD_MIDPOINT="ad-midpoint",Ye.AD_THIRD_QUARTILE="ad-third-quartile",Ye.AD_COMPLETE="ad-complete",Ye.AD_STOPPED="ad-stopped",Ye.AD_SKIPPED="ad-skipped",Ye.AD_VOLUME_CHANGED="ad-volume-changed",Ye.AD_MUTED="ad-muted",Ye.AD_PAUSED="ad-paused",Ye.AD_RESUMED="ad-resumed",Ye.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Ye.CUEPOINTS_CHANGED="ad-cue-points-changed",Ye.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Ye.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Ye.AD_CLICKED="ad-clicked",Ye.AD_PROGRESS="ad-progress",Ye.AD_BUFFERING="ad-buffering",Ye.AD_IMPRESSION="ad-impression",Ye.AD_DURATION_CHANGED="ad-duration-changed",Ye.AD_CLOSED="ad-closed",Ye.AD_LOADED="ad-loaded",Ye.ALL_ADS_COMPLETED="all-ads-completed",Ye.AD_LINEAR_CHANGED="ad-linear-changed",Ye.AD_METADATA="ad-metadata",Ye.AD_RECOVERABLE_ERROR="ad-recoverable-error",Ye.AD_ERROR="ad-error",Ye.AD_BREAK_READY="ad-break-ready",Ye.AD_INTERACTION="ad-interaction",Ye.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Ye.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Ye.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function bl(e,t,n,r,i){var a=this;this.u=e,this.i=t,this.G=!1,this.B=this.o=null,this.H=NaN,this.l=i,this.j=null,this.h=new Pe,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.F=new google.ima.AdDisplayContainer(this.u,this.i),this.F.initialize(),this.m=new google.ima.AdsLoader(this.F),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.16.13"),this.g=null,this.C=r||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(o){nA(a,o)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(o){_y(a,o)}),this.h.D(this.i,"ended",function(){a.m.contentComplete()}),this.h.Aa(this.i,"play",function(){a.G=!0})}bl.prototype.configure=function(e){this.o=e},bl.prototype.stop=function(){this.g&&this.g.stop(),this.u&&jo(this.u)},bl.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.F.destroy()};function _y(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new Y("ad-error",t)),wl(e,null),e.l(new Y("ad-cue-points-changed",new Map().set("cuepoints",[])))}function nA(e,t){if(e.l(new Y("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.H))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.C),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.C);e.l(new Y("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=m(r);for(var i=r.next();!i.done;i=r.next())t.push({start:i.value,end:null});e.l(new Y("ad-cue-points-changed",new Map().set("cuepoints",t)))}rA(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),"ResizeObserver"in U?(e.B=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.B.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.G||e.o.skipPlayDetection?e.g.start():e.h.Aa(e.i,"play",function(){e.G=!0,e.g.start()})}catch{wl(e,null)}}function rA(e){function t(n,r){n=new Map().set("originalEvent",n),e.l(new Y(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){_y(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){jy(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){jy(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){wl(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed"),wl(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function jy(e,t){var n=t.getAd();n?(e.j=new te(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new Y("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new Y("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Ae("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function wl(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new Y("ad-content-resume-requested")),e.l(new Y("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function ne(e,t,n,r,i,a){this.g=e,this.h=t,this.j=(this.i=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.B=n,this.o=r,this.m=i,this.u=a,this.C=t.overlay}f=ne.prototype,f.needsSkipUI=function(){return!0},f.isClientRendering=function(){return!0},f.hasCustomClick=function(){return this.h.clickThroughUrl!=null},f.isUsingAnotherMediaElement=function(){return this.u},f.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},f.getMinSuggestedDuration=function(){return this.getDuration()},f.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},f.isPaused=function(){return this.g.paused},f.isSkippable=function(){return this.i&&this.l!=null?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.i},f.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},f.canSkipNow=function(){return this.i&&this.getTimeUntilSkippable()==0},f.skip=function(){this.canSkipNow()&&this.B()},f.pause=function(){return this.g.pause()},f.play=function(){return this.g.play()},f.getVolume=function(){return this.g.volume},f.setVolume=function(e){this.g.volume=e},f.isMuted=function(){return this.g.muted},f.isLinear=function(){return this.C==null},f.resize=function(){},f.setMuted=function(e){this.g.muted=e},f.getSequenceLength=function(){return this.o},f.getPositionInSequence=function(){return this.m},f.getTitle=function(){return""},f.getDescription=function(){return""},f.getVastMediaBitrate=function(){return 0},f.getVastMediaHeight=function(){return 0},f.getVastMediaWidth=function(){return 0},f.getVastAdId=function(){return""},f.getAdId=function(){return this.h.id||""},f.getCreativeAdId=function(){return""},f.getAdvertiserName=function(){return""},f.getMediaUrl=function(){return this.h.uri},f.getTimeOffset=function(){return this.h.pre?0:this.h.post?-1:this.h.startTime},f.getPodIndex=function(){return 0},f.release=function(){this.g=null},q("shaka.ads.InterstitialAd",ne),ne.prototype.release=ne.prototype.release,ne.prototype.getPodIndex=ne.prototype.getPodIndex,ne.prototype.getTimeOffset=ne.prototype.getTimeOffset,ne.prototype.getMediaUrl=ne.prototype.getMediaUrl,ne.prototype.getAdvertiserName=ne.prototype.getAdvertiserName,ne.prototype.getCreativeAdId=ne.prototype.getCreativeAdId,ne.prototype.getAdId=ne.prototype.getAdId,ne.prototype.getVastAdId=ne.prototype.getVastAdId,ne.prototype.getVastMediaWidth=ne.prototype.getVastMediaWidth,ne.prototype.getVastMediaHeight=ne.prototype.getVastMediaHeight,ne.prototype.getVastMediaBitrate=ne.prototype.getVastMediaBitrate,ne.prototype.getDescription=ne.prototype.getDescription,ne.prototype.getTitle=ne.prototype.getTitle,ne.prototype.getPositionInSequence=ne.prototype.getPositionInSequence,ne.prototype.getSequenceLength=ne.prototype.getSequenceLength,ne.prototype.setMuted=ne.prototype.setMuted,ne.prototype.resize=ne.prototype.resize,ne.prototype.isLinear=ne.prototype.isLinear,ne.prototype.isMuted=ne.prototype.isMuted,ne.prototype.setVolume=ne.prototype.setVolume,ne.prototype.getVolume=ne.prototype.getVolume,ne.prototype.play=ne.prototype.play,ne.prototype.pause=ne.prototype.pause,ne.prototype.skip=ne.prototype.skip,ne.prototype.canSkipNow=ne.prototype.canSkipNow,ne.prototype.getTimeUntilSkippable=ne.prototype.getTimeUntilSkippable,ne.prototype.isSkippable=ne.prototype.isSkippable,ne.prototype.isPaused=ne.prototype.isPaused,ne.prototype.getRemainingTime=ne.prototype.getRemainingTime,ne.prototype.getMinSuggestedDuration=ne.prototype.getMinSuggestedDuration,ne.prototype.getDuration=ne.prototype.getDuration,ne.prototype.isUsingAnotherMediaElement=ne.prototype.isUsingAnotherMediaElement,ne.prototype.hasCustomClick=ne.prototype.hasCustomClick,ne.prototype.isClientRendering=ne.prototype.isClientRendering,ne.prototype.needsSkipUI=ne.prototype.needsSkipUI;function re(e,t,n){this.g=e,this.j=t,this.h=n,this.i=e.overlay==null}f=re.prototype,f.needsSkipUI=function(){return!0},f.isClientRendering=function(){return!0},f.hasCustomClick=function(){return this.g.clickThroughUrl!=null},f.isUsingAnotherMediaElement=function(){return!1},f.getDuration=function(){return-1},f.getMinSuggestedDuration=function(){return this.getDuration()},f.getRemainingTime=function(){return-1},f.isPaused=function(){return!1},f.isSkippable=function(){return!1},f.getTimeUntilSkippable=function(){return 0},f.canSkipNow=function(){return!1},f.skip=function(){},f.pause=function(){},f.play=function(){},f.getVolume=function(){return 1},f.setVolume=function(){},f.isMuted=function(){return!1},f.isLinear=function(){return this.i},f.resize=function(){},f.setMuted=function(){},f.getSequenceLength=function(){return this.j},f.getPositionInSequence=function(){return this.h},f.getTitle=function(){return""},f.getDescription=function(){return""},f.getVastMediaBitrate=function(){return 0},f.getVastMediaHeight=function(){return 0},f.getVastMediaWidth=function(){return 0},f.getVastAdId=function(){return""},f.getAdId=function(){return this.g.id||""},f.getCreativeAdId=function(){return""},f.getAdvertiserName=function(){return""},f.getMediaUrl=function(){return this.g.uri},f.getTimeOffset=function(){return this.g.pre?0:this.g.post?-1:this.g.startTime},f.getPodIndex=function(){return 0},f.release=function(){},q("shaka.ads.InterstitialStaticAd",re),re.prototype.release=re.prototype.release,re.prototype.getPodIndex=re.prototype.getPodIndex,re.prototype.getTimeOffset=re.prototype.getTimeOffset,re.prototype.getMediaUrl=re.prototype.getMediaUrl,re.prototype.getAdvertiserName=re.prototype.getAdvertiserName,re.prototype.getCreativeAdId=re.prototype.getCreativeAdId,re.prototype.getAdId=re.prototype.getAdId,re.prototype.getVastAdId=re.prototype.getVastAdId,re.prototype.getVastMediaWidth=re.prototype.getVastMediaWidth,re.prototype.getVastMediaHeight=re.prototype.getVastMediaHeight,re.prototype.getVastMediaBitrate=re.prototype.getVastMediaBitrate,re.prototype.getDescription=re.prototype.getDescription,re.prototype.getTitle=re.prototype.getTitle,re.prototype.getPositionInSequence=re.prototype.getPositionInSequence,re.prototype.getSequenceLength=re.prototype.getSequenceLength,re.prototype.setMuted=re.prototype.setMuted,re.prototype.resize=re.prototype.resize,re.prototype.isLinear=re.prototype.isLinear,re.prototype.isMuted=re.prototype.isMuted,re.prototype.setVolume=re.prototype.setVolume,re.prototype.getVolume=re.prototype.getVolume,re.prototype.play=re.prototype.play,re.prototype.pause=re.prototype.pause,re.prototype.skip=re.prototype.skip,re.prototype.canSkipNow=re.prototype.canSkipNow,re.prototype.getTimeUntilSkippable=re.prototype.getTimeUntilSkippable,re.prototype.isSkippable=re.prototype.isSkippable,re.prototype.isPaused=re.prototype.isPaused,re.prototype.getRemainingTime=re.prototype.getRemainingTime,re.prototype.getMinSuggestedDuration=re.prototype.getMinSuggestedDuration,re.prototype.getDuration=re.prototype.getDuration,re.prototype.isUsingAnotherMediaElement=re.prototype.isUsingAnotherMediaElement,re.prototype.hasCustomClick=re.prototype.hasCustomClick,re.prototype.isClientRendering=re.prototype.isClientRendering,re.prototype.needsSkipUI=re.prototype.needsSkipUI;function Oy(e,t,n,r){function i(o){return o?o.overlay?!0:a.g.ended?o.post:!a.g.paused:!1}var a=this;this.M=null,this.m=e,this.C=t,this.g=n,this.G=null,this.u=!0,this.h=this.g,this.va=r,this.ma=new Set,this.T=new Set,this.H=new Set,this.F=new Map,this.K=new Map,this.i=new j,Of(this),this.I=new Pe,this.j=new Pe,this.J=!1,this.$=this.o=this.B=this.l=null,this.ba=!1,this.O=-1,this.X=function(){if(!a.J&&a.l&&!a.C.xa()){a.l=a.g.currentTime;var o=_a(a);o&&i(o)&&Tl(a,o,1,1,Date.now())}},this.V=function(){if(!(a.J||a.l||a.C.xa())){a.g.paused||(a.l=a.g.currentTime);var o=_a(a,!0);o||(o=_a(a)),o&&i(o)&&Tl(a,o,1,1,Date.now())}},this.oa=function(){if(!a.J&&a.l&&!a.C.xa()){var o=a.g.currentTime;a.B&&!a.B.pre&&!a.B.post&&o<(a.B.endTime||a.B.startTime)&&(a.B=null)}},this.R=new ve(this.X),this.N=new ve(function(){var o,s,u,l,c,d,h,p,g,v,y;return C(function(T){switch(T.g){case 1:if(!a.H.size||a.l==null){T.A(0);break}if(o=a.C.ae(),o==Yn||o==ml)return T.return();s=!1,u=Array.from(a.H),l=a.C.Ra(),c=m(u),d=c.next();case 3:if(d.done){T.A(5);break}if(h=d.value,h==a.B){T.A(4);break}if(p=h.endTime||h.startTime,!(l.start-p>=1)){g=h.startTime-a.l,g>0&&g<=10&&(!a.F.has(h)&&Fy(h)&&a.F.set(h,a.i.preload(h.uri,null,h.mimeType||void 0)),Hy(a,h)),T.A(4);break}if(!a.F.has(h)){T.A(7);break}return b(T,a.F.get(h),8);case 8:(v=T.h)&&v.destroy(),a.F.delete(h);case 7:Gy(a,h),y=h.id||JSON.stringify(h),a.T.has(y)&&a.T.delete(y),a.H.delete(h),Uf(a),h.overlay||(s=!0);case 4:d=c.next(),T.A(3);break;case 5:s&&Sl(a),G(T)}})}),this.configure(this.C.getConfiguration().ads)}f=Oy.prototype,f.configure=function(e){this.M=e,this.J||_f(this)};function iA(e){if(!e.ba&&e.H.size){if(e.I.D(e.g,"playing",e.V),e.I.D(e.g,"timeupdate",e.V),e.I.D(e.g,"seeked",e.oa),e.I.D(e.g,"ended",e.X),"requestVideoFrameCallback"in e.g&&!Vy()){var t=e.g,n=function(){e.O!=-1&&(e.X(),e.O!=-1&&(e.O=t.requestVideoFrameCallback(n)))};e.O=t.requestVideoFrameCallback(n)}else e.R.Ea(.025);e.N&&e.N.Ea(1),e.ba=!0}}function Uf(e){e.ba&&!e.H.size&&(e.I.Ma(e.g,"playing",e.V),e.I.Ma(e.g,"timeupdate",e.V),e.I.Ma(e.g,"seeked",e.oa),e.I.Ma(e.g,"ended",e.X),e.O!=-1&&(e.g.cancelVideoFrameCallback(e.O),e.O=-1),e.R&&e.R.stop(),e.N&&e.N.stop(),e.ba=!1)}function _f(e){if(e.m&&e.M){var t=e.M.supportsMultipleMediaElements,n=e.g;(n.controls||n.webkitPresentationMode&&n.webkitPresentationMode!=="inline"||n.webkitDisplayingFullscreen)&&(t=!1),e.u==t&&(e.u=!t,e.u?(e.h=e.g,e.G&&(e.G.parentElement&&e.m.removeChild(e.G),e.G=null)):(e.G||(t=document.createElement(e.g.tagName),t.autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.G=t),e.h=e.G))}else e.u=!0}f.stop=function(){if(this.j&&this.j.Qa(),this.ma.clear(),this.T.clear(),this.H.clear(),this.i.rg(),this.F.size){var e=Array.from(this.F.values());e=m(e);for(var t=e.next();!t.done;t=e.next())(t=t.value)&&t.then(function(n){n&&n.destroy()})}if(this.F.clear(),this.K.size)for(e=Array.from(this.K.keys()),e=m(e),t=e.next();!t.done;t=e.next())Gy(this,t.value);this.K.clear(),this.i.detach(),this.J=!1,this.B=this.l=null,this.u=!0,this.h=this.g,this.G=null,jf(this),Uf(this),this.m&&jo(this.m),this.o&&(this.o.stop(),this.o=null)},f.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.R&&(this.R.stop(),this.R=null),this.N&&(this.N.stop(),this.N=null),this.i.destroy()},f.td=function(){return this.i};function aA(e,t){var n,r,i;C(function(a){if(a.g==1){if(n=null,(r=t.values.find(function(o){return o.key=="ID"}))&&(n=r.data),n){if(e.ma.has(n))return a.return();e.ma.add(n)}return Of(e),i=[],t&&t.values.find(function(o){return o.key=="X-OVERLAY-ID"})?(i=cA(t),a.A(2)):b(a,lA(e,t),3)}a.g!=2&&(i=a.h),i.length?as(e,i):Ae("Unsupported HLS interstitial",t),G(a)})}function oA(e,t){var n=ze(t.eventNode,"OverlayEvent"),r=n.attributes.uri,i=n.attributes.mimeType,a=n.attributes.loop=="true",o=se(n,"z",Ct);if(r&&o!=0){var s=null,u=ze(n,"Background");if(u){var l=u.attributes.uri;l?s="center / contain no-repeat url('"+l+"')":s=Wt(u)}u=1920,l=1080;var c=ze(n,"Viewport");if(c&&(u=se(c,"x",Ct),u==null||(l=se(c,"y",Ct),l==null)))return;var d={viewport:{x:u,y:l},topLeft:{x:0,y:0},size:{x:u,y:l}},h=ze(n,"Overlay");if(c&&h){var p=ze(h,"TopLeft"),g=ze(h,"Size");if(p&&g){if(h=se(p,"x",Ct),h==null||(p=se(p,"y",Ct),p==null))return;var v=se(g,"x",Ct);if(v==null||(g=se(g,"y",Ct),g==null))return;d.topLeft.x=h,d.topLeft.y=p,d.size.x=v,d.size.y=g}}if(h=null,n=ze(n,"Squeeze"),c&&n&&(g=ze(n,"TopLeft"),n=ze(n,"Size"),g&&n)){if(c=se(g,"x",Ct),c==null||(h=se(g,"y",Ct),h==null)||(g=se(n,"x",Ct),g==null)||(n=se(n,"y",Ct),n==null))return;h={viewport:{x:u,y:l},topLeft:{x:c,y:h},size:{x:g,y:n}}}as(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:r,mimeType:i,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:a,overlay:d,displayOnBackground:o==-1,currentVideo:h,background:s,clickThroughUrl:null}])}}f.addAdUrlInterstitial=function(e){var t=this,n,r,i,a,o,s,u,l,c;return C(function(d){if(d.g==1)return n={type:12},b(d,Bf(t,e,n),2);if(d.g!=3){if(r=d.h,i=mo(r,"VAST,vmap:VMAP"),!i)throw new M(2,10,10007);if(a=[],i.tagName=="VAST")return a=Uy(i,t.l),d.A(3);if(i.tagName!="vmap:VMAP")return d.A(3);for(o=function(h){var p,g;return C(function(v){if(v.g==1)return b(v,Bf(t,h.uri,n),2);if(p=v.h,g=mo(p,"VAST"),!g)throw new M(2,10,10007);a.push.apply(a,H(Uy(g,h.time))),G(v)})},s=[],u=m(tA(i)),l=u.next();!l.done;l=u.next())c=l.value,s.push(o(c));return s.length?b(d,Promise.all(s),3):d.A(3)}as(t,a),G(d)})};function as(e,t){var n,r,i,a,o,s,u,l;C(function(c){switch(c.g){case 1:n=!1,r=m(t),i=r.next();case 2:if(i.done){c.A(4);break}if(a=i.value,!a.uri){Ae("Missing URL in interstitial",a),c.A(3);break}if(a.mimeType){c.A(5);break}return le(c,6),o=e.i.Yb(),b(c,Ea(a.uri,o,e.C.getConfiguration().streaming.retryParameters),8);case 8:a.mimeType=c.h,pe(c,5);break;case 6:ce(c);case 5:if(s=a.id||JSON.stringify(a),e.T.has(s)){c.A(3);break}a.loop&&!a.overlay&&Ae("Loop is only supported in overlay interstitials",a),a.overlay||(n=!0),e.T.add(s),e.H.add(a),u=!1,a.pre&&e.l==null?u=!0:a.startTime!=0||a.canJump?e.l!=null&&(l=a.startTime-e.l,l>0&&l<=10&&(u=!0)):u=!0,u&&(!e.F.has(a)&&Fy(a)&&e.F.set(a,e.i.preload(a.uri,null,a.mimeType||void 0)),Hy(e,a));case 3:i=r.next(),c.A(2);break;case 4:n&&Sl(e),iA(e),G(c)}})}function _a(e,t,n){t=t===void 0?!1:t,n=n===void 0?null:n;var r=0,i=null;if(e.H.size&&e.l!=null){var a=e.g.ended,o=Array.from(e.H).sort(function(d,h){return h.startTime-d.startTime}),s=o;for(s=t?o.filter(function(d){return d.pre}):a?o.filter(function(d){return d.post}):o.filter(function(d){return!d.pre&&!d.post}),o=m(s),s=o.next();!s.done;s=o.next()){s=s.value;var u=!1;if(t)u=s.pre;else if(a)u=s.post;else if(!s.pre&&!s.post){var l=e.l-Math.round(s.startTime*1e3)/1e3,c=1;e.M.allowStartInMiddleOfInterstitial&&s.endTime&&s.endTime!=1/0&&(c=s.endTime-s.startTime),(l>0||l==0&&e.l==0)&&(l<=c||!s.canJump)&&(u=!(n==null&&e.B&&!e.B.pre&&!e.B.post&&e.B.startTime>=s.startTime))}u&&(!e.B||s.startTime>=e.B.startTime)&&(r==(n||0)?i=s:i&&!s.canJump&&Math.round(s.startTime*1e3)/1e3-Math.round(i.startTime*1e3)/1e3>.001&&(i=s,r=0),r++)}}return i}function Tl(e,t,n,r,i,a){a=a===void 0?0:a,e.B=t,_f(e),e.u||!e.m||e.h.parentElement||e.m.appendChild(e.h),r==1&&n==1&&(n=Array.from(e.H).filter(function(o){return t.pre?o.pre==t.pre:t.post?o.post==t.post:Math.abs(o.startTime-t.startTime)<.001}).length),t.once&&(a++,e.H.delete(t),Uf(e),t.overlay||Sl(e)),t.mimeType&&(t.mimeType.startsWith("image/")||t.mimeType==="text/html")?t.overlay?sA(e,t,n,r,a):Ae("Unsupported interstitial",t):e.u&&t.overlay?Ae("Unsupported interstitial",t):uA(e,t,n,r,i,a)}function sA(e,t,n,r,i){function a(){e.o&&(e.o.stop(),e.o=null),e.m.removeChild(u),jf(e,t),lt(e,"ad-stopped"),e.j.Qa();var h=_a(e,t.pre,r-i);h?Tl(e,h,n,++r,Date.now(),i):e.J=!1}e.J=!0;var o=t.overlay,s=t.mimeType=="text/html"?"iframe":"img",u=document.createElement(s);u.style.objectFit="contain",u.style.position="absolute",u.style.border="none",By(e,t);var l=new re(t,n,r);lt(e,"ad-impression"),lt(e,"ad-started",new Map().set("ad",l)),s=="iframe"?u.src=t.uri:(u.src=t.uri,u.onerror=function(h){lt(e,"ad-error",new Map().set("originalEvent",h)),a()}),l=o.viewport;var c=o.topLeft;o=o.size,l.x==0&&l.y==0?(u.width=t.overlay.size.x,u.height=t.overlay.size.y,u.style.bottom="10%",u.style.left="0",u.style.right="0",u.style.width="100%",t.overlay.size.y||s!="iframe"||(u.style.height="auto")):(u.style.height=o.y/l.y*100+"%",u.style.left=c.x/l.x*100+"%",u.style.top=c.y/l.y*100+"%",u.style.width=o.x/l.x*100+"%"),e.m.appendChild(u);var d=Date.now();e.o&&e.o.stop(),e.o=new ve(function(){t.playoutLimit&&(Date.now()-d)/1e3>t.playoutLimit||t.endTime&&e.g.currentTime>t.endTime?(lt(e,"ad-complete"),a()):e.g.currentTime<t.startTime&&(lt(e,"ad-skipped"),a())}),t.playoutLimit&&!t.endTime?e.o.ka(t.playoutLimit):t.endTime&&e.o.Ea(.025),e.j.D(e.g,"seeked",function(){var h=e.g.currentTime;(h<t.startTime||t.endTime&&h>t.endTime)&&(e.o&&e.o.stop(),lt(e,"ad-skipped"),a())}),t.clickThroughUrl&&e.j.D(u,"click",function(){t.clickThroughUrl&&U.open(t.clickThroughUrl,"_blank")})}function uA(e,t,n,r,i,a){var o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E;C(function(P){switch(P.g){case 1:if(o=Date.now(),e.J=!0,s=!1,u=function(){if(!e.u&&!t.overlay&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.g.currentTime!=t.endTime&&(e.g.currentTime=t.endTime);else{var L=Date.now();e.g.currentTime+=(L-i)/1e3,i=L}},l=function(L){var B,O;return C(function(N){if(N.g==1){if(u(),B=_a(e,t.pre,r-a),L&&t.groupId)for(;B&&B.groupId==t.groupId;)r++,B=_a(e,t.pre,r-a);return e.o&&(!t.groupId||B&&B.groupId!=t.groupId)&&(e.o.stop(),e.o=null),jf(e,t),B&&!B.overlay?N.A(2):(t.post&&(e.l=null,e.B=null),e.u?b(N,e.i.detach(),4):b(N,e.i.Dc(),4))}N.g!=2&&(e.u&&(O=t.resumeOffset,O==null&&(O=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-i)/1e3),lt(e,"ad-content-resume-requested",new Map().set("offset",O))),lt(e,"ad-stopped"),e.j.Qa(),e.J=!1,e.u?Sl(e):(e.h.style.display="none",u(),e.g.ended||e.g.play())),_f(e),B&&(lt(e,"ad-stopped"),e.j.Qa(),Tl(e,B,n,++r,i,a)),G(N)})},c=function(L){return C(function(B){return s?B.return():(s=!0,lt(e,"ad-error",new Map().set("originalEvent",L)),b(B,l(!1),0))})},d=function(){return C(function(L){if(L.g==1)return s?L.return():(s=!0,b(L,l(!1),2));lt(e,"ad-complete"),G(L)})},e.$=function(){return C(function(L){return s?L.return():(s=!0,lt(e,"ad-skipped"),b(L,l(!0),0))})},h=new ne(e.h,t,e.$,n,r,!e.u),e.u||(h.setMuted(e.g.muted),h.setVolume(e.g.volume)),lt(e,"ad-started",new Map().set("ad",h)),(p=h.canSkipNow())&&lt(e,"ad-skip-state-changed"),e.j.Aa(e.i,"error",c),e.j.D(e.h,"timeupdate",function(){if(e.h.duration){var L=h.canSkipNow();p!=L&&h.getRemainingTime()>0&&h.getDuration()>0&&lt(e,"ad-skip-state-changed"),p=L,!e.u&&!t.overlay&&t.resumeOffset==null&&t.timelineRange&&t.endTime&&t.endTime!=1/0&&e.g.currentTime!=t.endTime&&e.C.Ra().end>=t.endTime&&(e.g.currentTime=t.endTime)}}),e.j.Aa(e.i,"firstquartile",function(){u(),lt(e,"ad-first-quartile")}),e.j.Aa(e.i,"midpoint",function(){u(),lt(e,"ad-midpoint")}),e.j.Aa(e.i,"thirdquartile",function(){u(),lt(e,"ad-third-quartile")}),e.j.Aa(e.i,"complete",d),e.j.D(e.h,"play",function(){lt(e,"ad-resumed")}),e.j.D(e.h,"pause",function(){var L=e.i.getConfiguration();e.h.currentTime>=L.playRangeEnd?d():lt(e,"ad-paused")}),e.j.D(e.h,"volumechange",function(){e.h.muted?lt(e,"ad-muted"):lt(e,"ad-volume-changed")}),t.clickThroughUrl&&(g=e.m||e.h,e.j.D(g,"click",function(){t.clickThroughUrl&&(h.isPaused()||h.pause(),U.open(t.clickThroughUrl,"_blank"))})),!e.u||r!=1){P.A(2);break}return lt(e,"ad-content-pause-requested",new Map().set("saveLivePosition",!0)),v=new Be,y=function(L){return C(function(B){if(B.g==1)return L.state!="detach"?B.A(0):Vy()?b(B,new Promise(function(O){return new ve(O).ka(.1)}),3):B.A(3);v.resolve(),e.j.Ma(e.C,"onstatechange",y),G(B)})},e.j.D(e.C,"onstatechange",y),b(P,v,2);case 2:return By(e,t),e.u||(e.h.style.display="",t.overlay?(e.h.loop=t.loop,T=t.overlay.viewport,w=t.overlay.topLeft,S=t.overlay.size,e.h.style.height=S.y/T.y*100+"%",e.h.style.left=w.x/T.x*100+"%",e.h.style.top=w.y/T.y*100+"%",e.h.style.width=S.x/T.x*100+"%"):(e.g.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.g.currentTime+=t.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),le(P,4),Of(e),t.startTime&&t.endTime&&t.endTime!=1/0&&t.startTime!=t.endTime&&(k=t.endTime-t.startTime,k>0&&e.i.configure("playRangeEnd",k)),t.playoutLimit&&!e.o&&(e.o=new ve(function(){e.$()}).ka(t.playoutLimit),e.i.configure("playRangeEnd",t.playoutLimit)),b(P,e.i.Vb(e.h),6);case 6:return D=null,t.pre||t.post||!e.M.allowStartInMiddleOfInterstitial||e.l==null||(x=e.l-t.startTime,Math.abs(x)>.25&&(D=x)),e.F.has(t)?b(P,e.F.get(t),10):b(P,e.i.load(t.uri,D,t.mimeType||void 0),8);case 10:return I=P.h,e.F.delete(t),I?b(P,e.i.load(I),8):b(P,e.i.load(t.uri,D,t.mimeType||void 0),8);case 8:t.overlay&&e.g.paused?e.h.pause():e.h.play(),A=(Date.now()-o)/1e3,lt(e,"ads-loaded",new Map().set("loadTime",A)),e.u&&e.g.play(),t.overlay&&(t.pre||t.post||e.C.W()&&!(t.startTime>0)||(R=function(){var L=e.g.currentTime-t.startTime;Math.abs(L-e.h.currentTime)>.1&&(e.h.currentTime=L)},e.j.Aa(e.h,"playing",R),e.j.D(e.g,"seeking",R)),e.j.D(e.g,"seeked",function(){var L=e.g.currentTime;(L<t.startTime||t.endTime&&L>t.endTime)&&e.$()})),pe(P,0);break;case 4:if(E=ce(P),!e.J)return P.return();c(E),G(P)}})}function By(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),t.currentVideo!=null){var n=t.currentVideo;e.g.style.transformOrigin="top left";var r=!0,i=[],a=n.topLeft.x/n.viewport.x*100;a>0&&a<=100&&(i.push("translateX("+a+"%)"),r=!1),a=n.topLeft.y/n.viewport.y*100,a>0&&a<=100&&(i.push("translateY("+a+"%)"),r=!1),a=n.size.x/n.viewport.x,a<1&&i.push("scaleX("+a+")"),n=n.size.y/n.viewport.y,a<1&&i.push("scaleY("+n+")"),i.length&&(e.g.style.transform=i.join(" ")),r&&(e.g.style.transition="transform 250ms")}e.m&&(t.clickThroughUrl?(e.m.setAttribute("ad-active","true"),e.m.style.pointerEvents=""):e.m.style.pointerEvents="none",t.background&&(e.m.style.background=t.background)),e.G&&(e.G.style.background=t.overlay?"":"rgb(0, 0, 0)")}function jf(e,t){(!t||t.displayOnBackground)&&(e.g.style.zIndex=""),t&&t.currentVideo==null||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.m&&(e.m.removeAttribute("ad-active"),e.m.style.pointerEvents="",!t||t.background)&&(e.m.style.background=""),e.G&&(e.G.style.background="")}function lA(e,t){var n,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L,B,O,N,_,F,V,ue,z,Re,fe,je,Se,ye,Ie,De;return C(function(Ee){switch(Ee.g){case 1:if(n=[],!t||(r=t.values.find(function(be){return be.key=="X-ASSET-URI"}),i=t.values.find(function(be){return be.key=="X-ASSET-LIST"}),!r&&!i))return Ee.return(n);if(a=null,(o=t.values.find(function(be){return be.key=="ID"}))&&(a=o.data),s=a==null?Math.floor(t.startTime*10)/10:t.startTime,(u=t.endTime)&&t.endTime!=1/0&&typeof t.endTime=="number"&&(u=a==null?Math.floor(t.endTime*10)/10:t.endTime),l=t.values.find(function(be){return be.key=="X-RESTRICT"}),d=c=!0,l&&l.data&&(h=l.data,c=!h.includes("SKIP"),d=!h.includes("JUMP")),p=c?0:null,(g=t.values.find(function(be){return be.key=="X-ENABLE-SKIP-AFTER"}))&&(v=g.data,p=parseFloat(v),isNaN(p)&&(p=c?0:null)),y=null,(T=t.values.find(function(be){return be.key=="X-ENABLE-SKIP-FOR"}))&&(w=T.data,y=parseFloat(w),isNaN(p)&&(y=null)),S=null,(k=t.values.find(function(be){return be.key=="X-RESUME-OFFSET"}))&&(D=k.data,S=parseFloat(D),isNaN(S)&&(S=null)),x=null,(I=t.values.find(function(be){return be.key=="X-PLAYOUT-LIMIT"}))&&(A=I.data,x=parseFloat(A),isNaN(x)&&(x=null)),P=E=R=!1,(L=t.values.find(function(be){return be.key=="CUE"}))&&(B=L.data,R=B.includes("ONCE"),E=B.includes("PRE"),P=B.includes("POST")),O=!1,(N=t.values.find(function(be){return be.key=="X-TIMELINE-OCCUPIES"}))?(_=N.data,O=_.includes("RANGE")):!k&&e.C.W()&&(O=!E&&!P),r){if(F=r.data,!F)return Ee.return(n);n.push({id:a,groupId:null,startTime:s,endTime:u,uri:F,mimeType:null,isSkippable:c,skipOffset:p,skipFor:y,canJump:d,resumeOffset:S,playoutLimit:x,once:R,pre:E,post:P,timelineRange:O,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}),Ee.A(2);break}if(!i){Ee.A(2);break}return V=i.data,V?(le(Ee,4),ue={type:11},b(Ee,Bf(e,V,ue),6)):Ee.return(n);case 6:for(z=Ee.h,Re=$e(z),fe=JSON.parse(Re),(je=fe["SKIP-CONTROL"])&&(Se=je["ENABLE-SKIP-AFTER"],typeof Se=="number"&&(p=parseFloat(Se),isNaN(Se)&&(p=c?0:null)),ye=je["ENABLE-SKIP-FOR"],typeof ye=="number"&&(y=parseFloat(ye),isNaN(ye)&&(y=null))),Ie=0;Ie<fe.ASSETS.length;Ie++)De=fe.ASSETS[Ie],De.URI&&n.push({id:a+"_shaka_asset_"+Ie,groupId:a,startTime:s,endTime:u,uri:De.URI,mimeType:null,isSkippable:c,skipOffset:p,skipFor:y,canJump:d,resumeOffset:S,playoutLimit:x,once:R,pre:E,post:P,timelineRange:O,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null});pe(Ee,2);break;case 4:ce(Ee);case 2:return Ee.return(n)}})}function cA(e){var t=[];if(!e)return t;var n=e.values.find(function(y){return y.key=="X-ASSET-URI"});if(!n||(n=n.data,!n))return t;var r=null,i=e.values.find(function(y){return y.key=="X-OVERLAY-ID"});i&&(r=i.data),i=r==null?Math.floor(e.startTime*10)/10:e.startTime;var a=e.endTime;e.endTime&&e.endTime!=1/0&&typeof e.endTime=="number"&&(a=r==null?Math.floor(e.endTime*10)/10:e.endTime);var o=!1,s=!1,u=!1,l=e.values.find(function(y){return y.key=="CUE"});l&&(u=l.data,o=u.includes("ONCE"),s=u.includes("PRE"),u=u.includes("POST")),l=null;var c=e.values.find(function(y){return y.key=="X-ASSET-MIMETYPE"});c&&(l=c.data),c=!1;var d=e.values.find(function(y){return y.key=="X-LOOP"});d&&(c=d.data=="YES"),d=1;var h=e.values.find(function(y){return y.key=="X-DEPTH"});h&&(d=parseFloat(h.data),isNaN(d)&&(d=1)),h=null;var p=e.values.find(function(y){return y.key=="X-BACKGROUND"});p&&(h=p.data),p=1920;var g=1080,v=e.values.find(function(y){return y.key=="X-VIEWPORT"});if(v){if(g=v.data.split("x"),g.length!=2)return t;p=parseFloat(g[0]),g=parseFloat(g[1])}if(p={viewport:{x:p,y:g},topLeft:{x:0,y:0},size:{x:p,y:g}},g=e.values.find(function(y){return y.key=="X-OVERLAY-POSITION"})){if(g=g.data.split("x"),g.length!=2)return t;p.topLeft.x=parseFloat(g[0]),p.topLeft.y=parseFloat(g[1])}if(g=e.values.find(function(y){return y.key=="X-OVERLAY-SIZE"})){if(g=g.data.split("x"),g.length!=2)return t;p.size.x=parseFloat(g[0]),p.size.y=parseFloat(g[1])}if(g=null,(v=e.values.find(function(y){return y.key=="X-SQUEEZECURRENT"}))&&(g=parseFloat(v.data),isNaN(g)&&(g=1),g={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*g,y:1080*g}},e=e.values.find(function(y){return y.key=="X-SQUEEZECURRENT-POSITION"}))){if(e=e.data.split("x"),e.length!=2)return t;g.topLeft.x=parseFloat(e[0]),g.topLeft.y=parseFloat(e[1])}return t.push({id:r,groupId:null,startTime:i,endTime:a,uri:n,mimeType:l,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:o,pre:s,post:u,timelineRange:!0,loop:c,overlay:p,displayOnBackground:d==-1,currentVideo:g,background:h,clickThroughUrl:null}),t}function Sl(e){for(var t=[],n=m(e.H),r=n.next(),i={};!r.done;i={Cc:void 0},r=n.next())r=r.value,r.overlay||(i.Cc={start:r.startTime,end:null},r.pre?(i.Cc.start=0,i.Cc.end=null):r.post?(i.Cc.start=-1,i.Cc.end=null):r.timelineRange&&(i.Cc.end=r.endTime),t.find((function(a){return function(o){return a.Cc.start==o.start&&a.Cc.end==o.end}})(i))||t.push(i.Cc));lt(e,"ad-cue-points-changed",new Map().set("cuepoints",t))}function Of(e){e.i.configure(e.C.ki()),e.i.configure("ads.disableHLSInterstitial",!0),e.i.configure("ads.disableDASHInterstitial",!0),e.i.configure("playRangeEnd",1/0),Gg(e.C.Yb(),e.i.Yb())}function Bf(e,t,n){var r,i,a;return C(function(o){return o.g==1?(r=ht([t],Xn()),i=e.C.Yb().request(7,r,n),b(o,i.promise,2)):(a=o.h,o.return(a.data))})}function Fy(e){return(e=e.mimeType)?!e.startsWith("image/")&&e!=="text/html":!0}function Vy(){var e=ge().Oa();return e=="TV"||e=="CONSOLE"||e=="CAST"}function Hy(e,t){if(!(e.K.has(t)||e.M&&!e.M.allowPreloadOnDomElements)){var n=function(a){var o=document.createElement("link");return o.rel="preload",o.href=a,o.as="image",document.head.appendChild(o),o},r=[];if(t.background){var i=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);i&&r.push(n(i[2]))}t.mimeType&&t.mimeType.startsWith("image/")&&r.push(n(t.uri)),e.K.set(t,r)}}function Gy(e,t){if(e.K.has(t)){var n=e.K.get(t);n=m(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.parentNode.removeChild(r);e.K.delete(t)}}function lt(e,t,n){e.va(new Y(t,n))}function Z(e,t,n,r,i){this.h=e,this.j=sa(this.h.skipOffset),this.g=i,this.i=t,this.l=n,this.o=r,this.m=!1}f=Z.prototype,f.needsSkipUI=function(){return!0},f.isClientRendering=function(){return!1},f.hasCustomClick=function(){return!1},f.isUsingAnotherMediaElement=function(){return!1},f.getDuration=function(){return this.h.durationInSeconds},f.getMinSuggestedDuration=function(){return this.getDuration()},f.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},f.isPaused=function(){return this.g.paused},f.isSkippable=function(){return typeof this.j=="number"},f.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},f.canSkipNow=function(){return this.getTimeUntilSkippable()==0},f.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},f.pause=function(){return this.g.pause()},f.play=function(){return this.g.play()},f.getVolume=function(){return this.g.volume},f.setVolume=function(e){this.g.volume=e},f.isMuted=function(){return this.g.muted},f.isLinear=function(){return this.o},f.resize=function(){},f.setMuted=function(e){this.g.muted=e},f.getSequenceLength=function(){return this.l?this.l:1},f.getPositionInSequence=function(){return this.i?this.i:1},f.getTitle=function(){return this.h.adTitle},f.getDescription=function(){return""},f.getVastMediaBitrate=function(){return 0},f.getVastMediaHeight=function(){return 0},f.getVastMediaWidth=function(){return 0},f.getVastAdId=function(){return this.h.vastAdId||""},f.getAdId=function(){return this.h.adId},f.getCreativeAdId=function(){return this.h.creativeId},f.getAdvertiserName=function(){return""},f.getMediaUrl=function(){return null},f.getTimeOffset=function(){return 0},f.getPodIndex=function(){return 0},f.release=function(){this.l=this.i=this.g=this.h=null},q("shaka.ads.MediaTailorAd",Z),Z.prototype.release=Z.prototype.release,Z.prototype.getPodIndex=Z.prototype.getPodIndex,Z.prototype.getTimeOffset=Z.prototype.getTimeOffset,Z.prototype.getMediaUrl=Z.prototype.getMediaUrl,Z.prototype.getAdvertiserName=Z.prototype.getAdvertiserName,Z.prototype.getCreativeAdId=Z.prototype.getCreativeAdId,Z.prototype.getAdId=Z.prototype.getAdId,Z.prototype.getVastAdId=Z.prototype.getVastAdId,Z.prototype.getVastMediaWidth=Z.prototype.getVastMediaWidth,Z.prototype.getVastMediaHeight=Z.prototype.getVastMediaHeight,Z.prototype.getVastMediaBitrate=Z.prototype.getVastMediaBitrate,Z.prototype.getDescription=Z.prototype.getDescription,Z.prototype.getTitle=Z.prototype.getTitle,Z.prototype.getPositionInSequence=Z.prototype.getPositionInSequence,Z.prototype.getSequenceLength=Z.prototype.getSequenceLength,Z.prototype.setMuted=Z.prototype.setMuted,Z.prototype.resize=Z.prototype.resize,Z.prototype.isLinear=Z.prototype.isLinear,Z.prototype.isMuted=Z.prototype.isMuted,Z.prototype.setVolume=Z.prototype.setVolume,Z.prototype.getVolume=Z.prototype.getVolume,Z.prototype.play=Z.prototype.play,Z.prototype.pause=Z.prototype.pause,Z.prototype.skip=Z.prototype.skip,Z.prototype.canSkipNow=Z.prototype.canSkipNow,Z.prototype.getTimeUntilSkippable=Z.prototype.getTimeUntilSkippable,Z.prototype.isSkippable=Z.prototype.isSkippable,Z.prototype.isPaused=Z.prototype.isPaused,Z.prototype.getRemainingTime=Z.prototype.getRemainingTime,Z.prototype.getMinSuggestedDuration=Z.prototype.getMinSuggestedDuration,Z.prototype.getDuration=Z.prototype.getDuration,Z.prototype.isUsingAnotherMediaElement=Z.prototype.isUsingAnotherMediaElement,Z.prototype.hasCustomClick=Z.prototype.hasCustomClick,Z.prototype.isClientRendering=Z.prototype.isClientRendering,Z.prototype.needsSkipUI=Z.prototype.needsSkipUI;function os(e,t,n,r){this.C=e,this.K=t,this.h=n,this.l=null,this.R=NaN,this.i=r,this.J=!1,this.B=null,this.j=[],this.N=[],this.M=this.F=this.g=null,this.G=new Map,this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.o=new Pe}os.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ma(t.target,t.type,t.listener);ja(this),this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.B=null,this.j=[],this.N=[],this.G.clear()},os.prototype.release=function(){this.stop(),this.o&&this.o.release()},os.prototype.onManifestUpdated=function(e){this.J=e,this.H!=""&&(fA(this,this.H,this.O),this.O=!1)},os.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function dA(e,t,n){var r,i,a,o,s,u,l,c,d,h,p,g;C(function(v){if(v.g==1)return r={type:7},i=ht([t],Xn()),i.method="POST",n&&(a=JSON.stringify(n),i.body=qn(a)),o=e.K.request(7,i,r),le(v,2),b(v,o.promise,4);if(v.g!=2){if(s=v.h,u=$e(s.data),l=JSON.parse(u),l.manifestUrl&&l.trackingUrl)c=new st(t),d=new st(l.trackingUrl),e.H=c.resolve(d).toString(),h=Date.now()/1e3,p=h-e.R,e.i(new Y("ads-loaded",new Map().set("loadTime",p))),g=new st(l.manifestUrl),e.l.resolve(c.resolve(g).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return pe(v,0)}if(ce(v),!e.I.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,v.return();e.l.resolve(e.I),e.l=null,G(v)})}function fA(e,t,n){var r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w;C(function(S){if(S.g==1)return r={type:8},i=ht([t],Xn()),a=e.K.request(7,i,r),le(S,2),b(S,a.promise,4);if(S.g!=2){if(o=S.h,s=[],u=$e(o.data),l=JSON.parse(u),l.avails.length>0){if(JSON.stringify(e.j)!=JSON.stringify(l.avails)){for(e.j=l.avails,c=m(e.j),d=c.next();!d.done;d=c.next())for(h=d.value,p=m(h.nonLinearAdsList),g=p.next();!g.done;g=p.next())for(v=g.value,y=m(v.nonLinearAdList),T=y.next();!T.done;T=y.next())w=T.value,hA(e,w);s=e.getCuePoints(),e.i(new Y("ad-cue-points-changed",new Map().set("cuepoints",s)))}}else e.j.length&&e.i(new Y("ad-cue-points-changed",new Map().set("cuepoints",s))),ja(e),e.j=[];return n&&(e.J||s.length>0)&&pA(e),pe(S,0)}ce(S),G(S)})}function hA(e,t){var n,r,i,a,o,s,u,l;C(function(c){if(c.g==1)return!t.staticResource||(n=Ky(t),e.G.get(n))?c.return():(r={type:9},i=ht([t.staticResource],Xn()),a=e.K.request(7,i,r),le(c,2),e.G.set(n,[]),b(c,a.promise,4));if(c.g!=2)return o=c.h,s=$e(o.data),u=JSON.parse(s),l=u.apps,e.G.set(n,l),pe(c,0);ce(c),e.G.delete(n),G(c)})}function Ky(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function pA(e){Wy(e),e.J||(qy(e),e.o.D(e.h,"seeked",function(){qy(e)}),e.o.D(e.h,"ended",function(){ja(e)})),e.o.D(e.h,"timeupdate",function(){Wy(e)})}function qy(e){var t=e.h.currentTime;if(t!=0&&e.B==null){for(var n,r,i=m(e.j),a=i.next();!a.done;a=i.next()){a=a.value;for(var o=m(a.ads),s=o.next();!s.done;s=o.next())if(s=s.value,!r)s.startTimeInSeconds<t&&(r=s,n=a);else if(s.startTimeInSeconds<t&&s.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=s,n=a;break}}n&&r&&!e.N.includes(r.adId)&&(e.B=t,e.h.currentTime=n.startTimeInSeconds)}}function Wy(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.F,i=r.startTimeInSeconds+.5*r.durationInSeconds,a=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),Xt(e,"firstQuartile")):t>=i&&!e.u.includes("midpoint")?(e.u.push("midpoint"),Xt(e,"midpoint")):t>=a&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),Xt(e,"thirdQuartile")),r=e.g.getRemainingTime(),i=e.g.getDuration(),e.g.canSkipNow()&&r>0&&i>0&&Xt(e,"skipStateChanged"),i>0&&(r<=0||r>i)&&ja(e)}if(!e.g||!e.g.isLinear()){e:for(r=m(e.j),i=r.next();!i.done&&(i=i.value,!(e.g&&e.g.isLinear()));i=r.next())for(a=0;a<i.ads.length;a++){var o=i.ads[a],s=o.startTimeInSeconds+o.durationInSeconds;if(o.startTimeInSeconds<=t&&s>t){if(e.N.includes(o.adId)){if(e.h.ended)continue;e.h.currentTime=s;break e}ja(e),e.M=i,e.g=new Z(o,a+1,i.ads.length,!0,e.h),e.F=o,a===0&&Xt(e,"breakStart"),zy(e);break}}if(!e.g){for(r=m(e.j),i=r.next();!i.done&&(i=i.value,!e.g);i=r.next())for(a=0;a<i.nonLinearAdsList.length;a++)if(o=i.nonLinearAdsList[a],o.nonLinearAdList.length){s=i.startTimeInSeconds;var u=e.G.get(Ky(o.nonLinearAdList[0]));if(s<=t&&u&&u.length){ja(e),s=e,u=m(u);for(var l=u.next();!l.done;l=u.next())if(l=l.value,l.data.source.length){var c=document.createElement("img");c.src=l.data.source[0].url,c.style.top=(l.placeholder.top||0)+"%",c.style.height=100-(l.placeholder.top||0)+"%",c.style.left=(l.placeholder.left||0)+"%",c.style.maxWidth=100-(l.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",s.C.appendChild(c)}e.M=i,e.g=new Z(o,a+1,i.ads.length,!1,e.h),e.F=o,a===0&&Xt(e,"breakStart"),zy(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.B&&e.B>t&&(e.h.currentTime=e.B),e.B=null)}}}function ja(e){if(e.g){for(;e.C.lastChild;)e.C.removeChild(e.C.firstChild);e.J||e.N.push(e.F.adId);var t=e.g.m;t!==void 0&&t?Xt(e,"skip"):Xt(e,"complete"),t=m(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.Ma(n.target,n.type,n.listener);e.m=[],e.u=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&Xt(e,"breakEnd"),e.g=null,e.F=null,e.M=null}}function zy(e){var t=!1;e.h.paused?t=!0:(Xt(e,"impression"),Xt(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&Xt(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||Xt(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(Xt(e,"impression"),Xt(e,"start"),t=!1):Xt(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){Xt(e,"pause")}});for(var n=m(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function Xt(e,t){var n=e.F.trackingEvents.find(function(a){return a.eventType==t});if(n||(n=e.M.adBreakTrackingEvents.find(function(a){return a.eventType==t})),n){var r={type:10};n=m(n.beaconUrls);for(var i=n.next();!i.done;i=n.next())(i=i.value)&&i!=""&&(i=ht([i],Xn()),i.method="POST",e.K.request(7,i,r))}switch(t){case"impression":e.i(new Y("ad-impression"));break;case"start":e.i(new Y("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new Y("ad-muted"));break;case"unmute":e.i(new Y("ad-volume-changed"));break;case"resume":e.i(new Y("ad-resumed"));break;case"pause":e.i(new Y("ad-paused"));break;case"firstQuartile":e.i(new Y("ad-first-quartile"));break;case"midpoint":e.i(new Y("ad-midpoint"));break;case"thirdQuartile":e.i(new Y("ad-third-quartile"));break;case"complete":e.i(new Y("ad-complete")),e.i(new Y("ad-stopped"));break;case"skip":e.i(new Y("ad-skipped")),e.i(new Y("ad-stopped"));break;case"breakStart":e.C.setAttribute("ad-active","true");break;case"breakEnd":e.C.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new Y("ad-skip-state-changed"))}}function ie(e,t){this.g=e,this.i=null,this.h=t}f=ie.prototype,f.needsSkipUI=function(){return!0},f.isClientRendering=function(){return!1},f.hasCustomClick=function(){return!0},f.isUsingAnotherMediaElement=function(){return!1},f.getDuration=function(){return this.i?this.i.duration:-1},f.getMinSuggestedDuration=function(){return this.getDuration()},f.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},f.isPaused=function(){return this.h.paused},f.isSkippable=function(){return this.g.isSkippable()},f.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},f.canSkipNow=function(){return this.getTimeUntilSkippable()==0},f.skip=function(){this.h.currentTime+=this.getRemainingTime()},f.pause=function(){return this.h.pause()},f.play=function(){return this.h.play()},f.getVolume=function(){return this.h.volume},f.setVolume=function(e){this.h.volume=e},f.isMuted=function(){return this.h.muted},f.isLinear=function(){return!0},f.resize=function(){},f.setMuted=function(e){this.h.muted=e},f.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},f.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},f.getTitle=function(){return this.g.getTitle()},f.getDescription=function(){return this.g.getDescription()},f.getVastMediaBitrate=function(){return 0},f.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},f.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},f.getVastAdId=function(){return""},f.getAdId=function(){return this.g.getAdId()},f.getCreativeAdId=function(){return this.g.getCreativeAdId()},f.getAdvertiserName=function(){return this.g.getAdvertiserName()},f.getMediaUrl=function(){return null},f.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},f.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},f.release=function(){this.h=this.i=this.g=null},q("shaka.ads.ServerSideAd",ie),ie.prototype.release=ie.prototype.release,ie.prototype.getPodIndex=ie.prototype.getPodIndex,ie.prototype.getTimeOffset=ie.prototype.getTimeOffset,ie.prototype.getMediaUrl=ie.prototype.getMediaUrl,ie.prototype.getAdvertiserName=ie.prototype.getAdvertiserName,ie.prototype.getCreativeAdId=ie.prototype.getCreativeAdId,ie.prototype.getAdId=ie.prototype.getAdId,ie.prototype.getVastAdId=ie.prototype.getVastAdId,ie.prototype.getVastMediaWidth=ie.prototype.getVastMediaWidth,ie.prototype.getVastMediaHeight=ie.prototype.getVastMediaHeight,ie.prototype.getVastMediaBitrate=ie.prototype.getVastMediaBitrate,ie.prototype.getDescription=ie.prototype.getDescription,ie.prototype.getTitle=ie.prototype.getTitle,ie.prototype.getPositionInSequence=ie.prototype.getPositionInSequence,ie.prototype.getSequenceLength=ie.prototype.getSequenceLength,ie.prototype.setMuted=ie.prototype.setMuted,ie.prototype.resize=ie.prototype.resize,ie.prototype.isLinear=ie.prototype.isLinear,ie.prototype.isMuted=ie.prototype.isMuted,ie.prototype.setVolume=ie.prototype.setVolume,ie.prototype.getVolume=ie.prototype.getVolume,ie.prototype.play=ie.prototype.play,ie.prototype.pause=ie.prototype.pause,ie.prototype.skip=ie.prototype.skip,ie.prototype.canSkipNow=ie.prototype.canSkipNow,ie.prototype.getTimeUntilSkippable=ie.prototype.getTimeUntilSkippable,ie.prototype.isSkippable=ie.prototype.isSkippable,ie.prototype.isPaused=ie.prototype.isPaused,ie.prototype.getRemainingTime=ie.prototype.getRemainingTime,ie.prototype.getMinSuggestedDuration=ie.prototype.getMinSuggestedDuration,ie.prototype.getDuration=ie.prototype.getDuration,ie.prototype.isUsingAnotherMediaElement=ie.prototype.isUsingAnotherMediaElement,ie.prototype.hasCustomClick=ie.prototype.hasCustomClick,ie.prototype.isClientRendering=ie.prototype.isClientRendering,ie.prototype.needsSkipUI=ie.prototype.needsSkipUI;function Xy(e,t,n,r){var i=this;this.u=e,this.l=t,this.j=null,this.G=NaN,this.i=r,this.H=!1,this.B=this.m=this.o=null,this.C="",this.F=[],this.h=new Pe,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new Y("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(a){gA(i,a)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){i.C.length?i.j.resolve(i.C):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(a){a=a.getAd(),i.m=new ie(a,i.l),i.B&&(i.m.i=i.B),i.i(new Y("ad-started",new Map().set("ad",i.m))),i.u.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){i.u.removeAttribute("ad-active");var a=i.l.currentTime;i.o&&i.o>a&&(i.l.currentTime=i.o,i.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(a){i.B=a.getStreamData().adProgressData,i.m&&(i.m.i=i.B)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){i.i(new Y("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){i.i(new Y("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){i.i(new Y("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){i.i(new Y("ad-complete")),i.i(new Y("ad-stopped")),i.u.removeAttribute("ad-active"),i.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){i.i(new Y("ad-skipped")),i.i(new Y("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(a){var o=a.getStreamData();a=[],o=m(o.cuepoints);for(var s=o.next();!s.done;s=o.next())s=s.value,a.push({start:s.start,end:s.end});i.F=a,i.i(new Y("ad-cue-points-changed",new Map().set("cuepoints",a)))})}f=Xy.prototype,f.configure=function(){},f.stop=function(){this.C="",this.o=null,this.F=[]},f.release=function(){this.stop(),this.h&&this.h.release()},f.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},f.getCuePoints=function(){return this.F};function gA(e,t){e.i(new Y("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.H||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function W(){Oe.call(this),this.h=this.i=this.j=this.g=null,this.m=new Ny,this.o=navigator.language,this.l=null}it(W,Oe),f=W.prototype,f.setLocale=function(e){this.o=e},f.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},f.initInterstitial=function(e,t,n){var r=this;this.g&&this.g.release(),this.g=new Oy(e,t,n,function(i){return xl(r,i)}),this.g.configure(this.l)},f.initClientSide=function(e,t,n){var r=this;if(!U.google||!google.ima||!google.ima.AdsLoader)throw new M(2,10,1e4);this.j&&this.j.release(),this.j=new bl(e,t,this.o,n,function(i){return xl(r,i)}),this.j.configure(this.l)},f.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),Oe.prototype.release.call(this)},f.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new Y("ad-stopped")),this.dispatchEvent(new Y("ad-content-attach-requested")),this.m=new Ny},f.requestClientSideAds=function(e){if(!this.j)throw new M(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.H=Date.now()/1e3,t.m.requestAds(e)},f.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new M(1,10,10001);var t=this.j;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},f.initMediaTailor=function(e,t,n){var r=this;this.i&&this.i.release(),this.i=new os(e,t,n,function(i){return xl(r,i)})},f.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new M(1,10,10005);var r=this.i;return n=n===void 0?"":n,r.l?e=Promise.reject(new M(1,10,10004)):(r.l=new Be,dA(r,e,t),r.I=n||"",r.R=Date.now()/1e3,e=r.l),e},f.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new M(1,10,10005);var t=this.i;t.H=e,t.i(new Y("ads-loaded",new Map().set("loadTime",0)))},f.initServerSide=function(e,t){var n=this;if(!U.google||!google.ima||!google.ima.dai)throw new M(2,10,10002);this.h&&this.h.release(),this.h=new Xy(e,t,this.o,function(r){return xl(n,r)}),this.h.configure(this.l)},f.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.h)throw new M(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Ae('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.16.13",n=this.h,n.j?e=Promise.reject(new M(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.H=!0),n.j=new Be,n.g.requestStream(e),n.C=t||"",n.G=Date.now()/1e3,e=n.j),e},f.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new M(1,10,10003);(e.mpt||e.mpv)&&Ae('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.16.13",this.h.g.replaceAdTagParameters(e)},f.getServerSideCuePoints=function(){return Ce("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},f.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},f.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:Z2(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},f.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},f.onDashTimedMetadata=function(e){this.h&&e.schemeIdUri=="urn:google:dai:2018"&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},f.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},f.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},f.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&aA(this.g,n))},f.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var r=n.schemeIdUri;if(r=="urn:mpeg:dash:event:alternativeMPD:insert:2025"||r=="urn:mpeg:dash:event:alternativeMPD:replace:2025"){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:replace:2025",r=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:insert:2025",t||r)){for(var i=n.startTime,a=n.endTime,o=null,s=0,u,l=m(n.eventNode.children),c=l.next();!c.done;c=l.next())if(c=c.value,c.tagName=="AlternativeMPD"){if(c=c.attributes.uri){u=c;break}}else if(c.tagName=="InsertPresentation"||c.tagName=="ReplacePresentation"){var d=c.attributes.url;if(d){u=qt(d),(l=se(c,"maxDuration",Ct))&&(o=l/n.timescale),(l=se(c,"returnOffset",Ct))&&(s=l/n.timescale),t&&s&&(a=i+s);break}}u&&as(e,[{id:n.id,groupId:null,startTime:i,endTime:a,uri:u,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:r?s:null,playoutLimit:o,once:!1,pre:!1,post:!1,timelineRange:t&&!r,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}])}}else(r=="urn:mpeg:dash:event:2012"||r=="urn:scte:dash:scte214-events")&&n.eventNode&&ze(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&oA(this.g,n))}},f.addCustomInterstitial=function(e){if(!this.g)throw new M(1,10,10006);as(this.g,[e])},f.addAdUrlInterstitial=function(e){if(!this.g)throw new M(1,10,10006);return this.g.addAdUrlInterstitial(e)},f.getInterstitialPlayer=function(){if(!this.g)throw new M(1,10,10006);return this.g.td()};function xl(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}q("shaka.ads.AdManager",W),W.prototype.getInterstitialPlayer=W.prototype.getInterstitialPlayer,W.prototype.addAdUrlInterstitial=W.prototype.addAdUrlInterstitial,W.prototype.addCustomInterstitial=W.prototype.addCustomInterstitial,W.prototype.onDASHInterstitialMetadata=W.prototype.onDASHInterstitialMetadata,W.prototype.onHLSInterstitialMetadata=W.prototype.onHLSInterstitialMetadata,W.prototype.onCueMetadataChange=W.prototype.onCueMetadataChange,W.prototype.onHlsTimedMetadata=W.prototype.onHlsTimedMetadata,W.prototype.onDashTimedMetadata=W.prototype.onDashTimedMetadata,W.prototype.onManifestUpdated=W.prototype.onManifestUpdated,W.prototype.getStats=W.prototype.getStats,W.prototype.getCuePoints=W.prototype.getCuePoints,W.prototype.getServerSideCuePoints=W.prototype.getServerSideCuePoints,W.prototype.replaceServerSideAdTagParameters=W.prototype.replaceServerSideAdTagParameters,W.prototype.requestServerSideStream=W.prototype.requestServerSideStream,W.prototype.initServerSide=W.prototype.initServerSide,W.prototype.addMediaTailorTrackingUrl=W.prototype.addMediaTailorTrackingUrl,W.prototype.requestMediaTailorStream=W.prototype.requestMediaTailorStream,W.prototype.initMediaTailor=W.prototype.initMediaTailor,W.prototype.updateClientSideAdsRenderingSettings=W.prototype.updateClientSideAdsRenderingSettings,W.prototype.requestClientSideAds=W.prototype.requestClientSideAds,W.prototype.onAssetUnload=W.prototype.onAssetUnload,W.prototype.release=W.prototype.release,W.prototype.initClientSide=W.prototype.initClientSide,W.prototype.initInterstitial=W.prototype.initInterstitial,W.prototype.configure=W.prototype.configure,W.prototype.setLocale=W.prototype.setLocale,W.ADS_LOADED="ads-loaded",W.AD_STARTED="ad-started",W.AD_FIRST_QUARTILE="ad-first-quartile",W.AD_MIDPOINT="ad-midpoint",W.AD_THIRD_QUARTILE="ad-third-quartile",W.AD_COMPLETE="ad-complete",W.AD_STOPPED="ad-stopped",W.AD_SKIPPED="ad-skipped",W.AD_VOLUME_CHANGED="ad-volume-changed",W.AD_MUTED="ad-muted",W.AD_PAUSED="ad-paused",W.AD_RESUMED="ad-resumed",W.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",W.CUEPOINTS_CHANGED="ad-cue-points-changed",W.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",W.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",W.AD_CLICKED="ad-clicked",W.AD_PROGRESS="ad-progress",W.AD_BUFFERING="ad-buffering",W.AD_IMPRESSION="ad-impression",W.AD_DURATION_CHANGED="ad-duration-changed",W.AD_CLOSED="ad-closed",W.AD_LOADED="ad-loaded",W.ALL_ADS_COMPLETED="all-ads-completed",W.AD_LINEAR_CHANGED="ad-linear-changed",W.AD_METADATA="ad-metadata",W.AD_RECOVERABLE_ERROR="ad-recoverable-error",W.AD_ERROR="ad-error",W.AD_BREAK_READY="ad-break-ready",W.AD_INTERACTION="ad-interaction",W.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",W.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",W.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",vl=function(){return new W};function Ff(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(t=n instanceof Y,n instanceof Event||t){var r={};for(a in n){var i=n[a];i&&typeof i=="object"?a=="detail"?r[a]=i:i instanceof Event||i instanceof Y?r[a]={__type__:"Event",event:Ff(i)}:t&&Array.isArray(i)&&(r[a]=i):a in Event||(r[a]=i)}return r}if(n instanceof Error){var a=new Set(["name","message","stack"]);for(r in n)a.add(r);for(t=m(Object.getOwnPropertyNames(n)),r=t.next();!r.done;r=t.next())a.add(r.value);for(t={},a=m(a),r=a.next();!r.done;r=a.next())r=r.value,t[r]=n[r];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(a={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(Nr(n)),t=n.next();!t.done;t=n.next())t=t.value,r=t.end,a.start.push(t.start),a.end.push(r);n=a}else n=ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT===1?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:n<0?"-Infinity":"Infinity":n;return n}})}function Al(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=mA(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n&&typeof n=="object"&&n.__type__=="Event"?Al(n.event):n;return r})}function mA(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var Yy="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),vA="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Vf=["loop","playbackRate"],yA=["pause","play"],Hf=new Map().set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1).set("getBandwidthEstimate",1).set("isRemotePlayback",1),Gf=new Map().set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),Jy=new Map().set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),$y=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],Qy=[["isTextTrackVisible","setTextTrackVisibility"]],bA="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),wA="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function Kf(e,t,n,r,i,a,o){var s=this;this.H=e,this.K=o,this.l=new ve(t),this.M=n,this.u=!1,this.B=r,this.G=i,this.N=a,this.i=this.m=!1,this.J="",this.o=null,this.C=function(){return qf(s)},this.F=function(u,l){switch(u=Al(l),u.type){case"event":var c=u.targetName,d=Hg(u.event);s.B(c,d);break;case"update":c=u.update;for(d in c){u=s.g[d]||{};for(var h in c[d])u[h]=c[d][h]}s.u&&(s.M(),s.u=!1);break;case"asyncComplete":if(h=u.id,d=u.error,l=u.res,u=s.h.get(h),s.h.delete(h),u)if(d){h=new M(d.severity,d.category,d.code);for(c in d)h[c]=d[c];u.reject(h)}else u.resolve(l)}},this.g={video:{},player:{}},this.I=0,this.h=new Map,this.j=null,us.add(this)}f=Kf.prototype,f.destroy=function(){return us.delete(this),Wf(this),Jn&&e0(this),this.l&&(this.l.stop(),this.l=null),this.G=this.B=null,this.i=this.m=!1,this.F=this.C=this.j=this.h=this.g=this.o=null,Promise.resolve()},f.wb=function(){return this.i},f.eh=function(){return this.J},f.init=function(){if(this.H.length)if(U.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Jb();var e=new chrome.cast.SessionRequest(this.H,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(us),r=n.next();!r.done;r=n.next()){r=r.value;var i=t;r.j=new Be,r.u=!0,kl(r,i)}},function(t){for(var n=m(us),r=n.next();!r.done;r=n.next())r=r.value,Il=t=="available",r.l.Jb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Il&&this.l.ka(SA),(e=Jn)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Be,this.u=!0,kl(this,e)):Jn=null}else U.__onGCastApiAvailable!==t0&&(El=U.__onGCastApiAvailable||null,U.__onGCastApiAvailable=t0)},f.qh=function(e){this.o=e,this.i&&ss(this,{type:"appData",appData:this.o})},f.cast=function(){var e=this;return C(function(t){if(!e.m)throw new M(1,8,8e3);if(!Il)throw new M(1,8,8001);if(e.i)throw new M(1,8,8002);return e.j=new Be,chrome.cast.requestSession(function(n){return kl(e,n)},function(n){return Zy(e,n)}),b(t,e.j,0)})};function TA(e){e.i&&chrome.cast.requestSession(function(t){return kl(e,t)},function(t){return Zy(e,t)})}f.qd=function(){if(this.i){if(Wf(this),Jn){e0(this);try{Jn.stop(function(){},function(){})}catch{}Jn=null}qf(this)}},f.get=function(e,t){var n=this;if(e=="video"){if(yA.includes(t))return function(){return n.Mi.apply(n,[e,t].concat(H(xt.apply(0,arguments))))}}else if(e=="player"){if(Jy.has(t)&&!this.get("player","isLive")())return function(){};if(bA.includes(t))return function(){return n.Mi.apply(n,[e,t].concat(H(xt.apply(0,arguments))))};if(wA.includes(t))return function(){return n.Pk.apply(n,[e,t].concat(H(xt.apply(0,arguments))))};if(Hf.has(t)||Gf.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},f.set=function(e,t,n){this.g[e][t]=n,ss(this,{type:"set",targetName:e,property:t,value:n})};function kl(e,t){var n=e.N();Jn=t,t.addUpdateListener(e.C),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.F),qf(e),ss(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function Zy(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new M(2,8,n,t))}f.Mi=function(e,t){ss(this,{type:"call",targetName:e,methodName:t,args:xt.apply(2,arguments)})},f.Pk=function(e,t){var n=xt.apply(2,arguments),r=new Be,i=this.I.toString();this.I++,this.h.set(i,r);try{ss(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i})}catch(a){r.reject(a)}return r};function e0(e){var t=Jn;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.F)}function qf(e){var t=Jn?Jn.status=="connected":!1;if(e.i&&!t){e.G();for(var n in e.g)e.g[n]={};Wf(e)}e.i=t,e.J=t?Jn.receiver.friendlyName:"",e.l.Jb()}function Wf(e){if(e.h)for(var t=m(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var r=e.h.get(n);e.h.delete(n),r.reject(new M(1,7,7e3))}}function ss(e,t){t=Ff(t);var n=Jn;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},oT)}catch(r){throw t=new M(2,8,8005,r),n=new Y("error",new Map().set("detail",t)),e.B("player",n),e.qd(),t}}var SA=.02,Il=!1,Jn=null,El=null,us=new Set;function t0(e){if(El?U.__onGCastApiAvailable=El:delete U.__onGCastApiAvailable,El=null,e)for(var t=m(us),n=t.next();!n.done;n=t.next())n.value.init();typeof U.__onGCastApiAvailable=="function"&&U.__onGCastApiAvailable(e)}function pt(e,t,n,r){r=r===void 0?!1:r,Oe.call(this);var i=this;this.i=e,this.h=t,this.l=this.o=this.m=this.u=this.j=null,this.I=n,this.H=r,this.F=[],this.C=[],this.B=[],this.G=new Map,this.g=null,U.chrome&&ge().Oa()!="CAST"?(this.g=new Kf(n,function(){return i0(i)},function(){return a0(i)},function(a,o){return s0(i,a,o)},function(){return o0(i)},function(){return r0(i)},r),xA(this)):(this.j=this.i,this.u=this.h)}it(pt,Oe),f=pt.prototype,f.destroy=function(e){return this.g&&e!==void 0&&e&&this.g.qd(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,Oe.prototype.release.call(this),Promise.all(e)},f.gk=function(){return this.j},f.td=function(){return this.u},f.sj=function(){return this.g?this.g.m&&Il:!1},f.wb=function(){return this.g?this.g.wb():!1},f.eh=function(){return this.g?this.g.eh():""},f.cast=function(){var e=this;return C(function(t){return t.g==1?e.g?b(t,e.g.cast(),2):t.return():e.h?b(t,e.h.Dc(),0):t.return()})},f.qh=function(e){this.g&&this.g.qh(e)},f.il=function(){this.g&&TA(this.g)},f.qd=function(){this.g&&this.g.qd()},f.tj=function(e,t){t=t===void 0?!1:t;var n=this;return C(function(r){if(r.g==1)return e==n.I&&t==n.H||(n.I=e,n.H=t,!n.g)?r.return():(n.g.qd(),b(r,n.g.destroy(),2));n.g=null,n.g=new Kf(e,function(){return i0(n)},function(){return a0(n)},function(i,a){return s0(n,i,a)},function(){return o0(n)},function(){return r0(n)},t),n.g.init(),G(r)})};function xA(e){e.g.init(),e.l=new Pe;for(var t=m(Yy),n=t.next();!n.done;n=t.next())e.l.D(e.i,n.value,function(a){e.g.wb()||(a=Hg(a),e.m.dispatchEvent(a))});for(var r in mu)e.l.D(e.h,mu[r],function(a){e.g.wb()||e.o.dispatchEvent(a)});e.j={},t={};for(var i in e.i)t={ie:t.ie},t.ie=i,Object.defineProperty(e.j,t.ie,{configurable:!1,enumerable:!0,get:(function(a){return function(){return kA(e,a.ie)}})(t),set:(function(a){return function(o){var s=a.ie;e.g.wb()?e.g.set("video",s,o):e.i[s]=o}})(t)});e.u={},n0(e,function(a){Object.defineProperty(e.u,a,{configurable:!1,enumerable:!0,get:function(){return Cl(e,a)}})}),AA(e),e.m=new Oe,e.m.Je=e.j,e.o=new Oe,e.o.Je=e.u,e.l.D(e.h,"unloading",function(){e.g&&e.g.wb()||zf(e)})}function AA(e){var t=new Map;n0(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.G.set(n,r):e.G.set(r,n)):t.set(r,n)})}function n0(e,t){function n(u){return u=="constructor"||typeof r[u]!="function"?!1:!i.has(u)}var r=e.h,i=new Set,a;for(a in r)n(a)&&(i.add(a),t(a,r[a]));for(e=Object.getPrototypeOf(r),a=Object.getPrototypeOf({});e&&e!=a;){for(var o=m(Object.getOwnPropertyNames(e)),s=o.next();!s.done;s=o.next())s=s.value,n(s)&&(i.add(s),t(s,r[s]));e=Object.getPrototypeOf(e)}}function r0(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.rd(),startTime:null,addThumbnailsTrackCalls:e.F,addTextTrackAsyncCalls:e.C,addChaptersTrackCalls:e.B};e.i.pause();for(var n=m(Vf),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=m($y),r=n.next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.h[i[0]](),t.player[r]=i}for(n=m(Qy),r=n.next();!r.done;r=n.next())i=r.value,r=i[1],i=e.h[i[0]](),t.playerAfterLoad[r]=i;return t}function i0(e){var t=new Y("caststatuschanged");e.dispatchEvent(t)}function a0(e){var t=new Y(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function o0(e){for(var t=m($y),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var i=e.F,a=e.C,o=e.B;zf(e);var s=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var u=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var l;(r=e.g.get("player","getTextTracks")())&&r.length&&(l=r.find(function(h){return h.active}));var c=e.g.get("player","isTextTrackVisible")();s&&(e.i.autoplay=!1,t=e.h.load(s,n));var d={};for(n=m(Vf),r=n.next();!r.done;r=n.next())r=r.value,d[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var h=m(i),p=h.next();!p.done;p=h.next()){p=p.value;var g;(g=e.td()).Pe.apply(g,H(p))}for(h=m(a),g=h.next();!g.done;g=h.next()){g=g.value;var v;(v=e.td()).Sd.apply(v,H(g))}for(v=m(o),h=v.next();!h.done;h=v.next()){h=h.value;var y;(y=e.td()).Oe.apply(y,H(h))}for(y=m(Vf),v=y.next();!v.done;v=y.next())v=v.value,e.i[v]=d[v];for(y=m(Qy),v=y.next();!v.done;v=y.next())h=v.value,v=h[1],h=e.g.get("player",h[0])(),e.h[v](h);e.h.wh(c),l&&e.h.oh(l.language,l.roles,l.forced),e.i.autoplay=u,s&&e.i.play()}},function(h){h=new Map().set("detail",h),h=new Y("error",h),e.h.dispatchEvent(h)})}function kA(e,t){if(t=="addEventListener")return function(r,i,a){return e.m.addEventListener(r,i,a)};if(t=="removeEventListener")return function(r,i,a){return e.m.removeEventListener(r,i,a)};if(e.g.wb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.wb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function Cl(e,t,n){if(n=n===void 0?!1:n,e.G.has(t)&&(t=e.G.get(t)),t=="addEventListener")return function(r,i,a){return e.o.addEventListener(r,i,a)};if(t=="removeEventListener")return function(r,i,a){return e.o.removeEventListener(r,i,a)};if(t=="getMediaElement")return function(){return e.j};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Yb()};if(t=="getDrmEngine")return function(){return e.h.F};if(t=="getAdManager")return function(){return e.h.di()};if(t=="getQueueManager")return function(){return e.h.mi()};if(t=="setVideoContainer")return function(r){return e.h.Zi(r)};if(!n){if(t=="addThumbnailsTrack")return function(){var r=xt.apply(0,arguments);return e.F.push(r),Cl(e,t,!0).apply(null,H(r))};if(t=="addTextTrackAsync")return function(){var r=xt.apply(0,arguments);return e.C.push(r),Cl(e,t,!0).apply(null,H(r))};if(t=="addChaptersTrack")return function(){var r=xt.apply(0,arguments);return e.B.push(r),Cl(e,t,!0).apply(null,H(r))}}if(e.g.wb()){if(t=="getManifest"||t=="drmInfo")return function(){return Ae(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return Ae(t+"() does not work while casting!"),Promise.resolve()};if(t=="getChapters")return function(){return Ae(t+"() does not work while casting!"),[]}}return e.g.wb()&&Object.keys(e.g.g.video).length==0&&(Hf.has(t)||Gf.has(t))||!e.g.wb()?e.h[t].bind(e.h):e.g.get("player",t)}function s0(e,t,n){e.g.wb()&&(t=="video"?e.m.dispatchEvent(n):t=="player"&&(n.type=="unloading"&&zf(e),e.o.dispatchEvent(n)))}function zf(e){e.F=[],e.C=[],e.B=[]}q("shaka.cast.CastProxy",pt),pt.prototype.changeReceiverId=pt.prototype.tj,pt.prototype.forceDisconnect=pt.prototype.qd,pt.prototype.suggestDisconnect=pt.prototype.il,pt.prototype.setAppData=pt.prototype.qh,pt.prototype.cast=pt.prototype.cast,pt.prototype.receiverName=pt.prototype.eh,pt.prototype.isCasting=pt.prototype.wb,pt.prototype.canCast=pt.prototype.sj,pt.prototype.getPlayer=pt.prototype.td,pt.prototype.getVideo=pt.prototype.gk,pt.prototype.destroy=pt.prototype.destroy;function Ft(e,t,n,r){Oe.call(this);var i=this;this.h=e,this.g=t,this.j=new Pe,this.I={video:e,player:t},this.G=n||function(){},this.J=r||function(a){return a},this.i=null,this.H=!1,this.o=!0,this.m=0,this.C=!1,this.B=!0,this.u=this.l=null,this.F=new ve(function(){Xf(i)}),IA(this)}it(Ft,Oe),f=Ft.prototype,f.isConnected=function(){return this.H},f.pk=function(){return this.o},f.al=function(e){this.i=e},f.xj=function(){this.i=null},f.cl=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},f.$k=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},f.Zk=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},f.destroy=function(){var e=this,t,n;return C(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.g&&(t.push(e.g.destroy()),e.g=null),e.F&&(e.F.stop(),e.F=null),e.h=null,e.I=null,e.G=null,e.H=!1,e.o=!0,e.l=null,e.u=null,Oe.prototype.release.call(e),b(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),G(r)})};function IA(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return u0(e)},t.onSenderDisconnected=function(){return u0(e)},t.onSystemVolumeChanged=function(){var i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();i&&Br(e,{type:"update",update:{video:{volume:i.level,muted:i.muted}}},e.l),Br(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(i){return MA(e,i)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(i){return CA(e,i)},t.start(),t=m(Yy);for(var n=t.next();!n.done;n=t.next())e.j.D(e.h,n.value,function(i){return l0(e,"video",i)});for(var r in mu)e.j.D(e.g,mu[r],function(i){return l0(e,"player",i)});e.j.D(e.h,"loadeddata",function(){e.C=!0}),e.j.D(e.g,"loading",function(){e.o=!1,Oa(e)}),e.j.D(e.h,"playing",function(){e.o=!1,Oa(e)}),e.j.D(e.h,"pause",function(){Oa(e)}),e.j.D(e.g,"unloading",function(){e.o=!0,Oa(e)}),e.j.D(e.h,"ended",function(){new ve(function(){e.h&&e.h.ended&&(e.o=!0,Oa(e))}).ka(RA)})}function u0(e){e.m=0,e.B=!0,e.H=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,Oa(e)}function Oa(e){var t;C(function(n){if(n.g==1)return b(n,Promise.resolve(),2);if(!e.g)return n.return();t=new Y("caststatuschanged"),e.dispatchEvent(t),c0(e)||Fr(e),G(n)})}function EA(e,t,n){var r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D;C(function(x){switch(x.g){case 1:for(r in t.player)i=t.player[r],e.g[r](i);return e.G(n),a=e.h.autoplay,t.manifest?(e.h.autoplay=!1,le(x,5),b(x,e.g.load(t.manifest,t.startTime),7)):b(x,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(o=m(t.addThumbnailsTrackCalls),s=o.next();!s.done;s=o.next())u=s.value,e.g.Pe.apply(e.g,H(u));if(t.addTextTrackAsyncCalls)for(l=m(t.addTextTrackAsyncCalls),c=l.next();!c.done;c=l.next())d=c.value,e.g.Sd.apply(e.g,H(d));if(t.addChaptersTrackCalls)for(h=m(t.addChaptersTrackCalls),p=h.next();!p.done;p=h.next())g=p.value,e.g.Oe.apply(e.g,H(g));pe(x,3);break;case 5:return v=ce(x),y=new Map().set("detail",v),T=new Y("error",y),e.g&&e.g.dispatchEvent(T),x.return();case 3:if(!e.g)return x.return();for(w in t.video)S=t.video[w],e.h[w]=S;for(k in t.playerAfterLoad)D=t.playerAfterLoad[k],e.g[k](D);e.h.autoplay=a,t.manifest&&(e.h.play(),Fr(e)),G(x)}})}function l0(e,t,n){e.g&&(Xf(e),Br(e,{type:"event",targetName:t,event:n},e.l))}function Xf(e){e.F.ka(DA);for(var t={video:{},player:{}},n=m(vA),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.h[r];e.g.W()&&Jy.forEach(function(i,a){e.m%i==0&&(t.player[a]=e.g[a]())}),Hf.forEach(function(i,a){e.m%i==0&&(t.player[a]=e.g[a]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Br(e,{type:"update",update:t},e.l),Gf.forEach(function(i,a){e.m%i==0&&(i={player:{}},i.player[a]=e.g[a](),Br(e,{type:"update",update:i},e.l))}),e.C&&(e.m+=1),c0(e)}function c0(e){return e.B&&(e.h.duration||e.g.W())?(Yf(e),e.B=!1,!0):!1}function Yf(e,t){var n={contentId:e.g.rd(),streamType:e.g.W()?"LIVE":"BUFFERED",contentType:""};e.g.W()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),Fr(e,t===void 0?0:t,n)}function CA(e,t){var n=Al(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.B=!0,EA(e,n.initState,n.appData),Xf(e);break;case"appData":e.G(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),i=="volume"){t.setSystemVolumeLevel(n);break}else if(i=="muted"){t.setSystemVolumeMuted(n);break}}e.I[r][i]=n;break;case"call":r=e.I[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,i=n.methodName,r=="player"&&i=="load"&&(e.m=0,e.C=!1);var a=n.id,o=t.senderId;t=e.I[r],n=t[i].apply(t,n.args),r=="player"&&i=="load"&&(n=n.then(function(){e.B=!0})),n.then(function(s){return d0(e,o,a,null,s)},function(s){return d0(e,o,a,s,null)})}}function MA(e,t){var n=Al(t.data);switch(n.type){case"PLAY":e.h.play(),Fr(e);break;case"PAUSE":e.h.pause(),Fr(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.h.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.h.play(),Fr(e)):r&&r=="PLAYBACK_PAUSE"&&(e.h.pause(),Fr(e));break;case"STOP":e.g.Dc().then(function(){e.g&&Fr(e)});break;case"GET_STATUS":Yf(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var i=e.h.volume,a=e.h.muted;t!=null&&(e.h.volume=Number(t)),r!=null&&(e.h.muted=r),i==e.h.volume&&a==e.h.muted||Fr(e);break;case"LOAD":e.m=0,e.C=!1,e.B=!1,t=n.media,r=n.currentTime,i=e.J(t.contentId),a=n.autoplay||!0,e.G(t.customData),a&&(e.h.autoplay=!0),e.g.load(i,r).then(function(){e.g&&Yf(e)}).catch(function(o){var s="LOAD_FAILED";o.category==7&&o.code==7e3&&(s="LOAD_CANCELLED"),Br(e,{requestId:Number(n.requestId),type:s},e.u)});break;default:Br(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function d0(e,t,n,r,i){e.g&&Br(e,{type:"asyncComplete",id:n,error:r,res:i},e.l,t)}function Br(e,t,n,r){e.H&&(e=Ff(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Fr(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.o?PA:e.g.Rg()?NA:e.h.paused?UA:LA,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(r.media=n),Br(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.u)}q("shaka.cast.CastReceiver",Ft),Ft.prototype.destroy=Ft.prototype.destroy,Ft.prototype.setContentArtist=Ft.prototype.Zk,Ft.prototype.setContentImage=Ft.prototype.$k,Ft.prototype.setContentTitle=Ft.prototype.cl,Ft.prototype.clearContentMetadata=Ft.prototype.xj,Ft.prototype.setContentMetadata=Ft.prototype.al,Ft.prototype.isIdle=Ft.prototype.pk,Ft.prototype.isConnected=Ft.prototype.isConnected;var DA=.5,RA=5,PA="IDLE",LA="PLAYING",NA="BUFFERING",UA="PAUSED";function f0(e,t,n,r,i){if(r>=i)return null;for(var a=-1,o=-1,s=0;s<n.length;s++)if(n[s].some(function(k){return k!=null&&k.g.trim()!=""})){a=s;break}for(s=n.length-1;s>=0;s--)if(n[s].some(function(k){return k!=null&&k.g.trim()!=""})){o=s;break}if(a===-1||o===-1)return null;for(var u=s=!1,l="white",c="black",d=Jf(r,i,s,u,l,c);a<=o;a++){for(var h=n[a],p=-1,g=-1,v=0;v<h.length;v++)if(h[v]!=null&&h[v].g.trim()!==""){p=v;break}for(v=h.length-1;v>=0;v--)if(h[v]!=null&&h[v].g.trim()!==""){g=v;break}if(p===-1||g===-1)h=h0(r,i),e.nestedCues.push(h);else{for(;p<=g;p++)if(v=h[p]){var y=v.l,T=v.i,w=v.j,S=v.h;(y!=s||T!=u||w!=l||S!=c)&&(d.payload&&e.nestedCues.push(d),d=Jf(r,i,y,T,w,S),s=y,u=T,l=w,c=S),d.payload+=v.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),a!==o&&(d=h0(r,i),e.nestedCues.push(d)),d=Jf(r,i,s,u,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Jf(e,t,n,r,i,a){return e=new qe(e,t,""),n&&e.textDecoration.push(Ir),r&&(e.fontStyle=la),e.color=i,e.backgroundColor=a,e}function h0(e,t){return e=new qe(e,t,""),e.lineBreak=!0,e}function p0(e,t,n,r,i){this.g=e,this.l=t,this.i=n,this.h=r,this.j=i}function $f(e,t){this.i=[],this.g=1,this.h=0,this.F=e,this.C=t,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.B=null,ls(this)}function Ml(e,t,n){var r="CC"+((e.F<<1|e.C)+1),i=new qe(t,n,"");i.lineInterpretation=1;var a=v0.get(e.g);return a&&(i.line=a),e.u!=null&&e.B!=null&&(i.position=10+Math.min(70,e.u*10)+e.B*2.5),(t=f0(i,r,e.i,t,n))&&e.g+t.cue.nestedCues.length-3>15&&(a=v0.get(e.g+3-t.cue.nestedCues.length))&&(i.line=a),t}function ls(e){Vr(e,0,15),e.g=1}function Ba(e,t,n){if(!(n<32||n>127)){var r="";switch(t){case 0:r=m0.has(n)?m0.get(n):String.fromCharCode(n);break;case 1:r=_A.get(n);break;case 2:e.i[e.g].pop(),r=jA.get(n);break;case 3:e.i[e.g].pop(),r=OA.get(n)}r&&e.i[e.g].push(new p0(r,e.m,e.j,e.o,e.l))}}function g0(e,t,n,r){if(!(n<0||t<0))if(t>=n)for(--r;r>=0;r--)e.i[t+r]=e.i[n+r].map(function(a){return a});else for(var i=0;i<r;i++)e.i[t+i]=e.i[n+i].map(function(a){return a})}function Vr(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var m0=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),_A=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),jA=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),OA=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),v0=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Dl(e,t){this.h=0,this.o=new $f(e,t),this.i=new $f(e,t),this.g=this.j=new $f(e,t),this.l=0,this.m=null}function Qf(e,t,n){e.g=e.i;var r=e.g,i=null;return e.h!==3&&e.h!==4&&(i=Ml(r,e.l,n),n=e.i,n.g=n.h>0?n.h:0,Vr(n,0,15),n=e.j,n.g=n.h>0?n.h:0,Vr(n,0,15),r.g=15),e.h=3,r.h=t,i}function y0(e){e.h=1,e.g=e.j,e.g.h=0}function b0(e){Xr("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var BA="black green blue cyan red yellow magenta black".split(" "),w0="white green blue cyan red yellow magenta white_italics".split(" ");function Zf(e,t){this.J=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.H=this.M=this.I=0,this.G=2,this.i=[],this.g=this.h=this.j=0,this.F=this.B=!1,this.C="white",this.u="black",eh(this)}function eh(e){e.i=[];for(var t=0;t<16;t++)e.i.push(th())}function th(){for(var e=[],t=0;t<42;t++)e.push(null);return e}function pi(e,t){T0(e)&&(e.i[e.h][e.g]=new p0(t,e.F,e.B,e.u,e.C),e.g++)}function T0(e){var t=e.g<e.m&&e.g>=0;return e.h<e.o&&e.h>=0&&t}Zf.prototype.isVisible=function(){return this.l};function FA(e){for(var t=0,n=1;n<16;n++,t++)e.i[t]=e.i[n];for(n=0;n<1;n++,t++)e.i[t]=th()}function qi(e,t,n){var r=new qe(e.j,t,"");r.textAlign=e.G===0?"left":e.G===1?"right":hr;var i=r.region;switch(e.J&&(i.id+="svc"+e.J),i.id+="win"+e.N,i.height=e.o,i.width=e.m,i.heightUnits=2,i.widthUnits=2,i.viewportAnchorX=e.I,i.viewportAnchorY=e.M,i.viewportAnchorUnits=e.K?ln:2,e.H){case 0:i.regionAnchorX=0,i.regionAnchorY=0;break;case 1:i.regionAnchorX=50,i.regionAnchorY=0;break;case 2:i.regionAnchorX=100,i.regionAnchorY=0;break;case 3:i.regionAnchorX=0,i.regionAnchorY=50;break;case 4:i.regionAnchorX=50,i.regionAnchorY=50;break;case 5:i.regionAnchorX=100,i.regionAnchorY=50;break;case 6:i.regionAnchorX=0,i.regionAnchorY=100;break;case 7:i.regionAnchorX=50,i.regionAnchorY=100;break;case 8:i.regionAnchorX=100,i.regionAnchorY=100}return(n=f0(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Zf.prototype.display=function(){this.l=!0};function VA(){this.i=[],this.h=null,this.g=0}function HA(e,t){t.type===3?(e.g=(t.value&63)*2-1,e.h=[]):e.h&&(e.g>0&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new cs(e.h)),e.h=null,e.g=0))}function cs(e){this.g=0,this.h=e}cs.prototype.Ka=function(){return this.g<this.h.length},cs.prototype.Pa=function(){return this.g};function wt(e){if(!e.Ka())throw new M(2,2,3e3);return e.h[e.g++]}cs.prototype.skip=function(e){if(this.g+e>this.h.length)throw new M(2,2,3e3);this.g+=e},cs.prototype.Qi=function(e){if(this.g-e<0)throw new M(2,2,3e3);this.g-=e};function GA(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function KA(e,t,n,r){if(!e.g)return[];if(n==24)return n=wt(t).value,r=wt(t).value,n=(function(a){return a.map(function(o){return("0"+(o&255).toString(16)).slice(-2)}).join("")})([n,r]),pi(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var i=null;switch(n){case 8:!T0(t)||t.g<=0&&t.h<=0||(t.g<=0?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(i=qi(t,r,e.i)),t.h+1>=t.o?FA(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(i=qi(t,r,e.i)),t.i[t.h]=th(),t.g=0;break;case 12:t.isVisible()&&(i=qi(t,r,e.i)),eh(t),t.h=0,t.g=0}return i?[i]:[]}function qA(e,t,n,r){if(n>=128&&n<=135)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=wt(t).value,t=[],n=m(ds(e,n));for(var i=n.next();!i.done;i=n.next()){if(i=e.h[i.value],i.isVisible()){var a=qi(i,r,e.i);a&&t.push(a)}eh(i)}return t}if(n===137)for(t=wt(t).value,t=m(ds(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.display();else{if(n===138){for(n=wt(t).value,t=null,n=m(ds(e,n)),i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()&&(t=qi(i,r,e.i)),i.l=!1;return t?[t]:[]}if(n===139){for(n=wt(t).value,t=null,n=m(ds(e,n)),i=n.next();!i.done;i=n.next())i=e.h[i.value],i.isVisible()?t=qi(i,r,e.i):i.j=r,i.l=!i.l;return t?[t]:[]}if(n===140)return t=wt(t).value,S0(e,t,r);if(n===143)return r=S0(e,255,r),x0(e),r;if(n===144)t.skip(1),r=wt(t).value,e.g&&(e.g.B=(r&128)>0,e.g.F=(r&64)>0);else if(n===145)r=wt(t).value,n=wt(t).value,t.skip(1),e.g&&(t=A0((n&48)>>4,(n&12)>>2,n&3),e.g.C=A0((r&48)>>4,(r&12)>>2,r&3),e.g.u=t);else if(n===146)r=wt(t).value,t=wt(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=wt(t).value,t.skip(1),e.g&&(e.g.G=r&3);else if(n>=152&&n<=159){n=(n&15)-8,i=e.h[n]!==null,i||(a=new Zf(n,e.i),a.j=r,e.h[n]=a),r=wt(t).value,a=wt(t).value;var o=wt(t).value,s=wt(t).value,u=wt(t).value;t=wt(t).value,i&&(t&7)===0||(t=e.h[n],t.h=0,t.g=0,t.F=!1,t.B=!1,t.C="white",t.u="black"),t=e.h[n],t.l=(r&32)>0,t.M=a&127,t.I=o,t.H=(s&240)>>4,t.K=(a&128)>0,t.o=(s&15)+1,t.m=(u&63)+1,e.g=e.h[n]}}}return[]}function ds(e,t){for(var n=[],r=0;r<8;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function S0(e,t,n){var r=[];t=m(ds(e,t));for(var i=t.next();!i.done;i=t.next()){i=i.value;var a=e.h[i];a.isVisible()&&(a=qi(a,n,e.i))&&r.push(a),e.h[i]=null}return r}function x0(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function A0(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],WA[e<<2|t<<1|n]}var k0=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),WA="black blue green cyan red magenta yellow white".split(" ");function Fa(){this.h=[],this.g=[],this.i=new VA,this.l=0,this.m=new Map([["CC1",new Dl(0,0)],["CC2",new Dl(0,1)],["CC3",new Dl(1,0)],["CC4",new Dl(1,1)]]),this.u=this.o=0,this.j=new Map,this.C=!0,this.B=new Set,nh(this)}Fa.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,nh(this),e=m(this.j.values());for(var t=e.next();!t.done;t=e.next())x0(t.value)};function nh(e){e.o=0,e.u=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,ls(n.i),ls(n.j),ls(n.o);e.C=!0}Fa.prototype.extract=function(e,t){if(this.C){for(var n=m(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.C=!1}if(e=new We(e,0),!(e.getLength()<8)&&e.Z()===181&&e.Ca()===49&&e.U()===1195456820&&e.Z()===3&&(n=e.Z(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var i=e.Z(),a=(i&4)>>2,o=e.Z(),s=e.Z();a&&(i&=3,i===0||i===1?this.h.push({pts:t,type:i,Cb:o,mc:s,order:this.h.length}):(this.g.push({pts:t,type:i,value:o,order:this.g.length}),this.g.push({pts:t,type:2,value:s,order:this.g.length})))}},Fa.prototype.decode=function(){function e(i,a){return i.pts-a.pts||i.order-a.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),r=n.next();!r.done;r=n.next())(r=zA(this,r.value))&&t.push(r);for(n=m(this.g),r=n.next();!r.done;r=n.next())HA(this.i,r.value);for(n=m(this.i.i),r=n.next();!r.done;r=n.next())r=XA(this,r.value),t.push.apply(t,H(r));return this.i.i=[],this.h=[],this.g=[],t};function zA(e,t){var n=t.type;if((t.Cb&112)===16){var r=t.Cb>>3&1;n===0?e.o=r:e.u=r}if(r="CC"+((n<<1|(n?e.u:e.o))+1),n=e.m.get(r),t.Cb===255&&t.mc===255||!t.Cb&&!t.mc||!I0(t.Cb)||!I0(t.mc))return++e.l>=45&&nh(e),null;e.l=0,t.Cb&=127,t.mc&=127;var i=t.Cb;if(i>=1&&i<=15||!t.Cb&&!t.mc)return null;if(i=null,(t.Cb&112)===16)e:{if(e.B.add(r),r=t.Cb,e=t.mc,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1],r="white",i=!1;var a=null,o=e>95?e-96:e-64;o<=13?r=w0[Math.floor(o/2)]:o<=15?i=!0:a=Math.floor((o-16)/2),e=(e&1)===1,n.h!==4&&(o=n.g,n.h===3&&t!==o.g&&(n=1+t-o.h,g0(o,n,1+o.g-o.h,o.h),Vr(o,0,n-1),Vr(o,t+1,15-t)),o.g=t,o.m=e,o.j=i,o.l=r,o.u=a,o.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",Ba(n.g,0,32),r=!1,t=w0[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",(r&7)===0&&(t=BA[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)Ba(n.g,1,e);else if((r&246)===18&&(e&224)===32)Ba(n.g,r&1?3:2,e);else{if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.mc){case 32:y0(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=Qf(n,2,e);break;case 38:r=Qf(n,3,e);break;case 39:r=Qf(n,4,e);break;case 40:Ba(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:ls(n.o),b0(n);break;case 43:b0(n);break;case 44:t=n.i,r=null,n.h!==4&&(r=Ml(t,n.l,e)),Vr(t,0,15);break;case 45:t=n.g,n.h!==3?r=null:(r=Ml(t,n.l,e),i=t.g-t.h+1,g0(t,i-1,i,t.h),Vr(t,0,i-1),Vr(t,t.g,15-t.g),n.l=e);break;case 46:Vr(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=Ml(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,y0(n),n.l=e,r=t}i=r;break e}(r==23||r==31)&&e>=33&&e<=35&&(n.g.B=e-32)}i=null}else e=t.mc,Ba(n.g,0,t.Cb),Ba(n.g,0,e);return i}function XA(e,t){var n=[];try{for(;t.Ka();){var r=wt(t).value,i=(r&224)>>5,a=r&31;if(i===7&&a!=0&&(i=wt(t).value&63),i!=0){e.B.add("svc"+i),e.j.has(i)||e.j.set(i,new GA(i));for(var o=e.j.get(i),s=t.Pa();t.Pa()-s<a;){i=o;var u=t,l=wt(u),c=l.value,d=l.pts;if(c===16){var h=wt(u);c=c<<16|h.value}if(c>=0&&c<=31)var p=KA(i,u,c,d);else if(c>=128&&c<=159)p=qA(i,u,c,d);else{if(c>=4096&&c<=4127)i=u,u=c&255,u>=8&&u<=15?i.skip(1):u>=16&&u<=23?i.skip(2):u>=24&&u<=31&&i.skip(3);else if(c>=4224&&c<=4255)i=u,u=c&255,u>=128&&u<=135?i.skip(4):u>=136&&u<=143&&i.skip(5);else if(c>=32&&c<=127)u=c,i.g&&(u===127?pi(i.g,"♪"):pi(i.g,String.fromCharCode(u)));else if(c>=160&&c<=255)i.g&&pi(i.g,String.fromCharCode(c));else if(c>=4128&&c<=4223){if(u=c&255,i.g)if(k0.has(u)){var g=k0.get(u);pi(i.g,g)}else pi(i.g,"_")}else c>=4256&&c<=4351&&i.g&&((c&255)!=160?pi(i.g,"_"):pi(i.g,"[CC]"));p=[]}n.push.apply(n,H(p))}}}}catch(v){if(v instanceof M&&v.code===3e3)Xr("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw v}return n}function I0(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}Fa.prototype.getStreams=function(){return Array.from(this.B)},q("shaka.cea.CeaDecoder",Fa),Ei=function(){return new Fa};function E0(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(H(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var i=0;e[r]==255;)i+=255,r++;i+=e[r++],n==4&&t.push(e.subarray(r,r+i)),r+=i}return t}function Rl(){this.j=new Map,this.i=this.h=0,this.g=rh}Rl.prototype.init=function(e){function t(a){a=a.name,Pl.has(a)&&(n.g=Pl.get(a))}var n=this,r=[],i=[];if(new Fe().box("moov",he).box("mvex",he).S("trex",function(a){var o=a.reader;o.skip(4),o.skip(4),a=o.U(),o=o.U(),n.h=a,n.i=o}).box("trak",he).S("tkhd",function(a){var o=a.reader;a=a.version,a==1?(o.skip(8),o.skip(8)):(o.skip(4),o.skip(4));var s=o.U();a==1?o.skip(8):o.skip(4),o.skip(4),o.skip(8),o.skip(2),o.skip(2),o.skip(2),o.skip(2),o.skip(36),o.Ca(),o.Ca(),o.Ca(),o.Ca(),r.push(s)}).box("mdia",he).S("mdhd",function(a){a=ku(a.reader,a.version),i.push(a.timescale)}).box("minf",he).box("stbl",he).S("stsd",Pr).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",dn).box("sinf",he).box("frma",function(a){a=Sd(a.reader).codec,Pl.has(a)&&(n.g=Pl.get(a))}).parse(e,!0,!0),!r.length||!i.length||r.length!=i.length)throw new M(2,2,2010);this.g==rh&&Ae("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(a,o){n.j.set(a,i[o])})},Rl.prototype.parse=function(e){var t=this;if(this.g==rh)return[];var n=[],r=0,i=[];return new Fe().box("moof",function(a){r=a.start,i=[],he(a)}).box("traf",function(a){i.push({baseMediaDecodeTime:null,Xd:t.h,Yd:t.i,Ii:[],timescale:9e4}),he(a)}).S("trun",function(a){var o=i[i.length-1];a=Iu(a.reader,a.version,a.flags),o.Ii.push(a)}).S("tfhd",function(a){var o=i[i.length-1];a=xu(a.reader,a.flags),o.Xd=a.Xd||t.h,o.Yd=a.Yd||t.i,a=a.trackId,t.j.has(a)&&(o.timescale=t.j.get(a))}).S("tfdt",function(a){var o=i[i.length-1];a=Au(a.reader,a.version),o.baseMediaDecodeTime=a.baseMediaDecodeTime}).box("mdat",function(a){for(var o=r-a.start-8,s=a.reader.Pa(),u=m(i),l=u.next();!l.done;l=u.next())l=l.value,l.baseMediaDecodeTime===null?Ae("Unable to find base media decode time for CEA captions!"):(a.reader.seek(s),YA(t,a.reader,l.baseMediaDecodeTime,l.timescale,l.Xd,l.Yd,o,l.Ii,n))}).parse(e,!1,!0),n};function YA(e,t,n,r,i,a,o,s,u){var l=0,c=a,d=s.map(function(g){return g.mh});for(d=[].concat.apply([],H(d)),d.length&&(c=d[0].sampleSize||a),t.skip(o+s[0].qg);t.Ka();){o=t.U();var h=t.Z(),p=null;switch(p=!1,s=1,e.g){case fs:p=h&31,p=p==6;break;case hs:s=2,t.skip(1),p=h>>1&63,p=p==39||p==40;break;case ps:s=2,t.skip(1),p=h>>1&63,p=p==23||p==24;break;default:return}if(p)for(h=0,l<d.length&&(h=d[l].Gf||0),h=(n+h)/r,s=t.Tb(o-s,!1),s=m(E0(s)),p=s.next();!p.done;p=s.next())u.push({packet:p.value,pts:h});else try{t.skip(o-s)}catch{break}c-=o+4,c==0&&(n=l<d.length?n+(d[l].nh||i):n+i,l++,l<d.length?c=d[l].sampleSize||a:c=a)}}q("shaka.cea.Mp4CeaParser",Rl);var rh=0,fs=1,hs=2,ps=3,Pl=new Map().set("avc1",fs).set("avc3",fs).set("dvav",fs).set("dva1",fs).set("hev1",hs).set("hvc1",hs).set("dvh1",hs).set("dvhe",hs).set("vvc1",ps).set("vvi1",ps).set("dvc1",ps).set("dvi1",ps);zc("video/mp4",function(){return new Rl});function Ll(){this.g=null}Ll.prototype.init=function(){},Ll.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Ke;var t=[];if(e=oe(e),!Sa(e))return t;e=this.g.parse(e);var n=e.Zd(),r=e.ef();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var i=m(E0(r.data)),a=i.next();!a.done;a=i.next())t.push({packet:a.value,pts:r.time});return t},q("shaka.cea.TsCeaParser",Ll),zc("video/mp2t",function(){return new Ll});function JA(e){var t=0,n=Zt(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+4+2,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,(i&1)!=0||i+e>n.byteLength){n=[];break e}var a=oe(n,e,i);t.push({type:r,value:a}),e+=i}n=t}return n}function C0(e){return e=Rn(ut(e)),e=JA(e).filter(function(t){return t.type===$A})[0],e?(e=Jr(e.value,!0),(e=Di(e,"WRMHEADER"))?e:null):null}function Nl(e){try{var t=C0(e);if(t)e:{for(var n=m(ir(t,"DATA")),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.children)for(var a=m(i.children),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.tagName=="LA_URL"){var u=ut(s);break e}}}u=""}else u="";return u}catch{return""}}var $A=1;function M0(){this.g=new Map}M0.prototype.release=function(){this.g.clear()};function D0(e,t,n,r){var i=ek(e,t),a=null;e=[];var o=[];t=null;var s=new Set(i.map(function(l){return l.keyId}));s.delete(null);var u="cenc";if(s.size>1)throw new M(2,4,4010);if(!n){if(o=i.filter(function(l){return l.Id=="urn:mpeg:dash:sea:2012"}),o.length>1)throw new M(2,4,4050);o.length&&(t=nk(o[0])),(o=i.find(function(l){return l.Id=="urn:mpeg:dash:mp4protection:2011"}))&&o.encryptionScheme&&(u=o.encryptionScheme),o=i.filter(function(l){return l.Id=="urn:mpeg:dash:mp4protection:2011"?(a=l.init||a,!1):l.Id!="urn:mpeg:dash:sea:2012"}),o.length&&(e=ZA(a,u,o,r,s),e.length==0&&(e=[xr("",u,a)]))}if(i.length&&!t&&(n||!o.length))for(e=[],n=m(Object.values(r)),r=n.next();!r.done;r=n.next())r=r.value,r!="org.w3.clearkey"&&(r=xr(r,u,a),e.push(r));if(s=Array.from(s)[0]||null)for(u=m(e),n=u.next();!n.done;n=u.next())for(n=m(n.value.initData),r=n.next();!r.done;r=n.next())r.value.keyId=s;return{Yh:s,Em:a,drmInfos:e,hg:t,ci:!0}}function QA(e,t,n,r,i){var a=D0(e,t,r,i);if(n.ci)e=n.drmInfos.length==1&&!n.drmInfos[0].keySystem,t=a.drmInfos.length==0,(n.drmInfos.length==0||e&&!t)&&(n.drmInfos=a.drmInfos),n.ci=!1;else if(a.drmInfos.length>0&&(n.drmInfos=n.drmInfos.filter(function(o){return a.drmInfos.some(function(s){return s.keySystem==o.keySystem})}),n.drmInfos.length==0))throw new M(2,4,4008);return a.Yh||n.Yh}function Ul(e){var t=Pn(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=ut(t)))return t;if((t=Pn(e.node,"urn:microsoft:playready","pro"))&&ut(t))return Nl(t);if((e=Pn(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=ut(e))){t=Rn(e),e=8,t=Zt(t);var n=t.getUint8(e);return e+=20,n>0&&(e+=4+16*t.getUint32(e)),e=oe(t,e+4),e=zs(e),e=Di("<pro>"+e+"</pro>"),Nl(e)}return""}function ZA(e,t,n,r,i){var a=[];n=m(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var s=r[o.Id];if(s){var u;if((u=Pn(o.node,"urn:microsoft:playready","pro"))&&ut(u)){u=ut(u),u=Rn(u);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);u=[{initData:Tu(u,l,new Set,0),initDataType:"cenc",keyId:o.keyId}]}else u=null;if(l=null,o.Id==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){l=o;var c=i;if(c.size==0)l=null;else{var d=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),h=new Uint8Array([]);l=[{initData:Tu(h,d,c,1),initDataType:"cenc",keyId:l.keyId}]}}u=xr(s,t,o.init||e||u||l),(s=rk.get(s))&&(u.licenseServerUri=s(o));e:{if((o=Pn(o.node,"https://dashif.org/CPS","Certurl"))&&(o=ut(o)))break e;o=""}u.serverCertificateUri=o,a.push(u)}}return a}function ek(e,t){var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next())(r=tk(e,r.value))&&n.push(r);return n}function tk(e,t){var n=t.attributes.schemeIdUri,r=Ar(t,"urn:mpeg:cenc:2013","default_KID"),i=og(t,"urn:mpeg:cenc:2013","pssh").map(Wt),a=t.attributes.value;if(!n)return null;if(n=n.toLowerCase(),r&&(r=r.replace(/-/g,"").toLowerCase(),r.includes(" ")))throw new M(2,4,4009);var o=[];try{o=i.map(function(s){if(!e.g.has(s)){var u=Rn(s);e.g.set(s,u)}return{initDataType:"cenc",initData:e.g.get(s),keyId:null}})}catch{throw new M(2,4,4007)}return{node:t,Id:n,keyId:r,init:o.length>0?o:null,encryptionScheme:a}}function nk(e){if(!U.crypto||!U.crypto.subtle)throw Ae("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new M(2,4,4042);var t=Pn(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new M(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new M(2,4,4051);if(t=Pn(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new M(2,4,4051);if(e=t.attributes.IV,t=qt(t.attributes.keyUriTemplate),!e||!t)throw new M(2,4,4051);if(e=ki(e.substr(2)),e.byteLength!=16)throw new M(2,4,4048);return{wk:t,iv:e}}var rk=new Map().set("com.apple.fps",function(e){if(U.shakaMediaKeysPolyfill==="apple")throw new M(2,4,4054);return(e=Pn(e.node,"https://dashif.org/CPS","Laurl"))&&(e=ut(e))?e:""}).set("com.widevine.alpha",function(e){var t=Pn(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ut(t))?t:(e=Pn(e.node,"urn:microsoft","laurl"))&&qt(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Ul).set("com.microsoft.playready.recommendation",Ul).set("com.microsoft.playready.software",Ul).set("com.microsoft.playready.hardware",Ul).set("org.w3.clearkey",function(e){var t=Pn(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=ut(t))?t:(e=Pn(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=ut(e))?e:""});function gs(e,t,n,r,i,a){var o=new Map().set("RepresentationID",t).set("Number",n).set("SubNumber",r).set("Bandwidth",i).set("Time",a);return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(s,u,l,c){if(s=="$$")return"$";var d=o.get(u);if(d==null)return s;switch(u=="RepresentationID"&&l&&(l=void 0),u=="Time"&&typeof d!="bigint"&&(Math.abs(d-Math.round(d))>=.2&&Ae("Calculated $Time$ values must be close to integers"),d=Math.round(d)),c){case void 0:case"d":case"i":case"u":s=d.toString();break;case"o":s=d.toString(8);break;case"x":s=d.toString(16);break;case"X":s=d.toString(16).toUpperCase();break;default:s=d.toString()}return l=U.parseInt(l,10)||1,Array(Math.max(0,l-s.length)+1).join("0")+s})}function R0(e,t){var n=$n(e,t,"timescale"),r=1;n&&(r=fr(n)||1),n=$n(e,t,"duration");var i=(n=fr(n||""))?n/r:null,a=$n(e,t,"startNumber"),o=Number($n(e,t,"presentationTimeOffset"))||0,s=Mt(a||"");if((a==null||s==null)&&(s=1),a=null,t=Va(e,t,"SegmentTimeline")){t=_e(t,"S"),a=r,e=e.na.duration||1/0;for(var u=s,l=[],c=-o,d=0;d<t.length;++d){var h=t[d],p=t[d+1],g=se(h,"t",Mt),v=se(h,"d",Mt),y=se(h,"r",Ct);if(h=se(h,"k",Ct)||0,g!=null&&(g-=o),v){if(g=g??c,y=y||0,y<0)if(p){if(p=se(p,"t",Mt),p==null||g>=p)break;y=Math.ceil((p-g)/v)-1}else{if(e==1/0||g/a>=e)break;y=Math.ceil((e*a-g)/v)-1}for(l.length>0&&g!=c&&(l[l.length-1].end=g/a),p=0;p<=y;++p)c=g+v,l.push({start:g/a,Md:g,end:c/a,Jh:c,xc:h,Vk:l.length+u}),g=c}}a=l}return{timescale:r,Qf:n,gb:i,ve:s,hc:o/r||0,gd:o,timeline:a}}function P0(e,t){return[t(e.L),t(e.qa),t(e.ua)].filter(ni)}function $n(e,t,n){t=P0(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function Va(e,t,n){t=P0(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=ze(r.value,n));r=t.next());return e}function ik(e,t,n,r,i,a){for(var o=Ar(e,"http://www.w3.org/1999/xlink","href"),s=Ar(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=m(Object.keys(e.attributes)),l=u.next();!l.done;l=u.next()){l=l.value;var c=l.split(":"),d=Yc("http://www.w3.org/1999/xlink");c[0]==d&&delete e.attributes[l]}if(a>=5)return ri(new M(2,4,4028));if(s!="onLoad")return ri(new M(2,4,4027));var h=At([r],[o]);return i.request(0,ht(h,t)).Xa(function(p){if(p=mo(p.data,e.tagName),!p)return ri(new M(2,4,4001,o));for(e.children=[];p.children.length;){var g=p.children.shift();e.children.push(g)}g=m(Object.keys(p.attributes));for(var v=g.next();!v.done;v=g.next())v=v.value,e.attributes[v]=p.attributes[v];return _l(e,t,n,h[0],i,a+1)})}function _l(e,t,n,r,i,a){if(a=a===void 0?0:a,Ar(e,"http://www.w3.org/1999/xlink","href")){var o=ik(e,t,n,r,i,a);return n&&(o=o.Xa(void 0,function(){return _l(e,t,n,r,i,a)})),o}o=[];for(var s=m(ag(e)),u=s.next(),l={};!u.done;l={Ud:void 0},u=s.next())l.Ud=u.value,Ar(l.Ud,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter((function(c){return function(d){return d!==c.Ud}})(l)):l.Ud.tagName!="SegmentTimeline"&&o.push(_l(l.Ud,t,n,r,i,a));return Vg(o).Xa(function(){return e})}function ak(e,t,n,r,i,a,o,s){var u,l=new Fe().S("sidx",function(c){u=ok(t,r,i,a,o,n,c,s)});if(e&&l.parse(e),u)return u;throw new M(2,3,3004)}function ok(e,t,n,r,i,a,o,s){s=s===void 0?!1:s;var u=[];o.reader.skip(4);var l=o.reader.U();if(l==0)throw new M(2,3,3005);if(o.version==0)var c=o.reader.U(),d=o.reader.U();else c=o.reader.Fd(),d=o.reader.Fd();o.reader.skip(2);var h=o.reader.Ca();for(e=(s?-o.size:e)+o.size+d,s=0;s<h;s++){var p=o.reader.U();d=(p&2147483648)>>>31,p&=2147483647;var g=o.reader.U();if(o.reader.skip(4),d==1)throw new M(2,3,3006);u.push(new ee(c/l+n,(c+g)/l+n,function(){return a},e,e+p-1,t,n,r,i)),c+=g,e+=p}return o.parser.stop(),u}function gi(e){this.h=Zt(e),this.g=new We(this.h,0)}gi.prototype.Ka=function(){return this.g.Ka()};function Hr(e){var t=L0(e);if(t.length>7)throw new M(2,3,3002);var n=0;t=m(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=L0(e);e:{r=m(sk);for(var i=r.next();!i.done;i=r.next())if(wr(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.Pa();else{if(t.length==8&&t[1]&224)throw new M(2,3,3001);for(i=r=0;i<t.length;i++){var a=t[i];r=i==0?a&(1<<8-t.length)-1:256*r+a}t=r}return t=e.g.Pa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Pa(),r=Zt(e.h,e.g.Pa(),t),e.g.skip(t),new uk(n,r)}function L0(e){var t=e.g.Pa(),n=e.g.Z();if(n==0)throw new M(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),oe(e.h,t,n)}var sk=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function uk(e,t){this.id=e,this.g=t}function ih(e){if(e.g.byteLength>8)throw new M(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new M(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function lk(e,t,n,r,i,a,o){if(t=new gi(t),Hr(t).id!=440786851)throw new M(2,3,3008);var s=Hr(t);if(s.id!=408125543)throw new M(2,3,3009);t=s.g.byteOffset,s=new gi(s.g);for(var u=null;s.Ka();){var l=Hr(s);if(l.id==357149030){u=l;break}}if(!u)throw new M(2,3,3010);for(u=new gi(u.g),l=1e6,s=null;u.Ka();){var c=Hr(u);if(c.id==2807729)l=ih(c);else if(c.id==17545)if(c.g.byteLength==4)s=c.g.getFloat32(0);else if(c.g.byteLength==8)s=c.g.getFloat64(0);else throw new M(2,3,3003)}if(s==null)throw new M(2,3,3011);if(u=l/1e9,s*=u,e=Hr(new gi(e)),e.id!=475249515)throw new M(2,3,3007);return ck(e,t,u,s,n,r,i,a,o)}function ck(e,t,n,r,i,a,o,s,u){function l(){return i}var c=[];e=new gi(e.g);for(var d=null,h=null;e.Ka();){var p=Hr(e);if(p.id==187){var g=dk(p);g&&(p=n*g.ol,g=t+g.Nk,d!=null&&c.push(new ee(d+o,p+o,l,h,g-1,a,o,s,u)),d=p,h=g)}}return d!=null&&c.push(new ee(d+o,r+o,l,h,null,a,o,s,u)),c}function dk(e){var t=new gi(e.g);if(e=Hr(t),e.id!=179)throw new M(2,3,3013);if(e=ih(e),t=Hr(t),t.id!=183)throw new M(2,3,3012);t=new gi(t.g);for(var n=0;t.Ka();){var r=Hr(t);if(r.id==241){n=ih(r);break}}return{ol:e,Nk:n}}function N0(e,t,n){if(t=Va(e,t,"Initialization"),!t)return null;var r=e.L.bb(),i=t.attributes.sourceURL;i&&(r=At(r,[qt(i)],e.Lb())),i=0;var a=null;return(t=se(t,"range",Qs))&&(i=t.start,a=t.end),n=new nn(function(){return r},i,a,O0(e),null,null,n,e.qa.encrypted),n.codecs=e.L.codecs,n.mimeType=e.L.mimeType,e.na&&!e.na.kf&&(n.g=e.na.start+e.na.duration),n}function fk(e,t,n){var r=Number($n(e,Ha,"presentationTimeOffset"))||0,i=$n(e,Ha,"timescale"),a=1;i&&(a=fr(i)||1);var o=r/a||0,s=N0(e,Ha,n);hk(e,s);var u=Qr(e);return{endTime:-1,timeline:-1,Sc:function(){var l=Va(u,Ha,"RepresentationIndex"),c=u.L.bb();return l&&(l=qt(l.attributes.sourceURL))&&(c=At(c,[l],u.Lb())),l=_0(u),U0(u,t,s,c,l.start,l.end,o)},timescale:a}}function U0(e,t,n,r,i,a,o){var s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E;return C(function(P){if(P.g==1)return s=e.presentationTimeline,u=!e.Eb||!e.na.kf,l=e.na.start,c=e.na.duration,d=e.L.mimeType.split("/")[1],h=t,p=null,g=[h(r,i,a,!1),d=="webm"?h(n.P(),n.startByte,n.endByte,!0):null],h=null,b(P,Promise.all(g),2);for(v=P.h,y=v[0],T=v[1]||null,w=null,S=l-o,k=l,D=c?l+c:1/0,x=e.L.bb(),I=x.length!=r.length||x.some(function(L,B){return L!=r[B]}),w=d=="mp4"?ak(y,i,x,n,S,k,D,I):lk(y,T,x,n,S,k,D),A=m(w),R=A.next();!R.done;R=A.next())E=R.value,E.codecs=e.L.codecs,E.mimeType=e.L.mimeType,E.bandwidth=e.bandwidth;return s.me(w),p=new Me(w),u&&p.pd(k,D,!0),P.return(p)})}function Ha(e){return e.Jd}function _0(e){var t=Va(e,Ha,"RepresentationIndex");return e=$n(e,Ha,"indexRange"),e=Qs(e||""),t&&(e=se(t,"range",Qs,e)),e}function hk(e,t){if(j0(e,t),!_0(e))throw new M(2,4,4002)}function j0(e,t){var n=e.L.mimeType.split("/")[1];if(e.L.contentType!=me&&n!="mp4"&&n!="webm")throw new M(2,4,4006);if(n=="webm"&&!t)throw new M(2,4,4005)}function O0(e){var t=e.L;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.yf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.qa.label||null,roles:e.roles||null,language:e.qa.language||null}}function pk(e,t,n){var r=N0(e,B0,n),i=gk(e);if(!i.gb&&!i.timeline&&i.zd.length>1)throw new M(2,4,4002);if(!i.gb&&!e.na.duration&&!i.timeline&&i.zd.length==1)throw new M(2,4,4002);if(i.timeline&&i.timeline.length==0)throw new M(2,4,4002);var a=null,o=null;e.ua.id&&e.L.id&&(o=t.get(e.ua.id+","+e.L.id))&&(a=o.segmentIndex);var s=mk(e.na.start,e.na.duration,e.L.bb,i,r,n,e.L.mimeType,e.L.codecs,e.bandwidth,e.Lb);return t=!a,a?a.ke(s,e.presentationTimeline.Hb()):a=new Me(s),e.presentationTimeline.me(s),e.Eb&&e.na.kf||a.pd(e.na.start,e.na.duration?e.na.start+e.na.duration:1/0,t),o&&(o.segmentIndex=a),{endTime:-1,timeline:-1,Sc:function(){return a&&a.getNumReferences()!=0||a.tf(s),Promise.resolve(a)},timescale:i.timescale}}function B0(e){return e.Bc}function gk(e){var t=vk(e);e=R0(e,B0);var n=e.ve;n==0&&(n=1);var r=0;return e.gb?r=e.gb*(n-1):e.timeline&&e.timeline.length>0&&(r=e.timeline[0].start),{gb:e.gb,startTime:r,ve:n,hc:e.hc,timescale:e.timescale,timeline:e.timeline,zd:t}}function mk(e,t,n,r,i,a,o,s,u,l){var c=r.zd.length;r.timeline&&r.timeline.length!=r.zd.length&&(c=Math.min(r.timeline.length,r.zd.length));for(var d=e-r.hc,h=t?e+t:1/0,p=[],g=r.startTime,v={},y=0;y<c;v={Sf:void 0,Hf:void 0},y++){v.Hf=r.zd[y];var T=g;g=void 0,g=r.gb!=null?T+r.gb:r.timeline?r.timeline[y].end:T+t,v.Sf=null,v=new ee(e+T,e+g,(function(w){return function(){return w.Sf==null&&(w.Sf=At(n(),[w.Hf.Ck],l())),w.Sf}})(v),v.Hf.start,v.Hf.end,i,d,e,h,[],"",null,null,Lr,a),v.codecs=s,v.mimeType=o,v.bandwidth=u,p.push(v)}return p}function vk(e){return[e.L.Bc,e.qa.Bc,e.ua.Bc].filter(ni).map(function(t){return _e(t,"SegmentURL")}).reduce(function(t,n){return t.length>0?t:n}).map(function(t){t.attributes.indexRange&&!e.Og&&(e.Og=!0);var n=qt(t.attributes.media);return t=se(t,"mediaRange",Qs,{start:0,end:null}),{Ck:n,start:t.start,end:t.end}})}function F0(e,t,n,r,i,a,o,s,u,l){u||e.L.hf||(e.L.hf=$n(e,mi,"initialization"));var c=e.L.hf?Tk(e,o):null,d=yk(e);bk(d);var h=Qr(e);if(d.fe)return j0(e,c),{endTime:-1,timeline:-1,Sc:function(){var T=gs(d.fe,h.L.originalId,null,null,h.bandwidth||null,null);return T=At(h.L.bb(),[T]),U0(h,t,c,T,0,null,d.hc)},timescale:d.timescale};if(d.gb)return r||e.qa.contentType==="image"||e.qa.contentType==="text"||(r=e.na.start,l=e.ua.id,n=e.na.duration,l=(l=l!=null&&a.get(l)||n)?r+l:1/0,e.presentationTimeline.Wg(d.gb),e.presentationTimeline.Gi(r,l)),{endTime:-1,timeline:-1,Sc:function(){return wk(h,d,i,c,a,o,s,e.L.If)},timescale:d.timescale};var p=null;r=r=null,e.ua.id&&e.L.id&&(r=e.ua.id+","+e.L.id,r=n.get(r))&&(p=r.segmentIndex);var g=e.na.start,v=e.na.duration?g+e.na.duration:1/0;if(p)l=p,V0(l,d,g,v,c,e.Eb),l.Ya(e.presentationTimeline.Hb());else{if(n=0,u=-1,e.ua.id!=null&&e.L.id!=null){var y=l.get(e.ua.id);if(y)u=y.timeline;else for(l=m(l.values()),y=l.next();!y.done;y=l.next())if(y=y.value,Math.abs(d.hc-y.endTime)<=$p&&y.gh.includes(e.L.id)){u=y.timeline;break}else y.timeline>=n&&(n=y.timeline+1)}u==-1&&(u=n),p=new ms(e.Eb,d,e.L.originalId,e.bandwidth,e.L.bb,e.Lb,g,v,c,o,e.L.If,u)}return d.timeline&&e.qa.contentType!=="image"&&e.qa.contentType!=="text"&&e.presentationTimeline.Hi(p.h?p.h.timeline:[],g),r&&e.Eb&&(r.segmentIndex=p),r=(r=(r=d.timeline)&&r[r.length-1])?r.end+d.hc:-1,l=-1,p instanceof ms&&(l=p.We()),{endTime:r,timeline:l,Sc:function(){return p instanceof ms&&p.getNumReferences()==0&&V0(p,d,g,v,c,e.Eb),Promise.resolve(p)},timescale:d.timescale}}function mi(e){return e.Oc}function yk(e){var t=R0(e,mi),n=$n(e,mi,"media"),r=$n(e,mi,"index"),i=$n(e,mi,"k"),a=0;return i&&(a=parseInt(i,10)),{Qf:t.Qf,gb:t.gb,timescale:t.timescale,ve:t.ve,hc:t.hc,gd:t.gd,timeline:t.timeline,dc:n&&qt(n),fe:r,mimeType:e.L.mimeType,codecs:e.L.codecs,bandwidth:e.bandwidth,Dk:a}}function bk(e){var t=e.fe?1:0;if(t+=e.timeline?1:0,t+=e.gb?1:0,t==0)throw new M(2,4,4002);if(t!=1&&(e.fe&&(e.timeline=null),e.Qf=null,e.gb=null),!e.fe&&!e.dc)throw new M(2,4,4002)}function wk(e,t,n,r,i,a,o,s){function u(L){var B=L-y,O=B*v,N=t.Qf,_=B*N;"BigInt"in U&&_>Number.MAX_SAFE_INTEGER&&(_=BigInt(B)*BigInt(N)),O+=h,B=O+v,N=Math.min(B,c());var F=[],V=t.Dk;if(V)for(var ue=(N-O)/V,z={},Re=0;Re<V;z={bj:void 0},Re++){var fe=O+ue*Re,je=fe+ue;z.bj=Re,z=new ee(fe,je,(function(Se){return function(){var ye=gs(T,S,L,Se.bj,w,_);return At(k(),[ye],D())}})(z),0,null,r,x,h,c(),[],"",null,null,Lr,a),z.codecs=e.L.codecs,z.mimeType=e.L.mimeType,s==0?Re>0&&z.xd():Re%s!=0&&z.xd(),F.push(z)}return O=new ee(O,N,function(){if(V)return[];var Se=gs(T,S,L,null,w,_);return At(k(),[Se],D())},0,null,r,x,h,c(),F,"",null,null,Lr,a,F.length>0),O.codecs=e.L.codecs,O.mimeType=e.L.mimeType,O.bandwidth=e.bandwidth,O.j=B,O}function l(){var L=[Math.max(d.Hb(),h),Math.min(d.Jc(),c())].map(function(B){return B-h});return L=[Math.ceil(L[0]/v),Math.ceil(L[1]/v)-1],e.L.rb&&L[1]++,L.map(function(B){return B+y})}function c(){var L=p!=null&&i.get(p)||g;return L?h+L:1/0}var d=e.presentationTimeline,h=e.na.start,p=e.ua.id,g=e.na.duration,v=t.gb,y=t.ve,T=t.dc,w=e.bandwidth||null,S=e.L.originalId,k=e.L.bb,D=e.Lb,x=h-t.hc,I=l();n=e.Eb?Math.max(I[0],I[1]-n+1):I[0],o=o||I[1],I=[];for(var A=n;A<=o;++A){var R=u(A);I.push(R)}var E=new Me(I);if(I=d.Jc()<c(),A=d.W(),I||A){var P=Math.max(n,o+1);n=v,e.L.rb&&(n=.1),E.Rf(n,function(){var L=d.Hb();E.Ya(L);var B=m(l());B.next(),B=B.next().value;for(var O=[];P<=B;){var N=u(P);O.push(N),P++}return L>c()&&!O.length?null:O})}return Promise.resolve(E)}function Tk(e,t){var n=e.L.hf;if(n||(n=$n(e,mi,"initialization")),!n)return null;n=qt(n);var r=e.L.originalId,i=e.bandwidth||null,a=e.L.bb,o=e.Lb;return t=new nn(function(){var s=gs(n,r,null,null,i,null);return At(a(),[s],o())},0,null,O0(e),null,null,t,e.qa.encrypted),t.codecs=e.L.codecs,t.mimeType=e.L.mimeType,e.na&&!e.na.kf&&(t.g=e.na.start+e.na.duration),t}function ms(e,t,n,r,i,a,o,s,u,l,c,d){Me.call(this,[]),this.F=e,this.h=t,this.H=n,this.C=r,this.G=i,this.J=a,this.j=o,this.l=s,this.u=u,this.B=l,this.I=c,this.K=d,ah(this)}it(ms,Me),f=ms.prototype,f.getNumReferences=function(){return this.h?this.h.timeline.length:0},f.release=function(){Me.prototype.release.call(this),this.h=null},f.Ya=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.j<=e;r+=1)t+=1;t>0&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function V0(e,t,n,r,i,a){if(Sk(e,i),e.F=a,e.h){if(e.h.gd!==t.gd)for(n=t.gd-e.h.gd,i=0;i<t.timeline.length;i++)a=t.timeline[i],a.Md+=n,a.Jh+=n,a.start=(a.Md+n)/t.timescale,a.end=(a.Jh+n)/t.timescale;if(e.h.dc!==t.dc&&(e.h.dc=t.dc),n=e.h.timeline,n.length){var o=n[n.length-1];t=t.timeline.filter(function(s){return s.end>o.end})}else t=t.timeline.slice();t.length>0&&e.h.timeline.push.apply(e.h.timeline,H(t)),e.l!==r&&(e.l=r)}else e.h=t,e.j=n,e.l=r;ah(e)}function Sk(e,t){if(e.u!==t){e.u=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&xm(n,t)}}function ah(e){if(e.h&&!e.o){for(var t=[],n=m(e.h.timeline),r=n.next();!r.done;r=n.next())r=r.value,r.start>=e.l||r.end<=0||t.push(r);e.h.timeline=t,e.Ya(e.j)}}f.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var i=t[r],a=i.start+this.j;if(i=r<n?t[r+1].start+this.j:this.l===1/0?i.end+this.j:this.l,e>=a&&e<i)return r+this.i}return null},f.get=function(e){var t=this;if(e-=this.i,e<0||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){n=this.h.timeline[e];var r=n.Vk,i=n.Md+this.h.gd,a=this.j-this.h.hc,o=this.j+n.end,s=o;e===this.getNumReferences()-1&&this.l!==1/0&&(s=this.F&&Math.abs(s-this.l)>.1?Math.min(s,this.l):this.l);var u=this.h.codecs,l=this.h.mimeType,c=this.h.bandwidth,d=[],h=!1;if(n.xc&&this.h&&this.h.dc&&(h=this.h.dc.includes("$SubNumber$")),h){h=(n.end-n.start)/n.xc;for(var p={},g=0;g<n.xc;p={Tf:void 0,cj:void 0},g++){var v=n.start+h*g,y=v+h;p.cj=g,p.Tf=null,p=new ee(this.j+v,this.j+y,(function(T){return function(){return t.h?(T.Tf==null&&(T.Tf=H0(t.h.dc,t.H,r,t.C,i,T.cj,t.G,t.J)),T.Tf):[]}})(p),0,null,this.u,a,this.j,this.l,[],"",null,null,Lr,this.B),p.codecs=u,p.mimeType=l,p.bandwidth=c,this.I==0?g>0&&p.xd():g%this.I!=0&&p.xd(),d.push(p)}}n=new ee(this.j+n.start,s,function(){return d.length>0||!t.h?[]:H0(t.h.dc,t.H,r,t.C,i,null,t.G,t.J)},0,null,this.u,a,this.j,this.l,d,"",null,null,Lr,this.B,d.length>0),n.codecs=u,n.mimeType=l,n.j=o,n.bandwidth=c,this.g[e]=n}return n},f.Fb=function(e){ah(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}};function H0(e,t,n,r,i,a,o,s){return e=gs(e,t,n,a,r||null,i),At(o(),[e],s()).map(function(u){return u.toString()})}f.We=function(){return this.K};function Ga(e){this.o=null,this.B=e,this.H=new pa,this.i=[],this.h=null,this.m=[],this.C=null,this.G=[],this.F=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}Ga.prototype.configure=function(e){this.o=e},Ga.prototype.destroy=function(){return this.B=this.o=null,this.i=[],this.h=null,this.m=[],this.G=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.H.destroy()},Ga.prototype.setManifestType=function(e){this.u=e};function vs(e,t){var n,r,i,a,o,s,u;return C(function(l){if(l.g==1)return n=At(e.i,[xk(e,t)]),r=ht(n,e.o.retryParameters),i=e.B.networkingEngine.request(8,r),_i(e.H,i),le(l,2),b(l,i.promise,4);if(l.g!=2)return a=l.h,o=$e(a.data),s=JSON.parse(o),s.VERSION==1&&Ak(e,s,a.uri),pe(l,0);if((u=ce(l))&&u.code==7001)return l.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new ve(function(){vs(e,t)}),e.g.ka(e.F),G(l)})}function xk(e,t){if(!e.m.length)return t;t=new st(t);var n=e.C||e.m[0],r=Math.round(e.B.getBandwidthEstimate()),i=t.g;return e.u=="DASH"?(i.add("_DASH_pathway",n),i.add("_DASH_throughput",String(r))):e.u=="HLS"&&(i.add("_HLS_pathway",n),i.add("_HLS_throughput",String(r))),Wp(i)&&xi(t,i),t.toString()}function Ak(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new ve(function(){vs(e,r)}),(n=t.TTL)&&(e.F=n),e.g.ka(e.F),e.m=t["PATHWAY-PRIORITY"]||[],e.G=t["PATHWAY-CLONES"]||[]}function Ka(e,t,n,r){var i=e.l.get(t);i||(i=new Map),i.set(n,r),e.l.set(t,i)}Ga.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function ys(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],i=m(e.m),a=i.next(),o={};!a.done;o={Dd:void 0},a=i.next())if(o.Dd=a.value,a=t.get(o.Dd))r.push({ah:o.Dd,location:a});else if(a=e.G.find((function(u){return function(l){return l.Ol==u.Dd}})(o))){var s=t.get(a["BASE-ID"]);s&&(a["URI-REPLACEMENT"].oj?(s=new st(s),Hs(s,a["URI-REPLACEMENT"].oj),r.push({ah:o.Dd,location:s.toString()})):r.push({ah:o.Dd,location:s}))}for(i=Date.now(),o=m(e.j.keys()),a=o.next();!a.done;a=o.next())a=a.value,s=e.j.get(a),i>s&&e.j.delete(a);if(r=r.filter(function(u){for(var l=m(e.j.keys()),c=l.next();!c.done;c=l.next())if(c.value.includes(new st(u.location).Db))return!1;return!0}),r.length&&(e.C=r[0].ah),r=r.map(function(u){return u.location}),!r.length&&e.h)for(i=m(e.h.split(",")),o=i.next();!o.done;o=i.next())(o=t.get(o.value))&&(e.C=e.h,r.push(o));if(!r.length)for(t=m(t.values()),i=t.next();!i.done;i=t.next())r.push(i.value);return n?r:At(e.i,r)}function an(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.o=!1,this.m=new Set}f=an.prototype,f.release=function(){for(var e=m(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.o=!1,this.m.clear()},f.fk=function(){return this.l},f.Mg=function(){return this.j.slice()},f.Mj=function(){return this.i},f.Zh=function(e,t){if(e){if(e.type=="audio")for(var n=m(this.h),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(i){return i!==e});else if(e.type=="video")for(n=m(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(i){return i!==e}),r.trickModeVideo&&(r.trickModeVideo.matchedStreams=r.trickModeVideo.matchedStreams.filter(function(i){return i!==e})),r.dependencyStream&&(r.dependencyStream.matchedStreams=r.dependencyStream.matchedStreams.filter(function(i){return i!==e}));else if(e.type==me)for(n=m(this.j),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(i){return i!==e});else if(e.type=="image")for(n=m(this.i),r=n.next();!r.done;r=n.next())r=r.value,r.matchedStreams=r.matchedStreams.filter(function(i){return i!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function G0(e,t){var n=[],r=[],i=[],a=[];e=m(e);for(var o=e.next();!o.done;o=e.next()){var s=o.value;o=new Map(s.audioStreams.map(function(d){return[lh(d),d]}));var u=new Map(s.videoStreams.map(function(d){return[uh(d),d]})),l=new Map(s.textStreams.map(function(d){return[ws(d),d]}));if(s=new Map(s.imageStreams.map(function(d){return[Ts(d),d]})),t){var c=J0(me);l.set(ws(c),c),c=J0("image"),s.set(Ts(c),c)}n.push(o),r.push(u),i.push(l),a.push(s)}return{Sh:n,mj:r,hj:i,pi:a}}f.lg=function(e,t,n){n=n===void 0?!1:n;var r=this,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L,B,O,N,_,F,V,ue;return C(function(z){if(z.g==1){if(i=ft,!t&&e.length==1)return a=G0(e,!1),o=a.Sh,s=a.mj,u=a.hj,l=a.pi,r.h=Array.from(o[0].values()),r.g=Array.from(s[0].values()),r.j=Array.from(u[0].values()),r.i=Array.from(l[0].values()),z.A(2);for(c=n?r.m.size:0,d=-1,h=0;h<e.length;h++)p=e[h],r.m.has(p.id)||(r.m.add(p.id),d==-1&&(d=h));return d==-1?z.return():(g=G0(e,!0),v=g.Sh,y=g.mj,T=g.hj,w=g.pi,b(z,Promise.all([vi(r,r.h,v,d,qa,yi,c),vi(r,r.g,y,d,qa,yi,c),vi(r,r.j,T,d,qa,yi,c),vi(r,r.i,w,d,qa,yi,c)]),2))}if(S=0,k=[],r.g.length&&r.h.length)for(P=m(r.h),L=P.next();!L.done;L=P.next())for(B=L.value,O=m(r.g),N=O.next();!N.done;N=O.next())_=N.value,F=Yp(B.drmInfos,_.drmInfos),B.drmInfos.length&&_.drmInfos.length&&!F.length||(V=(B.bandwidth||0)+(_.bandwidth||0),B.dependencyStream&&(V+=B.dependencyStream.bandwidth||0),_.dependencyStream&&(V+=_.dependencyStream.bandwidth||0),ue=S++,k.push({id:ue,language:B.language,disabledUntilTime:0,primary:B.primary,audio:B,video:_,bandwidth:V,drmInfos:F,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(D=r.g.length?r.g:r.h,x=m(D),I=x.next();!I.done;I=x.next())A=I.value,R=S++,E=A.bandwidth||0,A.dependencyStream&&(E+=A.dependencyStream.bandwidth||0),k.push({id:R,language:A.language,disabledUntilTime:0,primary:A.primary,audio:A.type==i.aa?A:null,video:A.type==i.wa?A:null,bandwidth:E,drmInfos:A.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});r.l=k,G(z)})};function K0(e){var t,n,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L,B,O;return C(function(N){switch(N.g){case 1:if(t=ft,e.length==1)return N.return(e[0]);for(n=e.map(function(_){return new Map(_.filter(function(F){return F.type===t.aa}).map(function(F){return[lh(F),F]}))}),r=e.map(function(_){return new Map(_.filter(function(F){return F.type===t.wa}).map(function(F){return[uh(F),F]}))}),i=e.map(function(_){return new Map(_.filter(function(F){return F.type===t.Na}).map(function(F){return[ws(F),F]}))}),a=e.map(function(_){return new Map(_.filter(function(F){return F.type===t.Yf}).map(function(F){return[Ts(F),F]}))}),o=m(i),s=o.next();!s.done;s=o.next())u=s.value,l=Y0(t.Na),u.set(ws(l),l);for(c=m(a),d=c.next();!d.done;d=c.next())h=d.value,p=Y0(t.Yf),h.set(Ts(p),p);return g=new an,b(N,vi(g,[],n,0,jl,Ol,0),2);case 2:return v=N.h,b(N,vi(g,[],r,0,jl,Ol,0),3);case 3:return y=N.h,b(N,vi(g,[],i,0,jl,Ol,0),4);case 4:return T=N.h,b(N,vi(g,[],a,0,jl,Ol,0),5);case 5:if(w=N.h,S=0,y.length&&v.length)for(A=m(v),R=A.next();!R.done;R=A.next())for(E=R.value,P=m(y),L=P.next();!L.done;L=P.next())B=L.value,O=S++,B.variantIds.push(O),E.variantIds.push(O);else for(k=y.concat(v),D=m(k),x=D.next();!x.done;x=D.next())I=x.value,I.variantIds=[S++];return N.return(y.concat(v).concat(T).concat(w))}})}function vi(e,t,n,r,i,a,o){var s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R;return C(function(E){switch(E.g){case 1:for(s=[],u=0;u<n.length;u++)u>=r?s.push(new Set(n[u].values())):s.push(new Set);l=m(t),c=l.next();case 2:if(c.done){E.A(4);break}return d=c.value,b(E,kk(e,d,n,r,a,s,o),5);case 5:if(h=E.h,!h)throw new M(2,4,4037);c=l.next(),E.A(2);break;case 4:for(p=m(s),g=p.next();!g.done;g=p.next())for(v=g.value,y=m(v),T=y.next();!T.done;T=y.next())w=T.value,(S=Ik(e,t,w,n,i,a,s))&&t.push(S);for(k=m(s),D=k.next();!D.done;D=k.next())for(x=D.value,I=m(x),A=I.next(),R={};!A.done;R={yh:void 0},A=I.next())if(R.yh=A.value,!sh(R.yh)&&t.some((function(P){return function(L){return oh(P.yh,L)}})(R)))throw new M(2,4,4037);return E.return(t)}})}function kk(e,t,n,r,i,a,o){return C(function(s){return s.g==1?(z0(e,n,t,o>0),t.matchedStreams?t.segmentIndex?b(s,q0(t,r+o),2):s.A(2):s.return(!1)):(W0(t,r,i,a,o),s.return(!0))})}function q0(e,t){var n,r,i,a,o,s;return C(function(u){if(u.g==1){for(n=[],r=e.matchedStreams,i=t;i<r.length;i++)a=r[i],n.push(a.createSegmentIndex()),a.trickModeVideo&&!a.trickModeVideo.segmentIndex&&n.push(a.trickModeVideo.createSegmentIndex()),a.dependencyStream&&!a.dependencyStream.segmentIndex&&n.push(a.dependencyStream.createSegmentIndex());return b(u,Promise.all(n),2)}if(e.segmentIndex instanceof tt)for(o=t;o<r.length;o++)s=r[o],s.segmentIndex&&e.segmentIndex.h.push(s.segmentIndex);G(u)})}function Ik(e,t,n,r,i,a,o){if(sh(n))return null;var s=i(n);return z0(e,r,s),s.createSegmentIndex&&(s.createSegmentIndex=function(){return C(function(u){return s.segmentIndex?u.A(0):(s.segmentIndex=new tt,b(u,q0(s,0),0))})},s.closeSegmentIndex=function(){if(s.segmentIndex&&(s.segmentIndex.release(),s.segmentIndex=null),s.matchedStreams)for(var u=m(s.matchedStreams),l=u.next();!l.done;l=u.next()){l=l.value;var c;if(c=l.segmentIndex){e:{c=m(t);for(var d=c.next();!d.done;d=c.next())if(d=d.value,d!==s&&d.segmentIndex&&d.matchedStreams&&d.matchedStreams.includes(l)){c=!0;break e}c=!1}c=!c}c&&(l.segmentIndex.release(),l.segmentIndex=null)}}),!s.matchedStreams||!s.matchedStreams.length?null:(W0(s,0,a,o,0),s)}function W0(e,t,n,r,i){var a=e.matchedStreams;for(t+=i;t<a.length;t++){var o=a[t];n(e,o);var s=!0;if(e.type=="audio"&&Li(e.language,o.language)==0&&(s=!1),s&&((s=r[t-i])&&s.delete(o),o.fullMimeTypes))for(o=m(o.fullMimeTypes.values()),s=o.next();!s.done;s=o.next())e.fullMimeTypes.add(s.value)}}function qa(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function jl(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function yi(e,t){function n(o,s){o||(o=[]),s=m(s);for(var u=s.next();!u.done;u=s.next())u=u.value,o.includes(u)||o.push(u);return o}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=m(t.keyIds),i=r.next();!i.done;i=r.next())e.keyIds.add(i.value);if(e.originalId==null?e.originalId=t.originalId:(r=t.originalId||"")&&!e.originalId.endsWith(r)&&(e.originalId+=","+r),r=Yp(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new M(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=m(t.closedCaptions),i=r.next();!i.done;i=r.next()){var a=m(i.value);i=a.next().value,a=a.next().value,e.closedCaptions.set(i,a)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=qa(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var o=new tt,s=m(e.trickModeVideo.matchedStreams),u=s.next();!u.done;u=s.next())o.h.push(u.value.segmentIndex);return e.trickModeVideo.segmentIndex=o,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),yi(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),yi(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=qa(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var o=new tt,s=m(e.dependencyStream.matchedStreams),u=s.next();!u.done;u=s.next())o.h.push(u.value.segmentIndex);return e.dependencyStream.segmentIndex=o,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),yi(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),yi(e.dependencyStream,t))}function Ol(e,t){var n=e.roles;n||(n=[]);for(var r=m(t.roles),i=r.next();!i.done;i=r.next())i=i.value,n.includes(i)||n.push(i);for(e.roles=n,n=m(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,H(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function z0(e,t,n,r){r=r!==void 0&&r?n.matchedStreams:[],t=m(t);for(var i=t.next();!i.done;i=t.next()){if(i=Ek(e,i.value,n),!i)return;r.push(i)}n.matchedStreams=r}function Ek(e,t,n){var r={audio:lh,video:uh,text:ws,image:Ts}[n.type],i=null,a=r(n);if(t.has(a))i=t.get(a);else{a={audio:function(l,c){return oh(l,c)},video:function(l,c){return oh(l,c)},text:Ck,image:Mk}[n.type];for(var o={audio:Dk,video:Rk,text:Pk,image:Lk}[n.type],s=m(t.values()),u=s.next();!u.done;u=s.next())u=u.value,!a(n,u)||n.fastSwitching!=u.fastSwitching||i&&!o(n,i,u)||(i=u)}return e.o&&!sh(i)&&t.delete(r(i)),i}function X0(e,t){return e.mimeType!=t.mimeType?!1:Z0(e.codecs)===Z0(t.codecs)}f.Xi=function(e){this.o=e};function oh(e,t){return!(e.drmInfos&&!Xp(e.drmInfos,t.drmInfos))}function Ck(e,t){return t.language?!(e.forced!==t.forced||Li(e.language,t.language)==0||t.kind!=e.kind):!0}function Mk(){return!0}function Dk(e,t,n){var r=$0(e,t,n);if(r===gn)return!0;if(r===jn)return!1;r=Li(e.language,t.language);var i=Li(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(a){return e.roles.includes(a)}),i=n.roles.filter(function(a){return e.roles.includes(a)}),i.length>r.length)return!0;if(i.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=bs(e.channelsCount,t.channelsCount,n.channelsCount),r==gn?!0:r==jn?!1:(r=bs(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==gn?!0:r==jn?!1:!!(e.bandwidth&&Q0(e.bandwidth,t.bandwidth,n.bandwidth)==gn)))}function Rk(e,t,n){var r=$0(e,t,n);if(r===gn)return!0;if(r===jn)return!1;if(r=bs(e.width*e.height,t.width*t.height,n.width*n.height),r==gn)return!0;if(r==jn)return!1;if(e.frameRate){if(r=bs(e.frameRate,t.frameRate,n.frameRate),r==gn)return!0;if(r==jn)return!1}return!!(e.bandwidth&&Q0(e.bandwidth,t.bandwidth,n.bandwidth)==gn)}function Pk(e,t,n){var r=Li(e.language,t.language),i=Li(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(a){return e.roles.includes(a)}),i=n.roles.filter(function(a){return e.roles.includes(a)}),i.length>r.length)return!0;if(i.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function Lk(e,t,n){return bs(e.width*e.height,t.width*t.height,n.width*n.height)==gn}function Y0(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function J0(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Me([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function bs(e,t,n){if(t==e&&e!=n)return jn;if(n==e&&e!=t)return gn;if(t>e){if(n<=e||n-e<t-e)return gn;if(n-e>t-e)return jn}else{if(n>e)return jn;if(e-n<e-t)return gn;if(e-n>e-t)return jn}return ch}function $0(e,t,n){var r=e.mimeType===t.mimeType&&e.codecs===t.codecs,i=e.mimeType===n.mimeType&&e.codecs===n.codecs;return r&&!i?jn:!r&&i?gn:(t=X0(e,t),e=X0(e,n),t&&!e?jn:!t&&e?gn:ch)}function Q0(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?gn:t<e?jn:ch}function sh(e){switch(e.type){case me:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function uh(e){return Bl([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function lh(e){return Bl([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function ws(e){return Bl([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Ts(e){return Bl([e.width,e.codecs,e.mimeType])}function Bl(e){return JSON.stringify(e)}function Z0(e){if(!dh.has(e)){var t=Nt(e);dh.set(e,t)}return dh.get(e)}q("shaka.util.PeriodCombiner",an),an.prototype.setUseStreamOnce=an.prototype.Xi,an.prototype.combinePeriods=an.prototype.lg,an.prototype.deleteStream=an.prototype.Zh,an.prototype.getImageStreams=an.prototype.Mj,an.prototype.getTextStreams=an.prototype.Mg,an.prototype.getVariants=an.prototype.fk;var gn=1,ch=0,jn=-1,dh=new Map;function Nk(e,t){var n=new DOMParser,r=Uk.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function e1(e,t){try{var n=lr(e);return Nk(n,t)}catch{return null}}var Uk=new Je(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Ss(){var e=this;this.j=this.g=null,this.B=[],this.h=null,this.Fa=1,this.H=[],this.l={vf:"",type:"",profiles:[],vc:null,rb:0,bb:null,qe:0},this.u=new Map,this.C=new Map,this.o=new Map,this.F=new Map,this.za=new Map,this.m=new an,this.K=0,this.Da=new Qi(5),this.M=new ve(function(){if(e.J&&!e.g.continueLoadingWhenPaused&&(e.I.Ma(e.J,"timeupdate"),e.J.paused)){e.I.Aa(e.J,"timeupdate",function(){return s1(e)});return}s1(e)}),this.R=new pa,this.O=null,this.G=[],this.ba=1/0,this.va=!1,this.i=null,this.N=0,this.T=!1,this.I=new Pe,this.J=null,this.V=!1,this.$="",this.oa=function(){return!1},this.X=[],this.ma=new Set,this.ya=new M0}f=Ss.prototype,f.configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.oa=t),n&&this.h&&this.h.presentationTimeline.W()&&this.M.Jb(),this.i&&this.i.configure(this.g),this.m&&this.m.Xi(this.g.dash.useStreamOnceInPeriodFlattening)},f.start=function(e,t){var n=this,r;return C(function(i){if(i.g==1)return n.va=t.isLowLatencyMode(),n.B=[e],n.j=t,b(i,fh(n),2);if(r=i.h,n.j&&hh(n,r),!n.j)throw new M(2,7,7001);return i.return(n.h)})},f.stop=function(){for(var e=m(this.o.values()),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.B=[],this.h=null,this.o.clear(),this.F.clear(),this.u.clear(),this.C.clear(),this.l={vf:"",type:"",profiles:[],vc:null,rb:0,bb:null,qe:0},this.m=null,this.M!=null&&(this.M.stop(),this.M=null),this.i&&this.i.destroy(),this.I&&(this.I.release(),this.I=null),this.ma.clear(),this.ya.release(),this.R.destroy()},f.update=function(){var e=this,t;return C(function(n){if(n.g==1)return le(n,2),b(n,fh(e),4);if(n.g!=2)return pe(n,0);if(t=ce(n),!e.j||!t)return n.return();e.j.onError(t),G(n)})},f.onExpirationUpdated=function(){},f.onInitialVariantChosen=function(e){if(this.h&&this.h.presentationTimeline.W()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.h.presentationTimeline.Jc();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.K=t.endTime-e,hh(this,0))}}},f.banLocation=function(e){this.i&&this.i.banLocation(e)},f.setMediaElement=function(e){this.J=e};function fh(e){var t,n,r,i,a,o,s,u,l,c,d;return C(function(h){return h.g==1?(t=4,n="MPD",r=Jk(e),i=e.B,r.length?(i=r,n="Patch",t=6):e.B.length>1&&e.i&&(a=ys(e.i,"Location",!0),a.length&&(i=a)),o=ht(i,e.g.retryParameters),s=Date.now(),b(h,gh(e,o,0,{type:t}),2)):h.g!=3?(u=h.h,e.j?(u.uri&&u.uri!=u.originalUri&&!e.B.includes(u.uri)&&e.B.unshift(u.uri),l=new st(u.uri),e.$=l.g.toString(),b(h,_k(e,u.data,u.uri,n),3)):h.return(0)):(c=Date.now(),d=(c-s)/1e3,e.Da.sample(1,d),e.ma.clear(),h.return(d))})}function _k(e,t,n,r){var i,a,o,s,u,l,c,d,h,p;return C(function(g){if(g.g==1){if(i=t,a=e.g.dash.manifestPreprocessor,o=Qu,a!=o){if(Ce("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),s=e1(i,r),!s)throw new M(2,4,4001,n);a(s),i=qn(s.outerHTML)}if(u=mo(i,r),!u)throw new M(2,4,4001,n);return l=e.g.dash.manifestPreprocessorTXml,c=Zu,l!=c&&l(u),r==="Patch"?g.return(jk(e,u)):e.g.dash.disableXlinkProcessing?g.return(t1(e,u,n)):(d=e.g.dash.xlinkFailGracefully,h=_l(u,e.g.retryParameters,d,n,e.j.networkingEngine),_i(e.R,h),b(g,h.promise,2))}return p=g.h,g.return(t1(e,p,n))})}function t1(e,t,n){var r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L,B,O,N,_,F,V,ue,z,Re,fe,je,Se,ye,Ie,De,Ee,be,xe,St,mt,Mn,un,Jt,Xi,Kr,Qn,$a,Qa,Tc;return C(function(Zn){switch(Zn.g){case 1:for(e.i&&e.i.l.clear(),r=[n],i=[],a=new Map,o=_e(t,"Location"),s=m(o),u=s.next();!u.done;u=s.next())l=u.value,c=l.attributes.serviceLocation,(d=Wt(l))&&(h=At(r,[d])[0],c&&(e.i?Ka(e.i,"Location",c,h):a.set(c,h)),i.push(h));if(e.i?(p=ys(e.i,"Location",!0),p.length>0&&(r=e.B=p)):i.length&&(r=e.B=i),e.l.vf=t.attributes.id||"",e.l.qe=se(t,"publishTime",kr)||0,e.H=_e(t,"PatchLocation"),g=Promise.resolve(),(v=ze(t,"ContentSteering"))&&e.j)for(y=v.attributes.defaultServiceLocation,e.i?(e.i.i=r,e.i.h=y):(e.i=new Ga(e.j),e.i.configure(e.g),e.i.setManifestType("DASH"),e.i.i=r,e.i.h=y,(T=Wt(v))&&(se(v,"queryBeforeStart",eu,!1)?g=vs(e.i,T):vs(e.i,T))),w=m(a.keys()),S=w.next();!S.done;S=w.next())k=S.value,D=a.get(k),Ka(e.i,"Location",k,D);if(x=_e(t,"BaseURL"),I=!1,e.i)for(A=m(x),R=A.next();!R.done;R=A.next())E=R.value,P=E.attributes.serviceLocation,L=Wt(E),P&&L&&(Ka(e.i,"BaseURL",P,L),I=!0);if(e.X.splice(0),I&&e.i||(B=x.map(Wt),e.X.push.apply(e.X,H(At(r,B)))),O=e.i,N=e.X,_=$k,F=_.call(Ss,O,I,N),e.l.bb=F,V=0,x&&x.length&&(V=se(x[0],"availabilityTimeOffset",Zs)||0),e.l.rb=V,e.K=se(t,"minimumUpdatePeriod",dr,-1),ue=se(t,"availabilityStartTime",kr),z=se(t,"timeShiftBufferDepth",dr),Re=e.g.dash.ignoreSuggestedPresentationDelay,fe=null,Re||(fe=se(t,"suggestedPresentationDelay",dr)),je=e.g.dash.ignoreMaxSegmentDuration,Se=null,je||(Se=se(t,"maxSegmentDuration",dr)),ye=t.attributes.type||"static",e.h&&e.h.presentationTimeline&&(e.V=e.h.presentationTimeline.W()&&ye=="static"),e.l.type=ye,e.h)for(Ie=e.h.presentationTimeline,De=Ie.Hb(),Ee=m(e.o.values()),be=Ee.next();!be.done;be=Ee.next())xe=be.value,xe.segmentIndex&&xe.segmentIndex.Ya(De);else St=e.g.dash.ignoreMinBufferTime,mt=0,St||(mt=se(t,"minBufferTime",dr)||0),Mn=0,Mn=fe!=null?Math.min(fe,z||1/0):e.g.defaultPresentationDelay>0?e.g.defaultPresentationDelay:Math.min(mt*1.5,z||1/0),Ie=new ae(ue,Mn,e.g.dash.autoCorrectDrift);return Ie.cd(ye=="static"),Ie.W()&&!isNaN(e.g.availabilityWindowOverride)&&(z=e.g.availabilityWindowOverride),z==null&&(z=1/0),Ie.Lf(z),un=t.attributes.profiles||"",e.l.profiles=un.split(","),Jt={Eb:ye!="static",presentationTimeline:Ie,ua:null,na:null,qa:null,L:null,bandwidth:0,Og:!1,rb:V,vc:null,profiles:un.split(","),roles:null,Lb:d1},b(Zn,g,2);case 2:return e.N=0,Xi=a1(e,Jt,F,t,!1),Kr=Xi.duration,Qn=Xi.periods,(ye!="static"||e.V)&&Xi.ai||Ie.Ab(Kr||1/0),e.T&&e.va&&Ie.Ui(e.ba),Ie.Wg(Se||1),e.T&&e.va&&($a=fe??e.g.defaultPresentationDelay,Ie.rh($a)),e.h?(e.h.periodCount=Qn.length,e.h.gapCount=e.N,b(Zn,n1(e,Qn,!1),4)):b(Zn,e.m.lg(Qn,Jt.Eb),6);case 6:var Sc=Ie,Tp=e.m.l,xc=e.m.Mg(),Za=e.m.i,Ls=e.g.dash.sequenceMode,vt=ze(t,"ServiceDescription");if(vt){var vn=ze(vt,"Latency");if(vt=ze(vt,"PlaybackRate"),vn||vt){var $t={};vn&&("target"in vn.attributes&&($t.targetLatency=parseInt(vn.attributes.target,10)/1e3),"max"in vn.attributes&&($t.maxLatency=parseInt(vn.attributes.max,10)/1e3),"min"in vn.attributes&&($t.minLatency=parseInt(vn.attributes.min,10)/1e3)),vt&&("max"in vt.attributes&&($t.maxPlaybackRate=parseFloat(vt.attributes.max)),"min"in vt.attributes&&($t.minPlaybackRate=parseFloat(vt.attributes.min))),vn=$t}else vn=null}else vn=null;e:{if(vt=_e(t,"SupplementalProperty"),vt.length){for(vt=m(vt),$t=vt.next();!$t.done;$t=vt.next())if($t=$t.value,$t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016"){vt=$t.attributes.value;break e}}vt=null}if(e.h={presentationTimeline:Sc,variants:Tp,textStreams:xc,imageStreams:Za,offlineSessionIds:[],sequenceMode:Ls,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:vn,nextUrl:vt,periodCount:Qn.length,gapCount:e.N,isLowLatency:e.T,startTime:null},!Ie.kj()){Zn.A(7);break}return Qa=_e(t,"UTCTiming"),b(Zn,Xk(e,F,Qa),8);case 8:if(Tc=Zn.h,!e.j)return Zn.return();Ie.Vi(Tc);case 7:Ie.qf(),e.m&&!e.h.presentationTimeline.W()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.h),Bk(e),Fk(e,Qn),G(Zn)}})}function n1(e,t,n){var r;return C(function(i){if(i.g==1)return b(i,e.m.lg(t,!0,n),2);e.h.variants=e.m.l,r=e.m.Mg(),r.length>0&&(e.h.textStreams=r),e.h.imageStreams=e.m.i,e.j.filter(e.h),G(i)})}function jk(e,t){var n,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L;return C(function(B){if(B.g==1){if(n=t.attributes.mpdId,r=se(t,"originalPublishTime",kr),!n||n!==e.l.vf||r!==e.l.qe)throw e.H=[],new M(1,4,4052);for(i=[],a=[],o=new Set,s=m(ag(t)),u=s.next();!u.done;u=s.next())if(l=u.value,c=tu(l.attributes.sel||""),d=c[c.length-1],h=Wt(l)||"",d.name==="MPD")if(d.Ec==="mediaPresentationDuration"){p=Wt(l)||"";var O=dr(p);if(O!=null){e.l.vc=O;for(var N=m(e.u.values()),_=N.next();!_.done;_=N.next())_.value.vc=O}}else if(d.Ec==="type"){for(e.h.presentationTimeline.cd(h=="static"),e.l.type=h,O=m(e.u.values()),N=O.next();!N.done;N=O.next())N.value.Eb=h=="dynamic";h=="static"&&(e.K=-1)}else d.Ec==="publishTime"?e.l.qe=kr(h)||0:d.Ec===null&&l.tagName==="add"&&a.push(l);else if(d.name==="PatchLocation")sg(e.H,l);else if(d.name==="Period")l.tagName==="add"?a.push(l):l.tagName==="remove"&&d.id&&Ok(e,d.id);else if(d.name==="SegmentTemplate"){if(N=tu(l.attributes.sel||""),O=N[N.length-1],O.Ec){N=r1(e,N),_=Wt(l)||"";for(var F=m(N),V=F.next();!V.done;V=F.next())V=e.u.get(V.value),lg(V.L.Oc,l.tagName,O.Ec,_);O=N}else O=[];for(g=O,v=m(g),y=v.next();!y.done;y=v.next())T=y.value,o.add(T)}else if(d.name==="SegmentTimeline"||d.name==="S"){for(O=tu(l.attributes.sel||""),O=r1(e,O),N=m(O),_=N.next();!_.done;_=N.next())_=e.u.get(_.value),_=Va(_,mi,"SegmentTimeline"),F=_e(_,"S"),sg(F,l),_.children=F;for(w=O,S=m(w),k=S.next();!k.done;k=S.next())D=k.value,o.add(D)}for(x=m(o),I=x.next();!I.done;I=x.next())A=I.value,i1(e,A);for(R=m(a),E=R.next();!E.done;E=R.next())P=E.value,i.push.apply(i,H(a1(e,{Eb:e.l.type=="dynamic",presentationTimeline:e.h.presentationTimeline,ua:null,na:null,qa:null,L:null,bandwidth:0,Og:!1,rb:e.l.rb,profiles:e.l.profiles,vc:e.l.vc,roles:null,Lb:d1},e.l.bb,P,!0).periods));return i.length?(e.h.periodCount+=i.length,e.h.gapCount=e.N,b(B,n1(e,i,!0),2)):B.A(2)}e.l.type=="static"&&(L=e.l.vc,e.h.presentationTimeline.Ab(L||1/0)),G(B)})}function Ok(e,t){e.h.periodCount--;for(var n=m(e.u.keys()),r=n.next();!r.done;r=n.next())if(r=r.value,r.startsWith(t)){var i=e.u.get(r);Va(i,mi,"SegmentTimeline").children=[],i1(e,r),e.u.delete(r)}e.G=e.G.filter(function(a){return a!==t})}function r1(e,t){var n="",r="",i=-1,a="";t=m(t);for(var o=t.next();!o.done;o=t.next())o=o.value,o.name==="Period"?n=o.id:o.name==="AdaptationSet"?(r=o.id,o.position!==null&&(i=o.position)):o.name==="Representation"&&(a=o.id);if(t=[],a)t.push(n+","+a);else if(r)for(i=m(e.u.values()),e=i.next();!e.done;e=i.next())e=e.value,e.ua.id===n&&e.qa.id===r&&e.L.id&&t.push(n+","+e.L.id);else if(i>-1)for(r=m(e.u.values()),e=r.next();!e.done;e=r.next())e=e.value,e.ua.id===n&&e.qa.position===i&&e.L.id&&t.push(n+","+e.L.id);return t}function i1(e,t){var n=e.u.get(t),r=e.o.get(t);r.segmentIndex&&r.segmentIndex.Ya(e.h.presentationTimeline.Hb());try{var i=F0(n,function(a,o,s,u){return l1(e,a,o,s,u)},e.o,!0,e.g.dash.initialSegmentLimit,e.za,n.L.aesKey,null,!0,e.C);r.createSegmentIndex=function(){return C(function(a){if(a.g==1)return r.segmentIndex?a.A(0):b(a,i.Sc(),3);r.segmentIndex=a.h,G(a)})}}catch(a){if(t=n.L.contentType,t!=me&&t!="application"&&t!="image"||a.code!=4002)throw a}}function a1(e,t,n,r,i){var a=t.vc;a||(a=se(r,"mediaPresentationDuration",dr),e.l.vc=a);var o=0;e.h&&e.h.presentationTimeline&&e.V&&(o=e.h.presentationTimeline.$b());var s=[],u=o;r=_e(r,"Period");for(var l=0;l<r.length;l++){var c=r[l],d=r[l+1],h=se(c,"start",dr,u),p=c.attributes.id,g=se(c,"duration",dr);h=l==0&&h==0&&e.V?o:h;var v=null;if(d){var y=se(d,"start",dr);y!=null&&(v=y-h+o)}else a!=null&&(v=a-h+o);if(y=$p,v&&g&&Math.abs(v-g)>y&&v>g&&e.N++,v==null&&(v=g),!(e.O!==null&&p!==null&&h!==null&&h<e.O)||e.G.includes(p)||l+1==r.length){if(h!==null&&(e.O===null||h>e.O)&&(e.O=h),u=Vk(e,t,n,{start:h,duration:v,node:c,kf:v==null||!d}),s.push(u),t.ua.id&&v&&e.za.set(t.ua.id,v),v==null){u=null;break}u=h+v}}if(i)for(t=m(s),n=t.next();!n.done;n=t.next())n=n.value.id,e.G.includes(n)||e.G.push(n);else e.G=s.map(function(T){return T.id});return a!=null?{periods:s,duration:a+o,ai:!1}:{periods:s,duration:u,ai:!0}}function Bk(e){var t=Array.from(e.F.keys()).filter(function(s){return!e.G.includes(s)});t=m(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var r=!0,i=m(e.F.get(n)),a=i.next();!a.done;a=i.next()){a=a.value;var o=e.o.get(a);o&&(o.segmentIndex&&o.segmentIndex.getNumReferences()!=0?r=!1:(e.m&&e.m.Zh(o,n),e.o.delete(a)))}r&&e.F.delete(n)}}function Fk(e,t){t=new Set(t.map(function(i){return i.id}));for(var n=m(e.C.keys()),r=n.next();!r.done;r=n.next())r=r.value,t.has(r)||e.C.delete(r)}function Vk(e,t,n,r){t.ua=ph(e,r.node,null,n),t.na=r,t.ua.rb=t.rb,t.ua.id||(t.ua.id="__shaka_period_"+r.start);var i=_e(r.node,"EventStream");n=t.presentationTimeline.Hb(),i=m(i);for(var a=i.next();!a.done;a=i.next())Yk(e,r.start,r.duration,a.value,n);for(n=_e(r.node,"SupplementalProperty"),n=m(n),i=n.next();!i.done;i=n.next())i=i.value,i.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(i=Vl(e,i))&&(t.Lb=i);if(n=_e(r.node,"AdaptationSet").map(function(p,g){return o1(e,t,g,p)}).filter(ni),t.Eb){i=[],a=m(n);for(var o=a.next();!o.done;o=a.next()){o=m(o.value.Rk);for(var s=o.next();!s.done;s=o.next())i.push(s.value)}if(i.length!=new Set(i).size)throw new M(2,4,4018)}for(i=new Map,a=m(n),o=a.next();!o.done;o=a.next())for(o=m(o.value.Aj),s=o.next();!s.done;s=o.next()){var u=m(s.value);s=u.next().value,u=u.next().value,i.set(s,u)}if(i.size)for(a=null,o=m(n),s=o.next();!s.done;s=o.next()){s=s.value,u=[];for(var l=m(s.streams),c=l.next(),d={};!c.done;d={Ah:void 0},c=l.next())if(d.Ah=c.value,i.has(d.Ah.originalId)){a||(a=_e(r.node,"AdaptationSet").map(function(p,g){return o1(e,t,g,p)}).filter(ni)),c=m(a);for(var h=c.next();!h.done;h=c.next())(h=h.value.streams.find((function(p){return function(g){return g.originalId==p.Ah.originalId}})(d)))&&(h.dependencyStream=i.get(h.originalId),h.originalId+=h.dependencyStream.originalId,u.push(h))}u.length&&s.streams.push.apply(s.streams,H(u))}if(r=n.filter(function(p){return!p.Hh}),n=n.filter(function(p){return p.Hh}),!e.g.disableIFrames){for(n=m(n),i=n.next();!i.done;i=n.next())for(i=i.value,a=i.Hh.split(" "),o=m(r),s=o.next();!s.done;s=o.next())if(s=s.value,a.includes(s.id))for(s=m(s.streams),u=s.next();!u.done;u=s.next())Lg(u.value,i.streams)}if(n=Fl(e.g.disableAudio,r,"audio"),i=Fl(e.g.disableVideo,r,"video"),a=Fl(e.g.disableText,r,me),r=Fl(e.g.disableThumbnails,r,"image"),i.length===0&&n.length===0)throw new M(2,4,4004);return{id:t.ua.id,audioStreams:n,videoStreams:i,textStreams:a,imageStreams:r}}function Fl(e,t,n){return e||!t.length?[]:t.reduce(function(r,i){return i.contentType!=n||r.push.apply(r,H(i.streams)),r},[])}function o1(e,t,n,r){function i(L){var B=L.attributes["dvb:fontFamily"];L=L.attributes["dvb:url"],B&&L&&(L=At(t.qa.bb(),[L],t.Lb()),e.j.addFont(B,L[0]))}function a(L){switch(L){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function o(L){switch(L){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.qa=ph(e,r,t.ua,null),t.qa.position=n;var s=!1;n=_e(r,"Role");var u=n.map(function(L){return L.attributes.value}).filter(ni),l=void 0,c=t.qa.contentType==me;c&&(l="subtitle"),n=m(n);for(var d=n.next();!d.done;d=n.next()){d=d.value;var h=d.attributes.schemeIdUri;if(h==null||h=="urn:mpeg:dash:role:2011")switch(d=d.attributes.value,d){case"main":s=!0;break;case"caption":case"subtitle":l=d}}var p=_e(r,"EssentialProperty");n=null;var g=!1;d=null,h=!1,p=m(p);for(var v=p.next();!v.done;v=p.next()){v=v.value;var y=v.attributes.schemeIdUri;if(y=="http://dashif.org/guidelines/trickmode")n=v.attributes.value;else if(y=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var T=o(parseInt(v.attributes.value,10));else if(y=="urn:mpeg:mpegB:cicp:ColourPrimaries")var w=a(parseInt(v.attributes.value,10));else y!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(y=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?g=!0:y=="urn:dvb:dash:fontdownload:2014"?i(v):y=="urn:mpeg:dash:urlparam:2014"&&(d=Vl(e,v))||(h=!0))}if(h)return null;var S=null;for(h=_e(r,"SupplementalProperty"),h=m(h),p=h.next();!p.done;p=h.next())p=p.value,v=p.attributes.schemeIdUri,v=="http://dashif.org/guidelines/last-segment-number"?S=parseInt(p.attributes.value,10)-1:v=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?T=o(parseInt(p.attributes.value,10)):v=="urn:mpeg:mpegB:cicp:ColourPrimaries"?w=a(parseInt(p.attributes.value,10)):v=="urn:dvb:dash:fontdownload:2014"?i(p):v=="urn:mpeg:dash:urlparam:2014"&&(d=Vl(e,p));d&&(t.Lb=d),d=_e(r,"Accessibility");var k=new Map,D;for(d=m(d),h=d.next();!h.done;h=d.next())if(p=h.value,h=p.attributes.schemeIdUri,p=p.attributes.value,h!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(h!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)h=="urn:mpeg:dash:role:2011"?p!=null&&(u.push(p),p=="captions"&&(l="caption")):h=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(p=="1"?D="visually impaired":p=="2"?D="hard of hearing":p=="9"&&(D="spoken subtitles"));else if(h=1,p!=null)for(p=m(p.split(";")),v=p.next();!v.done;v=p.next()){y=v.value;var x=v=void 0;y.includes("=")?(y=y.split("="),v="svc"+y[0],x=y[1].split(",")[0].split(":").pop()):(v="svc"+h,h++,x=y),k.set(v,Le(x))}else k.set("svc1","und");else if(h=1,p!=null)for(p=p.split(";"),v=m(p),y=v.next();!y.done;y=v.next()){x=y.value;var I=y=void 0;x.includes("=")?(x=x.split("="),y=x[0].startsWith("CC")?x[0]:"CC"+x[0],I=x[1]||"und"):(y="CC"+h,p.length==2?h+=2:h++,I=x),k.set(y,Le(I))}else k.set("CC1","und");d=_e(r,"ContentProtection");var A=D0(e.ya,d,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);t.qa.encrypted=d.length>0;var R=Le(t.qa.language||"und"),E=t.qa.label,P=new Map;if(r=_e(r,"Representation"),!e.g.ignoreSupplementalCodecs){for(d=[],h=m(r),p=h.next();!p.done;p=h.next())v=p.value,(p=Ar(v,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(v=Wn(v),v.attributes.codecs=p.split(" ").join(","),v.attributes.id&&(v.attributes.supplementalId=v.attributes.id+"_supplementalCodecs"),d.push(v));r.push.apply(r,H(d))}if(d=r.map(function(L){var B=Hk(e,t,A,l,R,E,s,u,k,L,D,S);return B&&(B.hdr=B.hdr||T,B.colorGamut=B.colorGamut||w,B.fastSwitching=g,L=L.attributes.dependencyId)?(B.baseOriginalId=L,P.set(L,B),null):B}).filter(function(L){return!!L}),d.length==0&&P.size==0){if(n=t.qa.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||c||n)return null;throw new M(2,4,4003)}if(!t.qa.contentType||t.qa.contentType=="application")for(t.qa.contentType=c1(d[0].mimeType,d[0].codecs),c=m(d),h=c.next();!h.done;h=c.next())h.value.type=t.qa.contentType;for(c=t.qa.id||"__fake__"+e.Fa++,h=m(d),p=h.next();!p.done;p=h.next()){for(p=p.value,v=m(A.drmInfos),y=v.next();!y.done;y=v.next())y=y.value,y.keyIds=y.keyIds&&p.keyIds?new Set([].concat(H(y.keyIds),H(p.keyIds))):y.keyIds||p.keyIds;e.g.enableAudioGroups&&(p.groupId=c)}return r=r.map(function(L){return L.attributes.supplementalId||L.attributes.id}).filter(ni),{id:c,contentType:t.qa.contentType,language:R,Fm:s,streams:d,drmInfos:A.drmInfos,Hh:n,Rk:r,Aj:P}}function Vl(e,t){if((t=Pn(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&se(t,"useMPDUrlQuery",eu,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.$:n.split("&").map(function(r){if(r=="$querypart$")return e.$;var i=/\$query:(.*?)\$/g.exec(r);if(i&&i.length==2){i=i[1];var a=new ea(e.$).get(i);if(a.length)return i+"="+a[0]}return r}).join("&")}}return null}function Hk(e,t,n,r,i,a,o,s,u,l,c,d){t.L=ph(e,l,t.qa,null);var h=t.L.id;if(e.ba=Math.min(e.ba,t.L.rb),e.T=e.ba>0,!zk(t.L))return null;var p=t.na.start;t.bandwidth=se(l,"bandwidth",fr)||0,t.roles=s;var g=_e(l,"SupplementalProperty"),v=_e(l,"EssentialProperty"),y=_e(l,"ContentProtection");l=null;var T=v.find(function(N){return N.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(T||(T=g.find(function(N){return N.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(l=Vl(e,T)),l&&(t.Lb=l),T=t.L.contentType,l=T==me||T=="application",T=T=="image",y.length&&(t.qa.encrypted=!0);try{var w=void 0;if(n.hg){var S=t.L.bb,k=t.Lb,D=At(S(),[n.hg.wk],k()),x=ht(D,e.g.retryParameters);w={bitsKey:128,blockCipherMode:"CBC",iv:n.hg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var N,_,F;return C(function(V){if(V.g==1)return b(V,gh(e,x,6),2);if(V.g!=3){if(N=V.h,!N.data||N.data.byteLength!=16)throw new M(2,4,4049);return _={name:"AES-CBC"},F=w,b(V,U.crypto.subtle.importKey("raw",N.data,_,!0,["decrypt"]),3)}F.cryptoKey=V.h,w.fetchKey=void 0,G(V)})}}}if(t.L.aesKey=w,S=function(N,_,F,V){return l1(e,N,_,F,V)},t.L.Jd)var I=fk(t,S,w);else if(t.L.Bc)I=pk(t,e.o,w);else if(t.L.Oc)I=F0(t,S,e.o,!!e.h,e.g.dash.initialSegmentLimit,e.za,w,d,!1,e.C);else{var A=t.na.duration||0,R=t.L.bb,E=t.L.mimeType,P=t.L.codecs;I={endTime:-1,timeline:-1,Sc:function(){var N=Uu(p,A,R());return N.Fb(function(_){_.mimeType=E,_.codecs=P}),Promise.resolve(N)},timescale:1}}}catch(N){if((l||T)&&N.code==4002)return null;throw N}d=QA(e.ya,y,n,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI),d=new Set(d?[d]:[]),y=!1,g.some(function(N){return N.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&N.attributes.value=="JOC"})&&(y=!0),g=!1,l&&(g=s.includes("forced_subtitle")||s.includes("forced-subtitle"));var L;if(T&&((v=v.find(function(N){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(N.attributes.schemeIdUri)}))&&(L=v.attributes.value),!L))return null;var B;l=t.L.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(B="PQ"),v=t.L.id?t.ua.id+","+t.L.id:"",e.H.length&&h&&e.u.set(t.ua.id+","+h,Kk(t)),t.L.Cf&&Gk(e,t.L.Cf,I,t.presentationTimeline),I.endTime!=-1&&t.ua.id!=null&&t.L.id!=null&&((h=e.C.get(t.ua.id))?(h.endTime=I.endTime,h.gh.includes(t.L.id)||h.gh.push(t.L.id),e.C.set(t.ua.id,h)):e.C.set(t.ua.id,{endTime:I.endTime,timeline:I.timeline,gh:[t.L.id]}));var O=v&&e.o.has(v)?e.o.get(v):{id:e.Fa++,originalId:t.L.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){O.segmentIndex&&(O.segmentIndex.release(),O.segmentIndex=null)},segmentIndex:null,mimeType:t.L.mimeType,codecs:l,frameRate:t.L.frameRate,pixelAspectRatio:t.L.pixelAspectRatio,bandwidth:t.bandwidth,width:t.L.width,height:t.L.height,kind:r,encrypted:n.drmInfos.length>0,drmInfos:n.drmInfos,keyIds:d,language:i,originalLanguage:t.qa.language,label:a,type:t.qa.contentType,primary:o,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:t.L.emsgSchemeIdUris,roles:s,forced:g,channelsCount:t.L.yf,audioSamplingRate:t.L.audioSamplingRate,spatialAudio:y,closedCaptions:u,hdr:B,colorGamut:void 0,videoLayout:void 0,tilesLayout:L,accessibilityPurpose:c,external:!1,fastSwitching:!1,fullMimeTypes:new Set([at(t.L.mimeType,t.L.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return O.createSegmentIndex=function(){var N;return C(function(_){if(_.g==1)return O.segmentIndex?_.A(0):(N=O,b(_,I.Sc(),3));N.segmentIndex=_.h,G(_)})},v&&t.Eb&&!e.o.has(v)&&(t=t.ua.id||"",e.F.has(t)||e.F.set(t,[]),e.o.set(v,O),e.F.get(t).push(v)),O}function Gk(e,t,n,r){if(!e.ma.has(t)){e.ma.add(t);var i=se(t,"presentationTime",Mt)||0,a=ze(t,"UTCTiming"),o;(o=a&&a.attributes.schemeIdUri)&&(a=a.attributes.schemeIdUri,o=!(a==="urn:mpeg:dash:utc:http-ntp:2014"||a==="urn:mpeg:dash:utc:ntp:2014"||a==="urn:mpeg:dash:utc:sntp:2014")),o?t=(se(t,"wallClockTime",kr)||0)*1e3:(t=se(t,"wallClockTime",Mt)||0,t=Dm(t)),n=new Date(t-i/n.timescale*1e3),i=n.getTime()/1e3,isNaN(i)||(r.o||r.sh(i),r=new Map().set("detail",{wallClockTime:t,programStartDate:n}),r=new Y("prft",r),e.j.onEvent(r))}}function Kk(e){function t(n){return n?(n=Qr(n),n.Jd=null,n.Bc=null,n.Oc=Jc(n.Oc),n.Cf=null,n):null}return e=Qr(e),e.ua=t(e.ua),e.qa=t(e.qa),e.L=t(e.L),e.na&&(e.na=Qr(e.na),e.na.node=null),e}function s1(e){var t,n;return C(function(r){switch(r.g){case 1:return t=0,le(r,2),b(r,fh(e),4);case 4:t=r.h,pe(r,3);break;case 2:if(n=ce(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),hh(e,t),G(r)}})}function hh(e,t){if(!(e.K<0)){var n=e.K;e.g.updatePeriod>=0&&(n=e.g.updatePeriod),e.M.ka(Math.max(n-t,Bs(e.Da)))}}function ph(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,yf:null,audioSamplingRate:null,rb:0,If:1,encrypted:!1},r=r||n.bb;var i=t.attributes.id,a=t.attributes.supplementalId,o=_e(t,"BaseURL"),s,u=!1;if(e.i)for(var l=m(o),c=l.next();!c.done;c=l.next()){var d=c.value;c=d.attributes.serviceLocation,d=Wt(d),c&&d&&(Ka(e.i,i,c,d),u=!0)}u&&e.i||(s=o.map(Wt));var h=e.i;e=t.attributes.contentType||n.contentType,l=t.attributes.mimeType||n.mimeType,c=Xd([t.attributes.codecs||n.codecs]).join(","),d=se(t,"frameRate",TT)||n.frameRate;var p=t.attributes.sar||n.pixelAspectRatio,g=qk(_e(t,"InbandEventStream"),n.emsgSchemeIdUris),v=_e(t,"AudioChannelConfiguration");v=Wk(v)||n.yf;var y=se(t,"audioSamplingRate",Mt)||n.audioSamplingRate;e||(e=c1(l,c));var T=ze(t,"SegmentBase"),w=ze(t,"SegmentTemplate"),S=T&&se(T,"availabilityTimeOffset",Zs)||0,k=w&&se(w,"availabilityTimeOffset",Zs)||0,D=o&&o.length&&se(o[0],"availabilityTimeOffset",Zs)||0;S=n.rb+D+S+k,k=null,(D=ze(t,"SegmentSequenceProperties"))&&(D=se(D,"cadence",fr))&&(k=D),D=t.attributes.label;var x=_e(t,"Label");return x&&x.length&&(x=x[0],ut(x)&&(D=ut(x))),{bb:function(){return At(r(),o.length?h&&u?ys(h,i):s||[]:[])},Jd:T||n.Jd,Bc:ze(t,"SegmentList")||n.Bc,Oc:w||n.Oc,Cf:ze(t,"ProducerReferenceTime")||n.Cf,width:se(t,"width",Mt)||n.width,height:se(t,"height",Mt)||n.height,contentType:e,mimeType:l,codecs:c,frameRate:d,pixelAspectRatio:p,emsgSchemeIdUris:g,id:a||i,originalId:i,language:t.attributes.lang,yf:v,audioSamplingRate:y,rb:S,hf:null,If:k||n.If,label:D||null,encrypted:!1}}function qk(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function Wk(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=t.attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(t,10),!t)continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],t=parseInt(t,16),!t)continue;for(var r=0,i=0;i<n.length;i++)t&1<<i&&(r+=n[i]);if(r)return r;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),t=parseInt(t,16),!t)continue;for(i=r=0;i<n.length;i++)t&1<<i&&(r+=n[i]);if(r)return r;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&t>0&&t<n.length)return n[t]}}return null}function zk(e){var t=e.Jd?1:0;return t+=e.Bc?1:0,t+=e.Oc?1:0,t==0?e.contentType==me||e.contentType=="application":(t!=1&&(e.Jd&&(e.Bc=null),e.Oc=null),!0)}function u1(e,t,n,r){var i,a,o,s,u,l,c;return C(function(d){if(d.g==1)return i=[qt(n)],a=At(t(),i),o=ht(a,e.g.retryParameters),o.method=r,s=e.j.networkingEngine.request(4,o,{isPreload:e.oa()}),_i(e.R,s),b(d,s.promise,2);if(u=d.h,r=="HEAD"){if(!u.headers||!u.headers.date)return d.return(0);l=u.headers.date}else l=$e(u.data);return c=Date.parse(l),isNaN(c)?d.return(0):d.return(c-Date.now())})}function Xk(e,t,n){var r,i,a,o,s,u,l,c;return C(function(d){switch(d.g){case 1:r=n.map(function(h){return{scheme:h.attributes.schemeIdUri,value:h.attributes.value}}),i=e.g.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),a=m(r),o=a.next();case 2:if(o.done){d.A(4);break}switch(s=o.value,le(d,5),u=s.scheme,l=s.value,u){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return d.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return d.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(l),d.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ae("NTP UTCTiming scheme is not supported");break;default:Ae("Unrecognized scheme in UTCTiming element",u)}d.A(9);break;case 7:return b(d,u1(e,t,l,"HEAD"),10);case 10:return d.return(d.h);case 8:return b(d,u1(e,t,l,"GET"),11);case 11:return d.return(d.h);case 9:pe(d,3);break;case 5:ce(d);case 3:o=a.next(),d.A(2);break;case 4:return Ae("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),d.return(0)}})}function Yk(e,t,n,r,i){var a=r.attributes.schemeIdUri||"",o=r.attributes.value||"",s=se(r,"timescale",Mt)||1,u=se(r,"presentationTimeOffset",Mt)||0;r=m(_e(r,"Event"));for(var l=r.next();!l.done;l=r.next()){l=l.value;var c=se(l,"presentationTime",Mt)||0,d=se(l,"duration",Mt)||0;c=Math.max((c-u)/s+t,t),d=c+d/s,n!=null&&(c=Math.min(c,t+n),d=Math.min(d,t+n)),d<i||(l={schemeIdUri:a,value:o,startTime:c,endTime:d,id:l.attributes.id||"",timescale:s,eventElement:cg(l),eventNode:Jc(l)},e.j.onTimelineRegionAdded(l))}}function l1(e,t,n,r,i){var a,o,s,u;return C(function(l){return l.g==1?(a=Ln,o=i?0:1,s=qo(t,n,r,e.g.retryParameters),b(l,gh(e,s,a,{type:o}),2)):(u=l.h,l.return(u.data))})}function c1(e,t){return t=at(e,t),xo(t)?me:e.split("/")[0]}function gh(e,t,n,r){return r||(r={}),r.isPreload=e.oa(),t=e.j.networkingEngine.request(n,t,r),_i(e.R,t),t.promise}function Jk(e){var t=e.l.qe;if(!e.l.vf||!t||!e.H.length)return[];var n=Date.now()/1e3,r=e.H.filter(function(i){return i=Mt(i.attributes.ttl),!i||t+i>n}).map(Wt).filter(ni);return r.length?At(e.B,r):[]}function d1(){return""}function $k(e,t,n){return function(){return e&&t?ys(e,"BaseURL"):n.slice()}}q("shaka.dash.DashParser",Ss),Ii("application/dash+xml",function(){return new Ss}),Ii("video/vnd.mpeg.dash.mpd",function(){return new Ss});function Hl(){}q("shaka.dependencies",Hl),Hl.has=function(e){return mh.has(e)},Hl.add=function(e,t){if(!h1[e])throw Error(e+" is not supported");e==f1?Ce("mux.js","mux.js is no longer used in Shaka Player."):mh.set(e,function(){return t})};var f1="muxjs",h1={Gm:f1,ISOBoxer:"ISOBoxer"};Hl.Allowed=h1;var mh=new Map([["ISOBoxer",function(){return U.ISOBoxer}]]);function Ue(){this.j=new Je(function(){return["Oculus","Quest"].some(function(e){return navigator.userAgent.includes(e.toLowerCase())})?"VR":navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android"?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new Je(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function mr(){var e=U.ManagedMediaSource||U.MediaSource;return!!(e&&e.isTypeSupported)}f=Ue.prototype,f.kc=function(){return!!navigator.mediaCapabilities},f.Oa=function(){return this.j.value()},f.Ha=function(){return this.l.value()},f.Gd=function(){return!1},f.ih=function(){return!1},f.jf=function(){return!1},f.Ni=function(){return!1},f.se=function(){return!1},f.fd=function(){return!0},f.Ib=function(){var e=U.ManagedSourceBuffer||U.SourceBuffer;return!!e&&!!e.prototype&&!!e.prototype.changeType},f.we=function(){return!0},f.Si=function(){return 0},f.nc=function(){return Promise.resolve({width:1/0,height:1/0})},f.$i=function(){return!1},f.xh=function(){return!1},f.Wa=function(e){var t=this.Oa();return(t==="TV"||t==="CONSOLE"||t==="CAST")&&(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},f.Ch=function(){return!!U.indexedDB},f.Li=function(){return[]},f.sd=function(e){return U.matchMedia!==void 0&&U.matchMedia("(color-gamut: p3)").matches?e?"HLG":"PQ":"SDR"},f.gj=function(){return!1},f.Bi=function(){return!1},f.Ff=function(){return!1},f.Of=function(){return!0},f.Ci=function(){return!1},f.fj=function(){return!0},f.ed=function(){return!1},f.Vg=function(e){return e==="com.apple.fps"},f.Nf=function(){return!0},f.toString=function(){return"Device: "+this.Nb()+" v"+this.Ba()+"; Type: "+this.Oa()};function vh(){Ue.call(this),this.g=new Je(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new Je(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1?"xr"in navigator?"APPLE_VR":"MOBILE":"xr"in navigator?"APPLE_VR":"DESKTOP"})}it(vh,Ue),f=vh.prototype,f.Ba=function(){return this.g.value()},f.Nb=function(){return"Apple Browser"},f.Oa=function(){return this.h.value()},f.Ha=function(){return"WEBKIT"},f.kc=function(){return!1},f.Gd=function(e,t){return t==="audio"},f.jf=function(){return!0},f.Ni=function(e){return e==="audio"},f.Wa=function(e){return Ue.prototype.Wa.call(this,e),e.abr.minTimeToSwitch=.5,e},f.gj=function(){return!0},f.Nf=function(){return!1},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(nr=function(){return new vh});function yh(){if(!p1())throw Error("Not a Chromecast device!");Ue.call(this),this.h=new Je(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new Je(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return e=e.toLowerCase(),e.includes("android")?g1:e.includes("fuchsia")?m1:bh})}it(yh,Ue),f=yh.prototype,f.Ba=function(){return this.h.value()},f.Nb=function(){return"Chromecast with "+this.g.value()},f.Oa=function(){return"CAST"},f.Ha=function(){return"CHROMIUM"},f.kc=function(){return Ue.prototype.kc.call(this)&&this.g.value()!==bh},f.Ib=function(){return Ue.prototype.Ib.call(this)&&this.g.value()!==bh},f.Si=function(){switch(this.g.value()){case g1:return 0;case m1:return 3;default:return 1}},f.nc=function(){var e,t,n,r,i;return C(function(a){switch(a.g){case 1:if(e=U.cast&&cast.__platform__&&cast.__platform__.canDisplayType,t={width:1280,height:720},le(a,2),!(n=e)){a.A(4);break}return b(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:n=a.h;case 4:if(n){t.width=3840,t.height=2160,a.A(6);break}if(!(r=e)){a.A(7);break}return b(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:r=a.h;case 7:r&&(t.width=1920,t.height=1080);case 6:pe(a,3);break;case 2:i=ce(a),ur("Failed to check canDisplayType:",i);case 3:return a.return(t)}})},f.Wa=function(e){return Ue.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},f.Ch=function(){return!1},f.ed=function(){return!0};function p1(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}var g1="Android",m1="Fuchsia",bh="Linux";p1()&&(nr=function(){return new yh});function wh(){Ue.call(this);var e=this;this.i=new Je(function(){var t=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return t?parseInt(t[2],10):null}),this.g=new Je(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new Je(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("win32"):!1}),this.u=new Je(function(){return Ue.prototype.Ib.call(e)?navigator.userAgent.match(/Edge?\//)?!e.h.value():!0:!1}),this.o=new Je(function(){return navigator.userAgent.includes("sony.hbbtv.tv")}),this.m=new Je(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android":!!navigator.userAgent.includes("Android")})}it(wh,Ue),f=wh.prototype,f.Ba=function(){return this.i.value()},f.Nb=function(){return this.g.value()},f.Gd=function(e){return Hc(e)?this.g.value()==="Edge"&&this.h.value():!1},f.ih=function(){return this.g.value()==="Edge"&&this.h.value()},f.jf=function(){return this.g.value()==="Edge"&&this.h.value()},f.Ib=function(){return this.u.value()},f.Wa=function(e){if(Ue.prototype.Wa.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return this.m.value()&&(e.drm.defaultAudioRobustnessForWidevine="",e.drm.defaultVideoRobustnessForWidevine=""),e},f.Ff=function(){return this.g.value()==="Edge"||this.o.value()},f.ed=function(){if(this.Ha()==="GECKO"){var e=this.Ba();return e!==null?e>=100:Ue.prototype.ed.call(this)}return Ue.prototype.ed.call(this)},f.Vg=function(e){return this.Ha()==="GECKO"?e.startsWith("com.microsoft.playready.recommendation"):Ue.prototype.Vg.call(this,e)},Oc=function(){return new wh};function Th(){Ue.apply(this,arguments)}it(Th,Ue),f=Th.prototype,f.Ba=function(){return null},f.Nb=function(){return"Hisense"},f.Oa=function(){return"TV"},f.kc=function(){return!1},f.nc=function(){var e={width:1920,height:1080},t=null;if(U.Hisense_Get4KSupportState)try{t=U.Hisense_Get4KSupportState()}catch{}return t==null&&(t=navigator.userAgent.includes("UHD")),t&&(e.width=3840,e.height=2160),Promise.resolve(e)},f.Wa=function(e){return Ue.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(nr=function(){return new Th});function Sh(){Ue.call(this),this.g=new Je(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}it(Sh,Ue),f=Sh.prototype,f.Nb=function(){return"PlayStation"},f.Oa=function(){return"CONSOLE"},f.Ha=function(){return"WEBKIT"},f.Ba=function(){return this.g.value()},f.kc=function(){return!1},f.fd=function(){return!1},f.Ib=function(){return!1},f.xh=function(){return this.Ba()===4},f.nc=function(){var e,t,n,r,i;return C(function(a){switch(a.g){case 1:return e={width:1920,height:1080},t=!1,le(a,2),b(a,U.msdk.device.getDisplayInfo(),4);case 4:n=a.h,t=n.resolution==="4K",pe(a,3);break;case 2:return ce(a),le(a,5),b(a,U.msdk.device.getDisplayInfoImmediate(),7);case 7:r=a.h,t=r.resolution==="4K",pe(a,3);break;case 5:i=ce(a),Ae("PlayStation: Failed to get the display info:",i);case 3:return t&&(e.width=3840,e.height=2160),a.return(e)}})},f.Wa=function(e){return Ue.prototype.Wa.call(this,e),this.Ba()===4&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},f.Ff=function(){return this.Ba()===4},f.Of=function(){return this.Ba()!==4},navigator.userAgent.includes("PlayStation")&&(nr=function(){return new Sh});function xh(){Ue.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}it(xh,Ue),f=xh.prototype,f.Ba=function(){return this.g},f.Nb=function(){return"Tizen"},f.Ha=function(){return"CHROMIUM"},f.Oa=function(){return"TV"},f.Gd=function(){return!0},f.se=function(){return this.Ba()===3},f.kc=function(){return!1},f.fd=function(){var e=this.Ba();return e!==null?e>=4:Ue.prototype.fd.call(this)},f.Ib=function(){return!1},f.we=function(){return this.g&&this.h?this.g===5?this.h>=5:this.g>5:Ue.prototype.we.call(this)},f.nc=function(){var e=U.devicePixelRatio;e={width:U.screen.width*e>1920?3840:1920,height:U.screen.height*e>1080?2160:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var t=webapis.systeminfo.getMaxVideoResolution();e.width=t.width,e.height=t.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{Ae("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},f.Wa=function(e){return Ue.prototype.Wa.call(this,e),e.drm.ignoreDuplicateInitData=this.Ba()!==2,this.Ba()===3&&(e.streaming.crossBoundaryStrategy="reset_to_encrypted"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},f.Li=function(){var e=[];return this.g!==null&&this.g<5&&e.push("opus"),e},f.sd=function(e){try{if(webapis.avinfo.isHdrTvSupport())return e?"HLG":"PQ"}catch{return Ue.prototype.sd.call(this,e)}return"SDR"},f.Bi=function(){return!0},f.Ci=function(){return this.Ba()===3},navigator.userAgent.includes("Tizen")&&(nr=function(){return new xh});function Wa(){Ue.apply(this,arguments)}it(Wa,Ue),Wa.prototype.Ba=function(){return null},Wa.prototype.Nb=function(){return"Vizio"},Wa.prototype.Oa=function(){return"TV"},Wa.prototype.kc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(nr=function(){return new Wa});function Ah(){Ue.call(this),this.i=new Je(function(){return navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")}),this.h=new Je(function(){return navigator.userAgent.includes("SOPOpenBrowser")}),this.g=new Je(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}it(Ah,Ue),f=Ah.prototype,f.Ba=function(){return this.g.value()},f.Nb=function(){return"WebKit STB"},f.Oa=function(){return"TV"},f.Ha=function(){return"WEBKIT"},f.kc=function(){return!1},f.fd=function(){var e=this.g.value();return e!==null?e>=15:!0},f.Gd=function(){return this.h.value()},f.nc=function(){return Promise.resolve({width:U.screen.width*U.devicePixelRatio,height:U.screen.height*U.devicePixelRatio})},f.Of=function(){return!this.i.value()},f.Nf=function(){return!1},(navigator.userAgent.includes("SOPOpenBrowser")||navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(nr=function(){return new Ah});function kh(){Ue.call(this);var e=this;this.h=Qk(),this.g=null;try{var t=new PalmServiceBridge;t.onservicecallback=function(n){n=JSON.parse(n),e.g=n.configs["tv.model.supportHDR"]||n.configs["tv.config.supportDolbyHDRContents"]||!1},t.call("luna://com.webos.service.config/getConfigs",JSON.stringify({configNames:["tv.model.supportHDR","tv.config.supportDolbyHDRContents"]}))}catch(n){Ae("WebOS: getConfigs call failed",n)}}it(kh,Ue),f=kh.prototype,f.Ba=function(){return this.h},f.Nb=function(){return"WebOS"},f.Oa=function(){return"TV"},f.Ha=function(){return"CHROMIUM"},f.kc=function(){return!1},f.fd=function(){var e=this.Ba();return e!==null?e>3:Ue.prototype.fd.call(this)},f.Ib=function(){return!1},f.we=function(){var e=this.Ba();return e!==null?e>3:Ue.prototype.we.call(this)},f.nc=function(){var e={width:1920,height:1080};try{var t=JSON.parse(U.PalmSystem.deviceInfo);e.width=Math.max(1920,t.screenWidth),e.height=Math.max(1080,t.screenHeight)}catch{Ae("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},f.Wa=function(e){return Ue.prototype.Wa.call(this,e),this.Ba()===3&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e},f.sd=function(e){return this.g==null?(Ae("WebOS: getConfigs call haven't finished"),Ue.prototype.sd.call(this,e)):this.g?e?"HLG":"PQ":"SDR"};function Qk(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}if(f.fj=function(){return!1},f.ed=function(){var e=this.Ba();return e!==null?e>=6:Ue.prototype.ed.call(this)},navigator.userAgent.includes("Web0S")){var Zk=new kh;nr=function(){return Zk}}function Ih(){Ue.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}it(Ih,Ue),f=Ih.prototype,f.Ba=function(){return this.h},f.Nb=function(){return"Xbox"},f.Oa=function(){return"CONSOLE"},f.Ha=function(){return this.g?"EDGE":"CHROMIUM"},f.Gd=function(){return!0},f.ih=function(){return!0},f.jf=function(){return!0},f.$i=function(){return this.g},f.nc=function(){var e={width:1920,height:1080},t=v1();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,r=t.Media.Protection.ProtectionCapabilityResult;t=null;do t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(t===r.maybe);t===r.probably&&(e.width=3840,e.height=2160)}catch{Ae("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},f.Wa=function(e){return Ue.prototype.Wa.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},f.Ff=function(){return!0},f.Ch=function(){return!1};function v1(){var e=null;try{e=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows}catch{}return e}(navigator.userAgent.includes("Xbox One")||v1()!==null)&&(nr=function(){return new Ih});function y1(e,t,n){this.type=e,this.ha=t,this.segments=n||null}function Gl(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}Gl.prototype.toString=function(e){function t(i){return i.name+"="+(isNaN(Number(i.value))?'"'+i.value+'"':i.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(i){return e?!e.has(i.name):!0}).map(t):[];return this.value&&r.unshift(this.value),r.length>0&&(n+=":"+r.join(",")),n};function Eh(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function za(e,t){return e.attributes.find(function(n){return n.name===t})||null}function J(e,t,n){return(e=za(e,t))?e.value:n||null}function Ve(e,t){if(e=za(e,t),!e)throw new M(2,4,4023,t);return e.value}function b1(e,t,n){n=n===void 0?[]:n,this.ha=t,this.g=e,this.xc=n}function Kl(e,t){this.name=e,this.value=t}function On(e,t){return e.filter(function(n){return n.name==t})}function w1(e,t){return e.filter(function(n){return Ve(n,"TYPE")==t})}function kt(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Xa(e,t,n){return n=n===void 0?0:n,(e=kt(e,t))?Number(e.value):n}function bi(e,t,n){return t?T1(e,[t],n):[]}function T1(e,t,n){if(!t.length)return[];var r=t;return n&&n.size&&(r=t.map(function(i){return S1(i,n)})),At(e,r)}function S1(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=m(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var i=r.slice(2,r.length-1),a=t.get(i);if(a)e=e.replace(r,a);else throw new M(2,4,4039,i)}}return e}function eI(){this.g=0}function Ch(e,t){t=$e(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!nI.test(n[0]))throw new M(2,4,4015);t=0;for(var r=!1,i=[],a=!0,o=0;o<n.length;o++){var s=n[o],u=n[o+1];if(s.startsWith("#")&&!s.startsWith("#EXT")||a)a=!1;else{if(s=x1(e,s),r||(k1.has(s.name)?(t=1,r=!0):s.name=="EXT-X-STREAM-INF"||s.name=="EXT-X-MEDIA"?r=!0:I1.has(s.name)&&(t=1,r=!0)),I1.has(s.name)){if(t!=1)throw new M(2,4,4017);a=e,e=Array(Math.max(100,Math.floor((n.length-o)/2))),r=0,s=[];var l=[];for(u=null;o<n.length;o++){var c=n[o];c.startsWith("#EXT")?(c=x1(a,c),k1.has(c.name)?i.push(c):c.name=="EXT-X-MAP"?u=c:c.name=="EXT-X-PART"?l.push(c):c.name=="EXT-X-PRELOAD-HINT"?J(c,"TYPE")=="PART"?l.push(c):J(c,"TYPE")=="MAP"&&(c.name="EXT-X-MAP",u=c):s.push(c)):(!c.startsWith("#")||c.startsWith("#EXT"))&&(c=c.trim(),u&&s.push(u),s=new b1(c,s,l),r<e.length?e[r++]=s:(e.push(s),r++),s=[],l=[])}return l.length&&(u&&s.push(u),n=new b1("",s,l),r<e.length?e[r++]=n:(e.push(n),r++)),new y1(t,i,r<e.length?e.slice(0,r):e)}i.push(s),s.name=="EXT-X-STREAM-INF"&&(s.attributes.push(new Kl("URI",u)),a=!0)}}return new y1(t,i)}function x1(e,t){e=e.g++;var n=t.match(tI);if(!n)throw new M(2,4,4016,t);t=n[1];var r=n[2];n=[];var i;if(r){r=new aa(r);var a;for(A1.lastIndex=0,(a=$r(r,A1))&&(i=a[1]),Mh.lastIndex=0,a=$r(r,Mh);a;)n.push(new Kl(a[1],a[2]||a[3])),oa(r),a=$r(r,Mh)}return new Gl(e,t,n,i)}var tI=/^#(EXT[^:]*)(?::(.*))?$/,nI=/^#EXTM3U($|[ \t\n])/m,A1=/^([^,=]+)(?:,|$)/g,Mh=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,k1=new Set("EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" ")),I1=new Set("EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" "));function E1(){}function C1(e,t){try{var n=ql(e);return ha({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(r){return ri(r)}}function ql(e){var t=e.split(":");if(t.length<2||t[0]!="data")throw new M(2,1,1004,e);if(t=t.slice(1).join(":").split(","),t.length<2)throw new M(2,1,1004,e);var n=t[0];e=U.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;t.length>1&&t[t.length-1]=="base64"&&(r=!0,t.pop());var i;return r?i=Rn(e):i=qn(e),{data:i,contentType:n,Ih:t}}q("shaka.net.DataUriPlugin",E1),E1.parse=C1,Dr("data",C1);function Wl(){var e=this;this.g=this.h=null,this.G=1,this.B=new Map,this.M=new Map,this.C=new Map,this.C.set("video",new Map),this.C.set("audio",new Map),this.C.set(me,new Map),this.C.set("image",new Map),this.fc=new Map().set("com.apple.streamingkeydelivery",function(t,n,r){return DI(e,t,n,r)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(t){var n=Ve(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var r="cenc";n=="SAMPLE-AES"&&(r="cbcs");var i=Ve(t,"URI");if(n=ql(i.split("?")[0]),i=i.split("?")[0],!e.I.has(i)){var a=oe(n.data);e.I.set(i,a)}r=xr("com.widevine.alpha",r,[{initDataType:"cenc",initData:e.I.get(i)}],void 0,n.Ih),(t=J(t,"KEYID"))&&r.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(r)}else t=Promise.resolve(null);return t}).set("com.microsoft.playready",function(t){var n=Ve(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var r="cenc";n=="SAMPLE-AES"&&(r="cbcs"),t=Ve(t,"URI"),n=ql(t.split("?")[0]),t=oe(n.data);var i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);i=Tu(t,i,new Set,0),r=xr("com.microsoft.playready",r,[{initDataType:"cenc",initData:i}],void 0,n.Ih),(t=Di(["<PLAYREADY>",Tr(t),"</PLAYREADY>"].join(`
`)))&&(r.licenseServerUri=Nl(t)),r=Promise.resolve(r)}else r=Promise.resolve(null);return r}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(t){var n=Ve(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var r="cenc";n=="SAMPLE-AES"&&(r="cbcs");var i=Ve(t,"URI");if(n=ql(i.split("?")[0]),i=i.split("?")[0],!e.I.has(i)){var a=oe(n.data);e.I.set(i,a)}r=xr("com.huawei.wiseplay",r,[{initDataType:"cenc",initData:e.I.get(i)}],void 0,n.Ih),(t=J(t,"KEYID"))&&r.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(r)}else t=Promise.resolve(null);return t}),this.ob=new Set,this.i=new Map,this.m=null,this.H="",this.ab=new eI,this.N=-1,this.ma=1/0,this.ba=this.Ac=this.kb=!1,this.F=new ve(function(){if(e.X&&!e.g.continueLoadingWhenPaused&&(e.V.Ma(e.X,"timeupdate"),e.X.paused)){e.V.Aa(e.X,"timeupdate",function(){return Y1(e)});return}Y1(e)}),this.Fa=Zl,this.l=null,this.eb=0,this.u=1/0,this.Ua=this.Ta=this.T=0,this.$=new pa,this.J=new Map,this.K=new Map,this.Da=new Map,this.va=new Map,this.O=new Map,this.ya=new Map,this.za=new Map,this.zc=this.oa=!1,this.cc=new Qi(5),this.j=null,this.R=!0,this.V=new Pe,this.o=this.X=null,this.ec=function(){return!1},this.I=new Map}f=Wl.prototype,f.configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.ec=t),this.j&&this.j.configure(this.g),n&&this.l&&this.l.presentationTimeline.W()&&this.F.Jb()},f.start=function(e,t){var n=this,r;return C(function(i){return i.g==1?(n.h=t,n.oa=t.isLowLatencyMode(),b(i,_h(n,[e]).promise,2)):i.g!=3?(r=i.h,n.H=r.uri,b(i,aI(n,r.data),3)):i.return(n.l)})},f.stop=function(){this.F&&(this.F.stop(),this.F=null);var e=[];return this.$&&(e.push(this.$.destroy()),this.$=null),this.g=this.h=null,this.ob.clear(),this.l=null,this.i.clear(),this.M.clear(),this.K.clear(),this.B.clear(),this.Da.clear(),this.va.clear(),this.O.clear(),this.ya.clear(),this.za.clear(),this.I.clear(),this.j&&this.j.destroy(),this.V&&(this.V.release(),this.V=null),Promise.all(e)},f.update=function(){var e=this,t,n,r,i,a,o,s,u,l,c;return C(function(d){if(d.g==1){if(!Gt(e))return d.return();for(t=[],n=Array.from(e.i.values()),e.u=1/0,e.l.gapCount=0,r=n.filter(function(h){return!h.stream.isAudioMuxedInVideo&&h.stream.segmentIndex}),i=m(r),a=i.next();!a.done;a=i.next())o=a.value,t.push(rI(e,o));return b(d,Promise.all(t),2)}for(_1(e,r.map(function(h){return h.stream})),s=r.some(function(h){return h.ce==0}),r.length&&!s&&(Jl(e,Zl),zl(e)),s&&zl(e),u=m(r),l=u.next();!l.done;l=u.next())c=l.value,c.stream.isAudioMuxedInVideo||!c.stream.segmentIndex||ar(c.stream.segmentIndex)||e.h.disableStream(c.stream);G(d)})};function Dh(e,t){return Gt(e)?e.C.get(t.type):t.rf}function rI(e,t){var n,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L,B,O,N,_,F,V,ue,z,Re;return C(function(fe){switch(fe.g){case 1:if(t.stream.isAudioMuxedInVideo)return fe.return();for(n=[],r=m(t.P()),i=r.next();!i.done;i=r.next())a=i.value,o=new st(a),s=o.g,t.Ue&&(t.Qb>=0&&s.add("_HLS_msn",String(t.Qb)),t.Rb>=0&&s.add("_HLS_part",String(t.Rb))),t.Ve&&s.add("_HLS_skip","YES"),Wp(s)&&xi(o,Zi(s.toString())),n.push(o.toString());return le(fe,2),b(fe,_h(e,n,!0).promise,4);case 4:u=fe.h,pe(fe,3);break;case 2:throw l=ce(fe),e.h&&e.h.disableStream(t.stream),l;case 3:if(!t.stream.segmentIndex)return fe.return();if(c=Ch(e.ab,u.data),c.type!=1)throw new M(2,4,4017);return d=u.uri,d==u.originalUri||t.P().includes(d)||t.Df.push(d),h=On(c.ha,"EXT-X-DEFINE"),p=Rh(e,h,d),g=t.stream,v=Dh(e,t),b(fe,F1(e,c,g.mimeType,t.P,p),5);case 5:for(y=fe.h,T=y.keyIds,w=y.drmInfos,S=y.encrypted,k=y.Qh,g.encrypted||!S||k||(g.encrypted=!0),D=function(je,Se){return je.size===Se.size&&[].concat(H(je)).every(function(ye){return Se.has(ye)})},D(g.keyIds,T)||(g.keyIds=T,g.drmInfos=w,e.h.newDrmInfo(g)),x=W1(e,c,v,p,t.P,t.type),I=x.segments,(A=x.bandwidth)&&(g.bandwidth=A),R=ju(g),E=m(I),P=E.next();!P.done;P=E.next())L=P.value,L.ea&&(L.ea.yd=R);g.segmentIndex.ke(I,e.m.Hb()),I.length&&(B=Xa(c.ha,"EXT-X-MEDIA-SEQUENCE",0),N=(O=kt(c.ha,"EXT-X-SKIP"))?Number(J(O,"SKIPPED-SEGMENTS")):0,_=O1(B,I),F=_.Qb,V=_.Rb,t.Qb=F+N,t.Rb=V,ue=v.get(B),g.segmentIndex.Ya(ue)),(z=ar(g.segmentIndex))&&(t.Wc=z.startTime,Re=I[I.length-1],t.Mc=Re.endTime),kt(c.ha,"EXT-X-ENDLIST")&&(t.ce=!0),Lh(e,c),Nh(e,c.ha,g.type,p,t.P),G(fe)}})}f.onExpirationUpdated=function(){},f.onInitialVariantChosen=function(){},f.banLocation=function(e){this.j&&this.j.banLocation(e)},f.setMediaElement=function(e){this.X=e};function M1(e,t,n){n=n===void 0?!1:n;for(var r=e.N==-1,i=m(t),a=i.next();!a.done;a=i.next()){a=a.value;var o=a.stream.segmentIndex,s=Dh(e,a);if(o=ar(o)){s=m(s);for(var u=s.next();!u.done;u=s.next()){u=m(u.value);var l=u.next().value;if(u.next().value==o.startTime){r&&(e.N=Math.max(e.N,l)),a.sg=l;break}}}}if(!(e.N<0))for(t=m(t),r=t.next();!r.done;r=t.next())r=r.value,(xs(e,r.type)||n)&&(i=r.stream.segmentIndex)&&(a=e.N-r.sg,a>0&&(i.g.splice(0,a),i=ar(i))&&(i=-i.startTime,r.stream.segmentIndex.offset(i),D1(e,r,i)))}function iI(e,t){if(e.ma==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next())n=ar(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.ma=Math.min(e.ma,n.h))}if(t=e.ma,t!=1/0){n=m(e.i.values());for(var r=n.next();!r.done;r=n.next())if(r=r.value,!xs(e,r.type)){var i=r.stream.segmentIndex;if(i!=null){var a=ar(i);if(a)if(a.h==null)ur("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.P(),"Expect AV sync issues!");else for(D1(e,r,a.h-t-a.startTime),r=m(i),i=r.next();!i.done;i=r.next())i.value.Dh(t)}}}}function D1(e,t,n){if(!(Math.abs(n)<.001)){t.Wc+=n,t.Mc+=n,e=Dh(e,t);for(var r=m(e),i=r.next();!i.done;i=r.next()){var a=m(i.value);i=a.next().value,a=a.next().value,e.set(i,a+n)}t.P()}}function aI(e,t){var n,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L,B,O,N,_,F,V,ue,z,Re,fe,je,Se,ye,Ie,De,Ee;return C(function(be){switch(be.g){case 1:return n=ft,r=Ch(e.ab,t),i=On(r.ha,"EXT-X-DEFINE"),a=[],o=[],s=[],e.m=new ae(null,0),e.m.cd(!0),u=function(){return[e.H]},l=null,c=new Map,e.l={presentationTimeline:e.m,variants:a,textStreams:o,imageStreams:s,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.o},r.type==1?(e.R=!1,F=On(r.ha,"EXT-X-DEFINE"),c=Rh(e,F,e.H),l=n.wa,V="",ue=new Map,b(be,j1(e,e.G++,c,r,u,"",l,V,!0,"Media Playlist",null,ue,null,!1,null,!1),7)):(sI(e,i),d=On(r.ha,"EXT-X-MEDIA"),h=On(r.ha,"EXT-X-STREAM-INF"),p=On(r.ha,"EXT-X-IMAGE-STREAM-INF"),g=On(r.ha,"EXT-X-I-FRAME-STREAM-INF"),v=On(r.ha,"EXT-X-SESSION-KEY"),y=On(r.ha,"EXT-X-SESSION-DATA"),T=On(r.ha,"EXT-X-CONTENT-STEERING"),lI(e,y),b(be,cI(e,T),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(w=[],S=m(h),k=S.next(),D={};!k.done;D={dj:void 0},k=S.next())x=k.value,(I=J(x,"SUPPLEMENTAL-CODECS"))&&(D.dj=I.split(/\s*,\s*/).map(function(xe){return xe.split("/")[0]}),A=x.attributes.map((function(xe){return function(St){var mt=St.name,Mn=St.value;return mt=="CODECS"&&(Mn=xe.dj.join(","),St=St.value.split(","),St.length>1&&(St=en("audio",St))&&(Mn+=","+St)),new Kl(mt,Mn)}})(D)),w.push(new Gl(x.id,x.name,A,null)));for(h.push.apply(h,H(w)),R=[],E=m(g),P=E.next(),L={};!P.done;L={ej:void 0},P=E.next())B=P.value,(O=J(B,"SUPPLEMENTAL-CODECS"))&&(L.ej=O.split(/\s*,\s*/).map(function(xe){return xe.split("/")[0]}),N=B.attributes.map((function(xe){return function(St){var mt=St.name;return St=St.value,mt=="CODECS"&&(St=xe.ej.join(",")),new Kl(mt,St)}})(L)),R.push(new Gl(B.id,B.name,N,null)));g.push.apply(g,H(R))}return uI(e,h),SI(e,d),_=pI(e,g),b(be,gI(e,h,v,d,u,e.B,_),5);case 5:return a=be.h,o=dI(e,d),b(be,fI(e,p,g),6);case 6:s=be.h,be.A(3);break;case 7:z=be.h,e.i.set(e.H,z),z.stream&&(Re=ju(z.stream),z.stream.segmentIndex.Fb(function(xe){xe.ea&&(xe.ea.yd=Re)})),l=z.stream.type,fe=!0,(e.g.disableAudio&&z.type=="audio"||e.g.disableVideo&&z.type=="video"&&!z.stream.codecs.includes(","))&&(fe=!1),fe&&a.push({id:0,language:Le(V||"und"),disabledUntilTime:0,primary:!0,audio:z.type=="audio"?z.stream:null,video:z.type=="video"?z.stream:null,bandwidth:z.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new M(2,7,7001);if(H1(e,r),r.type==1&&(Gt(e)&&(G1(e,r),je=e.u,e.F.ka(je)),Se=Array.from(e.i.values()),Ph(e,Se),zl(e),Nh(e,r.ha,l,c,u)),e.l.variants=a,e.l.textStreams=o,e.l.imageStreams=s,e.l.startTime=e.o,e.ba||!e.g.hls.disableCodecGuessing){be.A(8);break}for(ye=[],Ie=m(e.l.variants),De=Ie.next();!De.done;De=Ie.next())Ee=De.value,Ee.audio&&Ee.audio.codecs===""&&ye.push(Ee.audio.createSegmentIndex()),Ee.video&&Ee.video.codecs===""&&ye.push(Ee.video.createSegmentIndex());return b(be,Promise.all(ye),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.l),G(be)}})}function oI(e,t){var n,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T;return C(function(w){if(w.g==1)return n=zd(e.g.hls.mediaPlaylistFullMimeType),t.length?(r=z1(e,t),i=r.segment,a=r.segmentIndex,o=i.P(),(s=Ca(o[0]))&&(u=jh.get(s))?w.return(zd(u)):b(w,Promise.all([R1(e,i.ea,0),R1(e,i,a)]),2)):w.return(n);if(l=w.h,c=l[1].mimeType,d=l[0].data,h=l[1].data,p="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),g=["audio/mp4","video/mp4","video/iso.segment"],v=i.ea||g.includes(c),!v&&Sa(oe(h))){var S=h,k=e.g.disableAudio,D=e.g.disableVideo,x=e.g.disableText,I=oe(S),A=new Ke().parse(I),R=A.Zd();I=A.Ng();var E=[],P=!1,L=!1;if(!k)switch(R.audio){case"aac":case"aac-loas":A.ub().length&&(E.push("mp4a.40.2"),P=!0);break;case"mp3":A.ub().length&&(E.push("mp4a.40.34"),P=!0);break;case"ac3":A.ub().length&&(E.push("ac-3"),P=!0);break;case"ec3":A.ub().length&&(E.push("ec-3"),P=!0);break;case"opus":A.ub().length&&(E.push("opus"),P=!0)}if(!D)switch(R.video){case"avc":I.codec?E.push(I.codec):E.push("avc1.42E01E"),L=!0;break;case"hvc":I.codec?E.push(I.codec):E.push("hvc1.1.6.L93.90"),L=!0;break;case"av1":E.push("av01.0.01M.08"),L=!0}if(E.length){if(k=P&&!L,D=new Map,L&&!x){for(x=new rr("video/mp2t"),x.Af(S),S=m(x.Zf()),L=S.next();!L.done;L=S.next())L=L.value,D.set(L,L);x.Qd()}I={type:k?"audio":"video",mimeType:"video/mp2t",codecs:E.join(", "),language:null,height:I.height,width:I.width,channelCount:null,sampleRate:null,closedCaptions:D,ze:null,colorGamut:null,frameRate:I.frameRate,timescale:null}}else I=null;if(y=I)return w.return(y)}else if((v||p.includes(s))&&(T=hx(d,h,e.g.disableText)))return w.return(T);return c?w.return(zd(c)):w.return(n)})}function R1(e,t,n){var r,i,a,o,s,u;return C(function(l){switch(l.g){case 1:return t?(r=Ln,i=qo(t.P(),t.Kc(),t.Ic(),e.g.retryParameters),a=t instanceof ee?1:0,b(l,Gr(e,i,r,{type:a}).promise,2)):l.return({mimeType:null,data:null});case 2:if(o=l.h,s=o.data,!t.aesKey){l.A(3);break}return b(l,Yd(s,t.aesKey,n),4);case 4:s=l.h;case 3:return t instanceof ee?t.ue(s,!0):t.ue(s),(u=o.headers["content-type"])&&(u=u.split(";")[0].toLowerCase()),l.return({mimeType:u,data:s})}})}function zl(e){if(Gt(e)){if(e.Fa==Oh){for(var t=1/0,n=1/0,r=m(e.i.values()),i=r.next();!i.done;i=r.next())i=i.value,i.stream.segmentIndex&&i.stream.type!="text"&&!i.stream.isAudioMuxedInVideo&&(t=Math.min(t,i.Mc),n=Math.min(n,i.Wc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.m.Lf(t)}}else e.m.Ab(U1(e));if(!e.m.o)for(t=m(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=ar(n.stream.segmentIndex))&&n.h&&e.m.sh(n.h);e.m.qf()}function sI(e,t){var n=new st(e.H).g;t=m(t);for(var r=t.next();!r.done;r=t.next()){var i=r.value;r=J(i,"NAME");var a=J(i,"VALUE");i=J(i,"QUERYPARAM"),r&&a&&(e.B.has(r)||e.B.set(r,a)),i&&(r=n.get(i)[0])&&!e.B.has(r)&&e.B.set(i,r)}}function Rh(e,t,n){n=new st(n).g;var r=new Map;t=m(t);for(var i=t.next();!i.done;i=t.next()){var a=i.value,o=J(a,"NAME"),s=J(a,"VALUE");i=J(a,"QUERYPARAM"),a=J(a,"IMPORT"),o&&s&&(r.has(o)||r.set(o,s)),i&&(o=n.get(i)[0])&&!r.has(o)&&r.set(i,o),a&&(i=e.B.get(a))&&r.set(a,i)}return r}function uI(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,i=J(r,"AUDIO");n=J(r,"VIDEO");var a=J(r,"SUBTITLES");if(r=P1(e,r),a){var o=en(me,r);e.K.set(a,o),Kn(r,o)}i&&(a=en("audio",r),a||(a=e.g.hls.defaultAudioCodec),e.K.set(i,a)),n&&(i=en("video",r),i||(i=e.g.hls.defaultVideoCodec),e.K.set(n,i))}}function lI(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,i=J(r,"DATA-ID");n=J(r,"URI");var a=J(r,"LANGUAGE");r=J(r,"VALUE"),i=new Map().set("id",i),n&&i.set("uri",bi([e.H],n,e.B)[0]),a&&i.set("language",a),r&&i.set("value",r),n=new Y("sessiondata",i),e.h&&e.h.onEvent(n)}}function cI(e,t){var n,r,i,a,o,s;return C(function(u){if(!e.h||!e.g)return u.return();for(r=m(t),i=r.next();!i.done;i=r.next())if(a=i.value,o=J(a,"PATHWAY-ID"),s=J(a,"SERVER-URI"),o&&s){e.j=new Ga(e.h),e.j.configure(e.g),e.j.i=[e.H],e.j.setManifestType("HLS"),e.j.h=o,n=vs(e.j,s);break}return b(u,n,0)})}function dI(e,t){var n=w1(t,"SUBTITLES"),r={};t=m(n);for(var i=t.next();!i.done;i=t.next()){i=i.value;var a=Eh(i,!e.j);r[a]?r[a].push(i):r[a]=[i]}if(t=[],!e.g.disableText)for(var o in r)try{t.push(L1(e,r[o],new Map).stream)}catch(s){if(!e.g.hls.ignoreTextStreamFailures)throw s}for(o=m(n),n=o.next();!n.done;n=o.next())if(r=Ve(n.value,"GROUP-ID"),(n=e.K.get(r))&&(r=e.M.get(r)))for(r=m(r),i=r.next();!i.done;i=r.next())i=i.value,i.stream.codecs=n,i.stream.mimeType=Uh(me,n)||Yl(me),Ya(i.stream);return t.filter(function(s){return s})}function Ya(e){var t=new Set([at(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Fb(function(n){n.mimeType&&t.add(at(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function fI(e,t,n){var r,i;return C(function(a){return a.g==1?(r=t.map(function(o){var s,u;return C(function(l){if(l.g==1)return e.g.disableThumbnails?l.return(null):(le(l,2),b(l,xI(e,o),4));if(l.g!=2)return s=l.h,l.return(s.stream);if(u=ce(l),e.g.hls.ignoreImageStreamFailures)return l.return(null);throw u})}).concat(n.map(function(o){if(e.g.disableThumbnails)return null;try{var s=N1(e,o);return s.stream.type!=="image"?null:s.stream}catch(u){if(e.g.hls.ignoreImageStreamFailures)return null;throw u}})),b(a,Promise.all(r),2)):(i=a.h,a.return(i.filter(function(o){return o})))})}function hI(e,t,n){t=t.filter(function(s){var u=J(s,"URI")||"";return s=J(s,"TYPE"),s!="SUBTITLES"&&(u!=""||s=="AUDIO")});var r={};t=m(t);for(var i=t.next();!i.done;i=t.next()){i=i.value;var a=Eh(i,!e.j);r[a]?r[a].push(i):r[a]=[i]}for(var o in r)L1(e,r[o],n,!1)}function pI(e,t){return t.map(function(n){return n=N1(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function gI(e,t,n,r,i,a,o){var s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L,B,O,N,_,F,V,ue,z,Re,fe,je,Se,ye,Ie;return C(function(De){switch(De.g){case 1:if(s=[],u=new Set,e.g.ignoreDrmInfo||!(n.length>0)){De.A(2);break}l=m(n),c=l.next();case 3:if(c.done){De.A(2);break}if(d=c.value,h=Ve(d,"METHOD"),p=J(d,"KEYFORMAT")||"identity",g=null,h=="NONE"){De.A(4);break}if($l(h)){v=bi(i(),Ve(d,"URI"),a),y=v.sort().join(""),e.O.has(y)||(T=ht(v,e.g.retryParameters),w=Gr(e,T,6).promise,e.O.set(y,w)),De.A(4);break}if(p=="identity")return b(De,J1(e,d,"",i,null,a),12);if(S=e.fc.get(p),!S){k=null,De.A(10);break}return b(De,S(d,"",null),11);case 11:k=De.h;case 10:g=k,De.A(6);break;case 12:g=De.h;case 6:if(g){if(g.keyIds)for(D=m(g.keyIds),x=D.next();!x.done;x=D.next())I=x.value,u.add(I);s.push(g)}case 4:c=l.next(),De.A(3);break;case 2:for(A={},R=m(t),E=R.next();!E.done;E=R.next())P=E.value,L=Eh(P,!e.j),A[L]?A[L].push(P):A[L]=[P];B=[];for(O in A)N=A[O],_=N[0],F=J(_,"FRAME-RATE"),V=Number(Ve(_,"BANDWIDTH"))||Number(J(_,"AVERAGE-BANDWIDTH")),ue=J(_,"RESOLUTION"),z=m(ue?ue.split("x"):[null,null]),Re=z.next().value,fe=z.next().value,je=J(_,"VIDEO-RANGE"),(Se=J(_,"REQ-VIDEO-LAYOUT"))&&Se.includes(",")&&(ye=Se.split(",").filter(function(Ee){return Ee=="CH-STEREO"||Ee=="CH-MONO"}),Se=ye[0]),Se=Se||"CH-MONO",Ie=mI(e,N,r),B.push.apply(B,H(TI(e,Ie.audio,Ie.video,V,Re,fe,F,je,Se,s,u,o)));return De.return(B.filter(function(Ee){return Ee!=null}))}})}function mI(e,t,n){for(var r={audio:[],video:[]},i=new Map,a=[],o=!1,s=!1,u=m(t),l=u.next();!l.done;l=u.next()){var c=l.value;l=J(c,"AUDIO");var d=J(c,"VIDEO"),h=l||d;h&&(a.includes(h)||a.push(h),(c=J(c,"PATHWAY-ID"))&&i.set(h,c),l?o=!0:d&&(s=!0))}a.length&&n.length&&(n=n.filter(function(g){return a.includes(Ve(g,"GROUP-ID"))}),hI(e,n,i)),n=(i=a.sort().join(","))&&e.M.has(i)?e.M.get(i):[],o?r.audio.push.apply(r.audio,H(n)):s&&r.video.push.apply(r.video,H(n)),s=!1;var p=t.map(function(g){return Ve(g,"URI")});return o=r.audio.find(function(g){return g&&g.P().find(function(v){return p.includes(v)})}),n=P1(e,t[0]),u=en("video",n),(l=en("audio",n))&&!u?(o="audio",s=r.audio.length>0&&!r.audio.some(function(g){return g.stream.isAudioMuxedInVideo})):!r.audio.length&&!r.video.length&&l&&u?(o="video",n=[[u,l].join()]):r.audio.length&&o?(o="audio",s=!0):o=r.video.length&&!r.audio.length?"audio":"video",s||(t=AI(e,t,n,o),i&&e.g.enableAudioGroups&&(t.stream.groupId=i),t.stream.type=="audio"&&o==="audio"&&r.audio.some(function(g){return g.stream.isAudioMuxedInVideo})&&(e=r.audio[0].stream,t.stream.language=e.language,t.stream.channelsCount=e.channelsCount,t.stream.label=e.label,t.stream.audioSamplingRate=e.audioSamplingRate,t.stream.originalId=e.originalId,t.stream.originalLanguage=e.originalLanguage),r[t.stream.type]=[t]),r}function P1(e,t){return t=J(t,"CODECS")||"",e.ba=t.length>0,e.ba||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),Xd(t.split(/\s*,\s*/))}function vI(e){return(e=J(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function yI(e){return(e=J(e,"SAMPLE-RATE"))?parseInt(e,10):null}function bI(e){return e=J(e,"CHANNELS"),e?(e=e.split("/"),e.length!=2?!1:e[1]==="JOC"||e[1].includes("ATMOS")):!1}function wI(e){return e=Ve(e,"TYPE").toLowerCase(),e=="subtitles"&&(e=me),e}function TI(e,t,n,r,i,a,o,s,u,l,c,d){for(var h=m(n),p=h.next();!p.done;p=h.next())X1(p.value.stream,i,a,o,s,u,null);for(i=e.g.disableVideo,(!n.length||i)&&(n=[null]),i&&(t=t.filter(function(T){return!T.stream.isAudioMuxedInVideo})),i=e.g.disableAudio,(!t.length||i)&&(t=[null]),i=[],t=m(t),a=t.next();!a.done;a=t.next())for(a=a.value,o=m(n),s=o.next();!s.done;s=o.next()){var g=s.value;(s=a?a.stream:null)&&(s.drmInfos=l,s.keyIds=c),(u=g?g.stream:null)&&(u.drmInfos=l,u.keyIds=c,e.g.disableIFrames||Lg(u,d)),u&&!s&&(u.bandwidth=r),!u&&s&&(s.bandwidth=r),h=a?a.stream.drmInfos:null,p=g?g.stream.drmInfos:null,g=g?g.P().sort().join(","):"";var v=a?a.P().sort().join(","):"",y=[];s&&s.codecs&&y.push(s.codecs),u&&u.codecs&&y.push(u.codecs),g=[g,v,y.sort()].join("-"),s&&u&&!Xp(h,p)||e.ob.has(g)||(s={id:e.G++,language:s?s.language:"und",disabledUntilTime:0,primary:!!s&&s.primary||!!u&&u.primary,audio:s,video:u,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},i.push(s),e.ob.add(g))}return i}function SI(e,t){t=w1(t,"CLOSED-CAPTIONS"),e.R=t.length==0,t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,i=J(r,"LANGUAGE");n=Le(i||"und"),i||(i=J(r,"NAME"))&&(n=i),i=Ve(r,"GROUP-ID"),r=Ve(r,"INSTREAM-ID").replace("SERVICE","svc"),e.J.get(i)||e.J.set(i,new Map),e.J.get(i).set(r,n)}}function L1(e,t,n,r){r=r===void 0?!0:r;for(var i=[],a=[],o=new Map,s=m(t),u=s.next(),l={};!u.done;l={oi:void 0},u=s.next()){u=u.value,l.oi=++e.G,l=(function(v){return function(){return"shaka://hls-muxed"+v.oi}})(l);var c=r?Ve(u,"URI"):J(u,"URI")||l();l=Ve(u,"GROUP-ID"),i.push(c),a.push(l),o.set(l,c),(u=J(u,"PATHWAY-ID"))&&n.set(l,u)}if(r=a.sort().join(","),u=t[0],t="",s=wI(u),s==me)t=J(u,"CODECS")||"";else for(a=m(a),l=a.next();!l.done;l=a.next())if(l=l.value,e.K.has(l)){t=e.K.get(l);break}if(a=i.sort().join(","),s=="audio"&&r&&(a+=r),e.i.has(a))return e.i.get(a);if(l=e.G++,e.j)for(o=m(o),c=o.next();!c.done;c=o.next()){var d=m(c.value);c=d.next().value,d=d.next().value,(c=n.get(c))&&Ka(e.j,l,c,d)}n=J(u,"LANGUAGE"),o=J(u,"NAME"),c=J(u,"DEFAULT")=="YES",d=s=="audio"?vI(u):null;var h=s=="audio"?bI(u):!1,p=J(u,"CHARACTERISTICS"),g=J(u,"FORCED")=="YES";return u=s=="audio"?yI(u):null,i=Xl(e,l,i,t,s,n,c,o,d,null,p,g,u,h),i.stream&&e.g.enableAudioGroups&&(i.stream.groupId=r),e.M.has(r)?e.M.get(r).push(i):e.M.set(r,[i]),e.i.set(a,i),i}function xI(e,t){var n,r,i,a,o,s,u,l,c,d;return C(function(h){return h.g==1?(n=Ve(t,"URI"),r=J(t,"CODECS","jpeg")||"",e.i.has(n)?h.return(e.i.get(n)):(i=J(t,"LANGUAGE"),a=J(t,"NAME"),o=J(t,"CHARACTERISTICS"),s=Xl(e,e.G++,[n],r,"image",i,!1,a,null,null,o,!1,null,!1),(u=J(t,"RESOLUTION"))?b(h,s.stream.createSegmentIndex(),3):h.A(2))):(h.g!=2&&(l=ar(s.stream.segmentIndex),(c=l.tilesLayout)&&(s.stream.width=Number(u.split("x")[0])*Number(c.split("x")[0]),s.stream.height=Number(u.split("x")[1])*Number(c.split("x")[1])),s.stream.closeSegmentIndex()),(d=J(t,"BANDWIDTH"))&&(s.stream.bandwidth=Number(d)),e.i.set(n,s),h.return(s))})}function N1(e,t){var n="video",r=Ve(t,"URI"),i=J(t,"CODECS")||"";if(i=="mjpg"&&(n="image"),e.i.has(r))return e.i.get(r);var a=J(t,"LANGUAGE"),o=J(t,"NAME"),s=J(t,"CHARACTERISTICS");return n=Xl(e,e.G++,[r],i,n,a,!1,o,null,null,s,!1,null,!1),i=J(t,"RESOLUTION"),a=m(i?i.split("x"):[null,null]),i=a.next().value,a=a.next().value,n.stream.width=Number(i)||void 0,n.stream.height=Number(a)||void 0,(t=J(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(r,n),n}function AI(e,t,n,r){for(var i=e.G++,a=[],o=m(t),s=o.next();!s.done;s=o.next()){var u=s.value;s=Ve(u,"URI"),u=J(u,"PATHWAY-ID"),e.j&&u&&Ka(e.j,i,u,s),a.push(s)}if(o=a.sort().join(",")+n.sort().join(","),e.i.has(o))return e.i.get(o);s=a.join(",");e:{if(t=J(t[0],"CLOSED-CAPTIONS"),r=="video"){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if(t!="NONE"){t=e.J.get(t);break e}e.R=!1}else if(!t&&e.J.size)for(t=m(e.J.keys()),t=t.next();!t.done;t=t.next()){t=e.J.get(t.value);break e}}t=null}return n=ra(r,n),r=Xl(e,i,a,n,r,null,!1,s,null,t,null,!1,null,!1),e.i.set(o,r),r}function Xl(e,t,n,r,i,a,o,s,u,l,c,d,h,p){function g(k){var D,x,I,A,R,E,P,L,B,O,N,_,F,V,ue,z,Re,fe,je,Se;return C(function(ye){switch(ye.g){case 1:return D=ft,le(ye,2),b(ye,k.promise,4);case 4:if(x=ye.h,k.aborted)return ye.return();if(I=x.uri,I!=x.originalUri&&(A=T.P(),A.includes(I)||T.Df.push(I)),R=Ch(e.ab,x.data),R.type!=1)throw new M(2,4,4017);return E=On(R.ha,"EXT-X-DEFINE"),P=Rh(e,E,I),L=!1,(!e.ba&&e.g.hls.disableCodecGuessing||e.R&&i==D.wa&&!e.g.hls.disableClosedCaptionsDetection)&&R.segments.length>0&&(e.R=!1,L=!0),B=!e.ba&&e.g.hls.disableCodecGuessing,O=Gt(e),b(ye,j1(e,0,P,R,v,r,i,a,o,s,u,l,c,d,h,p,void 0,L,B),5);case 5:if(N=ye.h,k.aborted)return ye.return();_=N.stream,H1(e,R),Gt(e)&&!O&&G1(e,R),T.Wc=N.Wc,T.Mc=N.Mc,T.Ve=N.Ve,T.Ue=N.Ue,T.ce=N.ce,T.rf=N.rf,T.Qb=N.Qb,T.Rb=N.Rb,y.segmentIndex=_.segmentIndex,y.encrypted=_.encrypted,y.drmInfos=_.drmInfos,y.keyIds=_.keyIds,y.mimeType=_.mimeType,y.bandwidth=y.bandwidth||_.bandwidth,y.codecs=y.codecs||_.codecs,y.closedCaptions=y.closedCaptions||_.closedCaptions,y.width=y.width||_.width,y.height=y.height||_.height,y.hdr=y.hdr||_.hdr,y.colorGamut=y.colorGamut||_.colorGamut,y.frameRate=y.frameRate||_.frameRate,y.language=="und"&&_.language!="und"&&(y.language=_.language),y.language=y.language||_.language,y.channelsCount=y.channelsCount||_.channelsCount,y.audioSamplingRate=y.audioSamplingRate||_.audioSamplingRate,Ya(y),y.drmInfos.length&&e.h.newDrmInfo(y),F=!1,(!l&&y.closedCaptions||l&&y.closedCaptions&&l.size!=y.closedCaptions.size)&&(F=!0),e.l&&F&&e.h.makeTextStreamsForClosedCaptions(e.l),i==D.Na&&(V=ar(_.segmentIndex))&&V.ea&&(y.mimeType="application/mp4",Ya(y)),ue=ju(y),y.segmentIndex.Fb(function(Ie){Ie.ea&&(Ie.ea.yd=ue)}),kI(e)&&(e.Ac?Ph(e,[T]):(e.Ac=!0,z=Array.from(e.i.values()),Re=z.filter(function(Ie){return Ie.stream.segmentIndex}),Ph(e,Re),zl(e),fe=e.u,fe>0&&e.F.ka(fe))),Nh(e,R.ha,y.type,P,v),e.l&&(e.l.startTime=e.o),pe(ye,0);break;case 2:if(je=ce(ye),y.closeSegmentIndex(),je.code===7001)return ye.return();if(Se=e.h.disableStream(y),!Se)throw je;G(ye)}})}function v(){return e.j&&n.length>1?ys(e.j,t):T.Df.concat(T1([e.H],n,e.B))}var y=B1(e,r,i,a,o,s,u,l,c,d,h,p);n.some(function(k){return k.startsWith("shaka://hls-muxed")})&&(y.isAudioMuxedInVideo=!0,y.mimeType="video/mp2t",Ya(y));var T={stream:y,type:i,Df:[],Wc:0,Mc:0,rf:new Map,Ve:!1,Ue:!1,ce:!1,sg:-1,Qb:-1,Rb:-1,P:v},w=null,S;return y.createSegmentIndex=function(){return w||(y.isAudioMuxedInVideo?(y.segmentIndex=new Me([]),Promise.resolve()):(S=_h(e,T.P(),!0),w=new Promise(function(k){k(g(S))})))},y.closeSegmentIndex=function(){w&&!y.segmentIndex&&S.abort(),y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null),w=null},T}function U1(e){var t=1/0;e=m(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.Mc));return t}function _1(e,t){var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.Fb(function(i){n.push(i)});e.m.me(n)}function Ph(e,t){if(!Gt(e))for(var n=U1(e),r=m(t),i=r.next();!i.done;i=r.next())i.value.stream.segmentIndex.pd(0,n);_1(e,t.map(function(a){return a.stream})),r=Array.from(e.i.values()).filter(function(a){return a.stream.segmentIndex}),n=r.some(function(a){return a.stream.type=="audio"}),i=r.some(function(a){return a.stream.type=="video"}),r=Gt(e)&&!e.kb,n=!Gt(e)&&e.kb&&!(n&&i),e.g.hls.ignoreManifestProgramDateTime||r||n?M1(e,t,r):(iI(e,t),e.g.hls.ignoreManifestProgramDateTimeForTypes.length>0&&M1(e,t))}function xs(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function kI(e){if(!e.l)return!1;var t=[],n=[];e=m(e.l.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(t.length>0&&!t.some(function(i){return i.segmentIndex})||n.length>0&&!n.some(function(i){return i.segmentIndex}))}function j1(e,t,n,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w){T=T===void 0?!0:T,w=w===void 0?!0:w;var S,k,D,x,I,A,R,E,P,L,B,O,N,_,F,V,ue,z,Re,fe,je,Se,ye,Ie,De,Ee,be,xe,St;return C(function(mt){switch(mt.g){case 1:if(S=r.segments||[],k=S.every(function(Mn){return!!kt(Mn.ha,"EXT-X-GAP")}),!S.length||k)throw new M(2,4,4053);if(II(e,r),Gt(e)&&Lh(e,r),D=Gt(e)?e.C.get(o):new Map,x=W1(e,r,D,n,i,o),I=x.segments,A=x.bandwidth,B=L=P=E=R=null,!(I.length>0&&T)){mt.A(2);break}return b(mt,oI(e,I),3);case 3:O=mt.h,o!=O.type&&Gt(e)&&(e.C.set(O.type,e.C.get(o)),e.C.set(o,new Map)),o=O.type,s=O.language,c=O.channelCount,g=O.sampleRate,e.g.disableText||(d=O.closedCaptions),E=O.height,R=O.width,P=O.ze,L=O.colorGamut,B=O.frameRate,w&&(y=O.mimeType,a=O.codecs);case 2:if(y){mt.A(4);break}return b(mt,MI(e,o,a,I),5);case 5:y=mt.h,o!=me||a||y!="application/mp4"||!I[0]||I[0].ea||(y="text/vtt");case 4:return b(mt,F1(e,r,y,i,n),6);case 6:if(N=mt.h,_=N.drmInfos,F=N.keyIds,V=N.encrypted,ue=N.Qh,V&&!_.length&&!ue)throw new M(2,4,4026);return z=B1(e,a,o,s,u,l,c,d,h,p,g,v),z.encrypted=V&&!ue,z.drmInfos=_,z.keyIds=F,z.mimeType=y,A&&(z.bandwidth=A),Ya(z),o=="video"&&(R||E||P||L)&&X1(z,R,E,B,P,null,L),Gt(e)&&Lh(e,r),Re=I[0].startTime,fe=I[I.length-1],je=fe.endTime,Se=new Me(I),z.segmentIndex=Se,Ie=(ye=kt(r.ha,"EXT-X-SERVER-CONTROL"))?za(ye,"CAN-SKIP-UNTIL")!=null:!1,De=ye?za(ye,"CAN-BLOCK-RELOAD")!=null:!1,Ee=Xa(r.ha,"EXT-X-MEDIA-SEQUENCE",0),be=O1(Ee,I),xe=be.Qb,St=be.Rb,mt.return({stream:z,type:o,Df:[],P:i,Wc:Re,Mc:je,Ve:Ie,Ue:De,ce:!1,sg:-1,Qb:xe,Rb:St,rf:D})}})}function O1(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Qb:e,Rb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].isPreload()||(e++,n=0),{Qb:e,Rb:n}):(e++,t.o&&(n=0),{Qb:e,Rb:n})}function B1(e,t,n,r,i,a,o,s,u,l,c,d){var h=Uh(n,t)||Yl(n),p=[];if(u){u=m(u.split(","));for(var g=u.next();!g.done;g=u.next())p.push(g.value)}return g=void 0,u=null,n==me?g=p.includes("public.accessibility.transcribes-spoken-dialog")&&p.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":p.includes("public.accessibility.describes-video")&&(u="visually impaired"),p.length||g!=="subtitle"||p.push("subtitle"),g=null,n!="video"&&(g=a),e={id:e.G++,originalId:a,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:h,codecs:t,kind:n==me?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Le(r||"und"),originalLanguage:r,label:g,type:n,primary:i,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:p,forced:l,channelsCount:o,audioSamplingRate:c,spatialAudio:d,closedCaptions:s,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:u,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},Ya(e),e}function F1(e,t,n,r,i){var a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L,B,O,N,_,F;return C(function(V){switch(V.g){case 1:if(a=new Map,!e.g.ignoreDrmInfo&&t.segments){for(o=m(t.segments),s=o.next();!s.done;s=o.next())if(u=s.value,l=On(u.ha,"EXT-X-KEY"),c=null,l.length)for(c=K1(e,t,u.ha,r,i),d=m(l),h=d.next();!h.done;h=d.next())p=h.value,a.set(p,c)}v=g=!1,y=[],T=new Set,w=m(a),S=w.next();case 2:if(S.done){V.A(4);break}if(k=S.value,D=m(k),x=D.next().value,I=D.next().value,A=x,R=I,E=Ve(A,"METHOD"),E=="NONE"){V.A(3);break}if(g=!0,P=J(A,"KEYFORMAT")||"identity",L=null,$l(E)){v=!0,V.A(3);break}if(P=="identity")return b(V,J1(e,A,n,r,R,i),11);if(B=e.fc.get(P),!B){O=null,V.A(9);break}return b(V,B(A,n,R),10);case 10:O=V.h;case 9:L=O,V.A(6);break;case 11:L=V.h;case 6:if(L){if(L.keyIds)for(N=m(L.keyIds),_=N.next();!_.done;_=N.next())F=_.value,T.add(F);y.push(L)}case 3:S=w.next(),V.A(2);break;case 4:return V.return({drmInfos:y,keyIds:T,encrypted:g,Qh:v})}})}function V1(e,t,n,r,i){if(!U.crypto||!U.crypto.subtle)throw Ae("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new M(2,4,4042);var a=0,o=J(t,"IV","");if(o){var s=ki(o.substr(2));if(s.byteLength!=16)throw new M(2,4,4048)}else a=Xa(n.ha,"EXT-X-MEDIA-SEQUENCE",0);var u=bi(r(),Ve(t,"URI"),i),l=u.sort().join("");if(n=t.toString()+"-"+a+"-"+l,!e.va.has(n)){var c={bitsKey:128,blockCipherMode:"CBC",iv:s,firstMediaSequenceNumber:a};switch(Ve(t,"METHOD")){case"AES-256":c.bitsKey=256;break;case"AES-256-CTR":c.bitsKey=256,c.blockCipherMode="CTR"}c.fetchKey=function(){var d,h,p,g;return C(function(v){if(v.g==1)return e.O.has(l)||(d=ht(u,e.g.retryParameters),h=Gr(e,d,6).promise,e.O.set(l,h)),b(v,e.O.get(l),2);if(v.g!=3){if(p=v.h,!p.data||p.data.byteLength!=c.bitsKey/8)throw new M(2,4,4049);return g={name:c.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:c.bitsKey},b(v,U.crypto.subtle.importKey("raw",p.data,g,!0,["decrypt"]),3)}c.cryptoKey=v.h,c.fetchKey=void 0,G(v)})},e.va.set(n,c)}return e.va.get(n)}function H1(e,t){e.o==null&&(t=kt(t.ha,"EXT-X-START"))&&(e.o=Number(Ve(t,"TIME-OFFSET")))}function II(e,t){var n=kt(t.ha,"EXT-X-PLAYLIST-TYPE");t=kt(t.ha,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?Jl(e,Zl):n?Jl(e,Oh):Jl(e,UI)}function Lh(e,t){var n=1/0,r=t.segments;if(r.length)for(var i=r.length-1;i>=0;){var a=kt(r[i].ha,"EXTINF");if(a){n=Number(a.value.split(",")[0]);break}i--}if(r=kt(t.ha,"EXT-X-TARGETDURATION"),!r)throw new M(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(i=kt(t.ha,"EXT-X-PART-INF"))&&(e.T=Number(Ve(i,"PART-TARGET"))),t=kt(t.ha,"EXT-X-SERVER-CONTROL"),e.oa&&e.T?(e.u=e.zc?e.T*5<=n?Math.min(e.T,e.u):Math.min(n,e.u):Math.min(e.T,e.u),e.Ua=t?Number(Ve(t,"PART-HOLD-BACK")):0):(e.u=Math.min(n,e.u),n=t?za(t,"HOLD-BACK"):null,e.Ta=n?Number(n.value):0),e.eb=Math.max(r,e.eb)}function G1(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.Ua)n=e.Ua;else if(e.Ta)n=e.Ta;else for(var r=t.segments.length,i=r-Math.min(r,e.g.hls.liveSegmentsDelay);i<r;i++){var a=kt(t.segments[i].ha,"EXTINF");n=a?n+Number(a.value.split(",")[0]):n+e.eb}e.o&&e.o<0&&(n=Math.min(-e.o,n),e.o+=n),e.m.Wi(0),e.m.rh(n),e.m.cd(!1)}function K1(e,t,n,r,i){var a=kt(n,"EXT-X-MAP");if(!a)return null;var o=Ve(a,"URI"),s=bi(r(),o,i);if(o=[s.toString(),J(a,"BYTERANGE","")].join("-"),!e.Da.has(o)){var u=void 0,l=null,c=!1;n=m(n);for(var d=n.next();!d.done;d=n.next())d=d.value,d.name=="EXT-X-KEY"?(c=Ve(d,"METHOD"),$l(c)&&d.id<a.id?(c=!1,u=V1(e,d,t,r,i)):c=c!="NONE"):d.name=="EXT-X-BYTERANGE"&&d.id<a.id&&(l=d);t=EI(s,a,l,u,c),e.Da.set(o,t)}return e.Da.get(o)}function EI(e,t,n,r,i){var a=0,o=null;return t=J(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(a=t.split("@"),o=Number(a[0]),a=Number(a[1]),o=a+o-1,r&&(n=o+1-a,n%16&&(o+=16-n%16))),new nn(function(){return e},a,o,null,null,null,r,i)}function CI(e,t,n,r,i,a,o,s,u,l){var c=r.ha,d=kt(c,"EXTINF"),h=0,p=0,g=null;r.xc.length&&(e.l.isLowLatency=!0);var v=null;if(!e.g.hls.ignoreManifestProgramDateTime){var y=kt(c,"EXT-X-PROGRAM-DATE-TIME");y&&y.value&&(v=kr(y.value),e.kb=!0)}var T=Lr;if(kt(c,"EXT-X-GAP")&&(e.l.gapCount++,T=2),!d){if(r.xc.length==0)throw new M(2,4,4024,"EXTINF");if(!e.oa)return null}var w=[];y=!1;var S=null,k=!1,D=!1;if(e.oa&&r.xc.length){h=t&&U.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var x=v,I={},A=0;A<r.xc.length;I={Uf:void 0,pe:void 0},A++){var R=r.xc[A],E=A==0?n:w[w.length-1],P=A==0?i:E.endTime,L=Number(J(R,"DURATION"))||e.T;if(L){var B=P+L,O=0,N=null;if(R.name=="EXT-X-PRELOAD-HINT"?(O=(O=J(R,"BYTERANGE-START"))?Number(O):0,(E=J(R,"BYTERANGE-LENGTH"))?N=O+Number(E)-1:O&&(N=Number.MAX_SAFE_INTEGER)):(O=J(R,"BYTERANGE"),N=m(q1(E,O)),O=N.next().value,N=N.next().value),I.pe=J(R,"URI"),I.pe){E=Lr,J(R,"GAP")=="YES"&&(e.l.gapCount++,E=2,k=!0),I.Uf=null;var _=(function(V){return function(){return V.Uf==null&&(V.Uf=bi(s(),V.pe,a)),V.Uf}})(I);h&&O>=0&&N!=null&&(S=_,y=!0),P=new ee(P,B,_,O,N,t,0,0,1/0,[],"",null,x,E,l),R.name=="EXT-X-PRELOAD-HINT"&&(P.Ug(),D=!0),J(R,"INDEPENDENT")!="YES"&&A>0&&P.xd(),R=u,R||(w.length&&w[0].mimeType?R=w[0].mimeType:I.pe&&(I=Ca(I.pe),R=Ql.get(o).get(I)||null)),R&&(P.mimeType=R,Q1.has(R)&&(P.ea=null)),w.push(P),x&&(x+=L)}}}}if(d){if(d=Number(d.value.split(",")[0]),d==0)return null;h=i+d}else if(w.length)h=w[w.length-1].endTime;else return null;y&&(k||w[0].startByte!=0?(y=!1,S=null):w=[]),(d=kt(c,"EXT-X-BYTERANGE"))?(g=m(q1(n,d.value)),p=g.next().value,g=g.next().value):w.length&&(p=w[0].startByte,g=w[w.length-1].endByte),n="",d=null,o=="image"&&(n="1x1",o=kt(c,"EXT-X-TILES"))&&(n=Ve(o,"LAYOUT"),(o=J(o,"DURATION"))&&(d=Number(o)));var F=null;return t=new ee(i,h,function(){return S?S():(F==null&&(F=bi(s(),r.g,a)),F||[])},p,g,t,0,0,1/0,w,n,d,v,T,l,w.length>0&&!!r.g),u&&(t.mimeType=u,Q1.has(u)&&(t.ea=null)),y&&(e.zc=!0,t.xi(),D&&t.Ug()),t}function q1(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.endByte+1,r=n+t-1),[n,r]}function Nh(e,t,n,r,i){if(n=="video"||n=="audio"){var a=e.m.m;if(a&&!xs(e,n))for(t=On(t,"EXT-X-DATERANGE"),t=t.filter(function(E){return za(E,"START-DATE")!=null}).sort(function(E,P){return E=Ve(E,"START-DATE"),P=Ve(P,"START-DATE"),E<P?-1:E>P?1:0}),n=0;n<t.length;n++){var o=t[n];try{var s=Ve(o,"START-DATE"),u=kr(s);if(!isNaN(u)){var l=Math.max(0,u-a),c=null,d=J(o,"END-DATE");if(d){var h=kr(d);if(!isNaN(h)&&(c=h-a,c<0))continue}if(c==null){var p=J(o,"DURATION")||J(o,"PLANNED-DURATION");if(p){var g=parseFloat(p);if(isNaN(g)||(c=l+g),u-a+g<0)continue}}var v=J(o,"CLASS")||"com.apple.quicktime.HLS",y=J(o,"END-ON-NEXT")=="YES";if(c==null&&y){for(var T=n+1;T<t.length;T++){var w=J(t[T],"CLASS")||"com.apple.quicktime.HLS";if(v==w){var S=Ve(t[T],"START-DATE"),k=kr(S);if(!isNaN(k)&&k&&k>u){c=Math.max(0,k-a);break}}}if(c==null)continue}T=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var D=[],x=m(o.attributes),I=x.next();!I.done;I=x.next()){var A=I.value;if(!T.includes(A.name)){var R=S1(A.value,r);(A.name=="X-ASSET-URI"||A.name=="X-ASSET-LIST")&&(R=bi(i(),A.value,r)[0]),D.push({key:A.name,description:"",data:R,mimeType:null,pictureType:null})}}D.length>1&&e.h.onMetadata(v,l,c,D)}}catch{}}}}function W1(e,t,n,r,i,a){function o(E){if(E=Ca(E),!E)return null;var P=Ql.get(a).get(E);return P||(P=jh.get(E)),P}var s=t.segments,u=null,l=null,c=null,d=null,h=void 0,p=Xa(t.ha,"EXT-X-DISCONTINUITY-SEQUENCE",-1),g=Xa(t.ha,"EXT-X-MEDIA-SEQUENCE",0),v=kt(t.ha,"EXT-X-SKIP"),y=v?Number(J(v,"SKIPPED-SEGMENTS")):0,T=g+y,w=0;Gt(e)&&n.has(T)&&(w=n.get(T)),w===0&&e.Fa==Oh&&n.size>0&&!n.has(T)&&e.m.i!=null&&(w=e.m.Hb());var S=[],k=null;v=[];for(var D=0;D<s.length;D++){var x=s[D];(T=kt(x.ha,"EXT-X-MAP"))&&T.id!==l&&(u=K1(e,t,x.ha,i,r),l=T.id),T=x.g;var I="";T&&(I=Ca(T)),I!==d&&(c=o(T),d=I),I=D==0?w:k.endTime,T=g+y+D,kt(x.ha,"EXT-X-DISCONTINUITY")&&(p++,k&&k.ea&&(k.ea.g=I));for(var A=m(x.ha),R=A.next();!R.done;R=A.next())R=R.value,R.name=="EXT-X-KEY"&&($l(Ve(R,"METHOD"))?h=V1(e,R,t,i,r):h=void 0);if(n.set(T,I),I=CI(e,u,k,x,I,r,a,i,c,h)){if((k=Xa(x.ha,"EXT-X-BITRATE"))?(v.push({bitrate:k,duration:I.endTime-I.startTime}),I.bandwidth=k):I.endByte?(x=xd(I))&&(k=I.endTime-I.startTime,x=x*8/k/1e3,v.push({bitrate:x,duration:k}),I.bandwidth=x):v.length&&(k=v.pop(),k.duration+=I.endTime-I.startTime,v.push(k),I.bandwidth=k.bitrate),I.bandwidth)for(k=m(I.g),x=k.next();!x.done;x=k.next())x.value.bandwidth=I.bandwidth;k=I,I.i=p,xs(e,a)&&e.N!=null&&T<e.N||S.push(I)}}if(t=void 0,v.length&&(t=v.reduce(function(E,P){return E+P.duration},0),t=Math.round(v.reduce(function(E,P){return E+P.bitrate*P.duration},0)/t*1e3)),v=S.some(function(E){return E.h!=null})){for(n={},r=0;r<S.length;n={Ze:void 0,Ye:void 0,Re:void 0,Zc:void 0,Qe:void 0},r++)if(n.Zc=S[r],n.Zc.h==null)for(n.Ye=0,n.Ze=r,i=(function(E){return function(){var P=S[E.Ze];if(P){if(P.h!=null)return P.h+E.Ye;E.Ye-=P.endTime-P.startTime,E.Ze+=1}return null}})(n),n.Qe=0,n.Re=r,s=(function(E){return function(){var P=S[E.Re];if(P){if(P!=E.Zc&&(E.Qe+=P.endTime-P.startTime),P.h!=null)return P.h+E.Qe;--E.Re}return null}})(n);n.Zc.h==null;)n.Zc.h=s(),n.Zc.h==null&&(n.Zc.h=i())}if(v)for(n=m(S),r=n.next();!r.done;r=n.next())for(i=r.value,r=i.h,i=m(i.g),s=i.next();!s.done;s=i.next())s=s.value,s.h=r,r+=s.endTime-s.startTime;if(n=e.ma,v&&n!=1/0&&!xs(e,a))for(e=m(S),v=e.next();!v.done;v=e.next())v.value.Dh(n);return{segments:S,bandwidth:t}}function Uh(e,t){if(e==me){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function Yl(e){return e==me?"text/vtt":Ql.get(e).get("mp4")}function z1(e,t){e=Gt(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.bc()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function MI(e,t,n,r){var i,a,o,s,u,l,c,d,h,p,g,v,y;return C(function(T){switch(T.g){case 1:return i=Ln,a=z1(e,r),o=a.segment,o.status==2?T.return(Yl(t)):(u=o.P(),(l=Ca(u[0]))&&(c=Ql.get(t),(d=c.get(l))||(d=jh.get(l)))?T.return(d):(s=Uh(t,n))?T.return(s):(p=1,g=ht(u,e.g.retryParameters),le(T,2),g.method="HEAD",b(T,Gr(e,g,i,{type:p}).promise,4)));case 4:v=T.h,h=v.headers["content-type"],pe(T,3);break;case 2:if(y=ce(T),!y||y.code!=1002&&y.code!=1001){T.A(3);break}return g.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(g.headers.Range="bytes=0-0"),b(T,Gr(e,g,i,{type:p}).promise,6);case 6:v=T.h,h=v.headers["content-type"];case 3:if(!h){T.A(7);break}if(s=h.toLowerCase().split(";")[0],s!="application/octet-stream"){T.A(8);break}if(v.data.byteLength){T.A(9);break}return g.method="GET",b(T,Gr(e,g,i,{type:p}).promise,10);case 10:v=T.h;case 9:Sa(oe(v.data))&&(s="video/mp2t");case 8:if(s!="application/octet-stream")return T.return(s);case 7:return T.return(Yl(t))}})}function X1(e,t,n,r,i,a,o){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=i||void 0,e.videoLayout=a||void 0,e.colorGamut=o||void 0)}function _h(e,t,n){return Gr(e,ht(t,e.g.retryParameters),0,{type:n?2:3})}function Y1(e){var t,n,r,i,a,o;return C(function(s){switch(s.g){case 1:return e.h?(le(s,2),t=Date.now(),b(s,e.update(),4)):s.return();case 4:n=Date.now(),Gt(e)&&(r=(n-t)/1e3,e.cc.sample(1,r),i=e.g.updatePeriod>0?e.g.updatePeriod:e.u,a=Math.max(0,i-Bs(e.cc)),e.F.ka(a)),pe(s,3);break;case 2:if(o=ce(s),!e.h)return s.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(o),s.return();o.severity=1,e.h.onError(o),e.F.ka(.1);case 3:if(!e.h)return s.return();e.h.onManifestUpdated(),G(s)}})}function Gt(e){return e.Fa!=Zl}function Jl(e,t){e.Fa=t,e.m&&e.m.cd(!Gt(e)),Gt(e)||e.F.stop()}function Gr(e,t,n,r){if(!e.$)throw new M(2,7,7001);return r||(r={}),r.isPreload=e.ec(),t=e.h.networkingEngine.request(n,t,r),_i(e.$,t),t}function $l(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function DI(e,t,n,r){var i,a,o,s,u,l;return C(function(c){if(c.g==1){if(n=="video/mp2t")throw new M(2,4,4040);if(U.shakaMediaKeysPolyfill==="apple")throw new M(2,4,4041);if(i=Ve(t,"METHOD"),a=["SAMPLE-AES","SAMPLE-AES-CTR"],!a.includes(i))return c.return(null);o="cenc",i=="SAMPLE-AES"&&(o="cbcs"),s=Ve(t,"URI"),u=xr("com.apple.fps",o,null,s);var d=new st(s).Db.replace(/-/g,"").toLowerCase();return(l=d.length===32&&/^[0-9a-f]+$/.test(d)?d:null)||!r?c.A(2):b(c,$1(e,r),3)}return c.g!=2&&(l=c.h),l&&u.keyIds.add(l),c.return(u)})}function J1(e,t,n,r,i,a){var o,s,u,l,c,d,h,p,g,v,y,T;return C(function(w){switch(w.g){case 1:if(n=="video/mp2t")throw new M(2,4,4040);if(U.shakaMediaKeysPolyfill==="apple")throw new M(2,4,4041);if(o=Ve(t,"METHOD"),s=["SAMPLE-AES","SAMPLE-AES-CTR"],!s.includes(o))return w.return(null);if(u=bi(r(),Ve(t,"URI"),a),u[0].startsWith("data:text/plain;base64,")){l=Sr(Rn(u[0].split("data:text/plain;base64,").pop())),w.A(2);break}return c=u.sort().join(""),e.ya.has(c)||(d=ht(u,e.g.retryParameters),h=Gr(e,d,6).promise,e.ya.set(c,h)),b(w,e.ya.get(c),3);case 3:p=w.h,l=Sr(p.data);case 2:if(g="00000000000000000000000000000000",!i){w.A(4);break}return b(w,$1(e,i),5);case 5:(v=w.h)&&(g=v);case 4:return y=new Map,y.set(g,l),T="cenc",o=="SAMPLE-AES"&&(T="cbcs"),w.return(Jp(y,T))}})}function $1(e,t){var n,r,i,a;return C(function(o){return o.g==1?(n=null,e.za.has(t)?(n=e.za.get(t),o.A(2)):(r=qo(t.P(),t.Kc(),t.Ic(),e.g.retryParameters),i=Ln,b(o,Gr(e,r,i,{type:0}).promise,3))):(o.g!=2&&(a=o.h,t.ue(a.data),n=gx(a.data),e.za.set(t,n)),o.return(n))})}q("shaka.hls.HlsParser",Wl);var jh=new Map().set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),RI=new Map().set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),PI=new Map().set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),LI=new Map().set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),NI=new Map().set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),Ql=new Map().set("audio",RI).set("video",PI).set("text",LI).set("image",NI),Q1=new Set(["video/mp2t"].concat(H(Cr))),Zl="VOD",UI="EVENT",Oh="LIVE";Ii("application/x-mpegurl",function(){return new Wl}),Ii("application/vnd.apple.mpegurl",function(){return new Wl});function ec(e){return Nl(e)}var _I=new Map().set("com.microsoft.playready",ec).set("com.microsoft.playready.recommendation",ec).set("com.microsoft.playready.software",ec).set("com.microsoft.playready.hardware",ec);function Bh(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.F=new Qi(5),this.o=new ve(function(){jI(e)}),this.C=new pa,this.m=new Map,this.B=function(){return!1}}f=Bh.prototype,f.configure=function(e,t){this.g=e,t&&(this.B=t)},f.start=function(e,t){var n=this;return C(function(r){if(r.g==1)return n.l=[e],n.h=t,b(r,Fh(n),2);if(!n.h)throw new M(2,7,7001);return r.return(n.j)})};function jI(e){var t;C(function(n){switch(n.g){case 1:return le(n,2),b(n,Fh(e),4);case 4:pe(n,3);break;case 2:t=ce(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();G(n)}})}f.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.C.destroy()},f.update=function(){var e=this,t;return C(function(n){if(n.g==1)return le(n,2),b(n,Fh(e),4);if(n.g!=2)return pe(n,0);if(t=ce(n),!e.h||!t)return n.return();e.h.onError(t),G(n)})},f.onExpirationUpdated=function(){},f.onInitialVariantChosen=function(){},f.banLocation=function(){},f.setMediaElement=function(){};function Fh(e){var t,n,r,i,a,o,s;return C(function(u){if(u.g==1)return t=ht(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),i=n.request(0,t,{type:5,isPreload:e.B()}),_i(e.C,i),b(u,i.promise,2);if(a=u.h,!e.h)return u.return();a.uri&&!e.l.includes(a.uri)&&e.l.unshift(a.uri);var l=a.uri,c=a.data,d=e.g.mss.manifestPreprocessor;if(d!=Qu){if(Ce("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),c=e1(c,"SmoothStreamingMedia"),!c)throw new M(2,4,4046,l);d(c),c=qn(c.outerHTML)}var h=mo(c,"SmoothStreamingMedia");if(!h)throw new M(2,4,4046,l);if(l=e.g.mss.manifestPreprocessorTXml,l!=Zu&&l(h),e.i||(e.i=new ae(null,0)),l=se(h,"IsLive",eu,!1))throw new M(2,4,4047);e.i.cd(!l),d=se(h,"TimeScale",Mt,1e7),c=se(h,"DVRWindowLength",Mt),l&&(c===0||isNaN(c))&&(c=1/0);var p=se(h,"CanSeek",eu,!1);c===0&&p&&(c=1/0),p=null,c&&c>0&&(p=c/d),l&&!isNaN(e.g.availabilityWindowOverride)&&(p=e.g.availabilityWindowOverride),p==null&&(p=1/0),e.i.Lf(p),c=se(h,"Duration",Mt,1/0),l||e.i.Ab(c/d),l={variants:[],textStreams:[],timescale:d,duration:c/d};var g;for(p=_e(h,"Protection"),d=e.g.mss.keySystemsBySystemId,c=[],p=m(p),g=p.next();!g.done;g=p.next())c=c.concat(_e(g.value,"ProtectionHeader"));if(c.length){for(p=[],g=0;g<c.length;g++){var v=c[g],y=v.attributes.SystemID.toLowerCase(),T=d[y];if(T){var w;e:{if(w=C0(v)){w=m(ir(w,"DATA"));for(var S=w.next();!S.done;S=w.next())if(S=ze(S.value,"KID")){w=Rn(ut(S)),w=new Uint8Array([w[3],w[2],w[1],w[0],w[5],w[4],w[7],w[6]].concat(H(w.slice(8)))),w=Sr(w);break e}}w=null}S=Rn(ut(v)),y=ki(y.replace(/-/g,"")),y=[{initData:Tu(S,y,new Set,0),initDataType:"cenc",keyId:w}],y=xr(T,"cenc",y),w&&y.keyIds.add(w),(T=_I.get(T))&&(y.licenseServerUri=T(v)),p.push(y)}}d=p}else d=[];for(g=d,p=[],d=[],c=[],h=_e(h,"StreamIndex"),h=m(h),v=h.next();!v.done;v=h.next()){v=v.value,T=_e(v,"QualityLevel"),y=l.timescale,w=l.duration,S=_e(v,"c");for(var k=[],D=0,x=0;x<S.length;++x){var I=S[x],A=S[x+1],R=se(I,"t",Mt),E=se(I,"d",Mt);if(I=se(I,"r",Ct),!E)break;if(R=R??D,(I=I||0)&&I--,I<0)if(A){if(A=se(A,"t",Mt),A==null||R>=A)break;I=Math.ceil((A-R)/E)-1}else{if(w==1/0||R/y>=w)break;I=Math.ceil((w*y-R)/E)-1}for(A=0;A<=I;++A)D=R+E,k.push({start:R/y,end:D/y,Md:R}),R=D}for(y=k,T=m(T),w=T.next();!w.done;w=T.next())(w=OI(e,v,w.value,y,g,l))&&(w.type!="audio"||e.g.disableAudio?w.type!="video"||e.g.disableVideo?w.type!=me||e.g.disableText||c.push(w):d.push(w):p.push(w))}for(h=[],p=m(p.length>0?p:[null]),g=p.next();!g.done;g=p.next())for(g=g.value,v=m(d.length>0?d:[null]),k=v.next();!k.done;k=v.next())T=h,y=T.push,w=e,S=g,k=k.value,x=0,S&&S.bandwidth&&S.bandwidth>0&&(x+=S.bandwidth),k&&k.bandwidth&&k.bandwidth>0&&(x+=k.bandwidth),w={id:w.u++,language:S?S.language:"und",disabledUntilTime:0,primary:!!S&&S.primary||!!k&&k.primary,audio:S,video:k,bandwidth:x,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},y.call(T,w);l.variants=h,l.textStreams=c,e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.qf()),Promise.resolve(),o=Date.now(),s=(o-r)/1e3,e.F.sample(1,s),G(u)})}function OI(e,t,n,r,i,a){var o=t.attributes.Type;if(o!=="audio"&&o!=="video"&&o!=="text")return Ae("Ignoring unrecognized type:",o),null;var s=t.attributes.Language,u=e.u++,l=se(n,"Bitrate",fr),c=se(n,"MaxWidth",fr),d=se(n,"MaxHeight",fr),h=se(n,"Channels",fr),p=se(n,"SamplingRate",fr),g=a.duration;r.length&&(g=r[r.length-1].end-r[0].start);var v=e.i.getDuration();e.i.Ab(Math.min(g,v)),(v=t.attributes.Name)&&(v+=n.attributes.Index),v||(v=String(u));var y={id:u,originalId:v,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:c||void 0,height:d||void 0,kind:"",encrypted:i.length>0,drmInfos:i,keyIds:new Set,language:Le(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:h,audioSamplingRate:p,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:g,timescale:a.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((i=t.attributes.Subtype)&&((i=KI.get(i))&&y.roles.push(i),i==="main"&&(y.primary=!0)),i=n.attributes.FourCC,(i===null||i==="")&&(i=t.attributes.FourCC),!i){if(o==="audio")i="AAC";else if(o==="video")return Ae('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!GI.includes(i.toUpperCase()))return Ae("Codec not supported:",i),null;switch(n=BI(n,o,i,y),y.mssPrivateData.codecPrivateData=n,o){case"audio":if(!n)return Ae("Quality unsupported without CodecPrivateData",o),null;y.type="audio",y.mimeType="mss/audio/mp4",y.codecs=FI(i,n);break;case"video":if(!n)return Ae("Quality unsupported without CodecPrivateData",o),null;y.type="video",y.mimeType="mss/video/mp4",y.codecs=VI(n);break;case"text":y.type=me,y.mimeType="application/mp4",(i==="TTML"||i==="DFXP")&&(y.codecs="stpp")}return y.fullMimeTypes.add(at(y.mimeType,y.codecs)),y.createSegmentIndex=function(){if(y.segmentIndex)return Promise.resolve();if(e.m.has(y.id))var T=e.m.get(y.id);else T=[],y.type=="video"&&(T=y.mssPrivateData.codecPrivateData.split("00000001").slice(1)),T={id:y.id,type:y.type,codecs:y.codecs,encrypted:y.encrypted,timescale:y.mssPrivateData.timescale,duration:y.mssPrivateData.duration,Bb:T,Ga:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:null,stream:y},T=ba(new ya([T])),e.m.set(y.id,T);return T=HI(e,new nn(function(){return[]},0,null,ju(y),y.mssPrivateData.timescale,T,null,y.encrypted),y,t,r),y.segmentIndex=new Me(T),Promise.resolve()},y.closeSegmentIndex=function(){y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null)},y}function BI(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=i[e],n==="AACH"?(n=new Uint8Array(4),e=i[e*2],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function FI(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function VI(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function HI(e,t,n,r,i){var a=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[],i=m(i);for(var o=i.next(),s={};!o.done;s={Pf:void 0},o=i.next())s.Pf=o.value,r.push(new ee(s.Pf.start,s.Pf.end,(function(u){return function(){return At(e.l,[a.replace("{start time}",String(u.Pf.Md))])}})(s),0,null,t,0,0,n.mssPrivateData.duration));return r}q("shaka.mss.MssParser",Bh);var GI="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),KI=new Map().set("CAPT","main").set("SUBT","alternate").set("DESC","main");Ii("application/vnd.ms-sstr+xml",function(){return new Bh});function Z1(e,t,n,r,i,a,o){if(n>=200&&n<=299&&n!=202||n==304)return{uri:i||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:a};a=null;try{a=lr(t)}catch{}throw new M(n==401||n==403?2:1,1,1001,r,n,a,e,o,i||r)}function Vh(){}function tc(e,t,n,r,i,a){var o=new JI;try{ma(t.headers).forEach(function(c,d){o.append(d,c)})}catch(c){return ri(new M(1,1,1002,e,c,n))}var s=new XI,u={Vh:!1,ij:!1};if(e=qI(e,t,n,{body:t.body||void 0,headers:o,method:t.method,signal:s.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},u,r,i,t.streamDataCallback,a.minBytesForProgressEvents||0),e=new ot(e,function(){return u.Vh=!0,s.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var l=new ve(function(){u.ij=!0,s.abort()});l.ka(t/1e3),e.finally(function(){l.stop()})}return e}function qI(e,t,n,r,i,a,o,s,u){var l,c,d,h,p,g,v,y,T,w,S,k,D,x,I;return C(function(A){switch(A.g){case 1:return l=zI,c=YI,h=new ArrayBuffer(0),g=p=0,v={},y=Date.now(),le(A,2),b(A,l(e,r),4);case 4:if(d=A.h,v=WI(d.headers),o(v),r.method=="HEAD"){A.A(5);break}return w=(T=d.headers.get("Content-Length"))?parseInt(T,10):0,d.body?(S=d.clone().body.getReader(),k=function(R){function E(){var P,L,B,O;return C(function(N){switch(N.g){case 1:return le(N,2),b(N,S.read(),4);case 4:P=N.h,pe(N,3);break;case 2:return ce(N),N.return();case 3:if(P.done){N.A(5);break}if(p+=P.value.byteLength,!s){N.A(5);break}return b(N,s(P.value),5);case 5:L=Date.now(),B=p-g,(L-y>100&&B>=u||P.done)&&(O=P.done?0:w-p,a(L-y,B,O),g=p,y=L),P.done?R.close():(R.enqueue(P.value),E()),G(N)}})}E()},new c({start:k}),b(A,d.arrayBuffer(),8)):b(A,d.arrayBuffer(),9);case 8:h=A.h,A.A(5);break;case 9:h=A.h,D=Date.now(),a(D-y,h.byteLength,0);case 5:t.headers.Range&&(x=t.headers.Range.replace("bytes=","").split("-").filter(function(R){return R}).map(function(R){return parseInt(R,10)}),x.length==2&&h.byteLength!=x[1]-x[0]+1&&Ae("Payload length does not match range requested bytes",t,d)),pe(A,3);break;case 2:throw I=ce(A),i.Vh?new M(1,1,7001,e,n):i.ij?new M(1,1,1003,e,n):new M(1,1,1002,e,I,n);case 3:return A.return(Z1(v,h,d.status,e,d.url,t,n))}})}function WI(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function eb(){if(U.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(U.Response){if(!new Response("").body)return!1}else return!1;return!(!U.fetch||"polyfill"in U.fetch||!U.AbortController)}q("shaka.net.HttpFetchPlugin",Vh),Vh.isSupported=eb,Vh.parse=tc;var zI=U.fetch,XI=U.AbortController,YI=U.ReadableStream,JI=U.Headers;eb()&&(Dr("http",tc,2,!0),Dr("https",tc,2,!0),Dr("blob",tc,2,!0));function tb(){}function nc(e,t,n,r,i,a){var o=new $I,s=Date.now(),u=0,l=new Promise(function(c,d){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials;var h={};o.onabort=function(){d(new M(1,1,7001,e,n))},o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.HEADERS_RECEIVED){var g=o.getAllResponseHeaders().trim().split(`\r
`),v={};g=m(g);for(var y=g.next();!y.done;y=g.next())y=y.value.split(": "),v[y[0].toLowerCase()]=y.slice(1).join(": ");h=v,i(h)}},o.onload=function(g){var v=o.response;try{r(Date.now()-s,g.loaded-u,0);var y=Z1(h,v,o.status,e,o.responseURL,t,n);c(y)}catch(T){d(T)}},o.onerror=function(g){d(new M(1,1,1002,e,g,n))},o.ontimeout=function(){d(new M(1,1,1003,e,n))},o.onprogress=function(g){var v=Date.now(),y=a.minBytesForProgressEvents||0,T=g.loaded-u;(v-s>100&&T>=y||g.lengthComputable&&g.loaded==g.total)&&(r(v-s,T,o.readyState==4?0:g.total-g.loaded),u=g.loaded,s=v)};for(var p in t.headers)try{o.setRequestHeader(p.toLowerCase(),t.headers[p])}catch(g){throw new M(1,1,1002,e,g,n)}o.send(t.body)});return new ot(l,function(){return o.abort(),Promise.resolve()})}q("shaka.net.HttpXHRPlugin",tb),tb.parse=nc;var $I=U.XMLHttpRequest;Dr("http",nc,1,!0),Dr("https",nc,1,!0),Dr("blob",nc,1,!0);function nb(e,t,n,r,i){this.g=e,this.i=t,this.groupId=n,this.h=r,this.j=i}function Hh(e){var t=e.ac(!1);return t?Tr(t):e.P().map(function(n){return"{"+encodeURI(n.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function QI(e,t){return qo(e.g.P(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function rb(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function ib(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}rb.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}};function ab(e){return e.i==0?0:e.j/e.i}function Gh(e){var t=this;this.u=e,this.i=new Map,this.h=new ga(function(){return Kh(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new rb,this.l=!1}Gh.prototype.destroy=function(){return this.h.destroy()};function ZI(e,t,n){e.o=t,e.m=n}function Kh(e){e.l=!0;var t=e.j.map(function(n){return n()});return e.j=[],Promise.all(t)}Gh.prototype.queue=function(e,t,n,r,i){var a=this;Ge(this.h);var o=(this.i.get(e)||Promise.resolve()).then(function(){var s,u,l,c,d,h,p;return C(function(g){if(g.g==1)return b(g,nE(a,t),2);if(s=g.h,a.h.g)throw new M(2,9,7001);if(r)for(c in u=oe(s),l=new gd(u),l.data)d=Number(c),h=l.data[d],p=l.g[d],a.m(h,p);return a.g.close(n,s.byteLength),a.o(ab(a.g),a.g.g),g.return(i(s))})});return this.i.set(e,o),o};function eE(e,t,n,r,i,a){Ge(e.h);var o=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new M(2,9,7001);if(i){var s=oe(n);s=new gd(s);for(var u in s.data){var l=Number(u);e.m(s.data[l],s.g[l])}}return e.g.close(r,n.byteLength),e.o(ab(e.g),e.g.g),a(n)});e.i.set(t,o)}function tE(e){return C(function(t){return t.g==1?b(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}function nE(e,t){var n,r,i,a;return C(function(o){return o.g==1?(n=Ln,r=e.u.request(n,t),i=function(){return r.abort()},e.j.push(i),b(o,r.promise,2)):(a=o.h,Kn(e.j,i),o.return(a.data))})}function rc(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Be,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}rc.prototype.abort=function(){var e=this;return C(function(t){if(t.g==1){try{e.i.abort()}catch{}return le(t,2),b(t,e.g,4)}if(t.g!=2)return pe(t,0);ce(t),G(t)})};function qh(e,t){return new Promise(function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(){var a;return C(function(o){if(o.g==1)return i.result==null?(n(),o.return()):(a=i.result,b(o,t(a.key,a.value,a),2));a.continue(),G(o)})}})}rc.prototype.store=function(){return this.h},rc.prototype.promise=function(){return this.g};function Wh(e){this.h=e,this.g=[]}Wh.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Wi(e,t){return ic(e,t,"readwrite")}function ic(e,t,n){n=e.h.transaction([t],n);var r=new rc(n,t);return e.g.push(r),r.promise().then(function(){Kn(e.g,r)},function(){Kn(e.g,r)}),r}function zi(e,t,n){this.h=new Wh(e),this.i=t,this.g=n}f=zi.prototype,f.destroy=function(){return this.h.destroy()},f.hasFixedKeySpace=function(){return!0},f.addSegments=function(){return ob(this.i)},f.removeSegments=function(e,t){return sb(this,this.i,e,t)},f.getSegments=function(e){var t=this,n;return C(function(r){return r.g==1?b(r,ub(t,t.i,e),2):(n=r.h,r.return(n.map(function(i){return t.Xh(i)})))})},f.addManifests=function(){return ob(this.g)},f.updateManifest=function(){return Promise.reject(new M(2,9,9016,"Cannot modify values in "+this.g))};function rE(e,t,n){e=Wi(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}f.updateManifestExpiration=function(e,t){var n=Wi(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(i){(i=i.target.result)&&(i.expiration=t,r.put(i,e))},n.promise()},f.removeManifests=function(e,t){return sb(this,this.g,e,t)},f.getManifests=function(e){var t=this,n;return C(function(r){return r.g==1?b(r,ub(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(i){return t.Vd(i)}))))})},f.getAllManifests=function(){var e=this,t,n;return C(function(r){return r.g==1?(t=ic(e.h,e.g,"readonly"),n=new Map,b(r,qh(t,function(i,a){var o;return C(function(s){if(s.g==1)return b(s,e.Vd(a),2);o=s.h,n.set(i,o),G(s)})}),2)):r.g!=3?b(r,t.promise(),3):r.return(n)})},f.Xh=function(e){return e},f.Vd=function(e){return Promise.resolve(e)};function ob(e){return Promise.reject(new M(2,9,9011,"Cannot add new value to "+e))}f.add=function(e,t){var n=this,r,i,a,o,s,u,l;return C(function(c){if(c.g==1){for(r=Wi(n.h,e),i=r.store(),a=[],o=m(t),s=o.next(),u={};!s.done;u={hh:void 0},s=o.next())l=s.value,u.hh=i.add(l),u.hh.onsuccess=(function(d){return function(){a.push(d.hh.result)}})(u);return b(c,r.promise(),2)}return c.return(a)})};function sb(e,t,n,r){e=Wi(e.h,t),t=e.store(),n=m(n);for(var i=n.next(),a={};!i.done;a={Tg:void 0},i=n.next())a.Tg=i.value,t.delete(a.Tg).onsuccess=(function(o){return function(){return r(o.Tg)}})(a);return e.promise()}function ub(e,t,n){var r,i,a,o,s,u,l;return C(function(c){if(c.g==1){for(r=ic(e.h,t,"readonly"),i=r.store(),a={},o=[],s=m(n),u=s.next(),l={};!u.done;l={Ef:void 0,lf:void 0},u=s.next())l.lf=u.value,l.Ef=i.get(l.lf),l.Ef.onsuccess=(function(d){return function(){d.Ef.result==null&&o.push(d.lf),a[d.lf]=d.Ef.result}})(l);return b(c,r.promise(),2)}if(o.length)throw new M(2,9,9012,"Could not find values for "+o);return c.return(n.map(function(d){return a[d]}))})}function As(e){this.g=new Wh(e)}As.prototype.destroy=function(){return this.g.destroy()},As.prototype.getAll=function(){var e=this,t,n;return C(function(r){return r.g==1?(t=ic(e.g,"session-ids","readonly"),n=[],b(r,qh(t,function(i,a){n.push(a)}),2)):r.g!=3?b(r,t.promise(),3):r.return(n)})},As.prototype.add=function(e){var t=Wi(this.g,"session-ids"),n=t.store();e=m(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},As.prototype.remove=function(e){var t=this,n;return C(function(r){return r.g==1?(n=Wi(t.g,"session-ids"),b(r,qh(n,function(i,a,o){e.includes(a.sessionId)&&o.delete()}),2)):b(r,n.promise(),0)})};function on(){this.g=new Map}on.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},on.prototype.init=function(){var e=this;ks.forEach(function(i,a){(i=i())&&e.g.set(a,i)});for(var t=[],n=m(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function lb(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(i,a){i.hasFixedKeySpace()||t||(t={path:{Pb:r,cb:a},cb:i})})}),t)return t;throw new M(2,9,9013,"Could not find a cell that supports add-operations")}function iE(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(i,a){t({Pb:r,cb:a},i)})})}function ac(e,t,n){if(e=e.g.get(t),!e)throw new M(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new M(2,9,9013,"Could not find cell with name "+n);return t}function aE(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function oE(e){var t=Array.from(e.g.keys());if(!t.length)throw new M(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function sE(e){var t,n,r;return C(function(i){return i.g==1?(t=Array.from(e.g.values()),n=t.length>0,n||(r=ks,r.forEach(function(a){(a=a())&&t.push(a)})),b(i,Promise.all(t.map(function(a){return a.erase()})),2)):n?i.A(0):b(i,Promise.all(t.map(function(a){return a.destroy()})),0)})}function cb(e,t){ks.set(e,t)}q("shaka.offline.StorageMuxer",on),on.unregister=function(e){ks.delete(e)},on.register=cb,on.prototype.destroy=on.prototype.destroy;var ks=new Map;function Is(){zi.apply(this,arguments)}it(Is,zi),Is.prototype.updateManifestExpiration=function(e,t){var n=this,r,i,a;return C(function(o){return r=Wi(n.h,n.g),i=r.store(),a=new Be,i.get(e).onsuccess=function(s){(s=s.target.result)?(s.expiration=t,i.put(s),a.resolve()):a.reject(new M(2,9,9012,"Could not find values for "+e))},b(o,Promise.all([r.promise(),a]),0)})},Is.prototype.Vd=function(e){var t,n,r,i,a,o;return C(function(s){if(s.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime,a=uE(e.periods[n],i),t.push(a);return b(s,K0(t),2)}return o=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function uE(e,t){cE(e);for(var n=m(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(i){return lE(i,e.startTime,t)})}function lE(e,t,n){var r=e.initSegmentUri?db(e.initSegmentUri):null,i=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(o){var s=db(o.uri);return{startTime:t+o.startTime,endTime:t+o.endTime,dataKey:s,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:a,timestampOffset:i,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}Is.prototype.Xh=function(e){return{data:e.data}};function db(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new M(2,9,9004,"Could not parse uri "+e)}function cE(e){var t=e.streams.filter(function(s){return s.contentType=="audio"});if(e=e.streams.filter(function(s){return s.contentType=="video"}),!t.every(function(s){return s.variantIds})||!e.every(function(s){return s.variantIds})){for(var n=m(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=m(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var i=m(e),a=i.next();!a.done;a=i.next())a.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=m(t),a=i.next();!a.done;a=i.next())a.value.variantIds.push(r);if(e.length&&t.length)for(t=m(t),r=t.next();!r.done;r=t.next())for(r=r.value,i=m(e),a=i.next();!a.done;a=i.next()){a=a.value;var o=n++;r.variantIds.push(o),a.variantIds.push(o)}}}function oc(){zi.apply(this,arguments)}it(oc,zi),oc.prototype.Vd=function(e){var t,n,r,i,a,o;return C(function(s){if(s.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime;for(var u=e.periods[n],l=[],c=m(u.streams),d=c.next();!d.done;d=c.next())d=d.value,d.variantIds.length!=0&&l.push(dE(d,u.startTime,u.startTime+i));a=l,t.push(a)}return b(s,K0(t),2)}return o=s.h,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o,sequenceMode:!1})})};function dE(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function zh(){zi.apply(this,arguments)}it(zh,zi),f=zh.prototype,f.hasFixedKeySpace=function(){return!1},f.addSegments=function(e){return this.add(this.i,e)},f.addManifests=function(e){return this.add(this.g,e)},f.updateManifest=function(e,t){return rE(this,e,t)},f.Vd=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function fb(){this.m=this.j=this.i=this.h=this.g=this.l=null}f=fb.prototype,f.init=function(){var e=this,t=new Be,n=!1,r=new ve(function(){n=!0,t.reject(new M(2,9,9017))});typeof sc=="number"&&sc>0&&r.ka(sc);var i=U.indexedDB.open("shaka_offline_db",5);return i.onsuccess=function(){if(!n){r.stop();var a=i.result;e.l=a;var o=a.objectStoreNames;o=o.contains("manifest")&&o.contains("segment")?new Is(a,"segment","manifest"):null,e.g=o,o=a.objectStoreNames,o=o.contains("manifest-v2")&&o.contains("segment-v2")?new oc(a,"segment-v2","manifest-v2"):null,e.h=o,o=a.objectStoreNames,o=o.contains("manifest-v3")&&o.contains("segment-v3")?new oc(a,"segment-v3","manifest-v3"):null,e.i=o,o=a.objectStoreNames,o=o.contains("manifest-v5")&&o.contains("segment-v5")?new zh(a,"segment-v5","manifest-v5"):null,e.j=o,a=a.objectStoreNames.contains("session-ids")?new As(a):null,e.m=a,t.resolve()}},i.onupgradeneeded=function(){for(var a=i.result,o=m(["segment-v5","manifest-v5","session-ids"]),s=o.next();!s.done;s=o.next())s=s.value,a.objectStoreNames.contains(s)||a.createObjectStore(s,{autoIncrement:!0})},i.onerror=function(a){n||(r.stop(),t.reject(new M(2,9,9001,i.error)),a.preventDefault())},t},f.destroy=function(){var e=this;return C(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return b(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return b(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return b(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return b(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return b(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),G(t)}})},f.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},f.getEmeSessionCell=function(){return this.m},f.erase=function(){var e=this;return C(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return b(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return b(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return b(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return b(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),b(t,fE(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,b(t,e.init(),0)}})};function fE(){var e=new Be,t=U.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new M(2,9,9001,t.error)),n.preventDefault()},e}var sc=5;q("shaka.offline.indexeddb.StorageMechanismOpenTimeout",sc),cb("idb",function(){return ge().Ch()?new fb:null});function vr(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}vr.prototype.Pb=function(){return this.i},vr.prototype.cb=function(){return this.h},vr.prototype.key=function(){return this.l},vr.prototype.toString=function(){return this.j};function Xh(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new vr(t,n,r,Number(e[4])):null}function hb(e,t){this.h=e,this.g=t}function pb(e,t){var n=new ae(null,0);n.Ab(t.duration);var r=t.streams.filter(function(l){return l.type=="audio"}),i=t.streams.filter(function(l){return l.type=="video"});r=hE(e,r,i,n),i=t.streams.filter(function(l){return l.type==me}).map(function(l){return uc(e,l,n)});var a=t.streams.filter(function(l){return l.type=="image"}).map(function(l){return uc(e,l,n)}),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=m(r.values()),u=s.next();!u.done;u=s.next())u=u.value,u.audio&&u.audio.encrypted&&(u.audio.drmInfos=o),u.video&&u.video.encrypted&&(u.video.drmInfos=o);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i,imageStreams:a,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function hE(e,t,n,r){for(var i=new Set,a=m(t),o=a.next();!o.done;o=a.next()){o=m(o.value.variantIds);for(var s=o.next();!s.done;s=o.next())i.add(s.value)}for(a=m(n),o=a.next();!o.done;o=a.next())for(o=m(o.value.variantIds),s=o.next();!s.done;s=o.next())i.add(s.value);for(a=new Map,i=m(i),o=i.next();!o.done;o=i.next())o=o.value,a.set(o,{id:o,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),i=t.next();!i.done;i=t.next())for(o=i.value,i=uc(e,o,r),o=m(o.variantIds),s=o.next();!s.done;s=o.next())s=a.get(s.value),s.language=i.language,s.primary=s.primary||i.primary,s.audio=i;for(n=m(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=uc(e,i,r),i=m(i.variantIds),o=i.next();!o.done;o=i.next())o=a.get(o.value),o.primary=o.primary||t.primary,o.video=t;return a}function uc(e,t,n){var r=t.segments.map(function(i){return pE(e,i,t)});return n.me(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Me(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([at(t.mimeType,t.codecs)]),isAudioMuxedInVideo:t.isAudioMuxedInVideo||!1,baseOriginalId:null}}function pE(e,t,n){var r=new vr("segment",e.h,e.g,t.dataKey);return e=new ee(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?gE(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.Mf(t.thumbnailSprite),e}function gE(e,t){var n=new vr("segment",e.h,e.g,t);return new nn(function(){return[n.toString()]},0,null)}function gb(){this.g=null}f=gb.prototype,f.configure=function(){},f.start=function(e,t){var n=this,r,i,a,o,s,u,l;return C(function(c){switch(c.g){case 1:if(r=Xh(e),n.g=r,r==null||r.g!="manifest")throw new M(2,1,9004,e);return i=new on,br(c,2),b(c,i.init(),4);case 4:return b(c,ac(i,r.Pb(),r.cb()),5);case 5:return a=c.h,b(c,a.getManifests([r.key()]),6);case 6:return o=c.h,s=o[0],u=new hb(r.Pb(),r.cb()),l=pb(u,s),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return yn(c),b(c,i.destroy(),7);case 7:bn(c,0)}})},f.stop=function(){return Promise.resolve()},f.update=function(){},f.onExpirationUpdated=function(e,t){var n=this,r,i,a,o,s,u,l;return C(function(c){switch(c.g){case 1:return r=n.g,i=new on,le(c,2,3),b(c,i.init(),5);case 5:return b(c,ac(i,r.Pb(),r.cb()),6);case 6:return a=c.h,b(c,a.getManifests([r.key()]),7);case 7:if(o=c.h,s=o[0],u=s.sessionIds.includes(e),l=s.expiration==null||s.expiration>t,!u||!l){c.A(3);break}return b(c,a.updateManifestExpiration(r.key(),t),3);case 3:return yn(c),b(c,i.destroy(),10);case 10:bn(c,0);break;case 2:ce(c),c.A(3)}})},f.onInitialVariantChosen=function(){},f.banLocation=function(){},f.setMediaElement=function(){},Ii("application/x-offline-manifest",function(){return new gb});function mb(){}function vb(e,t){var n=Xh(e);return n&&n.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t},e=ha(e)):e=n&&n.g=="segment"?mE(n.key(),n,t):ri(new M(2,1,9004,e)),e}function mE(e,t,n){var r=new on;return ha(void 0).Xa(function(){return r.init()}).Xa(function(){return ac(r,t.Pb(),t.cb())}).Xa(function(i){return i.getSegments([t.key()])}).Xa(function(i){return{uri:t,data:i[0].data,headers:{},originalRequest:n}}).finally(function(){return r.destroy()})}q("shaka.offline.OfflineScheme",mb),mb.plugin=vb,Dr("offline",vb);function yb(e,t,n){var r,i,a,o,s,u;return C(function(l){switch(l.g){case 1:r=[];for(var c=[],d=m(n),h=d.next();!h.done;h=d.next()){h=h.value;for(var p=!1,g=m(c),v=g.next();!v.done;v=g.next())if(v=v.value,yE(v.info,h)){v.sessionIds.push(h.sessionId),p=!0;break}p||c.push({info:h,sessionIds:[h.sessionId]})}i=m(c),a=i.next();case 2:if(a.done){l.A(4);break}return o=a.value,s=vE(e,t,o),b(l,s,5);case 5:u=l.h,r=r.concat(u),a=i.next(),l.A(2);break;case 4:return l.return(r)}})}function vE(e,t,n){var r,i;return C(function(a){switch(a.g){case 1:return r=new Su({wc:t,onError:function(){},zf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),le(a,2),r.configure(e),b(a,$T(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:pe(a,3);break;case 2:return ce(a),b(a,r.destroy(),5);case 5:return a.return([]);case 3:return i=[],b(a,Promise.all(n.sessionIds.map(function(o){return C(function(s){if(s.g==1)return le(s,2),b(s,eS(r,o),4);if(s.g!=2)return i.push(o),pe(s,0);ce(s),G(s)})})),6);case 6:return b(a,r.destroy(),7);case 7:return a.return(i)}})}function yE(e,t){function n(r,i){return r.robustness==i.robustness&&r.contentType==i.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Si(e.audioCapabilities,t.audioCapabilities,n)&&Si(e.videoCapabilities,t.videoCapabilities,n)}function bE(e,t,n){var r=t.presentationTimeline.getDuration();return t=bb(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function Yh(e,t){var n=pb(new hb(e.Pb(),e.cb()),t),r=t.appMetadata||{};return n=bb(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function bb(e){var t=[],n=hu(e.variants);n=m(n);for(var r=n.next();!r.done;r=n.next())t.push(Ni(r.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Ui(n.value));return t}function wE(){this.g=new Map}function TE(e,t){var n=t.audio,r=t.video;if(n&&!r&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&r&&e.g.set(r.id,r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,a=r.bandwidth||t.bandwidth-i;a<=0&&(a=t.bandwidth),e.g.set(n.id,i),e.g.set(r.id,a)}}function SE(e,t){e.g.set(t.id,t.bandwidth||2048)}function wb(e,t){return e=e.g.get(t),e==null&&(e=0),e}function Et(e){var t=this;if(e&&e.constructor!=j)throw new M(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Yb()):(this.h=Ra(),this.g=new Xe,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new ga(function(){var r,i,a,o,s;return C(function(u){switch(u.g){case 1:return b(u,Promise.all(t.l.map(function(l){return Kh(l)})),2);case 2:for(r=function(){},i=[],a=m(t.i),o=a.next();!o.done;o=a.next())s=o.value,i.push(s.then(r,r));return b(u,Promise.all(i),3);case 3:if(!n){u.A(4);break}return b(u,t.g.destroy(),4);case 4:t.h=null,t.g=null,G(u)}})}),this.m=1e9}function Jh(){if(mr(ge()))e:{for(var e=m(ks.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}f=Et.prototype,f.destroy=function(){return this.j.destroy()},f.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Xu(e,t)),_r(this.h,e)},f.getConfiguration=function(){var e=Ra();return _r(e,this.h,Ra()),e},f.Yb=function(){return this.g},f.store=function(e,t,n,r,i){var a=this,o=this.getConfiguration(),s=new Gh(this.g);return this.l.push(s),t=xE(this,e,t||{},r||[],i||[],function(){var u;return C(function(l){return l.g==1?n?l.A(2):b(l,Ea(e,a.g,o.manifest.retryParameters),3):(l.g!=2&&(n=l.h),u=tg(e,n||null),l.return(u()))})},o,s),t=new ot(t,function(){return Kh(s)}),t.finally(function(){Kn(a.l,s)}),BE(this,t)};function xE(e,t,n,r,i,a,o,s){var u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L,B,O,N;return C(function(_){switch(_.g){case 1:return lc(),l=u=null,c=new on,p=h=d=null,le(_,2,3),b(_,a(),5);case 5:return u=_.h,b(_,PE(e,t,u,o),6);case 6:if(g=_.h,wn(e),v=!g.presentationTimeline.W()&&!g.presentationTimeline.Vc(),!v)throw new M(2,9,9005,t);y=m(r),T=y.next();case 7:if(T.done){_.A(9);break}return w=T.value,b(_,LE(e,w,g),10);case 10:S=_.h,g.imageStreams.push(S),wn(e),T=y.next(),_.A(7);break;case 9:k=m(i),D=k.next();case 11:return D.done?(um(o.drm.clearKeys,g.variants),A=g.variants.some(function(F){if(F.audio){for(var V=m(F.audio.drmInfos),ue=V.next();!ue.done;ue=V.next())if(ue.value.licenseServerUri.startsWith("data:"))return!0}if(F.video){for(F=m(F.video.drmInfos),V=F.next();!V.done;V=F.next())if(V.value.licenseServerUri.startsWith("data:"))return!0}return!1}),R=o.offline.usePersistentLicense,A&&(R=!1),b(_,e.md(g,function(F){p=p||F},o,R),15)):(x=D.value,b(_,NE(e,g,x.uri,x.language,x.kind,x.mime,x.codecs),14));case 14:I=_.h,g.textStreams.push(I),wn(e),D=k.next(),_.A(11);break;case 15:if(l=_.h,wn(e),p)throw p;return b(_,kE(g,l,o,R),16);case 16:return b(_,c.init(),17);case 17:return wn(e),b(_,lb(c),18);case 18:return d=_.h,wn(e),E=IE(l,g,t,n,o,s,R),P=E.xk,L=E.Gh,b(_,d.cb.addManifests([P]),19);case 19:if(B=_.h,wn(e),h=B[0],wn(e),p)throw p;return b(_,AE(e,L,h,P,s,o,d.cb,g,l,R),20);case 20:return wn(e),Ab(g,P,l,R),b(_,d.cb.updateManifest(h,P),21);case 21:return wn(e),O=new vr("manifest",d.path.Pb,d.path.cb,h),_.return(Yh(O,P));case 3:return yn(_),b(_,c.destroy(),22);case 22:if(!u){_.A(23);break}return b(_,u.stop(),23);case 23:if(!l){_.A(25);break}return b(_,l.destroy(),25);case 25:bn(_,0);break;case 2:if(N=ce(_),h==null){_.A(27);break}return b(_,Tb(h),27);case 27:throw p||N}})}function AE(e,t,n,r,i,a,o,s,u,l){var c,d,h,p,g,v,y,T,w,S,k;return C(function(D){switch(D.g){case 1:if(c={},d=0,h=function(){if(e.j.g||i.l)throw new M(2,9,7001)},p=function(x,I){var A,R,E,P,L,B,O,N,_;return C(function(F){if(F.g==1){for(A=m(x),R=A.next(),E={};!R.done;E={qc:void 0},R=A.next())E.qc=R.value,h(),P=QI(E.qc,a),L=E.qc.i,B=E.qc.h,O=(function(V){return function(ue){var z,Re,fe,je;return C(function(Se){switch(Se.g){case 1:if(z=V.qc.g,Re=z.ac(!1),!z.aesKey||Re){Se.A(2);break}return b(Se,Yd(ue,z.aesKey,V.qc.j),3);case 3:ue=Se.h;case 2:return fe=Hh(z),b(Se,o.addSegments([{data:ue}]),4);case 4:je=Se.h,h(),c[fe]=je[0],d+=ue.byteLength,G(Se)}})}})(E),N=E.qc.g,(_=N.ac(!1))?eE(i,E.qc.groupId,_,L,B,O):i.queue(E.qc.groupId,P,L,B,O);return b(F,tE(i),2)}return h(),!I||i.l?F.A(0):(Ab(s,r,u,l),b(F,o.updateManifest(n,r),0))})},g=!1,le(D,2),!$h(s)||!g||xb(s)){D.A(4);break}return b(D,p(t.filter(function(x){return x.h}),!0),5);case 5:return h(),t=t.filter(function(x){return!x.h}),v=c,y=d,c={},d=0,b(D,Sb(o,n,r,v,y,function(){return wn(e)}),6);case 6:h();case 4:if(g){D.A(7);break}return b(D,p(t,!1),8);case 8:return h(),T=c,w=d,c={},d=0,b(D,Sb(o,n,r,T,w,function(){return h()}),9);case 9:h();case 7:pe(D,0);break;case 2:return S=ce(D),k=Object.values(c),b(D,o.removeSegments(k,function(){}),10);case 10:throw S}})}function Tb(e){var t,n,r,i;return C(function(a){switch(a.g){case 1:return t=new on,b(a,t.init(),2);case 2:return b(a,lb(t),3);case 3:return n=a.h,r=new vr("manifest",n.path.Pb,n.path.cb,e),b(a,t.destroy(),4);case 4:return i=new Et,b(a,i.remove(r.toString()),0)}})}function Sb(e,t,n,r,i,a){var o,s,u,l,c,d,h,p,g,v,y;return C(function(T){switch(T.g){case 1:for(o=!1,le(T,2),s=!0,u=m(n.streams),l=u.next();!l.done;l=u.next())for(c=l.value,d=m(c.segments),h=d.next();!h.done;h=d.next())p=h.value,g=p.pendingSegmentRefId?r[p.pendingSegmentRefId]:null,g!=null&&(p.dataKey=g,p.pendingSegmentRefId=void 0),g=p.pendingInitSegmentRefId?r[p.pendingInitSegmentRefId]:null,g!=null&&(p.initSegmentKey=g,p.pendingInitSegmentRefId=void 0),p.pendingSegmentRefId&&(s=!1),p.pendingInitSegmentRefId&&(s=!1);return n.size+=i,s&&(n.isIncomplete=!1),b(T,e.updateManifest(t,n),4);case 4:o=!0,a(),pe(T,0);break;case 2:return v=ce(T),b(T,Tb(t),5);case 5:if(o){T.A(6);break}return y=Object.values(r),b(T,e.removeSegments(y,function(){}),6);case 6:throw v}})}function kE(e,t,n,r){var i,a,o,s,u,l,c,d,h,p,g,v,y,T,w,S,k,D,x,I,A,R,E,P,L,B,O,N,_,F;return C(function(V){switch(V.g){case 1:return i={width:1/0,height:1/0},RT(e,n.restrictions,i),b(V,Eg(t,e,r,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(a=[],o=n.preferredDecodingAttributes,s=n.preferredVideoCodecs,u=n.preferredAudioCodecs,l=n.preferredTextFormats,Ig(e,s,u,o,l),c=m(e.variants),d=c.next();!d.done;d=c.next())h=d.value,a.push(Ni(h));for(p=m(e.textStreams),g=p.next();!g.done;g=p.next())v=g.value,a.push(Ui(v));for(y=m(e.imageStreams),T=y.next();!T.done;T=y.next())w=T.value,a.push(cd(w));return b(V,n.offline.trackSelectionCallback(a),3);case 3:for(S=V.h,k=e.presentationTimeline.getDuration(),D=0,x=m(S),I=x.next();!I.done;I=x.next())A=I.value,R=A.bandwidth*k/8,D+=R;return le(V,4),b(V,n.offline.downloadSizeCallback(D),6);case 6:if(E=V.h,!E)throw new M(2,9,9014);pe(V,5);break;case 4:throw P=ce(V),P instanceof M?P:new M(2,9,9015);case 5:for(L=new Set,B=new Set,O=new Set,N=m(S),_=N.next();!_.done;_=N.next())F=_.value,F.type=="variant"&&L.add(F.id),F.type=="text"&&B.add(F.id),F.type=="image"&&O.add(F.id);e.variants=e.variants.filter(function(ue){return L.has(ue.id)}),e.textStreams=e.textStreams.filter(function(ue){return B.has(ue.id)}),e.imageStreams=e.imageStreams.filter(function(ue){return O.has(ue.id)}),HE(e),G(V)}})}function IE(e,t,n,r,i,a,o){var s=bE(n,t,r),u=i.offline.progressCallback;ZI(a,function(g,v){s.size=v,u(s,g)},function(g,v){l&&o&&c==v&&Mo(e,"cenc",g)});var l=$h(t)&&!xb(t),c=null;l&&(c=GE.get(e.g.keySystem));for(var d=new wE,h=m(t.textStreams),p=h.next();!p.done;p=h.next())d.g.set(p.value.id,52);for(h=m(t.imageStreams),p=h.next();!p.done;p=h.next())SE(d,p.value);for(h=m(t.variants),p=h.next();!p.done;p=h.next())TE(d,p.value);return a=_E(a,d,t,i),i=a.streams,a=a.Gh,(d=e.g)&&o&&(d.initData=[]),{xk:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.$d(),streams:i,sessionIds:o?tm(e):[],drmInfo:d,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Gh:a}}function $h(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function xb(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function Ab(e,t,n,r){if(t.expiration=n.$d(),n=tm(n),t.sessionIds=r?n:[],$h(e)&&r&&!n.length)throw new M(2,9,9007)}f.remove=function(e){return Qh(this,EE(this,e))};function EE(e,t){var n,r,i,a,o,s;return C(function(u){switch(u.g){case 1:if(lc(),n=Xh(t),n==null||n.g!="manifest")throw new M(2,9,9004,t);return r=n,i=new on,br(u,2),b(u,i.init(),4);case 4:return b(u,ac(i,r.Pb(),r.cb()),5);case 5:return a=u.h,b(u,a.getManifests([r.key()]),6);case 6:return o=u.h,s=o[0],b(u,Promise.all([CE(e,s,i),ME(a,r,s)]),2);case 2:return yn(u),b(u,i.destroy(),8);case 8:bn(u,0)}})}function kb(e,t){for(var n=[],r=m(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&i.type=="video"?n.push({contentType:at(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||i.type!="audio"||n.push({contentType:at(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function CE(e,t,n){return C(function(r){return b(r,VE(e.g,e.h.drm,n,t),0)})}function ME(e,t,n){function r(){}var i=FE(n);return Yh(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}f.Qk=function(){return Qh(this,DE(this))};function DE(e){var t,n,r,i,a,o,s,u,l,c;return C(function(d){switch(d.g){case 1:return lc(),t=e.g,n=e.h.drm,r=new on,i=!1,br(d,2),b(d,r.init(),4);case 4:a=[],aE(r,function(h){return a.push(h)}),o=m(a),s=o.next();case 5:if(s.done){d.A(2);break}return u=s.value,b(d,u.getAll(),8);case 8:return l=d.h,b(d,yb(n,t,l),9);case 9:return c=d.h,b(d,u.remove(c),10);case 10:c.length!=l.length&&(i=!0),s=o.next(),d.A(5);break;case 2:return yn(d),b(d,r.destroy(),11);case 11:bn(d,3);break;case 3:return d.return(!i)}})}f.list=function(){return Qh(this,RE())};function RE(){var e,t,n;return C(function(r){switch(r.g){case 1:return lc(),e=[],t=new on,br(r,2),b(r,t.init(),4);case 4:return n=Promise.resolve(),iE(t,function(i,a){n=n.then(function(){var o;return C(function(s){if(s.g==1)return b(s,a.getAllManifests(),2);o=s.h,o.forEach(function(u,l){u=Yh(new vr("manifest",i.Pb,i.cb,l),u),e.push(u)}),G(s)})})}),b(r,n,2);case 2:return yn(r),b(r,t.destroy(),6);case 6:bn(r,3);break;case 3:return r.return(e)}})}function PE(e,t,n,r){var i,a,o,s,u;return C(function(l){if(l.g==1)return i=null,a=e.g,o={networkingEngine:a,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(c){i=c},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(r.manifest),wn(e),b(l,n.start(t,o),2);if(l.g!=3)return s=l.h,wn(e),u=Eb(s),b(l,Promise.all(hd(u,function(c){return c.createSegmentIndex()})),3);if(wn(e),i)throw i;return l.return(s)})}function LE(e,t,n){var r,i,a,o,s,u,l,c,d,h,p,g,v,y,T;return C(function(w){switch(w.g){case 1:return b(w,Ib(e,t),2);case 2:if(r=w.h,r!="text/vtt")throw new M(1,2,2017,t);return b(w,UE(t,e.g,e.h.streaming.retryParameters),3);case 3:if(i=w.h,a=So(r),!a)throw new M(2,2,2014,r);for(o=a(),s={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},u=oe(i),l=o.parseMedia(u,s,t,[]),c=[],d=m(l),h=d.next(),p={};!h.done;p={Vf:void 0,od:void 0},h=d.next())p.od=h.value,p.Vf=null,g=(function(S){return function(){return S.Vf==null&&(S.Vf=At([t],[S.od.payload])),S.Vf||[]}})(p),v=new ee(p.od.startTime,p.od.endTime,g,0,null,null,0,0,1/0),p.od.payload.includes("#xywh")&&(y=p.od.payload.split("#xywh=")[1].split(","),y.length===4&&v.Mf({height:parseInt(y[3],10),positionX:parseInt(y[0],10),positionY:parseInt(y[1],10),width:parseInt(y[2],10)})),c.push(v);if(T=r,!c.length){w.A(4);break}return b(w,Ea(c[0].P()[0],e.g,e.h.manifest.retryParameters),5);case 5:T=w.h;case 4:return w.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Me(c),mimeType:T||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([at(T||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function NE(e,t,n,r,i,a,o){var s,u,l;return C(function(c){if(c.g==1)return a?c.A(2):b(c,Ib(e,n),3);if(c.g!=2&&(a=c.h),s={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Uu(0,t.presentationTimeline.getDuration(),[n]),mimeType:a||"",codecs:o||"",kind:i,encrypted:!1,drmInfos:[],keyIds:new Set,language:r,originalLanguage:r,label:null,type:me,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([at(a||"",o||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},u=at(s.mimeType,s.codecs),l=xo(u),!l)throw new M(2,2,2014,a);return c.return(s)})}function Ib(e,t){var n;return C(function(r){switch(r.g){case 1:return le(r,2),b(r,Ea(t,e.g,e.h.streaming.retryParameters),4);case 4:n=r.h,pe(r,3);break;case 2:ce(r);case 3:if(n)return r.return(n);throw new M(1,2,2011,t)}})}function UE(e,t,n){var r,i,a;return C(function(o){return o.g==1?(r=Ln,i=ht([e],n),i.method="GET",b(o,t.request(r,i).promise,2)):(a=o.h,o.return(a.data))})}f.md=function(e,t,n,r){var i=this,a;return C(function(o){return o.g==1?(a=new Su({wc:i.g,onError:t,zf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a.configure(n.drm),b(o,JT(a,e.variants,r),2)):o.g!=3?b(o,em(a),3):o.return(a)})};function _E(e,t,n,r){var i=new Map,a=Eb(n),o=new Map;a=m(a);for(var s=a.next();!s.done;s=a.next()){s=s.value;var u=jE(e,t,n,s,r,i);o.set(s.id,u)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),Gh:Array.from(i.values())}}function jE(e,t,n,r,i,a){var o={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,mssPrivateData:r.mssPrivateData,external:r.external,fastSwitching:r.fastSwitching,isAudioMuxedInVideo:r.isAudioMuxedInVideo},s=i.offline.numberOfParallelDownloads,u=s===0?r.id:0;return OE(r,n.presentationTimeline.Hb(),function(l,c){var d=Hh(l),h=void 0;if(!a.has(d)){var p=l.endTime-l.startTime;p=wb(t,r.id)*p,p=ib(e.g,p),a.set(d,new nb(l,p,u,!1,c))}l.ea&&(h=Hh(l.ea),a.has(h)||(p=wb(t,r.id)*.5,p=ib(e.g,p),a.set(h,new nb(l.ea,p,u,!0,c)))),o.segments.push({pendingInitSegmentRefId:h,initSegmentKey:h?0:null,startTime:l.startTime,endTime:l.endTime,appendWindowStart:l.appendWindowStart,appendWindowEnd:l.appendWindowEnd,timestampOffset:l.timestampOffset,tilesLayout:l.tilesLayout,pendingSegmentRefId:d,dataKey:0,mimeType:l.mimeType,codecs:l.codecs,thumbnailSprite:l.thumbnailSprite}),s!==0&&(u=(u+1)%s)}),o}function OE(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r,t),r=e.segmentIndex.get(++t)}function wn(e){if(e.j.g)throw new M(2,9,7001)}function lc(){if(!Jh())throw new M(2,9,9e3)}function Qh(e,t){return C(function(n){return n.g==1?(e.i.push(t),br(n,2),b(n,t,4)):n.g!=2?n.return(n.h):(yn(n),Kn(e.i,t),bn(n,0))})}function BE(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Kn(e.i,n)})}function FE(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function VE(e,t,n,r){var i,a,o;return C(function(s){return s.g==1?r.drmInfo?(i=oE(n),a=r.sessionIds.map(function(u){return{sessionId:u,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:kb(r,!1),videoCapabilities:kb(r,!0)}}),b(s,yb(t,e,a),2)):s.return():s.g!=3?(o=s.h,b(s,i.remove(o),3)):b(s,i.add(a.filter(function(u){return!o.includes(u.sessionId)})),0)})}function Eb(e){for(var t=new Set,n=m(e.variants),r=n.next();!r.done;r=n.next())r=r.value,r.audio&&t.add(r.audio),r.video&&t.add(r.video);for(n=m(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=m(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function HE(e){e.variants.map(function(a){return a.video});var t=new Set(e.variants.map(function(a){return a.audio}));e=e.textStreams;for(var n=m(t),r=n.next();!r.done;r=n.next()){r=m(t);for(var i=r.next();!i.done;i=r.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),r=n.next();!r.done;r=n.next());}q("shaka.offline.Storage",Et),Et.deleteAll=function(){var e;return C(function(t){return t.g==1?(e=new on,br(t,2),b(t,sE(e),2)):t.g!=5?(yn(t),b(t,e.destroy(),5)):bn(t,0)})},Et.prototype.list=Et.prototype.list,Et.prototype.removeEmeSessions=Et.prototype.Qk,Et.prototype.remove=Et.prototype.remove,Et.prototype.store=Et.prototype.store,Et.prototype.getNetworkingEngine=Et.prototype.Yb,Et.prototype.getConfiguration=Et.prototype.getConfiguration,Et.prototype.configure=Et.prototype.configure,Et.prototype.destroy=Et.prototype.destroy,Et.support=Jh;var GE=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");iy("offline",Jh);function sn(){}function Tn(e,t){for(e={priority:t||0,callback:e},t=0;t<Es.length;t++)if(Es[t].priority<e.priority){Es.splice(t,0,e);return}Es.push(e)}q("shaka.polyfill",sn),sn.register=Tn,sn.installAll=function(){for(var e=m(Es),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Ae("Error installing polyfill!",n)}}};var Es=[];function cc(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}cc.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},cc.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function Cb(e){return e.startsWith("com.apple")?"cbcs":e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("org.w3")||e.startsWith("com.huawei")?"cenc":(Ae("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Mb(e){if(!e)return!1;e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function Zh(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&ge().ed())}function Db(){}var Cs;function Rb(){ge().Of()&&!Cs&&!navigator.emeEncryptionSchemePolyfilled&&navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration&&(Cs=navigator.requestMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=KE,navigator.emeEncryptionSchemePolyfilled=!0)}function KE(e,t){var n=this,r;return C(function(i){return i.g==1?b(i,Cs.call(n,e,t),2):(r=i.h,Mb(r)?(navigator.requestMediaKeySystemAccess=Cs,i.return(r)):(navigator.requestMediaKeySystemAccess=Pb,i.return(Pb.call(n,e,t))))})}function Pb(e,t){var n=this,r,i,a,o,s,u,l,c,d,h,p,g;return C(function(v){if(v.g==1){for(r=Cb(e),i=[],a=m(t),o=a.next();!o.done;o=a.next())s=o.value,u=Lb(s.videoCapabilities,r),l=Lb(s.audioCapabilities,r),s.videoCapabilities&&s.videoCapabilities.length&&!u.length||s.audioCapabilities&&s.audioCapabilities.length&&!l.length||(c=Object.assign({},s),c.videoCapabilities=u,c.audioCapabilities=l,i.push(c));if(!i.length)throw d=Error("Unsupported keySystem or supportedConfigurations."),d.name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return b(v,Cs.call(n,e,i),2)}return h=v.h,g=p=null,i[0]&&(i[0].videoCapabilities&&(p=i[0].videoCapabilities[0].encryptionScheme),i[0].audioCapabilities&&(g=i[0].audioCapabilities[0].encryptionScheme)),v.return(new cc(h,p,g))})}function Lb(e,t){return e&&e.filter(function(n){return Zh(n.encryptionScheme,t)})}sn.EmeEncryptionScheme=Db,Db.install=Rb,Tn(Rb);function Nb(){}var Ms;function Ub(){ge().Of()&&!Ms&&!navigator.mediaCapabilitiesEncryptionSchemePolyfilled&&navigator.mediaCapabilities&&(Ms=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=qE,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0)}function qE(e){var t=this,n,r;return C(function(i){switch(i.g){case 1:return b(i,Ms.call(t,e),2);case 2:if(n=i.h,!n.supported||!e.keySystemConfiguration)return i.return(n);if(r=n.keySystemAccess,Mb(r))return navigator.mediaCapabilities.decodingInfo=Ms,i.return(n);if(navigator.mediaCapabilities.decodingInfo=_b,r){i.A(3);break}return b(i,jb(e),4);case 4:return n.keySystemAccess=i.h,i.return(n);case 3:return i.return(_b.call(t,e))}})}function _b(e){var t=this,n,r,i,a,o,s,u;return C(function(l){switch(l.g){case 1:return r=n=null,!e.keySystemConfiguration||(i=e.keySystemConfiguration,a=i.keySystem,r=i.audio&&i.audio.encryptionScheme,n=i.video&&i.video.encryptionScheme,o=Cb(a),s={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},Zh(r,o)&&Zh(n,o))?b(l,Ms.call(t,e),2):l.return(s);case 2:if(u=l.h,u.keySystemAccess){u.keySystemAccess=new cc(u.keySystemAccess,n,r),l.A(3);break}if(!e.keySystemConfiguration){l.A(3);break}return b(l,jb(e),5);case 5:u.keySystemAccess=l.h;case 3:return l.return(u)}})}function jb(e){var t,n;return C(function(r){if(r.g==1){var i=e.keySystemConfiguration,a=[],o=[];return i.audio&&a.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:i.audio.encryptionScheme}),i.video&&o.push({robustness:i.video.robustness||"",contentType:e.video.contentType,encryptionScheme:i.video.encryptionScheme}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},a.length&&(i.audioCapabilities=a),o.length&&(i.videoCapabilities=o),t=i,b(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}sn.MCapEncryptionScheme=Nb,Nb.install=Ub,Tn(Ub,-2);function dc(){}function Ob(){ge().kc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),dc.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=WE)}function WE(e){var t,n,r,i,a,o,s,u,l,c,d;return C(function(h){switch(h.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},ge(),n=e.video,r=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(i=n.contentType,a=Fi().canPlayType(i)!="",!a)||r&&(o=r.contentType,s=Fi().canPlayType(o)!="",!s))return h.return(t)}else return h.return(t);h.A(2);break}if(!mr())return h.return(t);if(!n){h.A(3);break}return b(h,zE(n),4);case 4:if(u=h.h,!u)return h.return(t);case 3:if(r){var p=ge().Oa(),g=r.contentType;if(p==="CAST"&&r.spatialRendering&&(g+="; spatialRendering=true"),l=Ht(g),!l)return h.return(t)}case 2:return e.keySystemConfiguration?(c=e.keySystemConfiguration,b(h,XE(n,r,c),6)):(t.supported=!0,h.return(t));case 6:(d=h.h)&&(t.supported=!0,t.keySystemAccess=d);case 5:return h.return(t)}})}function zE(e){var t,n,r;return C(function(i){return i.g==1?(t=ge(),n=t.Oa(),n!=="CAST"?i.A(2):b(i,YE(e),3)):i.g!=2?(r=i.h,i.return(r)):i.return(Ht(e.contentType))})}function XE(e,t,n){var r,i,a,o,s,u,l,c,d,h,p,g;return C(function(v){switch(v.g){case 1:r=[],i=[],a=[],n.audio&&(o={robustness:n.audio.robustness||"",contentType:t.contentType},ge().Bi()&&t.contentType.includes('codecs="ac-3"')&&(o.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(o.encryptionScheme=n.audio.encryptionScheme,a.push(n.audio.encryptionScheme)),r.push(o)),n.video&&(s={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(s.encryptionScheme=n.video.encryptionScheme,a.push(n.video.encryptionScheme)),i.push(s)),u={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(u.audioCapabilities=r),i.length&&(u.videoCapabilities=i),l=e?e.contentType:"",c=t?t.contentType:"",d=cn(l)+";"+ti(l),h=cn(c)+";"+ti(c),p=n.keySystem,g=null,le(v,2);var y=Gc(d,h,p,a);if(na.has(y)){y=Gc(d,h,p,a),g=na.get(y)||null,v.A(4);break}return b(v,navigator.requestMediaKeySystemAccess(n.keySystem,[u]),5);case 5:y=g=v.h;var T=Gc(d,h,p,a);na.set(T,y);case 4:pe(v,3);break;case 2:ce(v);case 3:return v.return(g)}})}function YE(e){var t,n,r,i,a;return C(function(o){if(o.g==1){if(!(U.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return o.return(Ht(e.contentType));switch(t=e.contentType,e.width&&e.height&&e.width>1280&&e.height>720&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(n=Math.round(e.framerate),n<24||n>30)&&(t+="; framerate="+e.framerate),r=e.transferFunction||"",r){case"":case"srgb":break;case"pq":t+="; eotf=smpte2084";break;case"hlg":t+="; eotf=arib-std-b67";break;default:return o.return(!1)}return i=!1,a=JE,a.has(t)?(i=a.get(t),o.A(2)):b(o,cast.__platform__.canDisplayType(t),3)}return o.g!=2&&(i=o.h,a.set(t,i)),o.return(i)})}sn.MediaCapabilities=dc,dc.install=Ob,dc.originalMcap=null;var JE=new Map;Tn(Ob,-1);function Bb(){}function Fb(){var e=ge(),t=e.Ha()==="WEBKIT"?e.Ba():null;for((U.MediaSource||U.ManagedMediaSource)&&t&&U.MediaSource&&(t<=12?(Vb(),$E()):t<=15&&Vb()),e=m(e.Li()),t=e.next();!t.done;t=e.next())ZE(t.value);(U.MediaSource||U.ManagedMediaSource)&&QE(),U.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&eC()}function Vb(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,xt.apply(0,arguments));return t.abort=function(){},t}}function $E(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function QE(){if(U.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return To(n)!="mp2t"&&e(n)}}if(U.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);U.ManagedMediaSource.isTypeSupported=function(n){return To(n)!="mp2t"&&t(n)}}}function ZE(e){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(r){return ti(r)!=e&&t(r)},U.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);U.ManagedMediaSource.isTypeSupported=function(r){return ti(r)!=e&&n(r)}}}function eC(){var e=MediaSource.isTypeSupported;ge().fj()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(o){return o.startsWith("codecs=")});if(r<0)return e(t);var i=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=i.findIndex(function(o){return o.startsWith("vp09")});return a>=0&&(i[a]="vp9",n[r]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}sn.MediaSource=Bb,Bb.install=Fb,Tn(Fb);function ep(){}var tp,np,rp,ip,ap,op;function Hb(e){U.HTMLVideoElement&&U.WebKitMediaKeys&&U.shakaMediaKeysPolyfill!=up&&(e!==void 0&&e&&(tp=!0,np=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),rp=HTMLMediaElement.prototype.setMediaKeys,ip=U.MediaKeys,ap=U.MediaKeySystemAccess,op=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=nC,U.MediaKeys=Ds,U.MediaKeySystemAccess=fc,navigator.requestMediaKeySystemAccess=tC,U.shakaMediaKeysPolyfill=up,pu.clear(),na.clear())}function tC(e,t){try{var n=new fc(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function nC(e){var t=this.mediaKeys;return t&&t!=e&&Gb(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Gb(e,this):Promise.resolve()}function rC(e){if(e=oe(e.initData),Zt(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Jr(e.subarray(4),!0),e=qn(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Dn(e),this.dispatchEvent(t)}sn.PatchedMediaKeysApple=ep,ep.uninstall=function(){U.shakaMediaKeysPolyfill==up&&tp&&(tp=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",np),HTMLMediaElement.prototype.setMediaKeys=rp,U.MediaKeys=ip,U.MediaKeySystemAccess=ap,navigator.requestMediaKeySystemAccess=op,np=op=rp=ap=ip=null,U.shakaMediaKeysPolyfill="",pu.clear(),na.clear())},ep.install=Hb;function fc(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,i=!1;if(n.audioCapabilities)for(var a=m(n.audioCapabilities),o=a.next();!o.done;o=a.next())o=o.value,o.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.audioCapabilities.push(o),i=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),a=n.next();!a.done;a=n.next())a=a.value,a.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),i=!0));r||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=i?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}fc.prototype.createMediaKeys=function(){var e=new Ds(this.keySystem);return Promise.resolve(e)},fc.prototype.getConfiguration=function(){return this.g};function Ds(e){this.h=new WebKitMediaKeys(e),this.g=new Pe}Ds.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new sp(this.h)},Ds.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function Gb(e,t){if(e.g.Qa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",rC);try{return Ia(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}Ds.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function sp(e){Oe.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Pe,this.sessionId="",this.expiration=NaN,this.closed=new Be,this.keyStatuses=new Kb,this.onkeystatuseschange=null}it(sp,Oe),f=sp.prototype,f.generateRequest=function(e,t){var n=this;this.h=new Be;try{var r=this.l.createSession("video/mp4",oe(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(i){n.h&&(n.h.resolve(),n.h=null),i=new Map().set("messageType",n.keyStatuses.bc()==null?"license-request":"license-renewal").set("message",Dn(i.message)),i=new Y("message",i),n.dispatchEvent(i)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(hc(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var i=Error("EME PatchedMediaKeysApple key error");if(i.errorCode=n.i.error,n.h!=null)n.h.reject(i),n.h=null;else if(n.g!=null)n.g.reject(i),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:hc(n,"output-not-allowed");break;default:hc(n,"internal-error")}}),hc(this,"status-pending")}catch(i){this.h.reject(i)}return this.h},f.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},f.update=function(e){this.g=new Be;try{this.i.update(oe(e))}catch(t){this.g.reject(t)}return this.g},f.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Qa()}catch(e){this.closed.reject(e)}return this.closed},f.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function hc(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Y("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function Kb(){this.size=0,this.g=void 0}f=Kb.prototype,f.bc=function(){return this.g},f.forEach=function(e){this.g&&e(this.g,qs.value())},f.get=function(e){if(this.has(e))return this.g},f.has=function(e){var t=qs.value();return!!(this.g&&wr(e,t))},f.entries=function(){},f.keys=function(){},f.values=function(){};var up="apple";Tn(function(){U.HTMLVideoElement&&U.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||Hb())});function qb(){}function Wb(){if(U.MediaKeys){var e=ge();MediaKeys.prototype.setServerCertificate&&e.we()||(MediaKeys.prototype.setServerCertificate=iC)}}function iC(){return Promise.resolve(!1)}sn.PatchedMediaKeysCert=qb,qb.install=Wb,Tn(Wb);function zb(){}function Xb(){if(!(!U.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)hp="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=aC,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=oC,U.MediaKeys=Rs,U.MediaKeySystemAccess=pc,U.shakaMediaKeysPolyfill=sC}}function lp(e){var t=hp;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function aC(e,t){try{var n=new pc(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function oC(e){var t=this.mediaKeys;return t&&t!=e&&Yb(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Yb(e,this),Promise.resolve()}sn.PatchedMediaKeysWebkit=zb,zb.install=Xb;function pc(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video"),t=m(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes,sessionTypes:["temporary"],label:a.label},s=!1;if(a.audioCapabilities)for(var u=m(a.audioCapabilities),l=u.next();!l.done;l=u.next())l=l.value,l.contentType&&(s=!0,i.canPlayType(l.contentType.split(";")[0],this.g)&&(o.audioCapabilities.push(l),r=!0));if(a.videoCapabilities)for(u=m(a.videoCapabilities),l=u.next();!l.done;l=u.next())l=l.value,l.contentType&&(s=!0,i.canPlayType(l.contentType,this.g)&&(o.videoCapabilities.push(l),r=!0));if(s||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),a.persistentState=="required"&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):r=!1),r){this.h=o;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}pc.prototype.createMediaKeys=function(){var e=new Rs(this.g);return Promise.resolve(e)},pc.prototype.getConfiguration=function(){return this.h};function Rs(e){this.l=e,this.h=null,this.g=new Pe,this.i=[],this.j=new Map}function Yb(e,t){e.h=t,e.g.Qa();var n=hp;t&&(e.g.D(t,n+"needkey",function(r){var i=new CustomEvent("encrypted");i.initDataType="cenc",i.initData=Dn(r.initData),e.h.dispatchEvent(i)}),e.g.D(t,n+"keymessage",function(r){var i=cp(e,r.sessionId);i&&(r=new Map().set("messageType",i.keyStatuses.bc()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new Y("message",r),i.h&&(i.h.resolve(),i.h=null),i.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=cp(e,r.sessionId))&&r.ready()}),e.g.D(t,n+"keyerror",function(r){var i=cp(e,r.sessionId);if(i){var a=Error("EME v0.1b key error"),o=r.errorCode;o.systemCode=r.systemCode,a.errorCode=o,!r.sessionId&&i.h?(r.systemCode==45&&(a.message="Unsupported session type."),i.h.reject(a),i.h=null):r.sessionId&&i.g?(i.g.reject(a),i.g=null):(a=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?gc(i,"output-restricted"):a==1?gc(i,"expired"):gc(i,"internal-error"))}}))}Rs.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new dp(t,this.l,e),this.i.push(e),e},Rs.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Rs.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function cp(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function dp(e,t,n){Oe.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Be,this.keyStatuses=new $b,this.onkeystatuseschange=null}it(dp,Oe),f=dp.prototype,f.ready=function(){gc(this,"usable"),this.g&&this.g.resolve(),this.g=null};function Jb(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=oe(qn("LOAD_SESSION|"+n));else{var i=qn("PERSISTENT|");r=dt(i,t)}else r=oe(t)}catch(o){return Promise.reject(o)}e.h=new Be;var a=lp("generateKeyRequest");try{e.j[a](e.i,r)}catch(o){if(o.name!="InvalidStateError")return e.h=null,Promise.reject(o);new ve(function(){try{e.j[a](e.i,r)}catch(s){e.h.reject(s),e.h=null}}).ka(.01)}return e.h}function fp(e,t,n){if(e.g)e.g.then(function(){return fp(e,t,n)}).catch(function(){return fp(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=$e(n),i=JSON.parse(r);i.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Rn(i.keys[0].k),i=Rn(i.keys[0].kid)}else r=oe(n),i=null;var a=lp("addKey");try{e.j[a](e.i,r,i,e.sessionId)}catch(o){e.g.reject(o),e.g=null}}}function gc(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Y("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}f.generateRequest=function(e,t){return Jb(this,t,null)},f.load=function(e){return this.l=="persistent-license"?Jb(this,null,e):Promise.reject(Error("Not a persistent session."))},f.update=function(e){var t=new Be;return fp(this,t,e),t},f.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=lp("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},f.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function $b(){this.size=0,this.g=void 0}f=$b.prototype,f.bc=function(){return this.g},f.forEach=function(e){this.g&&e(this.g,qs.value())},f.get=function(e){if(this.has(e))return this.g},f.has=function(e){var t=qs.value();return!!(this.g&&wr(e,t))},f.entries=function(){},f.keys=function(){},f.values=function(){};var hp="",sC="webkit";Tn(Xb);function Qb(){}function Zb(){U.crypto&&("randomUUID"in U.crypto||(U.crypto.randomUUID=uC))}function uC(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}sn.RandomUUID=Qb,Qb.install=Zb,Tn(Zb);function ew(){}function tw(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:lC})}function lC(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}sn.Symbol=ew,ew.install=tw,Tn(tw);function nw(){}function rw(){for(var e=m([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())t=t.value,t.prototype.indexOf||(t.prototype.indexOf=cC),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=dC),t.prototype.includes||(t.prototype.includes=fC)}function cC(e,t){return Array.prototype.indexOf.call(this,e,t)}function dC(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function fC(e,t){return this.indexOf(e,t)!==-1}sn.TypedArray=nw,nw.install=rw,Tn(rw);function iw(){}function aw(){if(U.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}sn.VideoPlayPromise=iw,iw.install=aw,Tn(aw);function ow(){}function sw(){if(U.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||typeof Fi().webkitDroppedFrameCount=="number")&&(e.getVideoPlaybackQuality=hC)}}function hC(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}sn.VideoPlaybackQuality=ow,ow.install=sw,Tn(sw);function uw(){}function lw(){if(!U.VTTCue&&U.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=pp;else if(t==6)e=pC;else{try{var n=!!pp(1,2,"")}catch{n=!1}n&&(e=pp)}e&&(U.VTTCue=function(r,i,a){return e(r,i,a)})}}function pp(e,t,n){return new U.TextTrackCue(e,t,n)}function pC(e,t,n){return new U.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}sn.VTTCue=uw,uw.install=lw,Tn(lw);function It(e){Oe.call(this),this.g=e,this.m=null,this.h=[],this.j=-1,this.i=this.l=null,this.o=new Pe}it(It,Oe),f=It.prototype,f.destroy=function(){var e=this;return C(function(t){if(t.g==1)return b(t,e.removeAllItems(),2);e.g=null,e.o&&(e.o.release(),e.o=null),Oe.prototype.release.call(e),G(t)})},f.configure=function(e){this.m=e},f.getConfiguration=function(){return this.m},f.getCurrentItem=function(){return this.h.length&&this.j>=0&&this.j<this.h.length?this.h[this.j]:null},f.getCurrentItemIndex=function(){return this.j},f.getItems=function(){return this.h.slice()},f.insertItems=function(e){this.h.push.apply(this.h,H(e)),this.dispatchEvent(new Y("itemsinserted"))},f.removeAllItems=function(){var e=this,t,n,r,i;return C(function(a){if(a.g==1)return e.o.Qa(),e.h.length&&e.j>=0?b(a,e.g.Dc(),2):a.A(2);if(a.g!=4){for(t=[],e.i&&(e.i.preloadManager.l||t.push(e.i.preloadManager.destroy()),e.i=null),e.l&&(e.l.preloadManager.l||t.push(e.l.preloadManager.destroy()),e.l=null),n=m(e.h),r=n.next();!r.done;r=n.next())i=r.value,i.preloadManager&&!i.preloadManager.l&&t.push(i.preloadManager.destroy());return t.length?b(a,Promise.all(t),4):a.A(4)}e.h=[],e.j=-1,e.dispatchEvent(new Y("itemsremoved")),G(a)})},f.playItem=function(e){var t=this,n,r,i,a,o,s,u,l,c,d,h,p,g,v,y,T,w;return C(function(S){switch(S.g){case 1:if(t.o.Qa(),!t.h.length||e>=t.h.length)throw new M(2,7,7007);if(n=t.getCurrentItem(),r=t.h[e],t.j!=e&&(t.j=e,t.dispatchEvent(new Y("currentitemchanged"))),i=t.g.bf(),a=t.m?t.m.preloadNextUrlWindow:0,a>0&&(o=!1,t.o.D(i,"timeupdate",function(){var k,D,x,I;return C(function(A){switch(A.g){case 1:if(t.l||t.h.length<=1||o||t.g.W()||!i.duration)return A.return();if(k=t.g.Ra().end-i.currentTime,isNaN(k)){A.A(0);break}if(!(k<=a)){A.A(0);break}if(D=t.m&&t.m.repeatMode,x=null,t.j+1<t.h.length?x=t.h[t.j+1]:D==1&&(x=t.h[0]),!x||x.preloadManager&&!x.preloadManager.l){A.A(0);break}return o=!0,I=null,le(A,5),b(A,t.g.preload(x.manifestUri,x.startTime,x.mimeType,x.config),7);case 7:I=A.h,pe(A,6);break;case 5:ce(A),I=null;case 6:t.l={item:x,preloadManager:I},o=!1,G(A)}})})),t.o.D(t.g,"complete",function(){var k=t.m&&t.m.repeatMode,D=!1;if(k==2)D=!0;else{var x=t.j+1;x<t.h.length?t.playItem(x):k==1&&(t.h.length==1?D=!0:t.playItem(0))}D&&(i.paused?(i.currentTime=t.g.Ra().start,i.play()):t.o.D(i,"paused",function(){i.currentTime=t.g.Ra().start,i.play()}))}),s=r.manifestUri,r.preloadManager&&!r.preloadManager.l&&(s=r.preloadManager),u=!1,t.l&&t.l.item==r&&t.l.preloadManager?s=t.l.preloadManager:t.i&&t.i.item==r&&t.i.preloadManager&&(s=t.i.preloadManager,u=!0),!t.i){S.A(2);break}if(u||t.i.preloadManager.l){S.A(3);break}return b(S,t.i.preloadManager.destroy(),3);case 3:t.i=null;case 2:if(!(t.m&&t.m.preloadPrevItem&&n&&t.g.ae()===Pt)){S.A(5);break}return l=null,le(S,6),b(S,t.g.jj(),8);case 8:l=S.h,pe(S,7);break;case 6:ce(S),l=null;case 7:t.i={item:n,preloadManager:l};case 5:return r.config&&(t.g.Oi(),t.g.configure(r.config)),b(S,t.g.load(s,r.startTime,r.mimeType),9);case 9:if(t.l=null,r.extraText)for(c=m(r.extraText),d=c.next();!d.done;d=c.next())h=d.value,h.mime?t.g.Sd(h.uri,h.language,h.kind,h.mime,h.codecs):t.g.Sd(h.uri,h.language,h.kind);if(r.extraThumbnail)for(p=m(r.extraThumbnail),g=p.next();!g.done;g=p.next())v=g.value,t.g.Pe(v);if(r.extraChapter)for(y=m(r.extraChapter),T=y.next();!T.done;T=y.next())w=T.value,t.g.Oe(w.uri,w.language,w.mime);G(S)}})},q("shaka.queue.QueueManager",It),It.prototype.playItem=It.prototype.playItem,It.prototype.removeAllItems=It.prototype.removeAllItems,It.prototype.insertItems=It.prototype.insertItems,It.prototype.getItems=It.prototype.getItems,It.prototype.getCurrentItemIndex=It.prototype.getCurrentItemIndex,It.prototype.getCurrentItem=It.prototype.getCurrentItem,It.prototype.getConfiguration=It.prototype.getConfiguration,It.prototype.configure=It.prototype.configure,It.prototype.destroy=It.prototype.destroy,yl=function(e){return new It(e)};function Sn(){}Sn.prototype.parseInit=function(){},Sn.prototype.setSequenceMode=function(){},Sn.prototype.setManifestType=function(){},Sn.prototype.parseMedia=function(e,t){var n=null,r=[];e=$e(e).split(/\r?\n/),e=m(e);for(var i=e.next();!i.done;i=e.next())if((i=i.value)&&!/^\s+$/.test(i)&&(i=gC.exec(i))){var a=mC.exec(i[1]);a=parseInt(a[1],10)*60+parseFloat(a[2].replace(",",".")),i=new qe(a,t.segmentEnd?t.segmentEnd:a+2,i[2]),n&&(n.endTime=a,r.push(n)),n=i}return n&&r.push(n),r},q("shaka.text.LrcTextParser",Sn),Sn.prototype.parseMedia=Sn.prototype.parseMedia,Sn.prototype.setManifestType=Sn.prototype.setManifestType,Sn.prototype.setSequenceMode=Sn.prototype.setSequenceMode,Sn.prototype.parseInit=Sn.prototype.parseInit;var gC=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,mC=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Dt("application/x-subtitle-lrc",function(){return new Sn});function mn(){this.g="UNKNOWN"}mn.prototype.parseInit=function(){},mn.prototype.setSequenceMode=function(){},mn.prototype.setManifestType=function(e){this.g=e},mn.prototype.parseMedia=function(e,t,n,r){var i=$e(e);if(e=[],i=="")return e;var a=Di(i,"tt",!0);if(!a)throw new M(2,2,2005,"Failed to parse TTML.");if(i=ir(a,"body")[0],!i)return[];var o=cr(a,Ps,"frameRate"),s=cr(a,Ps,"subFrameRate"),u=cr(a,Ps,"frameRateMultiplier"),l=cr(a,Ps,"tickRate"),c=cr(a,Ps,"cellResolution"),d=a.attributes["xml:space"]||"default",h=cr(a,yc,"extent");if(d!="default"&&d!="preserve")throw new M(2,2,2005,"Invalid xml:space value: "+d);d=d=="default",o=new TC(o,s,u,l),c=wC(c),s=ir(a,"metadata")[0],s=(s?s.children:[]).filter(function(v){return v!=`
`}),u=ir(a,"style"),a=ir(a,"region"),l=[];for(var p=m(a),g=p.next();!g.done;g=p.next())(g=vC(this,g.value,u,h))&&l.push(g);if(_e(i,"p").length)throw new M(2,2,2001,"<p> can only be inside <div> in TTML");for(h=m(_e(i,"div")),p=h.next();!p.done;p=h.next())if(_e(p.value,"span").length)throw new M(2,2,2001,"<span> can only be inside <p> in TTML");return(t=cw(this,i,t,o,s,u,a,l,d,c,null,!1,n,r))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function cw(e,t,n,r,i,a,o,s,u,l,c,d,h,p){var g=c;if($s(t)){if(!d)return null;var v={tagName:"span",children:[ut(t)],attributes:{},parent:null}}else v=t;for(var y=null,T=m(ww),w=T.next();!w.done&&!(y=vc(v,"backgroundImage",i,"#",w.value)[0]);w=T.next());T=null,w=cr(v,ww,"backgroundImage");var S=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(w&&S.test(w)){if(T=parseInt(w.split(":").pop(),10)-1,T>=p.length)return null;T=p[T]}else h&&w&&!w.startsWith("#")&&(S=new st(h),w=new st(w),(w=S.resolve(w).toString())&&(T=w));if((t.tagName=="p"||y||T)&&(d=!0),t=d,w=(v.attributes["xml:space"]||(u?"default":"preserve"))=="default",S=v.children.every($s),u=[],!S)for(var k=m(v.children),D=k.next();!D.done;D=k.next())(D=cw(e,D.value,n,r,i,a,o,s,w,l,v,d,h,p))&&u.push(D);if(i=c!=null,h=ut(v),h=v.children.length&&h&&/\S/.test(h),k=v.attributes.begin||v.attributes.end||v.attributes.dur,!(k||h||v.tagName=="br"||u.length!=0||i&&!w))return null;for(p=hw(v,r),h=p.start,p=p.end;g&&g.tagName&&g.tagName!="tt";)p=bC(g,r,h,p),h=p.start,p=p.end,g=g.parent;if(h==null&&(h=0),h+=n.periodStart,p=p==null?1/0:p+n.periodStart,e.g!=="HLS"&&(h=Math.max(h,n.segmentStart),p=Math.min(p,n.segmentEnd)),!k&&u.length>0)for(h=1/0,p=0,n=m(u),r=n.next();!r.done;r=n.next())r=r.value,h=Math.min(h,r.startTime),p=Math.max(p,r.endTime);if(v.tagName=="br")return e=new qe(h,p,""),e.lineBreak=!0,e;if(n="",S&&(n=qt(ut(v)||""),w&&(n=n.replace(/\s+/g," "))),n=new qe(h,p,n),n.nestedCues=u,d||(n.isContainer=!0),l&&(n.cellResolution=l),l=vc(v,"region",o,"")[0],v.attributes.region&&l&&l.attributes["xml:id"]){var x=l.attributes["xml:id"];n.region=s.filter(function(I){return I.id==x})[0]}return s=l,c&&i&&!v.attributes.region&&!v.attributes.style&&(s=vc(c,"region",o,"")[0]),yC(e,n,v,s,y,T,a,t,u.length==0),n}function vC(e,t,n,r){var i=new Ci,a=t.attributes["xml:id"];if(!a)return null;i.id=a,a=null,r&&(a=bp.exec(r)||wp.exec(r)),r=a?Number(a[1]):null,a=a?Number(a[2]):null;var o,s=mc(e,t,n,"extent");if(s){var u=(o=bp.exec(s))||wp.exec(s);u!=null&&(i.width=Number(u[1]),i.height=Number(u[2]),o||(r!=null&&(i.width=i.width*100/r),a!=null&&(i.height=i.height*100/a)),i.widthUnits=o||r!=null?ln:0,i.heightUnits=o||a!=null?ln:0)}return(e=mc(e,t,n,"origin"))&&(u=(o=bp.exec(e))||wp.exec(e),u!=null&&(i.viewportAnchorX=Number(u[1]),i.viewportAnchorY=Number(u[2]),o?s||(i.width=100-i.viewportAnchorX,i.widthUnits=ln,i.height=100-i.viewportAnchorY,i.heightUnits=ln):(a!=null&&(i.viewportAnchorY=i.viewportAnchorY*100/a),r!=null&&(i.viewportAnchorX=i.viewportAnchorX*100/r)),i.viewportAnchorUnits=o||r!=null?ln:0)),i}function gp(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function yC(e,t,n,r,i,a,o,s,u){if(s=s||u,Vt(e,n,r,o,"direction",s)=="rtl"&&(t.direction="rtl"),u=Vt(e,n,r,o,"writingMode",s),u=="tb"||u=="tblr"?t.writingMode="vertical-lr":u=="tbrl"?t.writingMode="vertical-rl":u=="rltb"||u=="rl"?t.direction="rtl":u&&(t.direction=bo),(u=Vt(e,n,r,o,"textAlign",!0))?(t.positionAlign=AC.get(u),t.lineAlign=xC.get(u),t.textAlign=Zc[u.toUpperCase()]):t.textAlign=hr,(u=Vt(e,n,r,o,"displayAlign",!0))&&(t.displayAlign=pg[u.toUpperCase()]),(u=Vt(e,n,r,o,"color",s))&&(t.color=gp(u)),(u=Vt(e,n,r,o,"backgroundColor",s))&&(t.backgroundColor=gp(u)),(u=Vt(e,n,r,o,"border",s))&&(t.border=u),u=Vt(e,n,r,o,"fontFamily",s))switch(u){case"monospaceSerif":t.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":t.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":t.fontFamily="sans-serif";break;case"monospaceSansSerif":t.fontFamily="Consolas,monospace";break;case"proportionalSerif":t.fontFamily="serif";break;default:t.fontFamily=u.split(",").filter(function(l){return l!="default"}).join(",")}switch((u=Vt(e,n,r,o,"fontWeight",s))&&u=="bold"&&(t.fontWeight=ua),u=Vt(e,n,r,o,"wrapOption",s),t.wrapLine=!(u&&u=="noWrap"),(u=Vt(e,n,r,o,"lineHeight",s))&&u.match(Ja)&&(t.lineHeight=u),(u=Vt(e,n,r,o,"fontSize",s))&&(u.match(Ja)||u.match(SC))&&(t.fontSize=u),(u=Vt(e,n,r,o,"fontStyle",s))&&(t.fontStyle=yg[u.toUpperCase()]),i?(a=i.attributes.imageType||i.attributes.imagetype,u=i.attributes.encoding,i=ut(i).trim(),a=="PNG"&&u=="Base64"&&i&&(t.backgroundImage="data:image/png;base64,"+i)):a&&(t.backgroundImage=a),(i=Vt(e,n,r,o,"textOutline",s))&&(i=i.split(" "),i[0].match(Ja)?t.textStrokeColor=t.color:(t.textStrokeColor=gp(i[0]),i.shift()),i[0]&&i[0].match(Ja)?t.textStrokeWidth=i[0]:t.textStrokeColor=""),(i=Vt(e,n,r,o,"letterSpacing",s))&&i.match(Ja)&&(t.letterSpacing=i),(i=Vt(e,n,r,o,"linePadding",s))&&i.match(Ja)&&(t.linePadding=i),(i=Vt(e,n,r,o,"opacity",s))&&(t.opacity=parseFloat(i)),(i=mc(e,r,o,"textDecoration"))&&dw(t,i),(i=mp(e,n,o,"textDecoration"))&&dw(t,i),(i=Vt(e,n,r,o,"textCombine",s))&&(t.textCombineUpright=i),Vt(e,n,r,o,"ruby",s)){case"container":t.rubyTag="ruby";break;case"text":t.rubyTag="rt"}}function dw(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(Ir)||e.textDecoration.push(Ir);break;case"noUnderline":e.textDecoration.includes(Ir)&&Kn(e.textDecoration,Ir);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Kn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Kn(e.textDecoration,"overline")}}function Vt(e,t,n,r,i,a){return a=a===void 0?!0:a,(t=mp(e,t,r,i))?t:a?mc(e,n,r,i):null}function mc(e,t,n,r){if(!t)return null;var i=cr(t,yc,r);return i||fw(e,t,n,r)}function mp(e,t,n,r){var i=cr(t,yc,r);return i||fw(e,t,n,r)}function fw(e,t,n,r){t=vc(t,"style",n,"");for(var i=null,a=0;a<t.length;a++){var o=Ar(t[a],"urn:ebu:tt:style",r);o||(o=cr(t[a],yc,r)),o||(o=mp(e,t[a],n,r)),o&&(i=o)}return i}function vc(e,t,n,r,i){var a=[];if(!e||n.length<1)return a;var o=e;for(e=null;!e&&!(e=i?Ar(o,i,t):o.attributes[t])&&(o=o.parent,o););if(t=e){for(t=m(t.split(" ")),i=t.next();!i.done;i=t.next())for(i=i.value,e=m(n),o=e.next();!o.done;o=e.next())if(o=o.value,r+o.attributes["xml:id"]==i){a.push(o);break}}return a}function bC(e,t,n,r){return e=hw(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function hw(e,t){var n=vp(e.attributes.begin,t),r=vp(e.attributes.end,t);return e=vp(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function vp(e,t){var n=null;if(pw.test(e)){e=pw.exec(e),n=Number(e[1]);var r=Number(e[2]),i=Number(e[3]),a=Number(e[4]);a+=(Number(e[5])||0)/t.h,i+=a/t.frameRate,n=i+r*60+n*3600}else if(gw.test(e))n=yp(gw,e);else if(mw.test(e))n=yp(mw,e);else if(vw.test(e))e=vw.exec(e),n=Number(e[1])/t.frameRate;else if(yw.test(e))e=yw.exec(e),n=Number(e[1])/t.g;else if(bw.test(e))n=yp(bw,e);else if(e)throw new M(2,2,2001,"Could not parse cue time range in TTML");return n}function yp(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+(Number(e[2])||0)*60+(Number(e[1])||0)*3600}function wC(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}q("shaka.text.TtmlTextParser",mn),mn.prototype.parseMedia=mn.prototype.parseMedia,mn.prototype.setManifestType=mn.prototype.setManifestType,mn.prototype.setSequenceMode=mn.prototype.setSequenceMode,mn.prototype.parseInit=mn.prototype.parseInit;function TC(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var bp=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,SC=/^(\d{1,4}(?:\.\d+)?|100)%$/,Ja=/^(\d+px|\d+em|\d*\.?\d+c)$/,wp=/^(\d+)px (\d+)px$/,pw=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,gw=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,mw=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,vw=/^(\d*(?:\.\d*)?)f$/,yw=/^(\d*(?:\.\d*)?)t$/,bw=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),xC=new Map().set("left",Pi).set("center","center").set("right","end").set("start",Pi).set("end","end"),AC=new Map().set("left","line-left").set("center","center").set("right","line-right"),Ps=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],yc=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],ww=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Dt("application/ttml+xml",function(){return new mn});function Tt(){this.g=new mn}Tt.prototype.parseInit=function(e){var t=!1;if(new Fe().box("moov",he).box("trak",he).box("mdia",he).box("minf",he).box("stbl",he).S("stsd",Pr).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new M(2,2,2007)},Tt.prototype.setSequenceMode=function(e){this.g.setSequenceMode(e)},Tt.prototype.setManifestType=function(e){this.g.setManifestType(e)},Tt.prototype.parseMedia=function(e,t,n){var r=[],i=null,a=[],o=new Map,s=[];if(new Fe().box("moof",he).box("traf",he).S("tfhd",function(T){i=xu(T.reader,T.flags).Yd}).S("trun",function(T){T=Iu(T.reader,T.version,T.flags),T=m(T.mh);for(var w=T.next();!w.done;w=T.next())s.push(w.value.sampleSize||i||0)}).S("subs",function(T){for(var w=T.reader,S=w.U(),k=-1,D=0;D<S;D++){var x=w.U();k+=x,x=w.Ca();for(var I=[],A=0;A<x;A++)T.version==1?I.push(w.U()):I.push(w.Ca()),w.Z(),w.Z(),w.U();o.set(k,I)}}).box("mdat",va(function(T){a.push(T)},!1)).parse(e,!1),a.length==0)throw new M(2,2,2007);for(var u=dt.apply(Lt,H(a)),l=0,c=0;c<s.length;c++){var d=oe(u,l,s[c]);l+=s[c];var h=o.get(c);if(h&&h.length){d=oe(d,0,h[0]);for(var p=[],g=h[0],v=1;v<h.length;v++){var y=oe(e,g,h[v]);y=zs(y),p.push("data:image/png;base64,"+y),g+=h[v]}r=r.concat(this.g.parseMedia(d,t,n,p))}else r=r.concat(this.g.parseMedia(d,t,n,[]))}return r},q("shaka.text.Mp4TtmlParser",Tt),Tt.prototype.parseMedia=Tt.prototype.parseMedia,Tt.prototype.setManifestType=Tt.prototype.setManifestType,Tt.prototype.setSequenceMode=Tt.prototype.setSequenceMode,Tt.prototype.parseInit=Tt.prototype.parseInit,Dt('application/mp4; codecs="stpp"',function(){return new Tt}),Dt('application/mp4; codecs="stpp.ttml"',function(){return new Tt}),Dt('application/mp4; codecs="stpp.ttml.im1i"',function(){return new Tt}),Dt('application/mp4; codecs="stpp.ttml.im1t"',function(){return new Tt}),Dt('application/mp4; codecs="stpp.ttml.im2i"',function(){return new Tt}),Dt('application/mp4; codecs="stpp.ttml.im2t"',function(){return new Tt}),Dt('application/mp4; codecs="stpp.ttml.etd1"',function(){return new Tt}),Dt('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new Tt}),Dt('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new Tt}),Dt('application/mp4; codecs="stpp.TTML.im1t"',function(){return new Tt});function Yt(){this.g="UNKNOWN"}Yt.prototype.parseInit=function(){},Yt.prototype.setSequenceMode=function(){},Yt.prototype.setManifestType=function(e){this.g=e},Yt.prototype.parseMedia=function(e,t){e=$e(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new M(2,2,2e3);if(e=t.vttOffset,this.g=="HLS"&&n[0].includes("X-TIMESTAMP-MAP")){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new M(2,2,2e3);if(e=sa(e[1]),e==null)throw new M(2,2,2e3);r=Number(r[1]);for(var i=t.segmentStart-t.periodStart;i>=95443.7176888889;)i-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}for(t=[],r=m(n[0].split(`
`)),i=r.next();!i.done;i=r.next())if(i=i.value,/^Region:/.test(i)){i=new aa(i);var a=new Ci;Mi(i),oa(i);for(var o=Mi(i);o;){var s=a,u=o;(o=/^id=(.*)$/.exec(u))?s.id=o[1]:(o=/^width=(\d{1,2}|100)%$/.exec(u))?s.width=Number(o[1]):(o=/^lines=(\d+)$/.exec(u))?(s.height=Number(o[1]),s.heightUnits=2):(o=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.regionAnchorX=Number(o[1]),s.regionAnchorY=Number(o[2])):(o=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.viewportAnchorX=Number(o[1]),s.viewportAnchorY=Number(o[2])):/^scroll=up$/.exec(u)&&(s.scroll="up"),oa(i),o=Mi(i)}t.push(a)}for(r=new Map,fg(r),i=[],n=m(n.slice(1)),a=n.next();!a.done;a=n.next()){if(a=a.value.split(`
`),(a.length!=1||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&a[0]=="STYLE"){for(s=[],o=-1,u=1;u<a.length;u++)a[u].includes("::cue")&&(s.push([]),o=s.length-1),o!=-1&&(s[o].push(a[u]),a[u].includes("}")&&(o=-1));for(s=m(s),o=s.next();!o.done;o=s.next()){var l=o.value;o="global",(u=l[0].match(/\((.*)\)/))&&(o=u.pop()),u=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(u=l[1].split(";")),(l=r.get(o))||(l=new qe(0,0,""));for(var c=!1,d=0;d<u.length;d++){var h=/^\s*([^:]+):\s*(.*)/.exec(u[d]);if(h){var p=h[2].trim().replace(";","");switch(h[1].trim()){case"background-color":case"background":c=!0,l.backgroundColor=p;break;case"color":c=!0,l.color=p;break;case"font-family":c=!0,l.fontFamily=p;break;case"font-size":c=!0,l.fontSize=p;break;case"font-weight":(parseInt(p,10)>=700||p=="bold")&&(c=!0,l.fontWeight=ua);break;case"font-style":switch(p){case"normal":c=!0,l.fontStyle=td;break;case"italic":c=!0,l.fontStyle=la;break;case"oblique":c=!0,l.fontStyle="oblique"}break;case"opacity":c=!0,l.opacity=parseFloat(p);break;case"text-combine-upright":c=!0,l.textCombineUpright=p;break;case"text-shadow":c=!0,l.textShadow=p;break;case"white-space":c=!0,l.wrapLine=p!="noWrap"}}}c&&r.set(o,l)}}if(l=a,c=e,l.length==1&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||l[0]=="STYLE"||l[0]=="REGION")a=null;else if(a=null,l[0].includes("-->")||(a=l[0],l.splice(0,1)),s=new aa(l[0]),o=go(s),d=$r(s,/[ \t]+--\x3e[ \t]+/g),u=go(s),o==null||d==null||u==null)Ae("Failed to parse VTT time code. Cue skipped:",a,l),a=null;else{for(o+=c,u+=c,o<0&&(o=0),c=l.slice(1).join(`
`).trim(),r.has("global")?(l=r.get("global").clone(),l.startTime=o,l.endTime=u,l.payload=c):l=new qe(o,u,c),oa(s),o=Mi(s);o;)Tw(l,o,t),oa(s),o=Mi(s);ru(l,r),a!=null&&(l.id=a),a=l}a&&i.push(a)}return i};function Tw(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=hr:e.textAlign=Zc[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":iu)):(r=/^region:(.*)$/.exec(t))?(t=kC(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=ed[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=wo,e.line=Number(n[1]),n[2]&&(e.lineAlign=ed[n[2].toUpperCase()]))}function kC(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}q("shaka.text.VttTextParser",Yt),Yt.prototype.parseMedia=Yt.prototype.parseMedia,Yt.prototype.setManifestType=Yt.prototype.setManifestType,Yt.prototype.setSequenceMode=Yt.prototype.setSequenceMode,Yt.prototype.parseInit=Yt.prototype.parseInit,Dt("text/vtt",function(){return new Yt}),Dt('text/vtt; codecs="vtt"',function(){return new Yt}),Dt('text/vtt; codecs="wvtt"',function(){return new Yt});function xn(){this.g=null}xn.prototype.parseInit=function(e){var t=this,n=!1;if(new Fe().box("moov",he).box("trak",he).box("mdia",he).S("mdhd",function(r){r=ku(r.reader,r.version),t.g=r.timescale}).box("minf",he).box("stbl",he).S("stsd",Pr).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new M(2,2,2008);if(!n)throw new M(2,2,2008)},xn.prototype.setSequenceMode=function(){},xn.prototype.setManifestType=function(){},xn.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new M(2,2,2008);var n=0,r=[],i,a=[],o=!1,s=!1,u=!1,l=null;if(new Fe().box("moof",he).box("traf",he).S("tfdt",function(S){o=!0,n=Au(S.reader,S.version).baseMediaDecodeTime}).S("tfhd",function(S){l=xu(S.reader,S.flags).Xd}).S("trun",function(S){s=!0,r=Iu(S.reader,S.version,S.flags).mh}).box("mdat",va(function(S){u=!0,i=S},!1)).parse(e,!1),!u&&!o&&!s)throw new M(2,2,2008);e=n;for(var c=new We(i,0),d=m(r),h=d.next();!h.done;h=d.next()){h=h.value;var p=h.nh||l,g=h.Gf?n+h.Gf:e;e=g+(p||0);var v=0;do{var y=c.U();v+=y;var T=c.U(),w=null;wu(T)=="vttc"?y>8&&(w=c.Tb(y-8,!1)):c.skip(y-8),p&&w&&(y=IC(w,t.periodStart+g/this.g,t.periodStart+e/this.g),a.push(y))}while(h.sampleSize&&v<h.sampleSize)}return a.filter(ni)};function IC(e,t,n){var r,i,a;return new Fe().box("payl",va(function(o){r=$e(o)},!1)).box("iden",va(function(o){i=$e(o)},!1)).box("sttg",va(function(o){a=$e(o)},!1)).parse(e),r?EC(r,i,a,t,n):null}function EC(e,t,n,r,i){if(e=new qe(r,i,e),ru(e),t&&(e.id=t),n)for(t=new aa(n),n=Mi(t);n;)Tw(e,n,[]),oa(t),n=Mi(t);return e}q("shaka.text.Mp4VttParser",xn),xn.prototype.parseMedia=xn.prototype.parseMedia,xn.prototype.setManifestType=xn.prototype.setManifestType,xn.prototype.setSequenceMode=xn.prototype.setSequenceMode,xn.prototype.parseInit=xn.prototype.parseInit,Dt('application/mp4; codecs="wvtt"',function(){return new xn});function An(){}An.prototype.parseInit=function(){},An.prototype.setSequenceMode=function(){},An.prototype.setManifestType=function(){},An.prototype.parseMedia=function(e){var t=$e(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var r=new aa(n[0]),i=go(r),a=$r(r,/,/g);if(r=go(r),i==null||a==null||r==null)throw new M(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new qe(i,r,n.slice(1).join(`
`).trim()))}return e},q("shaka.text.SbvTextParser",An),An.prototype.parseMedia=An.prototype.parseMedia,An.prototype.setManifestType=An.prototype.setManifestType,An.prototype.setSequenceMode=An.prototype.setSequenceMode,An.prototype.parseInit=An.prototype.parseInit,Dt("text/x-subviewer",function(){return new An});function kn(){this.g=new Yt}kn.prototype.parseInit=function(){},kn.prototype.setSequenceMode=function(){},kn.prototype.setManifestType=function(){},kn.prototype.parseMedia=function(e,t,n){var r=$e(e);if(e=`WEBVTT

`,r!=""){r=r.replace(/\r+/g,""),r=r.trim(),r=m(r.split(`

`));for(var i=r.next();!i.done;i=r.next())i=i.value.split(/\n/),i[0].match(/\d+/)&&i.shift(),i[0]=i[0].replace(/,/g,"."),e+=i.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`}return e=oe(qn(e)),this.g.parseMedia(e,t,n,[])},q("shaka.text.SrtTextParser",kn),kn.prototype.parseMedia=kn.prototype.parseMedia,kn.prototype.setManifestType=kn.prototype.setManifestType,kn.prototype.setSequenceMode=kn.prototype.setSequenceMode,kn.prototype.parseInit=kn.prototype.parseInit,Dt("text/srt",function(){return new kn});function In(){}In.prototype.parseInit=function(){},In.prototype.setSequenceMode=function(){},In.prototype.setManifestType=function(){},In.prototype.parseMedia=function(e){var t="",n="",r=null,i=null;for(i=$e(e).split(/\r?\n\s*\r?\n/),e=m(i),i=e.next();!i.done;i=e.next()){var a=i.value;i=a,(a=MC.exec(a))&&(r=a[1],i=a[2]),r=="V4 Styles"||r=="V4+ Styles"?(t=i,t=n?t+(`
`+i):i):r=="Events"&&(n=n?n+(`
`+i):i)}for(r=[],i=null,t=m(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(a=Aw.exec(e))){if(e=a[1].trim(),a=a[2].trim(),e=="Format")i=a.split(bc);else if(e=="Style"){e=a.split(bc),a={};for(var o=0;o<i.length&&o<e.length;o++)a[i[o]]=e[o];r.push(a)}}for(i=[],t=null,n=m(n.split(/\r?\n/)),a=n.next(),e={};!a.done;e={aj:void 0},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(o=Aw.exec(a))){if(a=o[1].trim(),o=o[2].trim(),a=="Format")t=o.split(bc);else if(a=="Dialogue"){o=o.split(bc),a={};for(var s=0;s<t.length&&s<o.length;s++)a[t[s]]=o[s];s=xw(a.Start);var u=xw(a.End);o=new qe(s,u,o.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.aj=a.Style,(e=r.find((function(l){return function(c){return c.Name==l.aj}})(e)))&&CC(o,e),i.push(o)}}return i};function CC(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=Sw(n))&&(e.color=n),(n=t.BackColour)&&(n=Sw(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=ua),t.Italic&&(e.fontStyle=la),t.Underline&&e.textDecoration.push(Ir),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=yo,e.textAlign="start";break;case 2:e.displayAlign=yo,e.textAlign=hr;break;case 3:e.displayAlign=yo,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=hr;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=hr;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function Sw(e){return e=parseInt(e.replace("&H",""),16),e>=0?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function xw(e){return e=DC.exec(e),(e[1]?parseInt(e[1].replace(":",""),10):0)*3600+parseInt(e[2],10)*60+parseFloat(e[3])}q("shaka.text.SsaTextParser",In),In.prototype.parseMedia=In.prototype.parseMedia,In.prototype.setManifestType=In.prototype.setManifestType,In.prototype.setSequenceMode=In.prototype.setSequenceMode,In.prototype.parseInit=In.prototype.parseInit;var MC=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Aw=/^\s*([^:]+):\s*(.*)/,bc=/\s*,\s*/,DC=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Dt("text/x-ssa",function(){return new In});function kw(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,e>0)?{ee:n,ra:e}:null}function Iw(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var i=((e[t+2]&192)>>>6)+1,a=(e[t+2]&1)<<2;return a|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:a,codec:"mp4a.40."+i}}function Ew(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function RC(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function En(e){this.j=e,this.h=0,this.g=new Map,this.i=null}f=En.prototype,f.destroy=function(){this.g.clear()},f.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ht(this.convertCodecs("audio",e)):!1},f.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(tn(t)||"mp4a.40.2")+'"':t},f.getOriginalMimeType=function(){return this.j},f.transmux=function(e,t,n,r){for(var i=oe(e),a=wa(i),o=a.length;o<i.length&&!Ew(i,o);o++);if(e=n.endTime*1e3,a=Vi(a),a.length&&n&&(a=a.find(function(c){return c.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=a.data),a=Iw(i,o),!a)return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=a.sampleRate,t.channelsCount=a.channelCount;for(var s=[];o<i.length;){var u=kw(i,o);if(!u)return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));var l=u.ee+u.ra;o+l<=i.length&&s.push({data:i.subarray(o+u.ee,o+l),size:u.ra,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),o+=l}return i=a.sampleRate,e=Math.floor(e*i/1e3),r={id:t.id,type:"audio",codecs:a.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:i,duration:r,Bb:[],Ga:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,zb:s},stream:t},r=new ya([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=ba(r),this.g.set(n,t)),n=this.i!==t,r=No(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})},q("shaka.transmuxer.AacTransmuxer",En),En.prototype.transmux=En.prototype.transmux,En.prototype.getOriginalMimeType=En.prototype.getOriginalMimeType,En.prototype.convertCodecs=En.prototype.convertCodecs,En.prototype.isSupported=En.prototype.isSupported,En.prototype.destroy=En.prototype.destroy,Er("audio/aac",function(){return new En("audio/aac")},ei);function Cw(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(n>=3)return null;var r=e[t+4]&63,i=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][r*3+n]*2;if(t+i>e.length)return null;var a=e[t+6]>>5,o=0;a===2?o+=2:(a&1&&a!==1&&(o+=2),a&4&&(o+=2)),o=(e[t+6]<<8|e[t+7])>>12-o&1;var s=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|s>>2,(s&3)<<6|a<<3|o<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][a]+o,Ga:e,ra:i}}function PC(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var i,a;r>0;){a=e[t];var o=Math.min(r,8),s=8-o;i=4278190080>>>24+s<<s,i=(a&i)>>s,n=n?n<<o|i:i,t+=1,r-=o}if(n<16)return!0}return!1}function Bn(e){this.j=e,this.h=0,this.g=new Map,this.i=null}f=Bn.prototype,f.destroy=function(){this.g.clear()},f.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ht(this.convertCodecs("audio",e)):!1},f.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?ge().se()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},f.getOriginalMimeType=function(){return this.j},f.transmux=function(e,t,n,r){e=oe(e);for(var i=wa(e),a=i.length;a<e.length&&!PC(e,a);a++);var o=n.endTime*1e3;i=Vi(i),i.length&&n&&(i=i.find(function(c){return c.description==="com.apple.streaming.transportStreamTimestamp"}))&&(o=i.data),i=0;for(var s=new Uint8Array([]),u=[];a<e.length;){var l=Cw(e,a);if(!l)return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,i=l.sampleRate,s=l.Ga,u.push({data:e.subarray(a,a+l.ra),size:l.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),a+=l.ra}return e=Math.floor(o*i/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:i,duration:r,Bb:[],Ga:s,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,zb:u},stream:t},r=new ya([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=ba(r),this.g.set(n,t)),n=this.i!==t,r=No(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})},q("shaka.transmuxer.Ac3Transmuxer",Bn),Bn.prototype.transmux=Bn.prototype.transmux,Bn.prototype.getOriginalMimeType=Bn.prototype.getOriginalMimeType,Bn.prototype.convertCodecs=Bn.prototype.convertCodecs,Bn.prototype.isSupported=Bn.prototype.isSupported,Bn.prototype.destroy=Bn.prototype.destroy,Er("audio/ac3",function(){return new Bn("audio/ac3")},ei);function Mw(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Ur(e.subarray(t+2));hn(n,2),hn(n,3);var r=Te(n,11)+1<<1,i=Te(n,2);if(i==3){i=Te(n,2),i=[24e3,22060,16e3][i];var a=3}else i=[48e3,44100,32e3][i],a=Te(n,2);var o=Te(n,3),s=Te(n,1);return n=Te(n,5),t+r>e.byteLength?null:(e=Math.floor(r*i/([1,2,3,6][a]*16)),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,i<<6|n<<1|0,0|o<<1|s<<0,0]),{sampleRate:i,channelCount:[2,1,2,3,3,4,4,5][o]+s,Ga:e,ra:r})}function Fn(e){this.j=e,this.h=0,this.g=new Map,this.i=null}f=Fn.prototype,f.destroy=function(){this.g.clear()},f.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ht(this.convertCodecs("audio",e)):!1},f.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},f.getOriginalMimeType=function(){return this.j},f.transmux=function(e,t,n,r){e=oe(e);for(var i=wa(e),a=i.length;a<e.length&&(e[a]<<8|e[a+1]<<0)!==2935;a++);var o=n.endTime*1e3;i=Vi(i),i.length&&n&&(i=i.find(function(c){return c.description==="com.apple.streaming.transportStreamTimestamp"}))&&(o=i.data),i=0;for(var s=new Uint8Array([]),u=[];a<e.length;){var l=Mw(e,a);if(!l)return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,i=l.sampleRate,s=l.Ga,u.push({data:e.subarray(a,a+l.ra),size:l.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),a+=l.ra}return e=Math.floor(o*i/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:i,duration:r,Bb:[],Ga:s,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,zb:u},stream:t},r=new ya([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=ba(r),this.g.set(n,t)),n=this.i!==t,r=No(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})},q("shaka.transmuxer.Ec3Transmuxer",Fn),Fn.prototype.transmux=Fn.prototype.transmux,Fn.prototype.getOriginalMimeType=Fn.prototype.getOriginalMimeType,Fn.prototype.convertCodecs=Fn.prototype.convertCodecs,Fn.prototype.isSupported=Fn.prototype.isSupported,Fn.prototype.destroy=Fn.prototype.destroy,Er("audio/ec3",function(){return new Fn("audio/ec3")},ei);function LC(e){if(!e.length)return null;var t=e.find(function(v){return v.type==7});if(e=e.find(function(v){return v.type==8}),!t||!e)return null;var n=new Ur(t.data),r=Ne(n);if(Ne(n),Ne(n),Rt(n),UC.includes(r)&&(r=X(n),r===3&&hn(n,1),Rt(n),Rt(n),hn(n,1),Q(n))){r=r!==3?8:12;for(var i=0;i<r;i++)Q(n)&&(i<6?Du(n,16):Du(n,64))}if(Rt(n),r=X(n),r===0)X(n);else if(r===1)for(hn(n,1),Rt(n),Rt(n),r=X(n),i=0;i<r;i++)Rt(n);Rt(n),hn(n,1);var a=X(n),o=X(n),s=Te(n,1);s===0&&hn(n,1),hn(n,1);var u=0,l=0,c=0,d=0;if(Q(n)&&(u=X(n),l=X(n),c=X(n),d=X(n)),i=r=1,Q(n)&&Q(n)){var h=Ne(n),p=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],g=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];h>0&&h<=16?(r=p[h-1],i=g[h-1]):h===255&&(r=Te(n,16),i=Te(n,16))}return n=(2-s)*(o+1)*16-c*2-d*2,a=(a+1)*16-u*2-l*2,u=[],t=t.fullData,u.push(t.byteLength>>>8&255),u.push(t.byteLength&255),u=u.concat.apply(u,H(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,H(e)),e=new Uint8Array([1,u[3],u[4],u[5],255,225].concat(u,[1],t)),{height:n,width:a,Sa:e,Za:r,$a:i}}function NC(e){function t(g){i={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:g.pts,dts:g.dts,nalus:[]}}function n(){if(i&&i.nalus.length&&i.frame){for(var g=[],v=m(i.nalus),y=v.next();!y.done;y=v.next()){y=y.value;var T=y.fullData.byteLength,w=new Uint8Array(4);w[0]=T>>24&255,w[1]=T>>16&255,w[2]=T>>8&255,w[3]=T&255,g.push(w),g.push(y.fullData)}i.data=dt.apply(Lt,H(g)),r.push(i)}}for(var r=[],i=null,a=!1,o=0;o<e.length;o++){var s=e[o],u=s.nalus,l=!1;i&&u.length&&!a&&(n(),t(s)),u=m(s.nalus);for(var c=u.next();!c.done;c=u.next()){c=c.value;var d=!1;switch(c.type){case 1:var h=!1;d=!0;var p=c.data;l&&p.length>4&&(p=jS(new Ur(p)),p===2||p===4||p===7||p===9)&&(h=!0),h&&i&&i.frame&&!i.isKeyframe&&(n(),i=null),i||t(s),i.frame=!0,i.isKeyframe=h;break;case 5:d=!0,i&&i.frame&&!i.isKeyframe&&(n(),i=null),i||t(s),i.frame=!0,i.isKeyframe=!0;break;case 6:d=!0;break;case 7:l=d=!0;break;case 8:d=!0;break;case 9:a=d=!0,i&&i.frame&&(n(),i=null),i||t(s);break;case 12:d=!0;break;default:d=!1}i&&d&&i.nalus.push(c)}}return n(),r}var UC=[100,110,122,244,44,83,86,118,128,138,139,134];function _C(e){if(!e.length)return null;var t=e.find(function(o){return o.type==32}),n=e.find(function(o){return o.type==33}),r=e.find(function(o){return o.type==34});if(!t||!n||!r)return null;var i=jC(t.fullData);e=OC(n.fullData);var a=BC(r.fullData);return t=FC(t.fullData,n.fullData,r.fullData,{Xg:i.Xg,Eh:i.Eh,Ig:e.Ig,Jg:e.Jg,Cg:e.Cg,Hg:e.Hg,Dg:e.Dg,Eg:e.Eg,Fg:e.Fg,Gg:e.Gg,wg:e.wg,xg:e.xg,yg:e.yg,zg:e.zg,Ag:e.Ag,Bg:e.Bg,uf:e.uf,kg:e.kg,jg:e.jg,ig:e.ig,Zg:a.Zg,vg:e.vg,ug:e.ug}),{height:e.height,width:e.width,Sa:t,Za:e.Uk,$a:e.Tk}}function jC(e){var t=new Ur(e,!0);return Ne(t),Ne(t),Te(t,4),Te(t,2),Te(t,6),e=Te(t,3),t=Q(t),{Xg:e+1,Eh:t}}function OC(e){e=new Ur(e,!0),Ne(e),Ne(e);var t=0,n=0,r=0,i=0;Te(e,4);var a=Te(e,3);Q(e);for(var o=Te(e,2),s=Te(e,1),u=Te(e,5),l=Ne(e),c=Ne(e),d=Ne(e),h=Ne(e),p=Ne(e),g=Ne(e),v=Ne(e),y=Ne(e),T=Ne(e),w=Ne(e),S=Ne(e),k=[],D=[],x=0;x<a;x++)k.push(Q(e)),D.push(Q(e));if(a>0)for(x=a;x<8;x++)Te(e,2);for(x=0;x<a;x++)k[x]&&Te(e,88),D[x]&&Ne(e);X(e),k=X(e),k==3&&Te(e,1),D=X(e),x=X(e),Q(e)&&(t+=X(e),n+=X(e),r+=X(e),i+=X(e));var I=X(e),A=X(e),R=X(e);if(Q(e))for(var E=0;E<=a;E++)X(e),X(e),X(e);else X(e),X(e),X(e);if(X(e),X(e),X(e),X(e),X(e),X(e),Q(e)&&Q(e))for(E=0;E<4;E++)for(var P=0;P<(E===3?2:6);P++)if(Q(e)){var L=Math.min(64,1<<4+(E<<1));E>1&&Ta(e);for(var B=0;B<L;B++)Ta(e)}else X(e);for(Q(e),Q(e),Q(e)&&(Ne(e),X(e),X(e),Q(e)),E=X(e),L=P=0;L<E;L++)if(B=!1,L!==0&&(B=Q(e)),B){L===E&&X(e),Q(e),X(e);for(var O=B=0;O<=P;O++){var N=Q(e),_=!1;N||(_=Q(e)),(N||_)&&B++}P=B}else{for(O=X(e),B=X(e),P=O+B,N=0;N<O;N++)X(e),Q(e);for(O=0;O<B;O++)X(e),Q(e)}if(Q(e))for(E=X(e),P=0;P<E;P++){for(L=0;L<R+4;L++)Te(e,1);Te(e,1)}if(E=R=1,P=!0,L=1,O=B=0,Q(e),Q(e),Q(e)){if(Q(e)){N=Ne(e),_=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2];var F=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];N>0&&N<=16?(R=_[N-1],E=F[N-1]):N===255&&(R=Te(e,16),E=Te(e,16))}if(Q(e)&&Q(e),Q(e)&&(Te(e,3),Q(e),Q(e)&&(Ne(e),Ne(e),Ne(e))),Q(e)&&(X(e),X(e)),Q(e),Q(e),Q(e),(N=Q(e))&&(Rt(e),Rt(e),Rt(e),Rt(e)),Q(e)&&(L=Te(e,32),B=Te(e,32),Q(e)&&X(e),Q(e))){F=!1,N=Q(e),_=Q(e),(N||_)&&((F=Q(e))&&(Ne(e),Te(e,5),Q(e),Te(e,5)),Te(e,4),Te(e,4),F&&Te(e,4),Te(e,5),Te(e,5),Te(e,5));for(var V=0;V<=a;V++){P=Q(e);var ue=!0,z=1;P||(ue=Q(e));var Re=!1;if(ue?X(e):Re=Q(e),Re||(z=X(e)+1),N){for(ue=0;ue<z;ue++)X(e),X(e),F&&(X(e),X(e));Q(e)}if(_){for(ue=0;ue<z;ue++)X(e),X(e),F&&(X(e),X(e));Q(e)}}}Q(e)&&(Q(e),Q(e),Q(e),O=X(e),X(e),X(e),X(e),X(e))}return{Cg:S,Ig:o,Jg:s,Hg:u,Dg:l,Eg:c,Fg:d,Gg:h,wg:p,xg:g,yg:v,zg:y,Ag:T,Bg:w,uf:O,kg:k,jg:I,ig:A,width:D-(t+n)*(k===1||k===2?2:1),height:x-(r+i)*(k===1?2:1),Uk:R,Tk:E,vg:B/L,ug:P}}function BC(e){var t=new Ur(e,!0);Ne(t),Ne(t),X(t),X(t),Q(t),Q(t),Te(t,3),Q(t),Q(t),X(t),X(t),Ta(t),Q(t),Q(t),Q(t)&&X(t),Ta(t),Ta(t),Q(t),Q(t),Q(t),Q(t),e=Q(t),t=Q(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Zg:n}}function FC(e,t,n,r){var i=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));for(i[0]=1,i[1]=(r.Ig&3)<<6|(r.Jg?1:0)<<5|r.Hg&31,i[2]=r.Dg,i[3]=r.Eg,i[4]=r.Fg,i[5]=r.Gg,i[6]=r.wg,i[7]=r.xg,i[8]=r.yg,i[9]=r.zg,i[10]=r.Ag,i[11]=r.Bg,i[12]=r.Cg,i[13]=240|(r.uf&3840)>>8,i[14]=r.uf&255,i[15]=252|r.Zg&3,i[16]=252|r.kg&3,i[17]=248|r.jg&7,i[18]=248|r.ig&7,i[19]=0,i[20]=parseInt(r.vg,10),i[21]=((r.ug?1:0)&3)<<6|(r.Xg&7)<<3|(r.Eh?1:0)<<2|3,i[22]=3,e=[e,t,n],t=23,n=e.length-1,r=0;r<e.length;r+=1)i.set(new Uint8Array([32+r|(r===n?128:0),0,1]),t),t+=3,i.set(new Uint8Array([e[r].byteLength>>8,e[r].byteLength&255]),t),t+=2,i.set(e[r],t),t+=e[r].byteLength;return i}function wc(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3;if(n!==1&&i!==0&&i!==15&&a!==3){var o=e[t+3]>>6;i=VC[(n===3?3-r:r===3?3:4)*14+i-1]*1e3,a=HC[(n===3?0:n===2?1:2)*3+a],n=GC[n][r];var s=KC[r],u=Math.floor(n*i/a+(e[t+2]>>1&1))*s,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&l<=87&&r===2&&i>=224e3&&o===0&&(e[t+3]|=128),{sampleRate:a,channelCount:o===3?1:2,ra:u,Sk:n*8*s}}return null}function Dw(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function Rw(e,t){if(t+1<e.length&&Dw(e,t)){var n=wc(e,t),r=4;return n&&n.ra&&(r=n.ra),t+=r,t===e.length||t+1<e.length&&Dw(e,t)}return!1}var VC=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],HC=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],GC=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],KC=[0,1,1,4];function Vn(e){this.j=e,this.h=0,this.g=new Map,this.i=null}f=Vn.prototype,f.destroy=function(){this.g.clear()},f.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ht(this.convertCodecs("audio",e)):!1},f.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},f.getOriginalMimeType=function(){return this.j},f.transmux=function(e,t,n,r){for(var i=oe(e),a=wa(i).length;a<i.length&&!Rw(i,a);a++);var o;for(e=[];a<i.length;){var s=wc(i,a);if(!s)return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));o||(o=s),a+s.ra<=i.length&&e.push({data:i.subarray(a,a+s.ra),size:s.ra,duration:1152,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),a+=s.ra}return o?(i=o.Sk*9e4/o.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:o.sampleRate,duration:r,Bb:[],Ga:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:i,zb:e},stream:t},r=new ya([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=ba(r),this.g.set(n,t)),n=this.i!==t,r=No(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})):Promise.reject(new M(2,3,3018,n?n.P()[0]:null))},q("shaka.transmuxer.Mp3Transmuxer",Vn),Vn.prototype.transmux=Vn.prototype.transmux,Vn.prototype.getOriginalMimeType=Vn.prototype.getOriginalMimeType,Vn.prototype.convertCodecs=Vn.prototype.convertCodecs,Vn.prototype.isSupported=Vn.prototype.isSupported,Vn.prototype.destroy=Vn.prototype.destroy,Er("audio/mpeg",function(){return new Vn("audio/mpeg")},ei);function Hn(e){this.h=e,this.g=null}f=Hn.prototype,f.destroy=function(){},f.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=tn(e).split(","),n=en("audio",t);return t=en("video",t),!n||t||Nt(n)!="mp3"?!1:Ht(this.convertCodecs("audio",e))},f.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},f.getOriginalMimeType=function(){return this.h},f.transmux=function(e,t,n,r,i){if(this.g?this.g.clearData():this.g=new Ke,this.g.Kf(n.i),e=oe(e),e=this.g.parse(e),e.Zd().audio!="mp3"||i!="audio")return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));for(n=new Uint8Array([]),i=m(e.ub()),e=i.next();!e.done;e=i.next())if(e=e.value.data)for(t=0;t<e.length;)(r=wc(e,t))?(t+r.ra<=e.length&&(n=dt(n,e.subarray(t,t+r.ra))),t+=r.ra):t++;return Promise.resolve(n)},q("shaka.transmuxer.MpegTsTransmuxer",Hn),Hn.prototype.transmux=Hn.prototype.transmux,Hn.prototype.getOriginalMimeType=Hn.prototype.getOriginalMimeType,Hn.prototype.convertCodecs=Hn.prototype.convertCodecs,Hn.prototype.isSupported=Hn.prototype.isSupported,Hn.prototype.destroy=Hn.prototype.destroy,Er("video/mp2t",function(){return new Hn("video/mp2t")},rd);function Cn(e){this.h=e,(this.g=mh.get("ISOBoxer")())&&qC(this)}function qC(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;r<16;r++)this.usertype[r]!==WC[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}f=Cn.prototype,f.destroy=function(){},f.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ht(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ht(t)||Ht(e))},f.convertCodecs=function(e,t){return t.replace("mss/","")},f.getOriginalMimeType=function(){return this.h},f.transmux=function(e,t,n){if(!n)return Promise.resolve(oe(e));if(!t.mssPrivateData)return Promise.reject(new M(2,3,3020,n?n.P()[0]:null));try{var r,i=this.g.parseBuffer(e),a=i.fetch("tfhd");a.track_ID=t.id+1;var o=i.fetch("tfdt"),s=i.fetch("traf");o===null&&(o=this.g.createFullBox("tfdt",s,a),o.version=1,o.flags=0,o.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var u=i.fetch("trun"),l=i.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=i.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var d=i.fetch("sepiff");if(d!==null){d.type="senc",d.usertype=void 0;var h=i.fetch("saio");if(h===null){h=this.g.createFullBox("saio",s),h.version=0,h.flags=0,h.entry_count=1,h.offset=[0];var p=this.g.createFullBox("saiz",s);if(p.version=0,p.flags=0,p.sample_count=d.sample_count,p.default_sample_info_size=0,p.sample_info_size=[],d.flags&2)for(r=0;r<d.sample_count;r+=1)p.sample_info_size[r]=10+6*d.entry[r].NumberOfEntries;else p.default_sample_info_size=8}}a.flags&=16777214,a.flags|=131072,u.flags|=1;var g=i.fetch("moof");u.data_offset=g.getLength()+8;var v=i.fetch("saio");v!==null&&(v.offset[0]=Pw(g,"traf")+Pw(s,"senc")+16);var y=oe(i.write());return Promise.resolve(y)}catch(T){return T instanceof M?Promise.reject(T):Promise.reject(new M(2,3,3022,n?n.P()[0]:null))}};function Pw(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}q("shaka.transmuxer.MssTransmuxer",Cn),Cn.prototype.transmux=Cn.prototype.transmux,Cn.prototype.getOriginalMimeType=Cn.prototype.getOriginalMimeType,Cn.prototype.convertCodecs=Cn.prototype.convertCodecs,Cn.prototype.isSupported=Cn.prototype.isSupported,Cn.prototype.destroy=Cn.prototype.destroy;var WC=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Er("mss/audio/mp4",function(){return new Cn("mss/audio/mp4")},ei),Er("mss/video/mp4",function(){return new Cn("mss/video/mp4")},ei);function Gn(e){this.m=e,this.g=0,this.j=new Map,this.l=this.i=this.h=null}f=Gn.prototype,f.destroy=function(){this.j.clear(),this.i&&this.i.destroy()},f.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=tn(n).split(",");return n=en("audio",r),r=en("video",r),n&&(n=Nt(n),!zC.includes(n))||r&&(n=Nt(r),!XC.includes(n))?!1:t?Ht(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ht(t)||Ht(e))},f.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=tn(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return Eo(n,"audio/mp4")}).map(Dg).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},f.getOriginalMimeType=function(){return this.m},f.transmux=function(e,t,n,r,i){var a=oe(e);if(i=="audio"&&!Sa(a)){for(var o=wa(a),s=o.length;s<a.length;s++)if(Rw(a,s))return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));for(s=o.length;s<a.length;s++)if(Ew(a,s))return this.i||(this.i=new En("audio/aac")),this.i.transmux(e,t,n,r,i);return Promise.reject(new M(2,3,3018,n?n.P()[0]:null))}this.h?this.h.clearData():this.h=new Ke,this.h.Kf(n.i);var u=this.h.parse(a),l=[],c=u.Zd();try{var d=null;if(i=="video"){switch(c.video){case"avc":var h=[],p=null,g=u.ud(),v=NC(g);if(!v.length)throw new M(2,3,3023,n?n.P()[0]:null);for(var y=0;y<v.length;y++){var T=v[y];p==null&&(p=T.dts);var w=void 0;w=y+1<v.length?(v[y+1].dts||0)-(T.dts||0):v.length>1?(T.dts||0)-(v[y-1].dts||0):(n.endTime-n.startTime)*9e4,h.push({data:T.data,size:T.data.byteLength,duration:w,sb:Math.round((T.pts||0)-(T.dts||0)),flags:{xb:0,mb:0,jb:0,hb:0,ib:T.isKeyframe?2:1,yb:T.isKeyframe?0:1}})}for(var S=[],k=m(g),D=k.next();!D.done;D=k.next())S.push.apply(S,H(D.value.nalus));var x=LC(S);if(!x||p==null)throw new M(2,3,3018,n?n.P()[0]:null);t.height=x.height,t.width=x.width,d={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:r,Bb:[],Ga:new Uint8Array([]),Sa:x.Sa,Za:x.Za,$a:x.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:p,zb:h},stream:t};break;case"hvc":var I=[],A=null,R=[],E=u.ud();if(!E.length)throw new M(2,3,3023,n?n.P()[0]:null);for(var P=0;P<E.length;P++){var L=E[P],B=L.nalus;R.push.apply(R,H(B));for(var O=!1,N=[],_=!1,F=m(B),V=F.next();!V.done;V=F.next()){var ue=V.value;switch(ue.type){case 1:case 0:var z=_=!0;break;case 19:case 20:case 21:O=z=_=!0;break;case 32:z=!0;break;case 33:z=!0;break;case 34:z=!0;break;case 35:_=z=!0;break;case 39:case 40:z=!0;break;default:z=!1}if(_&&z){var Re=ue.fullData.byteLength,fe=new Uint8Array(4);fe[0]=Re>>24&255,fe[1]=Re>>16&255,fe[2]=Re>>8&255,fe[3]=Re&255,N.push(fe),N.push(ue.fullData)}}var je=N.length?{data:dt.apply(Lt,H(N)),isKeyframe:O}:null;if(je){A==null&&L.dts!=null&&(A=L.dts);var Se=void 0;Se=P+1<E.length?(E[P+1].dts||0)-(L.dts||0):E.length>1?(L.dts||0)-(E[P-1].dts||0):(n.endTime-n.startTime)*9e4,I.push({data:je.data,size:je.data.byteLength,duration:Se,sb:Math.round((L.pts||0)-(L.dts||0)),flags:{xb:0,mb:0,jb:0,hb:0,ib:je.isKeyframe?2:1,yb:je.isKeyframe?0:1}})}}var ye=_C(R);if(!ye||A==null)throw new M(2,3,3018,n?n.P()[0]:null);t.height=ye.height,t.width=ye.width,d={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:r,Bb:[],Ga:new Uint8Array([]),Sa:ye.Sa,Za:ye.Za,$a:ye.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:A,zb:I},stream:t}}d&&(l.push(d),d=null)}if(i=="audio"){switch(c.audio){case"aac":for(var Ie=[],De,Ee=null,be=null,xe=null,St=m(u.ub()),mt=St.next();!mt.done;mt=St.next()){var Mn=mt.value,un=Mn.data;if(un){var Jt=0;if(be==-1&&xe)un=dt(xe,Mn.data),be=null;else if(be!=null&&xe){Jt=Math.max(0,be);var Xi=dt(xe,un.subarray(0,Jt));Ie.push({data:Xi,size:Xi.byteLength,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),be=xe=null}if(De=Iw(un,Jt),!De)throw new M(2,3,3018,n?n.P()[0]:null);for(t.audioSamplingRate=De.sampleRate,t.channelsCount=De.channelCount,Ee==null&&Mn.pts!==null&&(Ee=Mn.pts);Jt<un.length;){var Kr=kw(un,Jt);if(!Kr){xe=un.subarray(Jt,un.length),be=-1;break}var Qn=Kr.ee+Kr.ra;be=Math.max(0,Jt+Qn-un.length),be!=0?xe=un.subarray(Jt+Kr.ee,Jt+Qn):Jt+Qn<=un.length&&Ie.push({data:un.subarray(Jt+Kr.ee,Jt+Qn),size:Kr.ra,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),Jt+=Qn}}}if(!De||Ee==null){Ee=n.startTime*9e4;var $a=en("audio",t.codecs.split(","));if(!$a||!t.channelsCount||!t.audioSamplingRate)throw new M(2,3,3018,n?n.P()[0]:null);De={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:$a};var Qa=RC($a,t.channelsCount);if(!Qa)throw new M(2,3,3018,n?n.P()[0]:null);for(var Tc=Ee+(n.endTime-n.startTime)*9e4,Zn=Ee;Zn<Tc;)Ie.push({data:Qa,size:Qa.byteLength,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),Zn+=1024/De.sampleRate*9e4}var Sc=De.sampleRate,Tp=Ee/9e4*Sc;d={id:t.id,type:"audio",codecs:De.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Sc,duration:r,Bb:[],Ga:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Tp,zb:Ie},stream:t};break;case"ac3":for(var xc=[],Za=0,Ls=new Uint8Array([]),vt=null,vn=m(u.ub()),$t=vn.next();!$t.done;$t=vn.next()){var Sp=$t.value,xp=Sp.data;vt==null&&Sp.pts!==null&&(vt=Sp.pts);for(var eo=0;eo<xp.length;){var wi=Cw(xp,eo);wi?(t.audioSamplingRate=wi.sampleRate,t.channelsCount=wi.channelCount,Za=wi.sampleRate,Ls=wi.Ga,xc.push({data:xp.subarray(eo,eo+wi.ra),size:wi.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),eo+=wi.ra):eo++}}if(Za==0||Ls.byteLength==0||vt==null)throw new M(2,3,3018,n?n.P()[0]:null);var YC=vt/9e4*Za;d={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Za,duration:r,Bb:[],Ga:Ls,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:YC,zb:xc},stream:t};break;case"ec3":for(var Nw=[],Ac=0,Ap=new Uint8Array([]),kc=null,Uw=m(u.ub()),kp=Uw.next();!kp.done;kp=Uw.next()){var Ip=kp.value,Ep=Ip.data;kc==null&&Ip.pts!==null&&(kc=Ip.pts);for(var to=0;to<Ep.length;){var Ti=Mw(Ep,to);Ti?(t.audioSamplingRate=Ti.sampleRate,t.channelsCount=Ti.channelCount,Ac=Ti.sampleRate,Ap=Ti.Ga,Nw.push({data:Ep.subarray(to,to+Ti.ra),size:Ti.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),to+=Ti.ra):to++}}if(Ac==0||Ap.byteLength==0||kc==null)throw new M(2,3,3018,n?n.P()[0]:null);var JC=kc/9e4*Ac;d={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Ac,duration:r,Bb:[],Ga:Ap,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:JC,zb:Nw},stream:t};break;case"mp3":for(var _w=[],Ic,Ec=null,jw=m(u.ub()),Cp=jw.next();!Cp.done;Cp=jw.next()){var Mp=Cp.value,Ns=Mp.data;if(Ns){Ec==null&&Mp.pts!==null&&(Ec=Mp.pts);for(var Yi=0;Yi<Ns.length;){var no=wc(Ns,Yi);no?(Ic||(Ic=no),Yi+no.ra<=Ns.length&&_w.push({data:Ns.subarray(Yi,Yi+no.ra),size:no.ra,duration:1152,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),Yi+=no.ra):Yi++}}}if(!Ic||Ec==null)throw new M(2,3,3018,n?n.P()[0]:null);var Ow=Ic.sampleRate,$C=Ec/9e4*Ow;d={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Ow,duration:r,Bb:[],Ga:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:$C,zb:_w},stream:t};break;case"opus":var Bw=[],Cc=null,yr=u.H;if(!yr)throw new M(2,3,3018,n?n.P()[0]:null);var Qt=[];switch(yr.uj){case 1:case 2:Qt=[0];break;case 0:Qt=[255,1,1,0,1];break;case 128:Qt=[255,2,0,0,1];break;case 3:Qt=[1,2,1,0,2,1];break;case 4:Qt=[1,2,2,0,1,2,3];break;case 5:Qt=[1,3,2,0,4,1,2,3];break;case 6:Qt=[1,4,2,0,4,1,2,3,5];break;case 7:Qt=[1,4,2,0,4,1,2,3,5,6];break;case 8:Qt=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Qt=[1,1,2,0,1];break;case 131:Qt=[1,1,3,0,1,2];break;case 132:Qt=[1,1,4,0,1,2,3];break;case 133:Qt=[1,1,5,0,1,2,3,4];break;case 134:Qt=[1,1,6,0,1,2,3,4,5];break;case 135:Qt=[1,1,7,0,1,2,3,4,5,6];break;case 136:Qt=[1,1,8,0,1,2,3,4,5,6,7]}for(var Fw=new Uint8Array([0,yr.channelCount,0,0,yr.sampleRate>>>24&255,yr.sampleRate>>>17&255,yr.sampleRate>>>8&255,yr.sampleRate>>>0&255,0,0].concat(H(Qt))),Vw=yr.sampleRate,Hw=m(u.ub()),Dp=Hw.next();!Dp.done;Dp=Hw.next()){var Rp=Dp.value,ro=Rp.data;Cc==null&&Rp.pts!==null&&(Cc=Rp.pts);for(var Us=0;Us<ro.length;){for(var QC=(ro[Us+1]&16)!==0,ZC=(ro[Us+1]&8)!==0,qr=Us+2,Mc=0;ro[qr]===255;)Mc+=255,qr+=1;Mc+=ro[qr],qr+=1,qr+=QC?2:0,qr+=ZC?2:0;var Gw=ro.slice(qr,qr+Mc);Bw.push({data:Gw,size:Gw.byteLength,duration:960,sb:0,flags:{xb:0,mb:0,jb:0,hb:0,ib:2,yb:0}}),Us=qr+Mc}}if(Fw.byteLength==0||Cc==null)throw new M(2,3,3018,n?n.P()[0]:null);t.audioSamplingRate=yr.sampleRate,t.channelsCount=yr.channelCount;var eM=Cc/9e4*Vw;d={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Vw,duration:r,Bb:[],Ga:Fw,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:eM,zb:Bw},stream:t}}d&&(l.push(d),d=null)}}catch(Lp){return Lp&&Lp.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(Lp)}if(!l.length)return Promise.reject(new M(2,3,3018,n?n.P()[0]:null));var Kw=new ya(l),Pp=t.id+"_"+n.i;if(this.j.has(Pp))var _s=this.j.get(Pp);else _s=ba(Kw),this.j.set(Pp,_s);var tM=this.l!==_s,nM=No(Kw);return this.l=_s,this.g++,Promise.resolve({data:nM,init:tM?_s:null})},q("shaka.transmuxer.TsTransmuxer",Gn),Gn.prototype.transmux=Gn.prototype.transmux,Gn.prototype.getOriginalMimeType=Gn.prototype.getOriginalMimeType,Gn.prototype.convertCodecs=Gn.prototype.convertCodecs,Gn.prototype.isSupported=Gn.prototype.isSupported,Gn.prototype.destroy=Gn.prototype.destroy;var zC=["aac","ac-3","ec-3","mp3","opus"],XC=["avc","hevc"];Er("video/mp2t",function(){return new Gn("video/mp2t")},id);function Lw(){}it(Lw,rn),q("shaka.util.FairPlayUtils",Lw)}).call($,K,K,void 0);for(var de in $.shaka)we[de]=$.shaka[de]})()})(Jw)),Jw}var fM=dM();const Kt=iM(fM);function hM(we,K){const $=Wr.now(),de=we.mimeType,U=we.codecs,rt=we.bandwidth,ct=we.width,f=we.height;return{assetPosition:K,bandwidth:rt,codecs:U,mimeType:de,timestamp:$,videoHeight:f,videoWidth:ct}}async function pM(we,K,$){const de=hM(K,$);return de.mimeType&&de.codecs&&await Rc({adaptations:[de],streamingSessionId:we}),de}function gM(we){let K;const $=()=>{const U=we.getVariantTracks().find(ct=>ct.active),rt=we.getMediaElement();K&&rt&&pM(K,U,rt.currentTime).catch(console.error)};we.addEventListener("adaptation",$),we.addEventListener("variantchanged",$);const de=U=>{U instanceof CustomEvent&&(K=U.detail.playbackContext.playbackSessionId)};return ao.addEventListener("media-product-transition",de),function(){we.removeEventListener("adaptation",$),we.removeEventListener("variantchanged",$),ao.removeEventListener("media-product-transition",de)}}async function mM(){try{const we=await(await fetch("https://resources.tidal.com/drm/fairplay/certificate")).arrayBuffer();return new Uint8Array(we)}catch(we){throw console.error("Failed to retrieve the server certificate.",we)}}function vM(we){const K=Kt.util.StringUtils.fromUTF8(we.data),$=JSON.parse(K),de=Kt.util.Uint8ArrayUtils.fromBase64($.payload);we.data=de}function yM(we,K){if(we.body instanceof ArrayBuffer||we.body instanceof Uint8Array){const{securityToken:$,streamingSessionId:de}=K,U=we.body instanceof Uint8Array?we.body:new Uint8Array(we.body),rt=String.fromCharCode(...U),ct={payload:btoa(rt),securityToken:$,streamingSessionId:de};we.headers["Content-Type"]="application/json",we.body=JSON.stringify(ct)}else console.error("Expected request body to be ArrayBuffer.")}const oo={isPlaying:!1,isSeeking:!1},bM=we=>new Promise(K=>we.addEventListener("waiting",()=>K(),{once:!0})),wM=we=>new Promise(K=>we.addEventListener("playing",()=>K(),{once:!0}));function TM(){oo.isSeeking=!0}function SM(){oo.isSeeking=!1}function xM(){oo.isPlaying=!1}async function AM(we,K){oo.isPlaying=!0,await bM(we);const $=we.currentTime;if(!oo.isPlaying||$===0)return;const de=Wr.now(),U=oo.isSeeking?"SEEK":"UNEXPECTED";await wM(we);const rt=Wr.now();Rc({stalls:[{assetPosition:$,endTimestamp:rt,reason:U,startTimestamp:de}],streamingSessionId:K})}function kM(we){let K;ao.addEventListener("media-product-transition",ct=>{ct instanceof CustomEvent&&(K=ct.detail.playbackContext.playbackSessionId)});const $=()=>xM(),de=()=>{K&&AM(we,K).catch(console.error)},U=()=>TM(),rt=()=>SM();return we.addEventListener("seeking",U),we.addEventListener("seeked",rt),we.addEventListener("playing",de),we.addEventListener("paused",$),function(){we.removeEventListener("seeking",U),we.removeEventListener("seeked",rt),we.removeEventListener("playing",de),we.removeEventListener("paused",$)}}let $i;function IM(we){switch(we.split("/").pop()?.split("?")[0]){case"fairplay":return"FAIR_PLAY";case"widevine":return"WIDEVINE";default:return"NONE"}}const EM=new Uint8Array([10,193,2,8,3,18,16,23,5,185,23,204,18,4,134,139,6,51,58,47,119,42,140,24,130,180,130,146,5,34,142,2,48,130,1,10,2,130,1,1,0,153,237,91,59,50,125,171,94,36,239,195,182,42,149,181,152,82,10,213,188,203,55,80,62,6,69,184,20,216,118,184,223,64,81,4,65,173,140,227,173,177,27,184,140,78,114,90,94,74,158,7,149,41,29,88,88,64,35,167,225,175,14,56,169,18,121,57,48,8,97,11,111,21,140,135,140,126,33,191,251,254,234,119,225,1,158,30,87,129,232,164,95,70,38,61,20,230,14,128,88,168,96,122,220,224,79,172,132,87,177,55,168,214,124,205,235,51,112,93,152,58,33,251,78,236,189,74,16,202,71,73,12,164,126,170,93,67,130,24,221,186,241,202,222,51,146,241,61,111,251,100,66,253,49,225,191,64,176,198,4,209,196,186,76,149,32,164,191,151,238,189,96,146,154,252,238,245,91,186,245,100,226,208,231,108,215,197,92,115,160,130,185,150,18,11,131,89,237,206,36,112,112,130,104,13,111,103,198,216,44,74,197,243,19,68,144,167,78,236,55,175,75,47,1,12,89,232,40,67,226,88,47,11,107,159,93,176,252,94,110,223,100,251,211,8,180,113,27,207,18,80,1,156,159,90,9,2,3,1,0,1,58,20,108,105,99,101,110,115,101,46,119,105,100,101,118,105,110,101,46,99,111,109,18,128,3,174,52,115,20,181,168,53,41,127,39,19,136,251,123,184,203,82,119,210,73,130,60,221,209,218,48,185,51,57,81,30,179,204,189,234,4,185,68,185,39,193,33,52,110,253,189,234,201,212,19,145,126,110,193,118,161,4,56,70,10,80,59,193,149,43,155,164,228,206,15,196,191,194,10,152,8,170,175,75,252,209,156,29,207,205,245,116,204,172,40,209,180,16,65,108,249,222,136,4,48,28,189,179,52,202,252,208,212,9,120,66,58,100,46,84,97,61,240,175,207,150,202,74,146,73,216,85,228,43,58,112,62,241,118,127,106,155,211,109,107,248,43,231,107,191,12,186,79,222,89,210,171,204,118,254,182,66,71,184,92,67,31,188,165,34,102,182,25,252,54,151,149,67,252,169,203,189,187,250,250,14,26,85,231,85,163,199,188,230,85,249,100,111,88,42,185,207,112,170,8,185,121,248,103,246,58,11,43,127,219,54,44,91,196,236,213,85,216,91,202,169,197,147,195,131,200,87,212,157,170,183,126,64,183,133,29,223,210,73,152,128,142,53,178,88,231,93,120,234,192,202,22,247,4,115,4,194,13,147,237,228,232,255,28,111,23,230,36,62,63,61,168,252,23,9,135,14,196,95,186,130,58,38,63,12,239,161,247,9,59,25,9,146,131,38,51,55,5,4,58,41,189,166,249,180,52,44,200,223,84,60,177,161,24,47,124,95,255,51,241,4,144,250,202,91,37,54,11,118,1,94,156,90,6,171,142,224,47,0,210,232,213,152,97,4,170,204,77,212,117,253,150,238,156,228,227,38,242,27,131,199,5,133,119,179,135,50,205,218,188,106,107,237,19,251,13,73,211,138,69,235,135,165,244]);class PM extends lM{#t=!0;#o;#e;#r=null;#i=null;#n;#a=!1;name="shakaPlayer";shakaInstance;constructor(){super(),this.playbackState="IDLE",this.#o=this.#f(),Dc("outputDevicesEnabled")&&(async()=>$i=(await rM(async()=>{const{outputDevices:Ze}=await import("./output-devices-kwegV4HH-Dgzzl0IP.js");return{outputDevices:Ze}},__vite__mapDeps([0,1,2,3]))).outputDevices)(),Np.addEventListener("authorized",()=>{this.shakaInstance&&this.#s(this.shakaInstance).catch(console.error)});const K=()=>{this.mediaElement&&!this.mediaElement.paused&&(this.playbackState="PLAYING")},$=Ze=>{const zr=Ze.type==="buffering"&&this.mediaElement&&this.mediaElement.networkState===HTMLMediaElement.NETWORK_LOADING;(this.mediaElement?.paused||zr)&&(this.playbackState="STALLED")},de=()=>{(async()=>{this.mediaElement&&this.preloadedStreamingSessionId&&this.mediaElement.currentTime===this.mediaElement.duration&&(await uM(1e3),this.mediaElement&&this.mediaElement.currentTime!==this.mediaElement.duration)||(this.playbackState="NOT_PLAYING")})().catch(console.error)},U=Ze=>{const zr=Ze.target;zr.readyState>HTMLMediaElement.HAVE_NOTHING&&(this.currentTime=zr.currentTime)},rt=Ze=>{this.currentStreamingSessionId&&Ze.target instanceof HTMLMediaElement&&Ji.overwriteDuration(this.currentStreamingSessionId,Ze.target.duration)},ct=Ze=>{U(Ze),this.finishCurrentMediaProduct("completed")},f=Ze=>console.error("HTMLMediaElement errored",Ze.target.error),gt=()=>{this.currentTime=this.mediaElement?this.mediaElement.currentTime:0,this.seekEnd(this.currentTime)};this.#e={durationChangeHandler:rt,endedHandler:ct,errorHandler:f,pauseHandler:de,playHandler:K,playingHandler:K,seekedHandler:gt,stalledHandler:$,timeUpdateHandler:U,waitingHandler:$},this.#n={bufferingHandler:Ze=>{Ze.buffering?$(Ze):this.hasStarted()&&K()},errorHandler:(Ze=>this.#u(Ze)),loadedHandler:de,stallDetectedHandler:$}}async#s(K){const{clientId:$}=await Np.credentialsProvider.getCredentials();if(!$||"Cypress"in window)return;const de=Dc("apiUrl"),U=await Kt.Player.probeSupport();if(U.drm["com.widevine.alpha"])this.debugLog("Configuring widevine DRM."),K.configure({drm:{advanced:{"com.widevine.alpha":{audioRobustness:["SW_SECURE_CRYPTO"],serverCertificate:EM,videoRobustness:["SW_SECURE_CRYPTO"]}},servers:{"com.widevine.alpha":`${de}/drm/licenses/widevine?token=${$}`}}});else if(U.drm["com.apple.fps.1_0"]){this.debugLog("Configuring fairplay DRM."),Kt.polyfill.PatchedMediaKeysApple.install();const rt=await mM();K.configure({drm:{advanced:{"com.apple.fps.1_0":{serverCertificate:rt,serverCertificateUri:"https://resources.tidal.com/drm/fairplay/certificate"}},initDataTransform:Kt.util.FairPlayUtils.verimatrixInitDataTransform,servers:{"com.apple.fps.1_0":`${de}/drm/licenses/fairplay?token=${$}`}}})}}async#c(K){await Kt.util.FairPlayUtils.isFairPlaySupported()&&K&&(K.getConfiguration().streaming.preferNativeHls!==!0&&K.configure("streaming.preferNativeHls",!0),K.getConfiguration().streaming.useNativeHlsForFairPlay!==!0&&K.configure("streaming.useNativeHlsForFairPlay",!0),await K.unload(!0))}async#d(K){this.debugLog("createShakaPlayer",K);const $=new Kt.Player;await $.attach(K),kM(K),gM($);const de=await Kt.util.FairPlayUtils.isFairPlaySupported(),U={backoffFactor:2,baseDelay:1e3,fuzzFactor:.5,maxAttempts:5,timeout:5e3};$.configure({abr:{enabled:!0},drm:{retryParameters:U},manifest:{defaultPresentationDelay:0,disableText:!0,disableThumbnails:!0,retryParameters:U},streaming:{bufferBehind:40,bufferingGoal:40,preferNativeHls:de,retryParameters:U,useNativeHlsForFairPlay:de}});try{await this.#s($)}catch{this.finishCurrentMediaProduct("error");return}return $.getNetworkingEngine()?.registerRequestFilter(async(rt,ct,f)=>{if(rt===Kt.net.NetworkingEngine.RequestType.LICENSE){const gt=f?.isPreload??!1?this.preloadedStreamingSessionId??this.currentStreamingSessionId:this.currentStreamingSessionId;performance.mark("streaming_metrics:drm_license_fetch:startTimestamp",{detail:gt,startTime:Wr.now()});const Ze=Ji.getStreamInfo(gt);gt&&Ze?.securityToken?yM(ct,{securityToken:Ze.securityToken,streamingSessionId:gt}):console.error("Missing data for DRM request filter.")}if(rt===Kt.net.NetworkingEngine.RequestType.LICENSE){const{token:gt}=await Np.credentialsProvider.getCredentials();gt&&(ct.headers.authorization=`Bearer ${gt}`)}}),$.getNetworkingEngine()?.registerResponseFilter((rt,ct,f)=>{const gt=f?.isPreload?this.preloadedStreamingSessionId??this.currentStreamingSessionId:this.currentStreamingSessionId;rt===Kt.net.NetworkingEngine.RequestType.LICENSE&&(vM(ct),gt&&(performance.mark("streaming_metrics:drm_license_fetch:endTimestamp",{detail:gt,startTime:Wr.now()}),performance.measure("streaming_metrics:drm_license_fetch",{detail:gt,end:"streaming_metrics:drm_license_fetch:endTimestamp",start:"streaming_metrics:drm_license_fetch:startTimestamp"}),Rc({cdm:IM(ct.uri),cdmVersion:null,streamingSessionId:gt}),qw([Ww({endReason:"COMPLETE",endTimestamp:Wr.timestamp("streaming_metrics:drm_license_fetch:endTimestamp"),errorCode:null,errorMessage:null,startTimestamp:Wr.timestamp("streaming_metrics:drm_license_fetch:startTimestamp"),streamingSessionId:gt})]).catch(console.error),performance.clearMarks("streaming_metrics:drm_license_fetch:endTimestamp"),performance.clearMarks("streaming_metrics:drm_license_fetch:startTimestamp")))}),this.#p($,!0),this.#h(io,!0),$}#u(K){if(this.#t)return;const $=K.detail,de=`S${$.code}`;switch($.code){case Kt.util.Error.Code.LICENSE_REQUEST_FAILED:this.currentStreamingSessionId&&qw([Ww({endReason:"ERROR",endTimestamp:Wr.timestamp("streaming_metrics:drm_license_fetch:endTimestamp"),errorCode:de,errorMessage:JSON.stringify($),startTimestamp:Wr.timestamp("streaming_metrics:drm_license_fetch:startTimestamp"),streamingSessionId:this.currentStreamingSessionId})]).catch(console.error);break;case Kt.util.Error.Code.LOAD_INTERRUPTED:return;case Kt.util.Error.Code.SRC_EQUALS_PRELOAD_NOT_SUPPORTED:return;case Kt.util.Error.Code.TIMEOUT:console.warn("Shaka: TIMEOUT"),console.warn("Shaka: URI",$.data[0]),console.warn("Shaka: RequestType",$.data[1]);break}const U=$.category===Kt.util.Error.Category.NETWORK;$.severity===Kt.util.Error.Severity.CRITICAL&&(this.playbackState="STALLED",this.mediaElement&&this.mediaElement.pause(),this.currentStreamingSessionId&&Rc({errorCode:de,errorMessage:JSON.stringify($),streamingSessionId:this.currentStreamingSessionId}),ao.dispatchError(new oM(U?"PENetwork":"EUnexpected",de)),U||this.finishCurrentMediaProduct("error")),U&&(this.#a=!0)}async#l({assetPosition:K,assetUriOrPreloader:$,mediaProduct:de,playbackInfo:U,streamInfo:rt}){this.debugLog("loadAndDispatchMediaProductTransition"),this.currentTime=K;const{shakaInstance:ct}=this;if(!ct)return;const f=new Promise(Ze=>{ct.addEventListener("loaded",()=>{Ze()},{once:!0})});ct.load($,K).catch(Ze=>this.#u(new CustomEvent("shaka-error",{detail:Ze}))),this.currentStreamingSessionId=U.streamingSessionId,this.preloadedStreamingSessionId=void 0;let gt;if(Ji.hasMediaProductTransition(U.streamingSessionId))gt=Ji.getMediaProductTransition(U.streamingSessionId).playbackContext;else{const Ze=await new Promise(zr=>io.addEventListener("durationchange",er=>{er.target instanceof HTMLMediaElement&&zr(er.target.duration)},{once:!0}));gt=Yw({assetPosition:K,duration:Ze,playbackInfo:U,streamInfo:rt}),Ji.saveMediaProductTransition(rt.streamingSessionId,{mediaProduct:de,playbackContext:gt})}await f,this.currentStreamingSessionId===rt.streamingSessionId&&ao.dispatchEvent(cM(de,gt))}async#f(){this.debugLog("loadLibraries"),Kt.polyfill.installAll(),await zw(),this.shakaInstance=await this.#d(io)}#h(K,$){this.debugLog("mediaElementEvents",$?"adding to":"removing from",K);const de=$?"addEventListener":"removeEventListener";K[de]("durationchange",this.#e.durationChangeHandler,{passive:!0}),K[de]("play",this.#e.playHandler,{passive:!0}),K[de]("playing",this.#e.playingHandler,{passive:!0}),K[de]("timeupdate",this.#e.timeUpdateHandler,{passive:!0}),K[de]("pause",this.#e.pauseHandler,{passive:!0}),K[de]("ended",this.#e.endedHandler,{passive:!0}),K[de]("error",this.#e.errorHandler,{passive:!0}),K[de]("waiting",this.#e.waitingHandler,{passive:!0}),K[de]("stalled",this.#e.stalledHandler,{passive:!0}),K[de]("seeked",this.#e.seekedHandler,{passive:!0})}#p(K,$){this.debugLog("shakaEvents");const de=$?"addEventListener":"removeEventListener";K[de]("error",this.#n.errorHandler,!1),K[de]("buffering",this.#n.bufferingHandler,!1),K[de]("stalldetected",this.#n.stallDetectedHandler,!1),K[de]("loaded",this.#n.loadedHandler,!1)}getPosition(){return this.currentTime}async load(K,$){this.debugLog("load",K),await this.ready,this.currentTime=K.assetPosition,this.startAssetPosition=K.assetPosition,await this.reset(),this.#t=!1,await this.#c(this.shakaInstance),await zw();const{assetPosition:de,mediaProduct:U,playbackInfo:rt,streamInfo:ct}=K;this.currentStreamingSessionId=ct.streamingSessionId,$==="explicit"&&(this.playbackState="NOT_PLAYING");const{mediaElement:f,shakaInstance:gt}=this;if(!(!gt||!f))return this.#l({assetPosition:de,assetUriOrPreloader:ct.streamUrl,mediaProduct:U,playbackInfo:rt,streamInfo:ct})}async next(K){if(this.debugLog("next",K),!this.shakaInstance){console.warn("Shaka not initialized.");return}if(this.#r=await this.shakaInstance.preload(K.streamInfo.streamUrl),this.playbackState==="IDLE"&&(this.playbackState="NOT_PLAYING"),this.preloadedStreamingSessionId=K.streamInfo.streamingSessionId,K.streamInfo.duration){const $=Yw({assetPosition:0,duration:K.streamInfo.duration,playbackInfo:K.playbackInfo,streamInfo:K.streamInfo});Ji.saveMediaProductTransition(K.streamInfo.streamingSessionId,{mediaProduct:K.mediaProduct,playbackContext:$})}this.#i=K,this.#t=!1}pause(){this.debugLog("pause"),this.mediaElement&&this.mediaElement.pause()}async play(){if(this.debugLog("play"),await this.maybeHardReload(),this.#a){const K=this.shakaInstance?.retryStreaming();if(this.#a=!K,!K){this.playbackState="NOT_PLAYING",this.finishCurrentMediaProduct("error");return}}if(this.playbackState==="IDLE")return this.debugLog("is IDLE, returning early"),Promise.resolve();"setSinkId"in io&&await this.updateOutputDevice(),this.mediaProductStarted(this.currentStreamingSessionId),this.setStateToXIfNotYInZMs(1e3,"PLAYING","STALLED"),await this.mediaElement?.play()}async playbackEngineEndedHandler(K){if(this.isActivePlayer){const{reason:$}=K.detail;$==="completed"&&(this.hasNextItem()?(await this.skipToPreloadedMediaProduct(),await this.play()):(Xw.preloadedStreamingSessionId?this.debugLog(`Switching player from ${this.name} to ${Xw.preloadPlayer?.name}`):this.debugLog("No next item queued."),this.playbackState="NOT_PLAYING"))}}async reset({keepPreload:K}={keepPreload:!1}){if(this.debugLog("reset"),this.#t)return;K||await this.unloadPreloadedMediaProduct(),this.playbackState!=="IDLE"&&this.finishCurrentMediaProduct("skip"),this.playbackState="IDLE",this.detachPlaybackEngineEndedHandler(),this.currentStreamingSessionId=void 0,K||(this.preloadedStreamingSessionId=void 0),this.#t=!0;const{mediaElement:$,shakaInstance:de}=this;if(de&&$&&$.readyState!==0)return de.unload(!0)}seek(K){this.debugLog("seek",K);const{mediaElement:$}=this;if(!$)return;this.seekStart(this.currentTime),this.currentTime=K;const de=K;return"fastSeek"in $?$.fastSeek(de):$.currentTime=de,new Promise(U=>{$.addEventListener("seeked",()=>U($.currentTime),{once:!0})})}async skipToPreloadedMediaProduct(){if(this.debugLog("skipToPreloadedMediaProduct",this.preloadedStreamingSessionId),this.#i){const{mediaProduct:K,playbackInfo:$,streamInfo:de}=this.#i,U=Ji.getMediaProductTransition(de.streamingSessionId)?.mediaProduct??K;return this.#l({assetPosition:0,assetUriOrPreloader:this.#r??de.streamUrl,mediaProduct:U,playbackInfo:$,streamInfo:de})}return Promise.reject("Nothing preloaded.")}togglePlayback(){this.debugLog("togglePlayback");const{mediaElement:K}=this;K&&(K.paused?K.play().catch(console.error):K.pause())}async unloadPreloadedMediaProduct(){this.debugLog("unloadPreloadedMediaProduct",this.preloadedStreamingSessionId),this.preloadedStreamingSessionId&&(this.cleanUpStoredPreloadInfo(),await this.#r?.destroy())}async updateOutputDevice(){if(!$i)return;if($i&&!$i.activeDevice||!Dc("outputDevicesEnabled"))return Promise.resolve();const K=$i.activeDevice.webDeviceId;this.outputDeviceType=$i.activeDevice.type;try{await io.setSinkId(K),ao.dispatchEvent(sM($i.activeDevice.id))}catch($){console.error($)}}get mediaElement(){return io}get ready(){return this.#o}get volume(){return Dc("desiredVolumeLevel")}set volume(K){this.debugLog("Setting volume to",K),this.mediaElement&&(this.mediaElement.volume=K)}}export{PM as default};
